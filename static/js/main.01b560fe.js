/*! For license information please see main.01b560fe.js.LICENSE.txt */
(()=>{var e={356:(e,t,n)=>{e.exports=n(9645).last},551:()=>{},579:(e,t,n)=>{"use strict";e.exports=n(2799)},870:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},1203:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&r.isLength(e.length)}},1234:()=>{},1293:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof n&&(n={});const{leading:a=!1,trailing:o=!0,maxWait:i}=n,s=Array(2);let u;a&&(s[0]="leading"),o&&(s[1]="trailing");let l=null;const c=r.debounce(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];u=e.apply(this,n),l=null},t,{edges:s}),d=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null!=i&&(null===l&&(l=Date.now()),Date.now()-l>=i)?(u=e.apply(this,n),l=Date.now(),c.cancel(),c.schedule(),u):(c.apply(this,n),u)};return d.cancel=c.cancel,d.flush=()=>(c.flush(),u),d}},1444:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toPath=function(e){const t=[],n=e.length;if(0===n)return t;let r=0,a="",o="",i=!1;for(46===e.charCodeAt(0)&&(t.push(""),r++);r<n;){const s=e[r];o?"\\"===s&&r+1<n?(r++,a+=e[r]):s===o?o="":a+=s:i?'"'===s||"'"===s?o=s:"]"===s?(i=!1,t.push(a),a=""):a+=s:"["===s?(i=!0,a&&(t.push(a),a="")):"."===s?a&&(t.push(a),a=""):a+=s,r++}return a&&t.push(a),t}},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},2104:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1203),a=n(9921);t.isArrayLikeObject=function(e){return a.isObjectLike(e)&&r.isArrayLike(e)}},2132:(e,t,n)=>{"use strict";var r=n(2897).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=n(8268),o=n(870),i=n(4803),s=n(9972);function u(e,t,n,a){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,n,r){if(null==t)return!0;if(Array.isArray(t))return l(e,t,n,r);if(t instanceof Map)return function(e,t,n,r){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,o]of t.entries()){if(!1===n(e.get(a),o,a,e,t,r))return!1}return!0}(e,t,n,r);if(t instanceof Set)return c(e,t,n,r);const a=Object.keys(t);if(null==e)return 0===a.length;if(0===a.length)return!0;if(r&&r.has(t))return r.get(t)===e;r&&r.set(t,e);try{for(let o=0;o<a.length;o++){const s=a[o];if(!i.isPrimitive(e)&&!(s in e))return!1;if(void 0===t[s]&&void 0!==e[s])return!1;if(null===t[s]&&null!==e[s])return!1;if(!n(e[s],t[s],s,e,t,r))return!1}return!0}finally{r&&r.delete(t)}}(e,t,n,a);case"function":return Object.keys(t).length>0?u(e,r({},t),n,a):s.eq(e,t);default:return o.isObject(e)?"string"!==typeof t||""===t:s.eq(e,t)}}function l(e,t,n,r){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let o=0;o<t.length;o++){const i=t[o];let s=!1;for(let u=0;u<e.length;u++){if(a.has(u))continue;let l=!1;if(n(e[u],i,o,e,t,r)&&(l=!0),l){a.add(u),s=!0;break}}if(!s)return!1}return!0}function c(e,t,n,r){return 0===t.size||e instanceof Set&&l([...e],[...t],n,r)}t.isMatchWith=function(e,t,n){return"function"!==typeof n?a.isMatch(e,t):u(e,t,function e(t,r,a,o,i,s){const l=n(t,r,a,o,i,s);return void 0!==l?Boolean(l):u(t,r,e,s)},new Map)},t.isSetMatch=c},2204:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5316),a=n(7312),o=n(3799);t.sortBy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const s=n.length;return s>1&&o.isIterateeCall(e,n[0],n[1])?n=[]:s>2&&o.isIterateeCall(n[0],n[1],n[2])&&(n=[n[0]]),r.orderBy(e,a.flatten(n),["asc"])}},2330:(e,t,n)=>{"use strict";var r=n(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,i=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),a=r[0].inst,c=r[1];return s(function(){a.value=n,a.getSnapshot=t,l(a)&&c({inst:a})},[e,n,t]),i(function(){return l(a)&&c({inst:a}),e(function(){l(a)&&c({inst:a})})},[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},2430:function(e,t,n){var r;!function(a,o,i){var s,u=256,l=i.pow(u,6),c=i.pow(2,52),d=2*c,h=255;function p(e,t,n){var r=[],h=y(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),v(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,v(o)]}}():e,3),r),p=new f(r),b=function(){for(var e=p.g(6),t=l,n=0;e<c;)e=(e+n)*u,t*=u,n=p.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,y(v(p.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&g(r,p),e.state=function(){return g(p,{})}),n?(i.random=e,t):e})(b,h,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<u;)i[a]=a++;for(a=0;a<u;a++)i[a]=i[o=h&o+e[a%n]+(t=i[a])],i[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,i=r.S;e--;)t=i[a=h&a+1],n=n*u+i[h&(i[a]=i[o=h&o+t])+(i[o]=t)];return r.i=a,r.j=o,n})(u)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(o){}return r.length?r:"string"==a?e:e+"\0"}function y(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(y(i.random(),o),e.exports){e.exports=p;try{s=n(1234)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},2489:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2682:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;const n=e[Symbol.toStringTag];if(null==n)return!1;return!!(null!==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))&&void 0!==t&&t.writable)&&e.toString()==="[object ".concat(n,"]")}let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}},2715:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9599),a=n(7330),o=n(3808),i=n(8845);t.iteratee=function(e){if(null==e)return r.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?i.matchesProperty(e[0],e[1]):o.matches(e);case"string":case"symbol":case"number":return a.property(e)}}},2777:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},2897:(e,t,n)=>{var r=n(3693);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},i=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,a=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!a&&!o)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},s=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},u=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(a)return a(e,n).value}return e[n]};e.exports=function e(){var t,n,r,a,l,c,d=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"===typeof d&&(f=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)r=u(d,n),d!==(a=u(t,n))&&(f&&a&&(i(a)||(l=o(a)))?(l?(l=!1,c=r&&o(r)?r:[]):c=r&&i(r)?r:{},s(d,{name:n,newValue:e(f,c,a)})):"undefined"!==typeof a&&s(d,{name:n,newValue:a}));return d}},3272:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3757:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4704),a=n(1203),o=n(870),i=n(9972);t.isIterateeCall=function(e,t,n){return!!o.isObject(n)&&(!!("number"===typeof t&&a.isArrayLike(n)&&r.isIndex(t)&&t<n.length||"string"===typeof t&&t in n)&&i.eq(n[t],e))}},3808:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),a=n(5261);t.matches=function(e){return e=a.cloneDeep(e),t=>r.isMatch(t,e)}},3821:(e,t,n)=>{e.exports=n(2204).sortBy},4208:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const n=new Map;for(let r=0;r<e.length;r++){const a=e[r],o=t(a);n.has(o)||n.set(o,a)}return Array.from(n.values())}},4222:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var r=(0,a.default)(e),o="function"===typeof t;return r.forEach(function(e){if("declaration"===e.type){var r=e.property,a=e.value;o?t(r,a,e):a&&((n=n||{})[r]=a)}}),n};var a=r(n(4403))},4250:(e,t,n)=>{e.exports=n(8182).isEqual},4288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function C(e,t,r,a,o,i){return r=i.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function F(){}function I(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u,l,c=!1;if(null===e)c=!0;else switch(s){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case h:return I((c=e._init)(e._payload),t,a,o,i)}}if(c)return i=i(e),c=""===o?"."+A(e,0):o,w(i)?(a="",null!=c&&(a=c.replace(S,"$&/")+"/"),I(i,t,a,"",function(e){return e})):null!=i&&(E(i)&&(u=i,l=a+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+c,i=C(u.type,l,void 0,0,0,u.props)),t.push(i)),1;c=0;var d,f=""===o?".":o+":";if(w(e))for(var g=0;g<e.length;g++)c+=I(o=e[g],t,a,s=f+A(o,g),i);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(o=e.next()).done;)c+=I(o=o.value,t,a,s=f+A(o,g++),i);else if("object"===s){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(F,F):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,o,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function N(e,t,n){if(null==e)return e;var r=[],a=0;return I(e,r,"","",function(e){return t.call(n,e,a++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return D.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),a=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!k.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var i=Array(o),s=0;s<o;s++)i[s]=arguments[s+2];r.children=i}return C(e.type,a,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,a={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+2];a.children=s}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return C(e,o,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.T,n={};D.T=n;try{var r=e(),a=D.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,O)}catch(o){O(o)}finally{D.T=t}},t.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},t.use=function(e){return D.H.use(e)},t.useActionState=function(e,t,n){return D.H.useActionState(e,t,n)},t.useCallback=function(e,t){return D.H.useCallback(e,t)},t.useContext=function(e){return D.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return D.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=D.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return D.H.useId()},t.useImperativeHandle=function(e,t,n){return D.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.H.useMemo(e,t)},t.useOptimistic=function(e,t){return D.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return D.H.useReducer(e,t,n)},t.useRef=function(e){return D.H.useRef(e)},t.useState=function(e){return D.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.H.useTransition()},t.version="19.1.0"},4332:(e,t,n)=>{e.exports=n(5053).uniqBy},4334:(e,t,n)=>{var r=n(7359),a=n(7066),o=n(9016),i=n(9538),s=n(6288),u=n(5262),l=n(2430);l.alea=r,l.xor128=a,l.xorwow=o,l.xorshift7=i,l.xor4096=s,l.tychei=u,e.exports=l},4385:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}},4391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4403:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,u=/^\s+|\s+$/g,l="";function c(e){return e?e.replace(u,l):l}e.exports=function(e,u){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];u=u||{};var d=1,h=1;function p(e){var t=e.match(n);t&&(d+=t.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function f(){var e={line:d,column:h};return function(t){return t.position=new g(e),b(),t}}function g(e){this.start=e,this.end={line:d,column:h},this.source=u.source}g.prototype.content=e;var m=[];function y(t){var n=new Error(u.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=u.source,n.line=d,n.column=h,n.source=e,!u.silent)throw n;m.push(n)}function v(t){var n=t.exec(e);if(n){var r=n[0];return p(r),e=e.slice(r.length),n}}function b(){v(r)}function x(e){var t;for(e=e||[];t=w();)!1!==t&&e.push(t);return e}function w(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;l!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,l===e.charAt(n-1))return y("End of comment missing");var r=e.slice(2,n-2);return h+=2,p(r),e=e.slice(n),h+=2,t({type:"comment",comment:r})}}function D(){var e=f(),n=v(a);if(n){if(w(),!v(o))return y("property missing ':'");var r=v(i),u=e({type:"declaration",property:c(n[0].replace(t,l)),value:r?c(r[0].replace(t,l)):l});return v(s),u}}return b(),function(){var e,t=[];for(x(t);e=D();)!1!==e&&(t.push(e),x(t));return t}()}},4530:()=>{},4704:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return n.test(e)}}},4737:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.noop=function(){}},4803:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let n,{signal:r,edges:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null;const i=null!=a&&a.includes("leading"),s=null==a||a.includes("trailing"),u=()=>{null!==o&&(e.apply(n,o),n=void 0,o=null)};let l=null;const c=()=>{null!=l&&clearTimeout(l),l=setTimeout(()=>{l=null,s&&u(),h()},t)},d=()=>{null!==l&&(clearTimeout(l),l=null)},h=()=>{d(),n=void 0,o=null},p=function(){if(null!==r&&void 0!==r&&r.aborted)return;n=this;for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];o=t;const s=null==l;c(),i&&s&&u()};return p.schedule=c,p.cancel=h,p.flush=()=>{d(),u()},null===r||void 0===r||r.addEventListener("abort",h,{once:!0}),p}},4879:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=r.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},5043:(e,t,n)=>{"use strict";e.exports=n(4288)},5053:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4208),a=n(9599),o=n(2104),i=n(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.identity;return o.isArrayLikeObject(e)?r.uniqBy(Array.from(e),i.iteratee(t)):[]}},5082:(e,t)=>{"use strict";var n=60103,r=60106,a=60107,o=60108,i=60114,s=60109,u=60110,l=60112,c=60113,d=60120,h=60115,p=60116,f=60121,g=60122,m=60117,y=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),a=b("react.fragment"),o=b("react.strict_mode"),i=b("react.profiler"),s=b("react.provider"),u=b("react.context"),l=b("react.forward_ref"),c=b("react.suspense"),d=b("react.suspense_list"),h=b("react.memo"),p=b("react.lazy"),f=b("react.block"),g=b("react.server.block"),m=b("react.fundamental"),y=b("react.debug_trace_mode"),v=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case i:case o:case c:case d:return e;default:switch(e=e&&e.$$typeof){case u:case l:case p:case h:case s:return e;default:return t}}case r:return t}}}t.isFragment=function(e){return x(e)===a}},5261:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433);t.cloneDeep=function(e){return r.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5262:function(e,t,n){var r;!function(e,a){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},5303:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2489),a=n(4704),o=n(6321),i=n(1444);t.has=function(e,t){let n;if(n=Array.isArray(t)?t:"string"===typeof t&&r.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?i.toPath(t):[t],0===n.length)return!1;let s=e;for(let r=0;r<n.length;r++){const e=n[r];if(null==s||!Object.hasOwn(s,e)){if(!((Array.isArray(s)||o.isArguments(s))&&a.isIndex(e)&&e<s.length))return!1}s=s[e]}return!0}},5316:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9709),a=n(7043),o=n(1444);t.orderBy=function(e,t,n,i){if(null==e)return[];n=i?void 0:n,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(n)||(n=null==n?[]:[n]),n=n.map(e=>String(e));const s=(e,t)=>{let n=e;for(let r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n},u=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||a.isKey(e)?e:{key:e,path:o.toPath(e)}));return e.map(e=>({original:e,criteria:u.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:s(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?s(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let a=0;a<u.length;a++){const o=r.compareValues(e.criteria[a],t.criteria[a],n[a]);if(0!==o)return o}return 0}).map(e=>e.original)}},5414:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof n&&(n={});const{leading:a=!0,trailing:o=!0}=n;return r.debounce(e,t,{leading:a,trailing:o,maxWait:t})}},5508:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433),a=n(7599);t.cloneDeepWith=function(e,t){return r.cloneDeepWith(e,(n,o,i,s)=>{const u=null===t||void 0===t?void 0:t(n,o,i,s);if(null!=u)return u;if("object"===typeof e)switch(Object.prototype.toString.call(e)){case a.numberTag:case a.stringTag:case a.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return r.copyProperties(t,e),t}case a.argumentsTag:{const t={};return r.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},5817:()=>{},5896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>o(u,n))l<a&&0>o(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<a&&0>o(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,h=null,p=3,f=!1,g=!1,m=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function D(e){if(m=!1,w(e),!g)if(null!==r(l))g=!0,C||(C=!0,k());else{var t=r(c);null!==t&&O(D,t.startTime-e)}}var k,C=!1,E=-1,S=5,A=-1;function F(){return!!y||!(t.unstable_now()-A<S)}function I(){if(y=!1,C){var e=t.unstable_now();A=e;var n=!0;try{e:{g=!1,m&&(m=!1,b(E),E=-1),f=!0;var o=p;try{t:{for(w(e),h=r(l);null!==h&&!(h.expirationTime>e&&F());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var s=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,w(e),n=!0;break t}h===r(l)&&a(l),w(e)}else a(l);h=r(l)}if(null!==h)n=!0;else{var u=r(c);null!==u&&O(D,u.startTime-e),n=!1}}break e}finally{h=null,p=o,f=!1}n=void 0}}finally{n?k():C=!1}}}if("function"===typeof x)k=function(){x(I)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,T=N.port2;N.port1.onmessage=I,k=function(){T.postMessage(null)}}else k=function(){v(I,0)};function O(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(c,e),null===r(l)&&e===r(c)&&(m?(b(E),E=-1):m=!0,O(D,o-i))):(e.sortIndex=s,n(l,e),g||f||(g=!0,C||(C=!0,k()))),e},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5990:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6288:function(e,t,n){var r;!function(e,a){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},6321:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===r.getTag(e)}},6392:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6443),a=n(5990),o=n(7599),i=n(4803),s=n(3757);function u(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d=null===c||void 0===c?void 0:c(e,t,n,r);if(null!=d)return d;if(i.isPrimitive(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const t=new Array(e.length);r.set(e,t);for(let a=0;a<e.length;a++)t[a]=u(e[a],a,n,r,c);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;r.set(e,t);for(const[a,o]of e)t.set(a,u(o,a,n,r,c));return t}if(e instanceof Set){const t=new Set;r.set(e,t);for(const a of e)t.add(u(a,void 0,n,r,c));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(s.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);r.set(e,t);for(let a=0;a<e.length;a++)t[a]=u(e[a],a,n,r,c);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,t),l(t,e,n,r,c),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return r.set(e,t),l(t,e,n,r,c),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return r.set(e,t),l(t,e,n,r,c),t}if(e instanceof Error){const t=new e.constructor;return r.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,l(t,e,n,r,c),t}if("object"===typeof e&&function(e){switch(a.getTag(e)){case o.argumentsTag:case o.arrayTag:case o.arrayBufferTag:case o.dataViewTag:case o.booleanTag:case o.dateTag:case o.float32ArrayTag:case o.float64ArrayTag:case o.int8ArrayTag:case o.int16ArrayTag:case o.int32ArrayTag:case o.mapTag:case o.numberTag:case o.objectTag:case o.regexpTag:case o.setTag:case o.stringTag:case o.symbolTag:case o.uint8ArrayTag:case o.uint8ClampedArrayTag:case o.uint16ArrayTag:case o.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return r.set(e,t),l(t,e,n,r,c),t}return e}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const i=[...Object.keys(t),...r.getSymbols(t)];for(let r=0;r<i.length;r++){const s=i[r],l=Object.getOwnPropertyDescriptor(e,s);(null==l||l.writable)&&(e[s]=u(t[s],s,n,a,o))}}t.cloneDeepWith=function(e,t){return u(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=u,t.copyProperties=l},6443:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6672:(e,t,n)=>{"use strict";var r=n(5043);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var i={d:{f:o,r:function(){throw Error(a(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=u.T,n=i.p;try{if(u.T=null,i.p=2,e)return e()}finally{u.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=l(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=l(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return u.H.useFormState(e,t,n)},t.useFormStatus=function(){return u.H.useHostTransitionStatus()},t.version="19.1.0"},6770:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777);t.toNumber=function(e){return r.isSymbol(e)?NaN:Number(e)}},7004:(e,t,n)=>{"use strict";var r=n(8853),a=n(5043),o=n(7950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function u(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(u(e)!==e)throw Error(i(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var F=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var T=Symbol.for("react.client.reference");function O(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===T?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case C:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case D:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return O(e(t))}catch(n){}}return null}var R=Array.isArray,_=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},B=[],L=-1;function j(e){return{current:e}}function z(e){0>L||(e.current=B[L],B[L]=null,L--)}function W(e,t){L++,B[L]=e.current,e.current=t}var U=j(null),V=j(null),H=j(null),G=j(null);function K(e,t){switch(W(H,t),W(V,e),W(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ad(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=ad(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(U),W(U,e)}function q(){z(U),z(V),z(H)}function X(e){null!==e.memoizedState&&W(G,e);var t=U.current,n=od(t,e.type);t!==n&&(W(V,e),W(U,n))}function Y(e){V.current===e&&(z(U),z(V)),G.current===e&&(z(G),Xd._currentValue=M)}var Q=Object.prototype.hasOwnProperty,Z=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,$=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ae=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ie=r.unstable_LowPriority,se=r.unstable_IdlePriority,ue=r.log,le=r.unstable_setDisableYieldValue,ce=null,de=null;function he(e){if("function"===typeof ue&&le(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/ge|0)|0},fe=Math.log,ge=Math.LN2;var me=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?a=ve(r):0!==(i&=s)?a=ve(i):n||0!==(n=s&~e)&&(a=ve(n)):0!==(s=r&~o)?a=ve(s):0!==i?a=ve(i):n||0!==(n=r&~e)&&(a=ve(n)),0===a?0:0!==t&&t!==a&&0===(t&o)&&((o=a&-a)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:a}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function De(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function ke(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ce(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ee(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Se(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ae(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Fe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ne(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:lh(e.type)}var Te=Math.random().toString(36).slice(2),Oe="__reactFiber$"+Te,Re="__reactProps$"+Te,_e="__reactContainer$"+Te,Pe="__reactEvents$"+Te,Me="__reactListeners$"+Te,Be="__reactHandles$"+Te,Le="__reactResources$"+Te,je="__reactMarker$"+Te;function ze(e){delete e[Oe],delete e[Re],delete e[Pe],delete e[Me],delete e[Be]}function We(e){var t=e[Oe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_e]||n[Oe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Oe])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Ue(e){if(e=e[Oe]||e[_e]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ve(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function He(e){var t=e[Le];return t||(t=e[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[je]=!0}var Ke=new Set,qe={};function Xe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(qe[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Qe,Ze,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},et={};function tt(e,t,n){if(a=t,Q.call(et,a)||!Q.call($e,a)&&(Je.test(a)?et[a]=!0:($e[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function at(e){if(void 0===Qe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",Ze=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Qe+e+Ze}var ot=!1;function it(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),i=o[0],s=o[1];if(i&&s){var u=i.split("\n"),l=s.split("\n");for(a=r=0;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;for(;a<l.length&&!l[a].includes("DetermineComponentFrameRoot");)a++;if(r===u.length||a===l.length)for(r=u.length-1,a=l.length-1;1<=r&&0<=a&&u[r]!==l[a];)a--;for(;1<=r&&0<=a;r--,a--)if(u[r]!==l[a]){if(1!==r||1!==a)do{if(r--,0>--a||u[r]!==l[a]){var c="\n"+u[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=a);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?at(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return at("Activity");default:return""}}function ut(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function gt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mt(e,t,n,r,a,o,i,s){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+lt(t)):e.value!==""+lt(t)&&(e.value=""+lt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?vt(e,i,lt(t)):null!=n?vt(e,i,lt(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=o&&(e.defaultChecked=!!o),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+lt(s):e.removeAttribute("name")}function yt(e,t,n,r,a,o,i,s){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+lt(n):"",t=null!=t?""+lt(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+lt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+lt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+lt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(R(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=lt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Dt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Ct(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Ct(e,o,t[o])}function St(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ft=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Ft.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nt=null;function Tt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Rt=null;function _t(e){var t=Ue(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Re]||null;if(!a)throw Error(i(90));mt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Pt=!1;function Mt(e,t,n){if(Pt)return e(t,n);Pt=!0;try{return e(t)}finally{if(Pt=!1,(null!==Ot||null!==Rt)&&(Wl(),Ot&&(t=Ot,e=Rt,Rt=Ot=null,_t(t),e)))for(t=0;t<e.length;t++)_t(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Lt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),jt=!1;if(Lt)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Rh){jt=!1}var Wt=null,Ut=null,Vt=null;function Ht(){if(Vt)return Vt;var e,t,n=Ut,r=n.length,a="value"in Wt?Wt.value:Wt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Vt=a.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function qt(){return!1}function Xt(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Kt:qt,this.isPropagationStopped=qt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Yt,Qt,Zt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=Xt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Xt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Yt=e.screenX-Zt.screenX,Qt=e.screenY-Zt.screenY):Qt=Yt=0,Zt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),rn=Xt(nn),an=Xt(h({},nn,{dataTransfer:0})),on=Xt(h({},en,{relatedTarget:0})),sn=Xt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Xt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Xt(h({},Jt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function fn(){return pn}var gn=Xt(h({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Xt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Xt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),vn=Xt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Xt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Xt(h({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],Dn=Lt&&"CompositionEvent"in window,kn=null;Lt&&"documentMode"in document&&(kn=document.documentMode);var Cn=Lt&&"TextEvent"in window&&!kn,En=Lt&&(!Dn||kn&&8<kn&&11>=kn),Sn=String.fromCharCode(32),An=!1;function Fn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Nn=!1;var Tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Tn[e.type]:"textarea"===t}function Rn(e,t,n,r){Ot?Rt?Rt.push(r):Rt=[r]:Ot=r,0<(t=Hc(t,"onChange")).length&&(n=new $t("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _n=null,Pn=null;function Mn(e){Mc(e,0)}function Bn(e){if(ht(Ve(e)))return e}function Ln(e,t){if("change"===e)return t}var jn=!1;if(Lt){var zn;if(Lt){var Wn="oninput"in document;if(!Wn){var Un=document.createElement("div");Un.setAttribute("oninput","return;"),Wn="function"===typeof Un.oninput}zn=Wn}else zn=!1;jn=zn&&(!document.documentMode||9<document.documentMode)}function Vn(){_n&&(_n.detachEvent("onpropertychange",Hn),Pn=_n=null)}function Hn(e){if("value"===e.propertyName&&Bn(Pn)){var t=[];Rn(t,Pn,e,Tt(e)),Mt(Mn,t)}}function Gn(e,t,n){"focusin"===e?(Vn(),Pn=n,(_n=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Vn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Pn)}function qn(e,t){if("click"===e)return Bn(t)}function Xn(e,t){if("input"===e||"change"===e)return Bn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Q.call(t,a)||!Yn(e[a],t[a]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function $n(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$n(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Lt&&"documentMode"in document&&11>=document.documentMode,rr=null,ar=null,or=null,ir=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ir||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Qn(or,r)||(or=r,0<(r=Hc(ar,"onSelect")).length&&(t=new $t("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},cr={},dr={};function hr(e){if(cr[e])return cr[e];if(!lr[e])return e;var t,n=lr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return cr[e]=n[t];return e}Lt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);var pr=hr("animationend"),fr=hr("animationiteration"),gr=hr("animationstart"),mr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),xr=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){xr.set(e,t),Xe(t,[e])}wr.push("scrollEnd");var kr=new WeakMap;function Cr(e,t){if("object"===typeof e&&null!==e){var n=kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ut(t)},kr.set(e,t),t)}return{value:e,source:t,stack:ut(t)}}var Er=[],Sr=0,Ar=0;function Fr(){for(var e=Sr,t=Ar=Sr=0;t<e;){var n=Er[t];Er[t++]=null;var r=Er[t];Er[t++]=null;var a=Er[t];Er[t++]=null;var o=Er[t];if(Er[t++]=null,null!==r&&null!==a){var i=r.pending;null===i?a.next=a:(a.next=i.next,i.next=a),r.pending=a}0!==o&&Or(n,a,o)}}function Ir(e,t,n,r){Er[Sr++]=e,Er[Sr++]=t,Er[Sr++]=n,Er[Sr++]=r,Ar|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Nr(e,t,n,r){return Ir(e,t,n,r),Rr(e)}function Tr(e,t){return Ir(e,null,null,t),Rr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(a=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,a&&null!==t&&(a=31-pe(n),null===(r=(e=o.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),o):null}function Rr(e){if(50<Ol)throw Ol=0,Rl=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var _r={};function Pr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Pr(e,t,n,r)}function Br(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function jr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,a,o){var s=0;if(r=e,"function"===typeof e)Br(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Mr(31,n,t,a)).elementType=A,e.lanes=o,e;case m:return Wr(n.children,a,o,t);case y:s=8,a|=24;break;case v:return(e=Mr(12,n,t,2|a)).elementType=v,e.lanes=o,e;case k:return(e=Mr(13,n,t,a)).elementType=k,e.lanes=o,e;case C:return(e=Mr(19,n,t,a)).elementType=C,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case w:s=10;break e;case x:s=9;break e;case D:s=11;break e;case E:s=14;break e;case S:s=16,r=null;break e}s=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Wr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function Ur(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Vr(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Gr=0,Kr=null,qr=0,Xr=[],Yr=0,Qr=null,Zr=1,Jr="";function $r(e,t){Hr[Gr++]=qr,Hr[Gr++]=Kr,Kr=e,qr=t}function ea(e,t,n){Xr[Yr++]=Zr,Xr[Yr++]=Jr,Xr[Yr++]=Qr,Qr=e;var r=Zr;e=Jr;var a=32-pe(r)-1;r&=~(1<<a),n+=1;var o=32-pe(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Zr=1<<32-pe(t)+a|n<<a|r,Jr=o+e}else Zr=1<<o|n<<a|r,Jr=e}function ta(e){null!==e.return&&($r(e,1),ea(e,1,0))}function na(e){for(;e===Kr;)Kr=Hr[--Gr],Hr[Gr]=null,qr=Hr[--Gr],Hr[Gr]=null;for(;e===Qr;)Qr=Xr[--Yr],Xr[Yr]=null,Jr=Xr[--Yr],Xr[Yr]=null,Zr=Xr[--Yr],Xr[Yr]=null}var ra=null,aa=null,oa=!1,ia=null,sa=!1,ua=Error(i(519));function la(e){throw ga(Cr(Error(i(418,"")),e)),ua}function ca(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Oe]=e,t[Re]=r,n){case"dialog":Bc("cancel",t),Bc("close",t);break;case"iframe":case"object":case"embed":Bc("load",t);break;case"video":case"audio":for(n=0;n<_c.length;n++)Bc(_c[n],t);break;case"source":Bc("error",t);break;case"img":case"image":case"link":Bc("error",t),Bc("load",t);break;case"details":Bc("toggle",t);break;case"input":Bc("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Bc("invalid",t);break;case"textarea":Bc("invalid",t),wt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Qc(t.textContent,n)?(null!=r.popover&&(Bc("beforetoggle",t),Bc("toggle",t)),null!=r.onScroll&&Bc("scroll",t),null!=r.onScrollEnd&&Bc("scrollend",t),null!=r.onClick&&(t.onclick=Zc),t=!0):t=!1,t||la(e)}function da(e){for(ra=e.return;ra;)switch(ra.tag){case 5:case 13:return void(sa=!1);case 27:case 3:return void(sa=!0);default:ra=ra.return}}function ha(e){if(e!==ra)return!1;if(!oa)return da(e),oa=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||id(e.type,e.memoizedProps)),t=!t),t&&aa&&la(e),da(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){aa=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}aa=null}}else 27===n?(n=aa,pd(e.type)?(e=vd,vd=null,aa=e):aa=n):aa=ra?yd(e.stateNode.nextSibling):null;return!0}function pa(){aa=ra=null,oa=!1}function fa(){var e=ia;return null!==e&&(null===bl?bl=e:bl.push.apply(bl,e),ia=null),e}function ga(e){null===ia?ia=[e]:ia.push(e)}var ma=j(null),ya=null,va=null;function ba(e,t,n){W(ma,t._currentValue),t._currentValue=n}function xa(e){e._currentValue=ma.current,z(ma)}function wa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Da(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var o=a.dependencies;if(null!==o){var s=a.child;o=o.firstContext;e:for(;null!==o;){var u=o;o=a;for(var l=0;l<t.length;l++)if(u.context===t[l]){o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),wa(o.return,n,e),r||(s=null);break e}o=u.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),wa(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function ka(e,t,n,r){e=null;for(var a=t,o=!1;null!==a;){if(!o)if(0!==(524288&a.flags))o=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(i(387));if(null!==(s=s.memoizedProps)){var u=a.type;Yn(a.pendingProps.value,s.value)||(null!==e?e.push(u):e=[u])}}else if(a===G.current){if(null===(s=a.alternate))throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Xd):e=[Xd])}a=a.return}null!==e&&Da(t,e,n,r),t.flags|=262144}function Ca(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ea(e){ya=e,va=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Sa(e){return Fa(ya,e)}function Aa(e,t){return null===ya&&Ea(e),Fa(e,t)}function Fa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===va){if(null===e)throw Error(i(308));va=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else va=va.next=t;return n}var Ia="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Na=r.unstable_scheduleCallback,Ta=r.unstable_NormalPriority,Oa={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ra(){return{controller:new Ia,data:new Map,refCount:0}}function _a(e){e.refCount--,0===e.refCount&&Na(Ta,function(){e.controller.abort()})}var Pa=null,Ma=0,Ba=0,La=null;function ja(){if(0===--Ma&&null!==Pa){null!==La&&(La.status="fulfilled");var e=Pa;Pa=null,Ba=0,La=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var za=_.S;_.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Pa){var n=Pa=[];Ma=0,Ba=Ic(),La={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ma++,t.then(ja,ja)}(0,t),null!==za&&za(e,t)};var Wa=j(null);function Ua(){var e=Wa.current;return null!==e?e:rl.pooledCache}function Va(e,t){W(Wa,null===t?Wa.current:t.pool)}function Ha(){var e=Ua();return null===e?null:{parent:Oa._currentValue,pool:e}}var Ga=Error(i(460)),Ka=Error(i(474)),qa=Error(i(542)),Xa={then:function(){}};function Ya(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qa(){}function Za(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Qa,Qa),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Qa,Qa);else{if(null!==(e=rl)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Ja=t,Ga}}var Ja=null;function $a(){if(null===Ja)throw Error(i(459));var e=Ja;return Ja=null,e}function eo(e){if(e===Ga||e===qa)throw Error(i(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ao(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Rr(e),Or(e,null,n),t}return Ir(e,r,t,n),Rr(e)}function io(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}function so(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var uo=!1;function lo(){if(uo){if(null!==La)throw La}}function co(e,t,n,r){uo=!1;var a=e.updateQueue;to=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,l=u.next;u.next=null,null===i?o=l:i.next=l,i=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==o){var d=a.baseState;for(i=0,c=l=u=null,s=o;;){var p=-536870913&s.lane,f=p!==s.lane;if(f?(ol&p)===p:(r&p)===p){0!==p&&p===Ba&&(uo=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var g=e,m=s;p=t;var y=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(y,d,p);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(p="function"===typeof(g=m.payload)?g.call(y,d,p):g)||void 0===p)break e;d=h({},d,p);break e;case 2:to=!0}}null!==(p=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=a.callbacks)?a.callbacks=[p]:f.push(p))}else f={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=d):c=c.next=f,i|=p;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}null===c&&(u=d),a.baseState=u,a.firstBaseUpdate=l,a.lastBaseUpdate=c,null===o&&(a.shared.lanes=0),pl|=i,e.lanes=i,e.memoizedState=d}}function ho(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function po(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var fo=j(null),go=j(0);function mo(e,t){W(go,e=dl),W(fo,t),dl=e|t.baseLanes}function yo(){W(go,dl),W(fo,fo.current)}function vo(){dl=go.current,z(fo),z(go)}var bo=0,xo=null,wo=null,Do=null,ko=!1,Co=!1,Eo=!1,So=0,Ao=0,Fo=null,Io=0;function No(){throw Error(i(321))}function To(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Oo(e,t,n,r,a,o){return bo=o,xo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=null===e||null===e.memoizedState?Ki:qi,Eo=!1,o=n(r,a),Eo=!1,Co&&(o=_o(t,n,r,a)),Ro(e),o}function Ro(e){_.H=Gi;var t=null!==wo&&null!==wo.next;if(bo=0,Do=wo=xo=null,ko=!1,Ao=0,Fo=null,t)throw Error(i(300));null===e||As||null!==(e=e.dependencies)&&Ca(e)&&(As=!0)}function _o(e,t,n,r){xo=e;var a=0;do{if(Co&&(Fo=null),Ao=0,Co=!1,25<=a)throw Error(i(301));if(a+=1,Do=wo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}_.H=Xi,o=t(n,r)}while(Co);return o}function Po(){var e=_.H,t=e.useState()[0];return t="function"===typeof t.then?Wo(t):t,e=e.useState()[0],(null!==wo?wo.memoizedState:null)!==e&&(xo.flags|=1024),t}function Mo(){var e=0!==So;return So=0,e}function Bo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Lo(e){if(ko){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ko=!1}bo=0,Do=wo=xo=null,Co=!1,Ao=So=0,Fo=null}function jo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Do?xo.memoizedState=Do=e:Do=Do.next=e,Do}function zo(){if(null===wo){var e=xo.alternate;e=null!==e?e.memoizedState:null}else e=wo.next;var t=null===Do?xo.memoizedState:Do.next;if(null!==t)Do=t,wo=e;else{if(null===e){if(null===xo.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(wo=e).memoizedState,baseState:wo.baseState,baseQueue:wo.baseQueue,queue:wo.queue,next:null},null===Do?xo.memoizedState=Do=e:Do=Do.next=e}return Do}function Wo(e){var t=Ao;return Ao+=1,null===Fo&&(Fo=[]),e=Za(Fo,e,t),t=xo,null===(null===Do?t.memoizedState:Do.next)&&(t=t.alternate,_.H=null===t||null===t.memoizedState?Ki:qi),e}function Uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Wo(e);if(e.$$typeof===w)return Sa(e)}throw Error(i(438,String(e)))}function Vo(e){var t=null,n=xo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=xo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=F;return t.index++,n}function Ho(e,t){return"function"===typeof t?t(e):t}function Go(e){return Ko(zo(),wo,e)}function Ko(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,null===a)e.memoizedState=o;else{var u=s=null,l=null,c=t=a.next,d=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(ol&h)===h:(bo&h)===h){var p=c.revertLane;if(0===p)null!==l&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Ba&&(d=!0);else{if((bo&p)===p){c=c.next,p===Ba&&(d=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(u=l=h,s=o):l=l.next=h,xo.lanes|=p,pl|=p}h=c.action,Eo&&n(o,h),o=c.hasEagerState?c.eagerState:n(o,h)}else p={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(u=l=p,s=o):l=l.next=p,xo.lanes|=h,pl|=h;c=c.next}while(null!==c&&c!==t);if(null===l?s=o:l.next=u,!Yn(o,e.memoizedState)&&(As=!0,d&&null!==(n=La)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function qo(e){var t=zo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);Yn(o,t.memoizedState)||(As=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xo(e,t,n){var r=xo,a=zo(),o=oa;if(o){if(void 0===n)throw Error(i(407));n=n()}else n=t();var s=!Yn((wo||a).memoizedState,n);if(s&&(a.memoizedState=n,As=!0),a=a.queue,yi(2048,8,Zo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==Do&&1&Do.memoizedState.tag){if(r.flags|=2048,fi(9,{destroy:void 0,resource:void 0},Qo.bind(null,r,a,n,t),null),null===rl)throw Error(i(349));o||0!==(124&bo)||Yo(r,t,n)}return n}function Yo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qo(e,t,n,r){t.value=n,t.getSnapshot=r,Jo(t)&&$o(e)}function Zo(e,t,n){return n(function(){Jo(t)&&$o(e)})}function Jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function $o(e){var t=Tr(e,2);null!==t&&Ml(t,e,2)}function ei(e){var t=jo();if("function"===typeof e){var n=e;if(e=n(),Eo){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:e},t}function ti(e,t,n,r){return e.baseState=n,Ko(e,wo,"function"===typeof r?r:Ho)}function ni(e,t,n,r,a){if(Ui(e))throw Error(i(485));if(null!==(e=t.action)){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==_.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ri(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ri(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var o=_.T,i={};_.T=i;try{var s=n(a,r),u=_.S;null!==u&&u(i,s),ai(e,t,s)}catch(l){ii(e,t,l)}finally{_.T=o}}else try{ai(e,t,o=n(a,r))}catch(c){ii(e,t,c)}}function ai(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){oi(e,t,n)},function(n){return ii(e,t,n)}):oi(e,t,n)}function oi(e,t,n){t.status="fulfilled",t.value=n,si(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ri(e,n)))}function ii(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,si(t),t=t.next}while(t!==r)}e.action=null}function si(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ui(e,t){return t}function li(e,t){if(oa){var n=rl.formState;if(null!==n){e:{var r=xo;if(oa){if(aa){t:{for(var a=aa,o=sa;8!==a.nodeType;){if(!o){a=null;break t}if(null===(a=yd(a.nextSibling))){a=null;break t}}a="F!"===(o=a.data)||"F"===o?a:null}if(a){aa=yd(a.nextSibling),r="F!"===a.data;break e}}la(r)}r=!1}r&&(t=n[0])}}return(n=jo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:t},n.queue=r,n=ji.bind(null,xo,r),r.dispatch=n,r=ei(!1),o=Wi.bind(null,xo,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=jo()).queue=a,n=ni.bind(null,xo,a,o,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function ci(e){return di(zo(),wo,e)}function di(e,t,n){if(t=Ko(e,t,ui)[0],e=Go(Ho)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Wo(t)}catch(i){if(i===Ga)throw qa;throw i}else r=t;var a=(t=zo()).queue,o=a.dispatch;return n!==t.memoizedState&&(xo.flags|=2048,fi(9,{destroy:void 0,resource:void 0},hi.bind(null,a,n),null)),[r,o,e]}function hi(e,t){e.action=t}function pi(e){var t=zo(),n=wo;if(null!==n)return di(t,n,e);zo(),t=t.memoizedState;var r=(n=zo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function fi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=xo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function gi(){return zo().memoizedState}function mi(e,t,n,r){var a=jo();r=void 0===r?null:r,xo.flags|=e,a.memoizedState=fi(1|t,{destroy:void 0,resource:void 0},n,r)}function yi(e,t,n,r){var a=zo();r=void 0===r?null:r;var o=a.memoizedState.inst;null!==wo&&null!==r&&To(r,wo.memoizedState.deps)?a.memoizedState=fi(t,o,n,r):(xo.flags|=e,a.memoizedState=fi(1|t,o,n,r))}function vi(e,t){mi(8390656,8,e,t)}function bi(e,t){yi(2048,8,e,t)}function xi(e,t){return yi(4,2,e,t)}function wi(e,t){return yi(4,4,e,t)}function Di(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ki(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yi(4,4,Di.bind(null,t,e),n)}function Ci(){}function Ei(e,t){var n=zo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&To(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Si(e,t){var n=zo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&To(t,r[1]))return r[0];if(r=e(),Eo){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ai(e,t,n){return void 0===n||0!==(1073741824&bo)?e.memoizedState=t:(e.memoizedState=n,e=Pl(),xo.lanes|=e,pl|=e,n)}function Fi(e,t,n,r){return Yn(n,t)?n:null!==fo.current?(e=Ai(e,n,r),Yn(e,t)||(As=!0),e):0===(42&bo)?(As=!0,e.memoizedState=n):(e=Pl(),xo.lanes|=e,pl|=e,t)}function Ii(e,t,n,r,a){var o=P.p;P.p=0!==o&&8>o?o:8;var i=_.T,s={};_.T=s,Wi(e,!1,t,n);try{var u=a(),l=_.S;if(null!==l&&l(s,u),null!==u&&"object"===typeof u&&"function"===typeof u.then)zi(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(u,r),_l());else zi(e,t,r,_l())}catch(c){zi(e,t,{then:function(){},status:"rejected",reason:c},_l())}finally{P.p=o,_.T=i}}function Ni(){}function Ti(e,t,n,r){if(5!==e.tag)throw Error(i(476));var a=Oi(e).queue;Ii(e,a,t,M,null===n?Ni:function(){return Ri(e),n(r)})}function Oi(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ri(e){zi(e,Oi(e).next.queue,{},_l())}function _i(){return Sa(Xd)}function Pi(){return zo().memoizedState}function Mi(){return zo().memoizedState}function Bi(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=_l(),r=oo(t,e=ao(n),n);return null!==r&&(Ml(r,t,n),io(r,t,n)),t={cache:Ra()},void(e.payload=t)}t=t.return}}function Li(e,t,n){var r=_l();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ui(e)?Vi(t,n):null!==(n=Nr(e,t,n,r))&&(Ml(n,e,r),Hi(n,t,r))}function ji(e,t,n){zi(e,t,n,_l())}function zi(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ui(e))Vi(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,Yn(s,i))return Ir(e,t,a,0),null===rl&&Fr(),!1}catch(u){}if(null!==(n=Nr(e,t,a,r)))return Ml(n,e,r),Hi(n,t,r),!0}return!1}function Wi(e,t,n,r){if(r={lane:2,revertLane:Ic(),action:r,hasEagerState:!1,eagerState:null,next:null},Ui(e)){if(t)throw Error(i(479))}else null!==(t=Nr(e,n,r,2))&&Ml(t,e,2)}function Ui(e){var t=e.alternate;return e===xo||null!==t&&t===xo}function Vi(e,t){Co=ko=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hi(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}var Gi={readContext:Sa,use:Uo,useCallback:No,useContext:No,useEffect:No,useImperativeHandle:No,useLayoutEffect:No,useInsertionEffect:No,useMemo:No,useReducer:No,useRef:No,useState:No,useDebugValue:No,useDeferredValue:No,useTransition:No,useSyncExternalStore:No,useId:No,useHostTransitionStatus:No,useFormState:No,useActionState:No,useOptimistic:No,useMemoCache:No,useCacheRefresh:No},Ki={readContext:Sa,use:Uo,useCallback:function(e,t){return jo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:vi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,mi(4194308,4,Di.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mi(4194308,4,e,t)},useInsertionEffect:function(e,t){mi(4,2,e,t)},useMemo:function(e,t){var n=jo();t=void 0===t?null:t;var r=e();if(Eo){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=jo();if(void 0!==n){var a=n(t);if(Eo){he(!0);try{n(t)}finally{he(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=Li.bind(null,xo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},jo().memoizedState=e},useState:function(e){var t=(e=ei(e)).queue,n=ji.bind(null,xo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ci,useDeferredValue:function(e,t){return Ai(jo(),e,t)},useTransition:function(){var e=ei(!1);return e=Ii.bind(null,xo,e.queue,!0,!1),jo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=xo,a=jo();if(oa){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===rl)throw Error(i(349));0!==(124&ol)||Yo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,vi(Zo.bind(null,r,o,e),[e]),r.flags|=2048,fi(9,{destroy:void 0,resource:void 0},Qo.bind(null,r,o,n,t),null),n},useId:function(){var e=jo(),t=rl.identifierPrefix;if(oa){var n=Jr;t="\xab"+t+"R"+(n=(Zr&~(1<<32-pe(Zr)-1)).toString(32)+n),0<(n=So++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Io++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:_i,useFormState:li,useActionState:li,useOptimistic:function(e){var t=jo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Wi.bind(null,xo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Vo,useCacheRefresh:function(){return jo().memoizedState=Bi.bind(null,xo)}},qi={readContext:Sa,use:Uo,useCallback:Ei,useContext:Sa,useEffect:bi,useImperativeHandle:ki,useInsertionEffect:xi,useLayoutEffect:wi,useMemo:Si,useReducer:Go,useRef:gi,useState:function(){return Go(Ho)},useDebugValue:Ci,useDeferredValue:function(e,t){return Fi(zo(),wo.memoizedState,e,t)},useTransition:function(){var e=Go(Ho)[0],t=zo().memoizedState;return["boolean"===typeof e?e:Wo(e),t]},useSyncExternalStore:Xo,useId:Pi,useHostTransitionStatus:_i,useFormState:ci,useActionState:ci,useOptimistic:function(e,t){return ti(zo(),0,e,t)},useMemoCache:Vo,useCacheRefresh:Mi},Xi={readContext:Sa,use:Uo,useCallback:Ei,useContext:Sa,useEffect:bi,useImperativeHandle:ki,useInsertionEffect:xi,useLayoutEffect:wi,useMemo:Si,useReducer:qo,useRef:gi,useState:function(){return qo(Ho)},useDebugValue:Ci,useDeferredValue:function(e,t){var n=zo();return null===wo?Ai(n,e,t):Fi(n,wo.memoizedState,e,t)},useTransition:function(){var e=qo(Ho)[0],t=zo().memoizedState;return["boolean"===typeof e?e:Wo(e),t]},useSyncExternalStore:Xo,useId:Pi,useHostTransitionStatus:_i,useFormState:pi,useActionState:pi,useOptimistic:function(e,t){var n=zo();return null!==wo?ti(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Vo,useCacheRefresh:Mi},Yi=null,Qi=0;function Zi(e){var t=Qi;return Qi+=1,null===Yi&&(Yi=[]),Za(Yi,e,t)}function Ji(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $i(e,t){if(t.$$typeof===p)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Lr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ur(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===m?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===S&&es(o)===t.type)?(Ji(t=a(t,n.props),n),t.return=e,t):(Ji(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Wr(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ur(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Ji(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Vr(t,e.mode,n)).return=e,t;case S:return h(e,t=(0,t._init)(t._payload),n)}if(R(t)||N(t))return(t=Wr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Zi(t),n);if(t.$$typeof===w)return h(e,Aa(e,t),n);$i(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===a?l(e,t,n,r):null;case g:return n.key===a?c(e,t,n,r):null;case S:return p(e,t,n=(a=n._init)(n._payload),r)}if(R(n)||N(n))return null!==a?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,Zi(n),r);if(n.$$typeof===w)return p(e,t,Aa(e,n),r);$i(e,n)}return null}function y(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case S:return y(e,t,n,r=(0,r._init)(r._payload),a)}if(R(r)||N(r))return d(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return y(e,t,n,Zi(r),a);if(r.$$typeof===w)return y(e,t,n,Aa(t,r),a);$i(t,r)}return null}function v(u,l,c,d){if("object"===typeof c&&null!==c&&c.type===m&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case f:e:{for(var b=c.key;null!==l;){if(l.key===b){if((b=c.type)===m){if(7===l.tag){n(u,l.sibling),(d=a(l,c.props.children)).return=u,u=d;break e}}else if(l.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===S&&es(b)===l.type){n(u,l.sibling),Ji(d=a(l,c.props),c),d.return=u,u=d;break e}n(u,l);break}t(u,l),l=l.sibling}c.type===m?((d=Wr(c.props.children,u.mode,d,c.key)).return=u,u=d):(Ji(d=zr(c.type,c.key,c.props,null,u.mode,d),c),d.return=u,u=d)}return s(u);case g:e:{for(b=c.key;null!==l;){if(l.key===b){if(4===l.tag&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){n(u,l.sibling),(d=a(l,c.children||[])).return=u,u=d;break e}n(u,l);break}t(u,l),l=l.sibling}(d=Vr(c,u.mode,d)).return=u,u=d}return s(u);case S:return v(u,l,c=(b=c._init)(c._payload),d)}if(R(c))return function(a,i,s,u){for(var l=null,c=null,d=i,f=i=0,g=null;null!==d&&f<s.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var m=p(a,d,s[f],u);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(a,d),i=o(m,i,f),null===c?l=m:c.sibling=m,c=m,d=g}if(f===s.length)return n(a,d),oa&&$r(a,f),l;if(null===d){for(;f<s.length;f++)null!==(d=h(a,s[f],u))&&(i=o(d,i,f),null===c?l=d:c.sibling=d,c=d);return oa&&$r(a,f),l}for(d=r(d);f<s.length;f++)null!==(g=y(d,a,f,s[f],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),i=o(g,i,f),null===c?l=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(a,e)}),oa&&$r(a,f),l}(u,l,c,d);if(N(c)){if("function"!==typeof(b=N(c)))throw Error(i(150));return function(a,s,u,l){if(null==u)throw Error(i(151));for(var c=null,d=null,f=s,g=s=0,m=null,v=u.next();null!==f&&!v.done;g++,v=u.next()){f.index>g?(m=f,f=null):m=f.sibling;var b=p(a,f,v.value,l);if(null===b){null===f&&(f=m);break}e&&f&&null===b.alternate&&t(a,f),s=o(b,s,g),null===d?c=b:d.sibling=b,d=b,f=m}if(v.done)return n(a,f),oa&&$r(a,g),c;if(null===f){for(;!v.done;g++,v=u.next())null!==(v=h(a,v.value,l))&&(s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return oa&&$r(a,g),c}for(f=r(f);!v.done;g++,v=u.next())null!==(v=y(f,a,g,v.value,l))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return e&&f.forEach(function(e){return t(a,e)}),oa&&$r(a,g),c}(u,l,c=b.call(c),d)}if("function"===typeof c.then)return v(u,l,Zi(c),d);if(c.$$typeof===w)return v(u,l,Aa(u,c),d);$i(u,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==l&&6===l.tag?(n(u,l.sibling),(d=a(l,c)).return=u,u=d):(n(u,l),(d=Ur(c,u.mode,d)).return=u,u=d),s(u)):n(u,l)}return function(e,t,n,r){try{Qi=0;var a=v(e,t,n,r);return Yi=null,a}catch(i){if(i===Ga||i===qa)throw i;var o=Mr(29,i,null,e.mode);return o.lanes=r,o.return=e,o}}}var ns=ts(!0),rs=ts(!1),as=j(null),os=null;function is(e){var t=e.alternate;W(cs,1&cs.current),W(as,e),null===os&&(null===t||null!==fo.current||null!==t.memoizedState)&&(os=e)}function ss(e){if(22===e.tag){if(W(cs,cs.current),W(as,e),null===os){var t=e.alternate;null!==t&&null!==t.memoizedState&&(os=e)}}else us()}function us(){W(cs,cs.current),W(as,as.current)}function ls(e){z(as),os===e&&(os=null),z(cs)}var cs=j(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||md(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ps={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_l(),a=ao(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=oo(e,a,r))&&(Ml(t,e,r),io(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_l(),a=ao(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=oo(e,a,r))&&(Ml(t,e,r),io(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_l(),r=ao(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Ml(t,e,n),io(t,e,n))}};function fs(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(a,o))}function gs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ps.enqueueReplaceState(t,t.state,null)}function ms(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=h({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var ys="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vs(e){ys(e)}function bs(e){console.error(e)}function xs(e){ys(e)}function ws(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ds(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function ks(e,t,n){return(n=ao(n)).tag=3,n.payload={element:null},n.callback=function(){ws(e,t)},n}function Cs(e){return(e=ao(e)).tag=3,e}function Es(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var o=r.value;e.payload=function(){return a(o)},e.callback=function(){Ds(t,n,r)}}var i=n.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){Ds(t,n,r),"function"!==typeof a&&(null===Cl?Cl=new Set([this]):Cl.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ss=Error(i(461)),As=!1;function Fs(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function Is(e,t,n,r,a){n=n.render;var o=t.ref;if("ref"in r){var i={};for(var s in r)"ref"!==s&&(i[s]=r[s])}else i=r;return Ea(t),r=Oo(e,t,n,i,o,a),s=Mo(),null===e||As?(oa&&s&&ta(t),t.flags|=1,Fs(e,t,r,a),t.child):(Bo(e,t,a),Ys(e,t,a))}function Ns(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Br(o)||void 0!==o.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ts(e,t,o,r,a))}if(o=e.child,!Qs(e,a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(i,r)&&e.ref===t.ref)return Ys(e,t,a)}return t.flags|=1,(e=Lr(o,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(Qn(o,r)&&e.ref===t.ref){if(As=!1,t.pendingProps=r=o,!Qs(e,a))return t.lanes=e.lanes,Ys(e,t,a);0!==(131072&e.flags)&&(As=!0)}}return Ps(e,t,n,r,a)}function Os(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(a=t.child=e.child,o=0;null!==a;)o=o|a.lanes|a.childLanes,a=a.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Rs(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Rs(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Va(0,null!==o?o.cachePool:null),null!==o?mo(t,o):yo(),ss(t)}else null!==o?(Va(0,o.cachePool),mo(t,o),us(),t.memoizedState=null):(null!==e&&Va(0,null),yo(),us());return Fs(e,t,a,n),t.child}function Rs(e,t,n,r){var a=Ua();return a=null===a?null:{parent:Oa._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Va(0,null),yo(),ss(t),null!==e&&ka(e,t,r,!0),null}function _s(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ps(e,t,n,r,a){return Ea(t),n=Oo(e,t,n,r,void 0,a),r=Mo(),null===e||As?(oa&&r&&ta(t),t.flags|=1,Fs(e,t,n,a),t.child):(Bo(e,t,a),Ys(e,t,a))}function Ms(e,t,n,r,a,o){return Ea(t),t.updateQueue=null,n=_o(t,r,n,a),Ro(e),r=Mo(),null===e||As?(oa&&r&&ta(t),t.flags|=1,Fs(e,t,n,o),t.child):(Bo(e,t,o),Ys(e,t,o))}function Bs(e,t,n,r,a){if(Ea(t),null===t.stateNode){var o=_r,i=n.contextType;"object"===typeof i&&null!==i&&(o=Sa(i)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ps,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),i=n.contextType,o.context="object"===typeof i&&null!==i?Sa(i):_r,o.state=t.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(hs(t,n,i,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(i=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),i!==o.state&&ps.enqueueReplaceState(o,o.state,null),co(t,r,o,a),lo(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,u=ms(n,s);o.props=u;var l=o.context,c=n.contextType;i=_r,"object"===typeof c&&null!==c&&(i=Sa(c));var d=n.getDerivedStateFromProps;c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s||l!==i)&&gs(t,o,r,i),to=!1;var h=t.memoizedState;o.state=h,co(t,r,o,a),lo(),l=t.memoizedState,s||h!==l||to?("function"===typeof d&&(hs(t,n,d,r),l=t.memoizedState),(u=to||fs(t,n,u,r,h,l,i))?(c||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=i,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),c=ms(n,i=t.memoizedProps),o.props=c,d=t.pendingProps,h=o.context,l=n.contextType,u=_r,"object"===typeof l&&null!==l&&(u=Sa(l)),(l="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==d||h!==u)&&gs(t,o,r,u),to=!1,h=t.memoizedState,o.state=h,co(t,r,o,a),lo();var p=t.memoizedState;i!==d||h!==p||to||null!==e&&null!==e.dependencies&&Ca(e.dependencies)?("function"===typeof s&&(hs(t,n,s,r),p=t.memoizedState),(c=to||fs(t,n,c,r,h,p,u)||null!==e&&null!==e.dependencies&&Ca(e.dependencies))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,_s(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,a),t.child=ns(t,null,n,a)):Fs(e,t,n,a),t.memoizedState=o.state,e=t.child):e=Ys(e,t,a),e}function Ls(e,t,n,r){return pa(),t.flags|=256,Fs(e,t,n,r),t.child}var js={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zs(e){return{baseLanes:e,cachePool:Ha()}}function Ws(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=ml),e}function Us(e,t,n){var r,a=t.pendingProps,o=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&cs.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oa){if(o?is(t):us(),oa){var u,l=aa;if(u=l){e:{for(u=l,l=sa;8!==u.nodeType;){if(!l){l=null;break e}if(null===(u=yd(u.nextSibling))){l=null;break e}}l=u}null!==l?(t.memoizedState={dehydrated:l,treeContext:null!==Qr?{id:Zr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(u=Mr(18,null,null,0)).stateNode=l,u.return=t,t.child=u,ra=t,aa=null,u=!0):u=!1}u||la(t)}if(null!==(l=t.memoizedState)&&null!==(l=l.dehydrated))return md(l)?t.lanes=32:t.lanes=536870912,null;ls(t)}return l=a.children,a=a.fallback,o?(us(),l=Hs({mode:"hidden",children:l},o=t.mode),a=Wr(a,o,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(o=t.child).memoizedState=zs(n),o.childLanes=Ws(e,r,n),t.memoizedState=js,a):(is(t),Vs(t,l))}if(null!==(u=e.memoizedState)&&null!==(l=u.dehydrated)){if(s)256&t.flags?(is(t),t.flags&=-257,t=Gs(e,t,n)):null!==t.memoizedState?(us(),t.child=e.child,t.flags|=128,t=null):(us(),o=a.fallback,l=t.mode,a=Hs({mode:"visible",children:a.children},l),(o=Wr(o,l,n,null)).flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,ns(t,e.child,null,n),(a=t.child).memoizedState=zs(n),a.childLanes=Ws(e,r,n),t.memoizedState=js,t=o);else if(is(t),md(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var c=r.dgst;r=c,(a=Error(i(419))).stack="",a.digest=r,ga({value:a,source:null,stack:null}),t=Gs(e,t,n)}else if(As||ka(e,t,n,!1),r=0!==(n&e.childLanes),As||r){if(null!==(r=rl)&&(0!==(a=0!==((a=0!==(42&(a=n&-n))?1:Fe(a))&(r.suspendedLanes|n))?0:a)&&a!==u.retryLane))throw u.retryLane=a,Tr(e,a),Ml(r,e,a),Ss;"$?"===l.data||ql(),t=Gs(e,t,n)}else"$?"===l.data?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,aa=yd(l.nextSibling),ra=t,oa=!0,ia=null,sa=!1,null!==e&&(Xr[Yr++]=Zr,Xr[Yr++]=Jr,Xr[Yr++]=Qr,Zr=e.id,Jr=e.overflow,Qr=t),(t=Vs(t,a.children)).flags|=4096);return t}return o?(us(),o=a.fallback,l=t.mode,c=(u=e.child).sibling,(a=Lr(u,{mode:"hidden",children:a.children})).subtreeFlags=65011712&u.subtreeFlags,null!==c?o=Lr(c,o):(o=Wr(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,null===(l=e.child.memoizedState)?l=zs(n):(null!==(u=l.cachePool)?(c=Oa._currentValue,u=u.parent!==c?{parent:c,pool:c}:u):u=Ha(),l={baseLanes:l.baseLanes|n,cachePool:u}),o.memoizedState=l,o.childLanes=Ws(e,r,n),t.memoizedState=js,a):(is(t),e=(n=e.child).sibling,(n=Lr(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Vs(e,t){return(t=Hs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Hs(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gs(e,t,n){return ns(t,e.child,null,n),(e=Vs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ks(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wa(e.return,t,n)}function qs(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Xs(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Fs(e,t,r.children,n),0!==(2&(r=cs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ks(e,n,t);else if(19===e.tag)Ks(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(W(cs,r),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),qs(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ds(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}qs(t,!0,n,null,o);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pl|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ka(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Lr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ca(e))}function Zs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)As=!0;else{if(!Qs(e,n)&&0===(128&t.flags))return As=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),ba(0,Oa,e.memoizedState.cache),pa();break;case 27:case 5:X(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:ba(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(is(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Us(e,t,n):(is(t),null!==(e=Ys(e,t,n))?e.sibling:null);is(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ka(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return Xs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),W(cs,cs.current),r)break;return null;case 22:case 23:return t.lanes=0,Os(e,t,n);case 24:ba(0,Oa,e.memoizedState.cache)}return Ys(e,t,n)}(e,t,n);As=0!==(131072&e.flags)}else As=!1,oa&&0!==(1048576&t.flags)&&ea(t,qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((a=r.$$typeof)===D){t.tag=11,t=Is(null,t,r,e,n);break e}if(a===E){t.tag=14,t=Ns(null,t,r,e,n);break e}}throw t=O(r)||r,Error(i(306,t,""))}Br(r)?(e=ms(r,e),t.tag=1,t=Bs(null,t,r,e,n)):(t.tag=0,t=Ps(null,t,r,e,n))}return t;case 0:return Ps(e,t,t.type,t.pendingProps,n);case 1:return Bs(e,t,r=t.type,a=ms(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,ro(e,t),co(t,r,null,n);var s=t.memoizedState;if(r=s.cache,ba(0,Oa,r),r!==o.cache&&Da(t,[Oa],n,!0),lo(),r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ls(e,t,r,n);break e}if(r!==a){ga(a=Cr(Error(i(424)),t)),t=Ls(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(aa=yd(e.firstChild),ra=t,oa=!0,ia=null,sa=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===a){t=Ys(e,t,n);break e}Fs(e,t,r,n)}t=t.child}return t;case 26:return _s(e,t),null===e?(n=Fd(t.type,null,t.pendingProps,null))?t.memoizedState=n:oa||(n=t.type,e=t.pendingProps,(r=rd(H.current).createElement(n))[Oe]=t,r[Re]=e,ed(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=Fd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&oa&&(r=t.stateNode=xd(t.type,t.pendingProps,H.current),ra=t,sa=!0,a=aa,pd(t.type)?(vd=a,aa=yd(r.firstChild)):aa=a),Fs(e,t,t.pendingProps.children,n),_s(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oa&&((a=r=aa)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===o)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,sa))?(t.stateNode=r,ra=t,aa=yd(r.firstChild),sa=!1,a=!0):a=!1),a||la(t)),X(t),a=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,id(a,o)?r=null:null!==s&&id(a,s)&&(t.flags|=32),null!==t.memoizedState&&(a=Oo(e,t,Po,null,null,n),Xd._currentValue=a),_s(e,t),Fs(e,t,r,n),t.child;case 6:return null===e&&oa&&((e=n=aa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,sa))?(t.stateNode=n,ra=t,aa=null,e=!0):e=!1),e||la(t)),null;case 13:return Us(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):Fs(e,t,r,n),t.child;case 11:return Is(e,t,t.type,t.pendingProps,n);case 7:return Fs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fs(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ba(0,t.type,r.value),Fs(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Ea(t),r=r(a=Sa(a)),t.flags|=1,Fs(e,t,r,n),t.child;case 14:return Ns(e,t,t.type,t.pendingProps,n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 19:return Xs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Hs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Lr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Os(e,t,n);case 24:return Ea(t),r=Sa(Oa),null===e?(null===(a=Ua())&&(a=rl,o=Ra(),a.pooledCache=o,o.refCount++,null!==o&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},no(t),ba(0,Oa,a)):(0!==(e.lanes&n)&&(ro(e,t),co(t,null,null,n),lo()),a=e.memoizedState,o=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ba(0,Oa,r)):(r=o.cache,ba(0,Oa,r),r!==a.cache&&Da(t,[Oa],n,!0))),Fs(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Js(e){e.flags|=4}function $s(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Wd(t)){if(null!==(t=as.current)&&((4194048&ol)===ol?null!==os:(62914560&ol)!==ol&&0===(536870912&ol)||t!==os))throw Ja=Xa,Ka;e.flags|=8192}}function eu(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,yl|=t)}function tu(e,t){if(!oa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ru(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nu(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xa(Oa),q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ha(t)?Js(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fa())),nu(t),null;case 26:return n=t.memoizedState,null===e?(Js(t),null!==n?(nu(t),$s(t,n)):(nu(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Js(t),nu(t),$s(t,n)):(nu(t),t.flags&=-16777217):(e.memoizedProps!==r&&Js(t),nu(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nu(t),null}e=U.current,ha(t)?ca(t):(e=xd(a,r,n),t.stateNode=e,Js(t))}return nu(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nu(t),null}if(e=U.current,ha(t))ca(t);else{switch(a=rd(H.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?a.createElement(n,{is:r.is}):a.createElement(n)}}e[Oe]=t,e[Re]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Js(t)}}return nu(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Js(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(e=H.current,ha(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ra))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Oe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Qc(e.nodeValue,n)))||la(t)}else(e=rd(e).createTextNode(r))[Oe]=t,t.stateNode=e}return nu(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[Oe]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nu(t),a=!1}else a=fa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(ls(t),t):(ls(t),null)}if(ls(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),eu(t,t.updateQueue),nu(t),null;case 4:return q(),null===e&&zc(t.stateNode.containerInfo),nu(t),null;case 10:return xa(t.type),nu(t),null;case 19:if(z(cs),null===(a=t.memoizedState))return nu(t),null;if(r=0!==(128&t.flags),null===(o=a.rendering))if(r)tu(a,!1);else{if(0!==hl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ds(e))){for(t.flags|=128,tu(a,!1),e=o.updateQueue,t.updateQueue=e,eu(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)jr(n,e),n=n.sibling;return W(cs,1&cs.current|2),t.child}e=e.sibling}null!==a.tail&&te()>Dl&&(t.flags|=128,r=!0,tu(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,eu(t,e),tu(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!oa)return nu(t),null}else 2*te()-a.renderingStartTime>Dl&&536870912!==n&&(t.flags|=128,r=!0,tu(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=a.last)?e.sibling=o:t.child=o,a.last=o)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=cs.current,W(cs,r?1&e|2:1&e),t):(nu(t),null);case 22:case 23:return ls(t),vo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nu(t),6&t.subtreeFlags&&(t.flags|=8192)):nu(t),null!==(n=t.updateQueue)&&eu(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Wa),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xa(Oa),nu(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function au(e,t){switch(na(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xa(Oa),q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ls(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(cs),null;case 4:return q(),null;case 10:return xa(t.type),null;case 22:case 23:return ls(t),vo(),null!==e&&z(Wa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xa(Oa),null;default:return null}}function ou(e,t){switch(na(t),t.tag){case 3:xa(Oa),q();break;case 26:case 27:case 5:Y(t);break;case 4:q();break;case 13:ls(t);break;case 19:z(cs);break;case 10:xa(t.type);break;case 22:case 23:ls(t),vo(),null!==e&&z(Wa);break;case 24:xa(Oa)}}function iu(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var o=n.create,i=n.inst;r=o(),i.destroy=r}n=n.next}while(n!==a)}}catch(s){cc(t,t.return,s)}}function su(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var o=a.next;r=o;do{if((r.tag&e)===e){var i=r.inst,s=i.destroy;if(void 0!==s){i.destroy=void 0,a=t;var u=n,l=s;try{l()}catch(c){cc(a,u,c)}}}r=r.next}while(r!==o)}}catch(c){cc(t,t.return,c)}}function uu(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{po(t,n)}catch(r){cc(e,e.return,r)}}}function lu(e,t,n){n.props=ms(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){cc(e,t,r)}}function cu(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){cc(e,t,a)}}function du(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){cc(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){cc(e,t,o)}else n.current=null}function hu(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){cc(e,e.return,a)}}function pu(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,o=null,s=null,u=null,l=null,c=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":l=h;default:r.hasOwnProperty(f)||Jc(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":o=f;break;case"name":a=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":s=f;break;case"defaultValue":u=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:f!==h&&Jc(e,t,p,f,r,h)}}return void mt(e,s,u,l,c,d,o,a);case"select":for(o in f=s=u=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&null!=l)switch(o){case"value":break;case"multiple":f=l;default:r.hasOwnProperty(o)||Jc(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(null!=o||null!=l))switch(a){case"value":p=o;break;case"defaultValue":u=o;break;case"multiple":s=o;default:o!==l&&Jc(e,t,a,o,r,l)}return t=u,n=s,r=f,void(null!=p?bt(e,!!n,p,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(u in f=p=null,n)if(a=n[u],n.hasOwnProperty(u)&&null!=a&&!r.hasOwnProperty(u))switch(u){case"value":case"children":break;default:Jc(e,t,u,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(null!=a||null!=o))switch(s){case"value":p=a;break;case"defaultValue":f=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(i(91));break;default:a!==o&&Jc(e,t,s,a,r,o)}return void xt(e,p,f);case"option":for(var g in n)if(p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Jc(e,t,g,null,r,p);for(l in r)if(p=r[l],f=n[l],r.hasOwnProperty(l)&&p!==f&&(null!=p||null!=f))if("selected"===l)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Jc(e,t,l,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m)&&Jc(e,t,m,null,r,p);for(c in r)if(p=r[c],f=n[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:Jc(e,t,c,p,r,f)}return;default:if(St(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&$c(e,t,y,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||$c(e,t,d,p,r,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&Jc(e,t,v,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||Jc(e,t,h,p,r,f)}(r,e.type,n,t),r[Re]=t}catch(a){cc(e,e.return,a)}}function fu(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function gu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function mu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zc));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(mu(e,t,n),e=e.sibling;null!==e;)mu(e,t,n),e=e.sibling}function yu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yu(e,t,n),e=e.sibling;null!==e;)yu(e,t,n),e=e.sibling}function vu(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ed(t,r,n),t[Oe]=e,t[Re]=n}catch(o){cc(e,e.return,o)}}var bu=!1,xu=!1,wu=!1,Du="function"===typeof WeakSet?WeakSet:Set,ku=null;function Cu(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Bu(e,n),4&r&&iu(5,n);break;case 1:if(Bu(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){cc(n,n.return,i)}else{var a=ms(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){cc(n,n.return,s)}}64&r&&uu(n),512&r&&cu(n,n.return);break;case 3:if(Bu(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{po(e,t)}catch(i){cc(n,n.return,i)}}break;case 27:null===t&&4&r&&vu(n);case 26:case 5:Bu(e,n),null===t&&4&r&&hu(n),512&r&&cu(n,n.return);break;case 12:Bu(e,n);break;case 13:Bu(e,n),4&r&&Nu(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=fc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bu)){t=null!==t&&null!==t.memoizedState||xu,a=bu;var o=xu;bu=r,(xu=t)&&!o?ju(e,n,0!==(8772&n.subtreeFlags)):Bu(e,n),bu=a,xu=o}break;case 30:break;default:Bu(e,n)}}function Eu(e){var t=e.alternate;null!==t&&(e.alternate=null,Eu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Su=null,Au=!1;function Fu(e,t,n){for(n=n.child;null!==n;)Iu(e,t,n),n=n.sibling}function Iu(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,n)}catch(o){}switch(n.tag){case 26:xu||du(n,t),Fu(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xu||du(n,t);var r=Su,a=Au;pd(n.type)&&(Su=n.stateNode,Au=!1),Fu(e,t,n),wd(n.stateNode),Su=r,Au=a;break;case 5:xu||du(n,t);case 6:if(r=Su,a=Au,Su=null,Fu(e,t,n),Au=a,null!==(Su=r))if(Au)try{(9===Su.nodeType?Su.body:"HTML"===Su.nodeName?Su.ownerDocument.body:Su).removeChild(n.stateNode)}catch(i){cc(n,t,i)}else try{Su.removeChild(n.stateNode)}catch(i){cc(n,t,i)}break;case 18:null!==Su&&(Au?(fd(9===(e=Su).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ah(e)):fd(Su,n.stateNode));break;case 4:r=Su,a=Au,Su=n.stateNode.containerInfo,Au=!0,Fu(e,t,n),Su=r,Au=a;break;case 0:case 11:case 14:case 15:xu||su(2,n,t),xu||su(4,n,t),Fu(e,t,n);break;case 1:xu||(du(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&lu(n,t,r)),Fu(e,t,n);break;case 21:Fu(e,t,n);break;case 22:xu=(r=xu)||null!==n.memoizedState,Fu(e,t,n),xu=r;break;default:Fu(e,t,n)}}function Nu(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ah(e)}catch(n){cc(t,t.return,n)}}function Tu(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Du),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Du),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var r=gc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Ou(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 27:if(pd(u.type)){Su=u.stateNode,Au=!1;break e}break;case 5:Su=u.stateNode,Au=!1;break e;case 3:case 4:Su=u.stateNode.containerInfo,Au=!0;break e}u=u.return}if(null===Su)throw Error(i(160));Iu(o,s,a),Su=null,Au=!1,null!==(o=a.alternate)&&(o.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)_u(t,e),t=t.sibling}var Ru=null;function _u(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ou(t,e),Pu(e),4&r&&(su(3,e,e.return),iu(3,e),su(5,e,e.return));break;case 1:Ou(t,e),Pu(e),512&r&&(xu||null===n||du(n,n.return)),64&r&&bu&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Ru;if(Ou(t,e),Pu(e),512&r&&(xu||null===n||du(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(o=a.getElementsByTagName("title")[0])||o[je]||o[Oe]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector("head > title"))),ed(o,r,n),o[Oe]=e,Ge(o),r=o;break e;case"link":var s=jd("link","href",a).get(r+(n.href||""));if(s)for(var u=0;u<s.length;u++)if((o=s[u]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(u,1);break t}ed(o=a.createElement(r),r,n),a.head.appendChild(o);break;case"meta":if(s=jd("meta","content",a).get(r+(n.content||"")))for(u=0;u<s.length;u++)if((o=s[u]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(u,1);break t}ed(o=a.createElement(r),r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[Oe]=e,Ge(o),r=o}e.stateNode=r}else zd(a,e.type,e.stateNode);else e.stateNode=_d(a,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?zd(a,e.type,e.stateNode):_d(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pu(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ou(t,e),Pu(e),512&r&&(xu||null===n||du(n,n.return)),null!==n&&4&r&&pu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ou(t,e),Pu(e),512&r&&(xu||null===n||du(n,n.return)),32&e.flags){a=e.stateNode;try{Dt(a,"")}catch(f){cc(e,e.return,f)}}4&r&&null!=e.stateNode&&pu(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(wu=!0);break;case 6:if(Ou(t,e),Pu(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(f){cc(e,e.return,f)}}break;case 3:if(Ld=null,a=Ru,Ru=Cd(t.containerInfo),Ou(t,e),Ru=a,Pu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ah(t.containerInfo)}catch(f){cc(e,e.return,f)}wu&&(wu=!1,Mu(e));break;case 4:r=Ru,Ru=Cd(e.stateNode.containerInfo),Ou(t,e),Pu(e),Ru=r;break;case 12:default:Ou(t,e),Pu(e);break;case 13:Ou(t,e),Pu(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wl=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Tu(e,r)));break;case 22:a=null!==e.memoizedState;var l=null!==n&&null!==n.memoizedState,c=bu,d=xu;if(bu=c||a,xu=d||l,Ou(t,e),xu=d,bu=c,Pu(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||l||bu||xu||Lu(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){l=n=t;try{if(o=l.stateNode,a)"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{u=l.stateNode;var h=l.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;u.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){cc(l,l.return,f)}}}else if(6===t.tag){if(null===n){l=t;try{l.stateNode.nodeValue=a?"":l.memoizedProps}catch(f){cc(l,l.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Tu(e,n))));break;case 19:Ou(t,e),Pu(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Tu(e,r)));case 30:case 21:}}function Pu(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(fu(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;yu(e,gu(e),a);break;case 5:var o=n.stateNode;32&n.flags&&(Dt(o,""),n.flags&=-33),yu(e,gu(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;mu(e,gu(e),s);break;default:throw Error(i(161))}}catch(u){cc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Mu(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Mu(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Bu(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Cu(e,t.alternate,t),t=t.sibling}function Lu(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:su(4,t,t.return),Lu(t);break;case 1:du(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&lu(t,t.return,n),Lu(t);break;case 27:wd(t.stateNode);case 26:case 5:du(t,t.return),Lu(t);break;case 22:null===t.memoizedState&&Lu(t);break;default:Lu(t)}e=e.sibling}}function ju(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:ju(a,o,n),iu(4,o);break;case 1:if(ju(a,o,n),"function"===typeof(a=(r=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(l){cc(r,r.return,l)}if(null!==(a=(r=o).updateQueue)){var s=r.stateNode;try{var u=a.shared.hiddenCallbacks;if(null!==u)for(a.shared.hiddenCallbacks=null,a=0;a<u.length;a++)ho(u[a],s)}catch(l){cc(r,r.return,l)}}n&&64&i&&uu(o),cu(o,o.return);break;case 27:vu(o);case 26:case 5:ju(a,o,n),n&&null===r&&4&i&&hu(o),cu(o,o.return);break;case 12:ju(a,o,n);break;case 13:ju(a,o,n),n&&4&i&&Nu(a,o);break;case 22:null===o.memoizedState&&ju(a,o,n),cu(o,o.return);break;case 30:break;default:ju(a,o,n)}t=t.sibling}}function zu(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&_a(n))}function Wu(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&_a(e))}function Uu(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Vu(e,t,n,r),t=t.sibling}function Vu(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Uu(e,t,n,r),2048&a&&iu(9,t);break;case 1:case 13:default:Uu(e,t,n,r);break;case 3:Uu(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&_a(e)));break;case 12:if(2048&a){Uu(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,s=o.onPostCommit;"function"===typeof s&&s(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(u){cc(t,t.return,u)}}else Uu(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,null!==t.memoizedState?2&o._visibility?Uu(e,t,n,r):Gu(e,t):2&o._visibility?Uu(e,t,n,r):(o._visibility|=2,Hu(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&a&&zu(i,t);break;case 24:Uu(e,t,n,r),2048&a&&Wu(t.alternate,t)}}function Hu(e,t,n,r,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,i=t,s=n,u=r,l=i.flags;switch(i.tag){case 0:case 11:case 15:Hu(o,i,s,u,a),iu(8,i);break;case 23:break;case 22:var c=i.stateNode;null!==i.memoizedState?2&c._visibility?Hu(o,i,s,u,a):Gu(o,i):(c._visibility|=2,Hu(o,i,s,u,a)),a&&2048&l&&zu(i.alternate,i);break;case 24:Hu(o,i,s,u,a),a&&2048&l&&Wu(i.alternate,i);break;default:Hu(o,i,s,u,a)}t=t.sibling}}function Gu(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:Gu(n,r),2048&a&&zu(r.alternate,r);break;case 24:Gu(n,r),2048&a&&Wu(r.alternate,r);break;default:Gu(n,r)}t=t.sibling}}var Ku=8192;function qu(e){if(e.subtreeFlags&Ku)for(e=e.child;null!==e;)Xu(e),e=e.sibling}function Xu(e){switch(e.tag){case 26:qu(e),e.flags&Ku&&null!==e.memoizedState&&function(e,t,n){if(null===Ud)throw Error(i(475));var r=Ud;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=Id(n.href),o=e.querySelector(Nd(a));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ge(o);o=e.ownerDocument||e,n=Td(n),(a=Dd.get(a))&&Md(n,a),Ge(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ru,e.memoizedState,e.memoizedProps);break;case 5:default:qu(e);break;case 3:case 4:var t=Ru;Ru=Cd(e.stateNode.containerInfo),qu(e),Ru=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Ku,Ku=16777216,qu(e),Ku=t):qu(e))}}function Yu(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Qu(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];ku=r,$u(r,e)}Yu(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zu(e),e=e.sibling}function Zu(e){switch(e.tag){case 0:case 11:case 15:Qu(e),2048&e.flags&&su(9,e,e.return);break;case 3:case 12:default:Qu(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Ju(e)):Qu(e)}}function Ju(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];ku=r,$u(r,e)}Yu(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:su(8,t,t.return),Ju(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Ju(t));break;default:Ju(t)}e=e.sibling}}function $u(e,t){for(;null!==ku;){var n=ku;switch(n.tag){case 0:case 11:case 15:su(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:_a(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,ku=r;else e:for(n=e;null!==ku;){var a=(r=ku).sibling,o=r.return;if(Eu(r),r===n){ku=null;break e}if(null!==a){a.return=o,ku=a;break e}ku=o}}}var el={getCacheForType:function(e){var t=Sa(Oa),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tl="function"===typeof WeakMap?WeakMap:Map,nl=0,rl=null,al=null,ol=0,il=0,sl=null,ul=!1,ll=!1,cl=!1,dl=0,hl=0,pl=0,fl=0,gl=0,ml=0,yl=0,vl=null,bl=null,xl=!1,wl=0,Dl=1/0,kl=null,Cl=null,El=0,Sl=null,Al=null,Fl=0,Il=0,Nl=null,Tl=null,Ol=0,Rl=null;function _l(){if(0!==(2&nl)&&0!==ol)return ol&-ol;if(null!==_.T){return 0!==Ba?Ba:Ic()}return Ne()}function Pl(){0===ml&&(ml=0===(536870912&ol)||oa?De():536870912);var e=as.current;return null!==e&&(e.flags|=32),ml}function Ml(e,t,n){(e!==rl||2!==il&&9!==il)&&null===e.cancelPendingCommit||(Vl(e,0),zl(e,ol,ml,!1)),Ee(e,n),0!==(2&nl)&&e===rl||(e===rl&&(0===(2&nl)&&(fl|=n),4===hl&&zl(e,ol,ml,!1)),Dc(e))}function Bl(e,t,n){if(0!==(6&nl))throw Error(i(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),a=r?function(e,t){var n=nl;nl|=2;var r=Gl(),a=Kl();rl!==e||ol!==t?(kl=null,Dl=te()+500,Vl(e,t)):ll=xe(e,t);e:for(;;)try{if(0!==il&&null!==al){t=al;var o=sl;t:switch(il){case 1:il=0,sl=null,$l(e,t,o,1);break;case 2:case 9:if(Ya(o)){il=0,sl=null,Jl(t);break}t=function(){2!==il&&9!==il||rl!==e||(il=7),Dc(e)},o.then(t,t);break e;case 3:il=7;break e;case 4:il=5;break e;case 7:Ya(o)?(il=0,sl=null,Jl(t)):(il=0,sl=null,$l(e,t,o,7));break;case 5:var s=null;switch(al.tag){case 26:s=al.memoizedState;case 5:case 27:var u=al;if(!s||Wd(s)){il=0,sl=null;var l=u.sibling;if(null!==l)al=l;else{var c=u.return;null!==c?(al=c,ec(c)):al=null}break t}}il=0,sl=null,$l(e,t,o,5);break;case 6:il=0,sl=null,$l(e,t,o,6);break;case 8:Ul(),hl=6;break e;default:throw Error(i(462))}}Ql();break}catch(d){Hl(e,d)}return va=ya=null,_.H=r,_.A=a,nl=n,null!==al?0:(rl=null,ol=0,Fr(),hl)}(e,t):Xl(e,t,!0),o=r;;){if(0===a){ll&&!r&&zl(e,t,0,!1);break}if(n=e.current.alternate,!o||jl(n)){if(2===a){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var u=e;a=vl;var l=u.current.memoizedState.isDehydrated;if(l&&(Vl(u,s).flags|=256),2!==(s=Xl(u,s,!1))){if(cl&&!l){u.errorRecoveryDisabledLanes|=o,fl|=o,a=4;break e}o=bl,bl=a,null!==o&&(null===bl?bl=o:bl.push.apply(bl,o))}a=s}if(o=!1,2!==a)continue}}if(1===a){Vl(e,0),zl(e,t,0,!0);break}e:{switch(r=e,o=a){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:zl(r,t,ml,!ul);break e;case 2:bl=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(a=wl+300-te())){if(zl(r,t,ml,!ul),0!==be(r,0,!0))break e;r.timeoutHandle=ud(Ll.bind(null,r,n,bl,kl,xl,t,ml,fl,yl,ul,o,2,-0,0),a)}else Ll(r,n,bl,kl,xl,t,ml,fl,yl,ul,o,0,-0,0)}break}a=Xl(e,t,!1),o=!1}Dc(e)}function Ll(e,t,n,r,a,o,s,u,l,c,d,h,p,f){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Ud={stylesheets:null,count:0,unsuspend:Vd},Xu(t),null!==(h=function(){if(null===Ud)throw Error(i(475));var e=Ud;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nc.bind(null,e,t,o,n,r,a,s,u,l,d,1,p,f)),void zl(e,o,s,!c);nc(e,t,o,n,r,a,s,u,l)}function jl(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!Yn(o(),a))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zl(e,t,n,r){t&=~gl,t&=~fl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var o=31-pe(a),i=1<<o;r[o]=-1,a&=~i}0!==n&&Se(e,n,t)}function Wl(){return 0!==(6&nl)||(kc(0,!1),!1)}function Ul(){if(null!==al){if(0===il)var e=al.return;else va=ya=null,Lo(e=al),Yi=null,Qi=0,e=al;for(;null!==e;)ou(e.alternate,e),e=e.return;al=null}}function Vl(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ld(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Ul(),rl=e,al=n=Lr(e.current,null),ol=t,il=0,sl=null,ul=!1,ll=xe(e,t),cl=!1,yl=ml=gl=fl=pl=hl=0,bl=vl=null,xl=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-pe(r),o=1<<a;t|=e[a],r&=~o}return dl=t,Fr(),n}function Hl(e,t){xo=null,_.H=Gi,t===Ga||t===qa?(t=$a(),il=3):t===Ka?(t=$a(),il=4):il=t===Ss?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,sl=t,null===al&&(hl=1,ws(e,Cr(t,e.current)))}function Gl(){var e=_.H;return _.H=Gi,null===e?Gi:e}function Kl(){var e=_.A;return _.A=el,e}function ql(){hl=4,ul||(4194048&ol)!==ol&&null!==as.current||(ll=!0),0===(134217727&pl)&&0===(134217727&fl)||null===rl||zl(rl,ol,ml,!1)}function Xl(e,t,n){var r=nl;nl|=2;var a=Gl(),o=Kl();rl===e&&ol===t||(kl=null,Vl(e,t)),t=!1;var i=hl;e:for(;;)try{if(0!==il&&null!==al){var s=al,u=sl;switch(il){case 8:Ul(),i=6;break e;case 3:case 2:case 9:case 6:null===as.current&&(t=!0);var l=il;if(il=0,sl=null,$l(e,s,u,l),n&&ll){i=0;break e}break;default:l=il,il=0,sl=null,$l(e,s,u,l)}}Yl(),i=hl;break}catch(c){Hl(e,c)}return t&&e.shellSuspendCounter++,va=ya=null,nl=r,_.H=a,_.A=o,null===al&&(rl=null,ol=0,Fr()),i}function Yl(){for(;null!==al;)Zl(al)}function Ql(){for(;null!==al&&!$();)Zl(al)}function Zl(e){var t=Zs(e.alternate,e,dl);e.memoizedProps=e.pendingProps,null===t?ec(e):al=t}function Jl(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ms(n,t,t.pendingProps,t.type,void 0,ol);break;case 11:t=Ms(n,t,t.pendingProps,t.type.render,t.ref,ol);break;case 5:Lo(t);default:ou(n,t),t=Zs(n,t=al=jr(t,dl),dl)}e.memoizedProps=e.pendingProps,null===t?ec(e):al=t}function $l(e,t,n,r){va=ya=null,Lo(t),Yi=null,Qi=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ka(t,n,a,!0),null!==(n=as.current)){switch(n.tag){case 13:return null===os?ql():null===n.alternate&&0===hl&&(hl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Xa?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),dc(e,r,a)),!1;case 22:return n.flags|=65536,r===Xa?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),dc(e,r,a)),!1}throw Error(i(435,n.tag))}return dc(e,r,a),ql(),!1}if(oa)return null!==(t=as.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==ua&&ga(Cr(e=Error(i(422),{cause:r}),n))):(r!==ua&&ga(Cr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Cr(r,n),so(e,a=ks(e.stateNode,r,a)),4!==hl&&(hl=2)),!1;var o=Error(i(520),{cause:r});if(o=Cr(o,n),null===vl?vl=[o]:vl.push(o),4!==hl&&(hl=2),null===t)return!0;r=Cr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,so(n,e=ks(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Cl||!Cl.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,Es(a=Cs(a),e,n,r),so(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,ol))return hl=1,ws(e,Cr(n,e.current)),void(al=null)}catch(o){if(null!==a)throw al=a,o;return hl=1,ws(e,Cr(n,e.current)),void(al=null)}32768&t.flags?(oa||1===r?e=!0:ll||0!==(536870912&ol)?e=!1:(ul=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=as.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(0!==(32768&t.flags))return void tc(t,ul);e=t.return;var n=ru(t.alternate,t,dl);if(null!==n)return void(al=n);if(null!==(t=t.sibling))return void(al=t);al=t=e}while(null!==t);0===hl&&(hl=5)}function tc(e,t){do{var n=au(e.alternate,e);if(null!==n)return n.flags&=32767,void(al=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(al=e);al=e=n}while(null!==e);hl=6,al=null}function nc(e,t,n,r,a,o,s,u,l){e.cancelPendingCommit=null;do{sc()}while(0!==El);if(0!==(6&nl))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,a,o){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,u=e.expirationTimes,l=e.hiddenUpdates;for(n=i&~n;0<n;){var c=31-pe(n),d=1<<c;s[c]=0,u[c]=-1;var h=l[c];if(null!==h)for(l[c]=null,c=0;c<h.length;c++){var p=h[c];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Se(e,r,0),0!==o&&0===a&&0!==e.tag&&(e.suspendedLanes|=o&~(i&~t))}(e,n,o|=Ar,s,u,l),e===rl&&(al=rl=null,ol=0),Al=t,Sl=e,Fl=n,Il=o,Nl=a,Tl=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Z(oe,function(){return uc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=_.T,_.T=null,a=P.p,P.p=2,s=nl,nl|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(m){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==a&&3!==h.nodeType||(u=s+a),h!==o||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++c===a&&(u=s),p===o&&++d===r&&(l=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,ku=t;null!==ku;)if(e=(t=ku).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,ku=e;else for(;null!==ku;){switch(o=(t=ku).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var g=ms(n.type,a,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){cc(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,ku=e;break}ku=t.return}}(e,t)}finally{nl=s,P.p=a,_.T=r}}El=1,rc(),ac(),oc()}}function rc(){if(1===El){El=0;var e=Sl,t=Al,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=_.T,_.T=null;var r=P.p;P.p=2;var a=nl;nl|=4;try{_u(t,e);var o=nd,i=er(e.containerInfo),s=o.focusedElem,u=o.selectionRange;if(i!==s&&s&&s.ownerDocument&&$n(s.ownerDocument.documentElement,s)){if(null!==u&&tr(s)){var l=u.start,c=u.end;if(void 0===c&&(c=l),"selectionStart"in s)s.selectionStart=l,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=s.textContent.length,g=Math.min(u.start,f),m=void 0===u.end?g:Math.min(u.end,f);!p.extend&&g>m&&(i=m,m=g,g=i);var y=Jn(s,g),v=Jn(s,m);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),g>m?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var x=d[s];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}nh=!!td,nd=td=null}finally{nl=a,P.p=r,_.T=n}}e.current=t,El=2}}function ac(){if(2===El){El=0;var e=Sl,t=Al,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=_.T,_.T=null;var r=P.p;P.p=2;var a=nl;nl|=4;try{Cu(e,t.alternate,t)}finally{nl=a,P.p=r,_.T=n}}El=3}}function oc(){if(4===El||3===El){El=0,ee();var e=Sl,t=Al,n=Fl,r=Tl;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?El=5:(El=0,Al=Sl=null,ic(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Cl=null),Ie(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,128===(128&t.current.flags))}catch(u){}if(null!==r){t=_.T,a=P.p,P.p=2,_.T=null;try{for(var o=e.onRecoverableError,i=0;i<r.length;i++){var s=r[i];o(s.value,{componentStack:s.stack})}}finally{_.T=t,P.p=a}}0!==(3&Fl)&&sc(),Dc(e),a=e.pendingLanes,0!==(4194090&n)&&0!==(42&a)?e===Rl?Ol++:(Ol=0,Rl=e):Ol=0,kc(0,!1)}}function ic(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,_a(t)))}function sc(e){return rc(),ac(),oc(),uc()}function uc(){if(5!==El)return!1;var e=Sl,t=Il;Il=0;var n=Ie(Fl),r=_.T,a=P.p;try{P.p=32>n?32:n,_.T=null,n=Nl,Nl=null;var o=Sl,s=Fl;if(El=0,Al=Sl=null,Fl=0,0!==(6&nl))throw Error(i(331));var u=nl;if(nl|=4,Zu(o.current),Vu(o,o.current,s,n),nl=u,kc(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,o)}catch(l){}return!0}finally{P.p=a,_.T=r,ic(e,t)}}function lc(e,t,n){t=Cr(n,t),null!==(e=oo(e,t=ks(e.stateNode,t,2),2))&&(Ee(e,2),Dc(e))}function cc(e,t,n){if(3===e.tag)lc(e,e,n);else for(;null!==t;){if(3===t.tag){lc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Cl||!Cl.has(r))){e=Cr(n,e),null!==(r=oo(t,n=Cs(2),2))&&(Es(n,r,t,e),Ee(r,2),Dc(r));break}}t=t.return}}function dc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tl;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(cl=!0,a.add(n),e=hc.bind(null,e,t,n),t.then(e,e))}function hc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rl===e&&(ol&n)===n&&(4===hl||3===hl&&(62914560&ol)===ol&&300>te()-wl?0===(2&nl)&&Vl(e,0):gl|=n,yl===ol&&(yl=0)),Dc(e)}function pc(e,t){0===t&&(t=ke()),null!==(e=Tr(e,t))&&(Ee(e,t),Dc(e))}function fc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pc(e,n)}function gc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),pc(e,n)}var mc=null,yc=null,vc=!1,bc=!1,xc=!1,wc=0;function Dc(e){e!==yc&&null===e.next&&(null===yc?mc=yc=e:yc=yc.next=e),bc=!0,vc||(vc=!0,dd(function(){0!==(6&nl)?Z(re,Cc):Ec()}))}function kc(e,t){if(!xc&&bc){xc=!0;do{for(var n=!1,r=mc;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var o=0;else{var i=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-pe(42|e)+1)-1,o=201326741&(o&=a&~(i&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Fc(r,o))}else o=ol,0===(3&(o=be(r,r===rl?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||xe(r,o)||(n=!0,Fc(r,o));r=r.next}}while(n);xc=!1}}function Cc(){Ec()}function Ec(){bc=vc=!1;var e=0;0!==wc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sd&&(sd=e,!0);return sd=null,!1}()&&(e=wc),wc=0);for(var t=te(),n=null,r=mc;null!==r;){var a=r.next,o=Sc(r,t);0===o?(r.next=null,null===n?mc=a:n.next=a,null===a&&(yc=n)):(n=r,(0!==e||0!==(3&o))&&(bc=!0)),r=a}kc(e,!1)}function Sc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var i=31-pe(o),s=1<<i,u=a[i];-1===u?0!==(s&n)&&0===(s&r)||(a[i]=we(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}if(n=ol,n=be(e,e===(t=rl)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===il||9===il)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ie(n)){case 2:case 8:n=ae;break;case 32:default:n=oe;break;case 268435456:n=se}return r=Ac.bind(null,e),n=Z(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Ac(e,t){if(0!==El&&5!==El)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sc()&&e.callbackNode!==n)return null;var r=ol;return 0===(r=be(e,e===rl?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Bl(e,r,t),Sc(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ac.bind(null,e):null)}function Fc(e,t){if(sc())return null;Bl(e,t,!0)}function Ic(){return 0===wc&&(wc=De()),wc}function Nc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Tc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Oc=0;Oc<wr.length;Oc++){var Rc=wr[Oc];Dr(Rc.toLowerCase(),"on"+(Rc[0].toUpperCase()+Rc.slice(1)))}Dr(pr,"onAnimationEnd"),Dr(fr,"onAnimationIteration"),Dr(gr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(mr,"onTransitionRun"),Dr(yr,"onTransitionStart"),Dr(vr,"onTransitionCancel"),Dr(br,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_c));function Mc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&a.isPropagationStopped())break e;o=s,a.currentTarget=l;try{o(a)}catch(c){ys(c)}a.currentTarget=null,o=u}else for(i=0;i<r.length;i++){if(u=(s=r[i]).instance,l=s.currentTarget,s=s.listener,u!==o&&a.isPropagationStopped())break e;o=s,a.currentTarget=l;try{o(a)}catch(c){ys(c)}a.currentTarget=null,o=u}}}}function Bc(e,t){var n=t[Pe];void 0===n&&(n=t[Pe]=new Set);var r=e+"__bubble";n.has(r)||(Wc(t,e,2,!1),n.add(r))}function Lc(e,t,n){var r=0;t&&(r|=4),Wc(n,e,r,t)}var jc="_reactListening"+Math.random().toString(36).slice(2);function zc(e){if(!e[jc]){e[jc]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Pc.has(t)||Lc(t,!1,e),Lc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jc]||(t[jc]=!0,Lc("selectionchange",!1,t))}}function Wc(e,t,n,r){switch(lh(t)){case 2:var a=rh;break;case 8:a=ah;break;default:a=oh}n=a.bind(null,t,n,e),a=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Uc(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&i.stateNode.containerInfo===a)return;i=i.return}for(;null!==s;){if(null===(i=We(s)))return;if(5===(l=i.tag)||6===l||26===l||27===l){r=o=i;continue e}s=s.parentNode}}r=r.return}Mt(function(){var r=o,a=Tt(n),i=[];e:{var s=xr.get(e);if(void 0!==s){var l=$t,c=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":l=gn;break;case"focusin":c="focus",l=on;break;case"focusout":c="blur",l=on;break;case"beforeblur":case"afterblur":l=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=yn;break;case pr:case fr:case gr:l=sn;break;case br:l=vn;break;case"scroll":case"scrollend":l=tn;break;case"wheel":l=bn;break;case"copy":case"cut":case"paste":l=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mn;break;case"toggle":case"beforetoggle":l=xn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==s?s+"Capture":null:s;d=[];for(var f,g=r;null!==g;){var m=g;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===p||null!=(m=Bt(g,p))&&d.push(Vc(g,m,f)),h)break;g=g.return}0<d.length&&(s=new l(s,c,null,n,a),i.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Nt||!(c=n.relatedTarget||n.fromElement)||!We(c)&&!c[_e])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?We(c):null)&&(h=u(c),d=c.tag,c!==h||5!==d&&27!==d&&6!==d)&&(c=null)):(l=null,c=r),l!==c)){if(d=rn,m="onMouseLeave",p="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=mn,m="onPointerLeave",p="onPointerEnter",g="pointer"),h=null==l?s:Ve(l),f=null==c?s:Ve(c),(s=new d(m,g+"leave",l,n,a)).target=h,s.relatedTarget=f,m=null,We(a)===r&&((d=new d(p,g+"enter",c,n,a)).target=f,d.relatedTarget=h,m=d),h=m,l&&c)e:{for(p=c,g=0,f=d=l;f;f=Gc(f))g++;for(f=0,m=p;m;m=Gc(m))f++;for(;0<g-f;)d=Gc(d),g--;for(;0<f-g;)p=Gc(p),f--;for(;g--;){if(d===p||null!==p&&d===p.alternate)break e;d=Gc(d),p=Gc(p)}d=null}else d=null;null!==l&&Kc(i,s,l,d,!1),null!==c&&null!==h&&Kc(i,h,c,d,!0)}if("select"===(l=(s=r?Ve(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var y=Ln;else if(On(s))if(jn)y=Xn;else{y=Kn;var v=Gn}else!(l=s.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&St(r.elementType)&&(y=Ln):y=qn;switch(y&&(y=y(e,r))?Rn(i,y,n,a):(v&&v(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),v=r?Ve(r):window,e){case"focusin":(On(v)||"true"===v.contentEditable)&&(rr=v,ar=r,or=null);break;case"focusout":or=ar=rr=null;break;case"mousedown":ir=!0;break;case"contextmenu":case"mouseup":case"dragend":ir=!1,sr(i,n,a);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(i,n,a)}var b;if(Dn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Nn?Fn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(En&&"ko"!==n.locale&&(Nn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Nn&&(b=Ht()):(Ut="value"in(Wt=a)?Wt.value:Wt.textContent,Nn=!0)),0<(v=Hc(r,x)).length&&(x=new ln(x,e,null,n,a),i.push({event:x,listeners:v}),b?x.data=b:null!==(b=In(n))&&(x.data=b))),(b=Cn?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(An=!0,Sn);case"textInput":return(e=t.data)===Sn&&An?null:e;default:return null}}(e,n):function(e,t){if(Nn)return"compositionend"===e||!Dn&&Fn(e,t)?(e=Ht(),Vt=Ut=Wt=null,Nn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return En&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Hc(r,"onBeforeInput")).length&&(v=new ln("onBeforeInput","beforeinput",null,n,a),i.push({event:v,listeners:x}),v.data=b)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var o=Nc((a[Re]||null).action),i=r.submitter;i&&null!==(t=(t=i[Re]||null)?Nc(t.formAction):i.getAttribute("formAction"))&&(o=t,i=null);var s=new $t("action","action",null,r,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wc){var e=i?Tc(a,i):new FormData(a);Ti(n,{pending:!0,data:e,method:a.method,action:o},null,e)}}else"function"===typeof o&&(s.preventDefault(),e=i?Tc(a,i):new FormData(a),Ti(n,{pending:!0,data:e,method:a.method,action:o},o,e))},currentTarget:a}]})}}(i,e,r,n,a)}Mc(i,t)})}function Vc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hc(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===o||(null!=(a=Bt(e,n))&&r.unshift(Vc(e,a,o)),null!=(a=Bt(e,t))&&r.push(Vc(e,a,o))),3===e.tag)return r;e=e.return}return[]}function Gc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Kc(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(s=s.tag,null!==u&&u===r)break;5!==s&&26!==s&&27!==s||null===l||(u=l,a?null!=(l=Bt(n,o))&&i.unshift(Vc(n,l,u)):a||null!=(l=Bt(n,o))&&i.push(Vc(n,l,u))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var qc=/\r\n?/g,Xc=/\u0000|\uFFFD/g;function Yc(e){return("string"===typeof e?e:""+e).replace(qc,"\n").replace(Xc,"")}function Qc(e,t){return t=Yc(t),Yc(e)===t}function Zc(){}function Jc(e,t,n,r,a,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Dt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Dt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Et(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Jc(e,t,"name",a.name,a,null),Jc(e,t,"formEncType",a.formEncType,a,null),Jc(e,t,"formMethod",a.formMethod,a,null),Jc(e,t,"formTarget",a.formTarget,a,null)):(Jc(e,t,"encType",a.encType,a,null),Jc(e,t,"method",a.method,a,null),Jc(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Zc);break;case"onScroll":null!=r&&Bc("scroll",e);break;case"onScrollEnd":null!=r&&Bc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Bc("beforetoggle",e),Bc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=At.get(n)||n,r)}}function $c(e,t,n,r,a,o){switch(n){case"style":Et(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Dt(e,r):("number"===typeof r||"bigint"===typeof r)&&Dt(e,""+r);break;case"onScroll":null!=r&&Bc("scroll",e);break;case"onScrollEnd":null!=r&&Bc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Zc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Re]||null)?o[n]:null)&&e.removeEventListener(t,o,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bc("error",e),Bc("load",e);var r,a=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":a=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Jc(e,t,r,s,n,null)}}return o&&Jc(e,t,"srcSet",n.srcSet,n,null),void(a&&Jc(e,t,"src",n.src,n,null));case"input":Bc("invalid",e);var u=r=s=o=null,l=null,c=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(null!=d)switch(a){case"name":o=d;break;case"type":s=d;break;case"checked":l=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":u=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:Jc(e,t,a,d,n,null)}}return yt(e,r,u,l,c,s,o,!1),void dt(e);case"select":for(o in Bc("invalid",e),a=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(u=n[o]))switch(o){case"value":r=u;break;case"defaultValue":s=u;break;case"multiple":a=u;default:Jc(e,t,o,u,n,null)}return t=r,n=s,e.multiple=!!a,void(null!=t?bt(e,!!a,t,!1):null!=n&&bt(e,!!a,n,!0));case"textarea":for(s in Bc("invalid",e),r=o=a=null,n)if(n.hasOwnProperty(s)&&null!=(u=n[s]))switch(s){case"value":a=u;break;case"defaultValue":o=u;break;case"children":r=u;break;case"dangerouslySetInnerHTML":if(null!=u)throw Error(i(91));break;default:Jc(e,t,s,u,n,null)}return wt(e,a,o,r),void dt(e);case"option":for(l in n)if(n.hasOwnProperty(l)&&null!=(a=n[l]))if("selected"===l)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else Jc(e,t,l,a,n,null);return;case"dialog":Bc("beforetoggle",e),Bc("toggle",e),Bc("cancel",e),Bc("close",e);break;case"iframe":case"object":Bc("load",e);break;case"video":case"audio":for(a=0;a<_c.length;a++)Bc(_c[a],e);break;case"image":Bc("error",e),Bc("load",e);break;case"details":Bc("toggle",e);break;case"embed":case"source":case"link":Bc("error",e),Bc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Jc(e,t,c,a,n,null)}return;default:if(St(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(a=n[d])&&$c(e,t,d,a,n,void 0));return}}for(u in n)n.hasOwnProperty(u)&&(null!=(a=n[u])&&Jc(e,t,u,a,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function ad(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function id(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sd=null;var ud="function"===typeof setTimeout?setTimeout:void 0,ld="function"===typeof clearTimeout?clearTimeout:void 0,cd="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof cd?function(e){return cd.resolve(null).then(e).catch(hd)}:ud;function hd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function fd(e,t){var n=t,r=0,a=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&wd(i.documentElement),2&n&&wd(i.body),4&n)for(wd(n=i.head),i=n.firstChild;i;){var s=i.nextSibling,u=i.nodeName;i[je]||"SCRIPT"===u||"STYLE"===u||"LINK"===u&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=s}}if(0===a)return e.removeChild(o),void Ah(t);a--}else"$"===n||"$?"===n||"$!"===n?a++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Ah(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function md(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function wd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var Dd=new Map,kd=new Set;function Cd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ed=P.d;P.d={f:function(){var e=Ed.f(),t=Wl();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Ri(t):Ed.r(e)},D:function(e){Ed.D(e),Ad("dns-prefetch",e,null)},C:function(e,t){Ed.C(e,t),Ad("preconnect",e,t)},L:function(e,t,n){Ed.L(e,t,n);var r=Sd;if(r&&e&&t){var a='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+gt(n.imageSizes)+'"]')):a+='[href="'+gt(e)+'"]';var o=a;switch(t){case"style":o=Id(e);break;case"script":o=Od(e)}Dd.has(o)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Dd.set(o,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Nd(o))||"script"===t&&r.querySelector(Rd(o))||(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Ed.m(e,t);var n=Sd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',o=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Od(e)}if(!Dd.has(o)&&(e=h({rel:"modulepreload",href:e},t),Dd.set(o,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rd(o)))return}ed(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Ed.X(e,t);var n=Sd;if(n&&e){var r=He(n).hoistableScripts,a=Od(e),o=r.get(a);o||((o=n.querySelector(Rd(a)))||(e=h({src:e,async:!0},t),(t=Dd.get(a))&&Bd(e,t),Ge(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}},S:function(e,t,n){Ed.S(e,t,n);var r=Sd;if(r&&e){var a=He(r).hoistableStyles,o=Id(e);t=t||"default";var i=a.get(o);if(!i){var s={loading:0,preload:null};if(i=r.querySelector(Nd(o)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Dd.get(o))&&Md(e,n);var u=i=r.createElement("link");Ge(u),ed(u,"link",e),u._p=new Promise(function(e,t){u.onload=e,u.onerror=t}),u.addEventListener("load",function(){s.loading|=1}),u.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Pd(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:s},a.set(o,i)}}},M:function(e,t){Ed.M(e,t);var n=Sd;if(n&&e){var r=He(n).hoistableScripts,a=Od(e),o=r.get(a);o||((o=n.querySelector(Rd(a)))||(e=h({src:e,async:!0,type:"module"},t),(t=Dd.get(a))&&Bd(e,t),Ge(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}}};var Sd="undefined"===typeof document?null:document;function Ad(e,t,n){var r=Sd;if(r&&"string"===typeof t&&t){var a=gt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),kd.has(a)||(kd.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function Fd(e,t,n,r){var a,o,s,u,l=(l=H.current)?Cd(l):null;if(!l)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Id(n.href),(r=(n=He(l).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Id(n.href);var c=He(l).hoistableStyles,d=c.get(e);if(d||(l=l.ownerDocument||l,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=l.querySelector(Nd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Dd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Dd.set(e,n),c||(a=l,o=e,s=n,u=d.state,a.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=a.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),ed(o,"link",s),Ge(o),a.head.appendChild(o))))),t&&null===r)throw Error(i(528,""));return d}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Od(n),(r=(n=He(l).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Id(e){return'href="'+gt(e)+'"'}function Nd(e){return'link[rel="stylesheet"]['+e+"]"}function Td(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Od(e){return'[src="'+gt(e)+'"]'}function Rd(e){return"script[async]"+e}function _d(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",a),Pd(r,n.precedence,e),t.instance=r;case"stylesheet":a=Id(n.href);var o=e.querySelector(Nd(a));if(o)return t.state.loading|=4,t.instance=o,Ge(o),o;r=Td(n),(a=Dd.get(a))&&Md(r,a),Ge(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",r),t.state.loading|=4,Pd(o,n.precedence,e),t.instance=o;case"script":return o=Od(n.src),(a=e.querySelector(Rd(o)))?(t.instance=a,Ge(a),a):(r=n,(a=Dd.get(o))&&Bd(r=h({},n),a),Ge(a=(e=e.ownerDocument||e).createElement("script")),ed(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Pd(r,n.precedence,e));return t.instance}function Pd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,o=a,i=0;i<r.length;i++){var s=r[i];if(s.dataset.precedence===t)o=s;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Bd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ld=null;function jd(e,t,n){if(null===Ld){var r=new Map,a=Ld=new Map;a.set(n,r)}else(r=(a=Ld).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[je]||o[Oe]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var i=o.getAttribute(t)||"";i=e+i;var s=r.get(i);s?s.push(o):r.set(i,[o])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Wd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Ud=null;function Vd(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(qd,e),Gd=null,Hd.call(e))}function qd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var i=a[o];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(a=t.instance).getAttribute("data-precedence"),(o=n.get(i)||r)===r&&n.set(null,a),n.set(i,a),this.count++,r=Hd.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),o?o.parentNode.insertBefore(a,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Xd={$$typeof:w,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Yd(e,t,n,r,a,o,i,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ce(0),this.hiddenUpdates=Ce(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Qd(e,t,n,r,a,o,i,s,u,l,c,d){return e=new Yd(e,t,n,i,s,u,l,d),t=1,!0===o&&(t|=24),o=Mr(3,null,null,t),e.current=o,o.stateNode=e,(t=Ra()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Zd(e){return e?e=_r:_r}function Jd(e,t,n,r,a,o){a=Zd(a),null===r.context?r.context=a:r.pendingContext=a,(r=ao(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Ml(n,0,t),io(n,e,t))}function $d(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){$d(e,t),(e=e.alternate)&&$d(e,t)}function th(e){if(13===e.tag){var t=Tr(e,67108864);null!==t&&Ml(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var a=_.T;_.T=null;var o=P.p;try{P.p=2,oh(e,t,n,r)}finally{P.p=o,_.T=a}}function ah(e,t,n,r){var a=_.T;_.T=null;var o=P.p;try{P.p=8,oh(e,t,n,r)}finally{P.p=o,_.T=a}}function oh(e,t,n,r){if(nh){var a=ih(r);if(null===a)Uc(e,t,r,sh,n),vh(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,a),!0;case"dragenter":return hh=bh(hh,e,t,n,r,a),!0;case"mouseover":return ph=bh(ph,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return fh.set(o,bh(fh.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,gh.set(o,bh(gh.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==a;){var o=Ue(a);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var i=ve(o.pendingLanes);if(0!==i){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;i;){var u=1<<31-pe(i);s.entanglements[1]|=u,i&=~u}Dc(o),0===(6&nl)&&(Dl=te()+500,kc(0,!1))}}break;case 13:null!==(s=Tr(o,2))&&Ml(s,0,2),Wl(),eh(o,2)}if(null===(o=ih(r))&&Uc(e,t,r,sh,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Uc(e,t,r,null,n)}}function ih(e){return uh(e=Tt(e))}var sh=null;function uh(e){if(sh=null,null!==(e=We(e))){var t=u(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sh=e,null}function lh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ae:return 8;case oe:case ie:return 32;case se:return 268435456;default:return 32}default:return 32}}var ch=!1,dh=null,hh=null,ph=null,fh=new Map,gh=new Map,mh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":fh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function bh(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=Ue(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function xh(e){var t=We(e.target);if(null!==t){var n=u(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void function(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}(e.priority,function(){if(13===n.tag){var e=_l();e=Fe(e);var t=Tr(n,e);null!==t&&Ml(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ih(e.nativeEvent);if(null!==n)return null!==(t=Ue(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Nt=r,n.target.dispatchEvent(r),Nt=null,t.shift()}return!0}function Dh(e,t,n){wh(e)&&n.delete(t)}function kh(){ch=!1,null!==dh&&wh(dh)&&(dh=null),null!==hh&&wh(hh)&&(hh=null),null!==ph&&wh(ph)&&(ph=null),fh.forEach(Dh),gh.forEach(Dh)}function Ch(e,t){e.blockedOn===t&&(e.blockedOn=null,ch||(ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kh)))}var Eh=null;function Sh(e){Eh!==e&&(Eh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Eh===e&&(Eh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===uh(r||n))continue;break}var o=Ue(n);null!==o&&(e.splice(t,3),t-=3,Ti(o,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Ah(e){function t(t){return Ch(t,e)}null!==dh&&Ch(dh,e),null!==hh&&Ch(hh,e),null!==ph&&Ch(ph,e),fh.forEach(t),gh.forEach(t);for(var n=0;n<mh.length;n++){var r=mh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<mh.length&&null===(n=mh[0]).blockedOn;)xh(n),null===n.blockedOn&&mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],o=n[r+1],i=a[Re]||null;if("function"===typeof o)i||Sh(n);else if(i){var s=null;if(o&&o.hasAttribute("formAction")){if(a=o,i=o[Re]||null)s=i.formAction;else if(null!==uh(a))continue}else s=i.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Sh(n)}}}function Fh(e){this._internalRoot=e}function Ih(e){this._internalRoot=e}Ih.prototype.render=Fh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Jd(t.current,_l(),e,t,null,null)},Ih.prototype.unmount=Fh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),Wl(),t[_e]=null}},Ih.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ne();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mh.length&&0!==t&&t<mh[n].priority;n++);mh.splice(n,0,e),0===n&&xh(e)}};var Nh=a.version;if("19.1.0"!==Nh)throw Error(i(527,Nh,"19.1.0"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=u(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return c(a),e;if(o===r)return c(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Th={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{ce=Oh.inject(Th),de=Oh}catch(_h){}}t.createRoot=function(e,t){if(!s(e))throw Error(i(299));var n=!1,r="",a=vs,o=bs,u=xs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(u=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qd(e,1,!1,null,0,n,r,a,o,u,0,null),e[_e]=t.current,zc(e),new Fh(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(i(299));var r=!1,a="",o=vs,u=bs,l=xs,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(u=n.onCaughtError),void 0!==n.onRecoverableError&&(l=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Qd(e,1,!0,t,0,r,a,o,u,l,0,c)).context=Zd(null),n=t.current,(a=ao(r=Fe(r=_l()))).callback=null,oo(n,a,r),n=r,t.current.lanes=n,Ee(t,n),Dc(t),e[_e]=t.current,zc(e),new Ih(t)},t.version="19.1.0"},7043:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!r.isSymbol(e))||("string"===typeof e&&(o.test(e)||!a.test(e))||null!=t&&Object.hasOwn(t,e)))}},7066:function(e,t,n){var r;!function(e,a){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},7231:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(3799),a=n(4879);t.range=function(e,t,n){n&&"number"!==typeof n&&r.isIterateeCall(e,t,n)&&(t=n=void 0),e=a.toFinite(e),void 0===t?(t=e,e=0):t=a.toFinite(t),n=void 0===n?e<t?1:-1:a.toFinite(n);const o=Math.max(Math.ceil((t-e)/(n||1)),0),i=new Array(o);for(let r=0;r<o;r++)i[r]=e,e+=n;return i}},7237:(e,t,n)=>{"use strict";e.exports=n(8365)},7260:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7294:function(e,t,n){"use strict";var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(4222)),a=n(8146);function o(e,t){var n={};return e&&"string"===typeof e?((0,r.default)(e,function(e,r){e&&r&&(n[(0,a.camelCase)(e,t)]=r)}),n):n}o.default=o,e.exports=o},7312:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[],r=Math.floor(t),a=(e,t)=>{for(let o=0;o<e.length;o++){const i=e[o];Array.isArray(i)&&t<r?a(i,t+1):n.push(i)}};return a(e,0),n}},7330:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9323);t.property=function(e){return function(t){return r.get(t,e)}}},7353:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(E){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},o={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=u(e,(0|e)<0?-1:0,!0),i&&(o[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),i&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(e>=p)return D}else{if(e<=-f)return k;if(e+1>=f)return w}return e<0?s(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=s,n.fromBits=u;var l=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=s(l(n,8)),o=m,i=0;i<e.length;i+=8){var u=Math.min(8,e.length-i),d=parseInt(e.substring(i,i+u),n);if(u<8){var h=s(l(n,u));o=o.mul(h).add(s(d))}else o=(o=o.mul(a)).add(s(d))}return o.unsigned=t,o}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?c(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=d;var h=4294967296,p=h*h,f=p/2,g=i(1<<24),m=i(0);n.ZERO=m;var y=i(0,!0);n.UZERO=y;var v=i(1);n.ONE=v;var b=i(1,!0);n.UONE=b;var x=i(-1);n.NEG_ONE=x;var w=u(-1,2147483647,!1);n.MAX_VALUE=w;var D=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=D;var k=u(0,-2147483648,!1);n.MIN_VALUE=k;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(l(e,6),this.unsigned),o=this,i="";;){var u=o.div(a),c=(o.sub(u.mul(a)).toInt()>>>0).toString(e);if((o=u).isZero())return c+i;for(;c.length<6;)c="0"+c;i=""+c+i}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1===(1&this.low)},C.isEven=function(){return 0===(1&this.low)},C.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(v)},C.neg=C.negate,C.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,l=e.low>>>16,c=0,h=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,h+=(p+=a+l)>>>16,c+=(h+=n+s)>>>16,c+=t+i,u((p&=65535)<<16|(f&=65535),(c&=65535)<<16|(h&=65535),this.unsigned)},C.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(k))return e.isOdd()?k:m;if(e.eq(k))return this.isOdd()?k:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,o=this.low>>>16,i=65535&this.low,l=e.high>>>16,c=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,y=0,v=0,b=0;return v+=(b+=i*p)>>>16,y+=(v+=o*p)>>>16,v&=65535,y+=(v+=i*h)>>>16,f+=(y+=a*p)>>>16,y&=65535,f+=(y+=o*h)>>>16,y&=65535,f+=(y+=i*c)>>>16,f+=n*p+a*h+o*c+i*l,u((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return b;o=y}else{if(this.eq(k))return e.eq(v)||e.eq(x)?k:e.eq(k)?v:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?v:x:(a=this.sub(e.mul(n)),o=n.add(a.div(e)));if(e.eq(k))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),c=i<=48?1:l(2,i-48),h=s(n),p=h.mul(e);p.isNegative()||p.gt(a);)p=(h=s(n-=c,this.unsigned)).mul(e);h.isZero()&&(h=v),o=o.add(h),a=a.sub(p)}return o},C.div=C.divide,C.modulo=function(e){return r(e)||(e=d(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.and=function(e){return r(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return r(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return r(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},7359:function(e,t,n){var r;!function(e,a){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},7599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7736:(e,t,n)=>{var r=n(3738).default,a=n(9045);e.exports=function(e){var t=a(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7770:(e,t,n)=>{e.exports=n(9323).get},7820:(e,t,n)=>{e.exports=n(5414).throttle},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8108:()=>{},8146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,r=/-([a-z])/g,a=/^[^-]+$/,o=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(e,t){return t.toUpperCase()},u=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||a.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(i,u):e.replace(o,u)).replace(r,s))}},8182:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9330),a=n(4737);t.isEqual=function(e,t){return r.isEqualWith(e,t,a.noop)}},8210:function(e,t,n){var r;!function(){"use strict";var a,o=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,u="[DecimalError] ",l=u+"Invalid argument: ",c=u+"Exponent out of range: ",d=Math.floor,h=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,g=9007199254740991,m=d(1286742750677284.5),y={};function v(e,t){var n,r,a,o,i,u,l,c,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),s?F(t,h):t;if(l=e.d,c=t.d,i=e.e,a=t.e,l=l.slice(),o=i-a){for(o<0?(r=l,o=-o,u=c.length):(r=c,a=i,u=l.length),o>(u=(i=Math.ceil(h/7))>u?i+1:u+1)&&(o=u,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((u=l.length)-(o=c.length)<0&&(o=u,r=c,c=l,l=r),n=0;o;)n=(l[--o]=l[o]+c[o]+n)/f|0,l[o]%=f;for(n&&(l.unshift(n),++a),u=l.length;0==l[--u];)l.pop();return t.d=l,t.e=a,s?F(t,h):t}function b(e,t,n){if(e!==~~e||e<t||e>n)throw Error(l+e)}function x(e){var t,n,r,a=e.length-1,o="",i=e[0];if(a>0){for(o+=i,t=1;t<a;t++)(n=7-(r=e[t]+"").length)&&(o+=E(n)),o+=r;(n=7-(r=(i=e[t])+"").length)&&(o+=E(n))}else if(0===i)return"0";for(;i%10===0;)i/=10;return o+i}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,a,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(a=e.d.length)?r:a;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===a?0:r>a^o.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return F(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return k(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,o=r.precision,i=o+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(a))throw Error(u+"NaN");if(n.s<1)throw Error(u+(n.s?"NaN":"-Infinity"));return n.eq(a)?new r(0):(s=!1,t=w(S(n,i),S(e,i),i),s=!0,F(t,o))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?I(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(!(e=new r(e)).s)throw Error(u+"NaN");return n.s?(s=!1,t=w(n,e,0,1).times(e),s=!0,n.minus(t)):F(new r(n),a)},y.naturalExponential=y.exp=function(){return D(this)},y.naturalLogarithm=y.ln=function(){return S(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):I(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(l+e);if(t=k(a)+1,n=7*(r=a.d.length-1)+1,r=a.d[r]){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,a,o,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(u+"NaN")}for(e=k(l),s=!1,0==(a=Math.sqrt(+l))||a==1/0?(((t=x(l.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new c(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new c(a.toString()),a=i=(n=c.precision)+3;;)if(r=(o=r).plus(w(l,o,i+2)).times(.5),x(o.d).slice(0,i)===(t=x(r.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(F(o,n+1,0),o.times(o).eq(l)){r=o;break}}else if("9999"!=t)break;i+=4}return s=!0,F(r,n)},y.times=y.mul=function(e){var t,n,r,a,o,i,u,l,c,d=this,h=d.constructor,p=d.d,g=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(l=p.length)<(c=g.length)&&(o=p,p=g,g=o,i=l,l=c,c=i),o=[],r=i=l+c;r--;)o.push(0);for(r=c;--r>=0;){for(t=0,a=l+r;a>r;)u=o[a]+g[r]*p[a-r-1]+t,o[a--]=u%f|0,t=u/f|0;o[a]=(o[a]+t)%f|0}for(;!o[--i];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,s?F(e,h.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(b(e,0,o),void 0===t?t=r.rounding:b(t,0,8),F(n,e+k(n)+1,t))},y.toExponential=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=N(r,!0):(b(e,0,o),void 0===t?t=a.rounding:b(t,0,8),n=N(r=F(new a(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?N(a):(b(e,0,o),void 0===t?t=i.rounding:b(t,0,8),n=N((r=F(new i(a),e+k(a)+1,t)).abs(),!1,e+k(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return F(new t(e),k(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,o,i,l,c=this,h=c.constructor,p=+(e=new h(e));if(!e.s)return new h(a);if(!(c=new h(c)).s){if(e.s<1)throw Error(u+"Infinity");return c}if(c.eq(a))return c;if(r=h.precision,e.eq(a))return F(c,r);if(l=(t=e.e)>=(n=e.d.length-1),i=c.s,l){if((n=p<0?-p:p)<=g){for(o=new h(a),t=Math.ceil(r/7+4),s=!1;n%2&&T((o=o.times(c)).d,t),0!==(n=d(n/2));)T((c=c.times(c)).d,t);return s=!0,e.s<0?new h(a).div(o):F(o,r)}}else if(i<0)throw Error(u+"NaN");return i=i<0&&1&e.d[Math.max(t,n)]?-1:1,c.s=1,s=!1,o=e.times(S(c,r+12)),s=!0,(o=D(o)).s=i,o},y.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?r=N(a,(n=k(a))<=i.toExpNeg||n>=i.toExpPos):(b(e,1,o),void 0===t?t=i.rounding:b(t,0,8),r=N(a=F(new i(a),e,t),e<=(n=k(a))||n<=i.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(b(e,1,o),void 0===t?t=n.rounding:b(t,0,8)),F(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=k(e),n=e.constructor;return N(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+r,e[a]=n%f|0,r=n/f|0;return r&&e.unshift(r),e}function t(e,t,n,r){var a,o;if(n!=r)o=n>r?1:-1;else for(a=o=0;a<n;a++)if(e[a]!=t[a]){o=e[a]>t[a]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,o,i){var s,l,c,d,h,p,g,m,y,v,b,x,w,D,C,E,S,A,I=r.constructor,N=r.s==a.s?1:-1,T=r.d,O=a.d;if(!r.s)return new I(r);if(!a.s)throw Error(u+"Division by zero");for(l=r.e-a.e,S=O.length,C=T.length,m=(g=new I(N)).d=[],c=0;O[c]==(T[c]||0);)++c;if(O[c]>(T[c]||0)&&--l,(x=null==o?o=I.precision:i?o+(k(r)-k(a))+1:o)<0)return new I(0);if(x=x/7+2|0,c=0,1==S)for(d=0,O=O[0],x++;(c<C||d)&&x--;c++)w=d*f+(T[c]||0),m[c]=w/O|0,d=w%O|0;else{for((d=f/(O[0]+1)|0)>1&&(O=e(O,d),T=e(T,d),S=O.length,C=T.length),D=S,v=(y=T.slice(0,S)).length;v<S;)y[v++]=0;(A=O.slice()).unshift(0),E=O[0],O[1]>=f/2&&++E;do{d=0,(s=t(O,y,S,v))<0?(b=y[0],S!=v&&(b=b*f+(y[1]||0)),(d=b/E|0)>1?(d>=f&&(d=f-1),1==(s=t(h=e(O,d),y,p=h.length,v=y.length))&&(d--,n(h,S<p?A:O,p))):(0==d&&(s=d=1),h=O.slice()),(p=h.length)<v&&h.unshift(0),n(y,h,v),-1==s&&(s=t(O,y,S,v=y.length))<1&&(d++,n(y,S<v?A:O,v)),v=y.length):0===s&&(d++,y=[0]),m[c++]=d,s&&y[0]?y[v++]=T[D]||0:(y=[T[D]],v=1)}while((D++<C||void 0!==y[0])&&x--)}return m[0]||m.shift(),g.e=l,F(g,i?o+k(g)+1:o)}}();function D(e,t){var n,r,o,i,u,l=0,d=0,p=e.constructor,f=p.precision;if(k(e)>16)throw Error(c+k(e));if(!e.s)return new p(a);for(null==t?(s=!1,u=f):u=t,i=new p(.03125);e.abs().gte(.1);)e=e.times(i),d+=5;for(u+=Math.log(h(2,d))/Math.LN10*2+5|0,n=r=o=new p(a),p.precision=u;;){if(r=F(r.times(e),u),n=n.times(++l),x((i=o.plus(w(r,n,u))).d).slice(0,u)===x(o.d).slice(0,u)){for(;d--;)o=F(o.times(o),u);return p.precision=f,null==t?(s=!0,F(o,f)):o}o=i}}function k(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function C(e,t,n){if(t>e.LN10.sd())throw s=!0,n&&(e.precision=n),Error(u+"LN10 precision limit exceeded");return F(new e(e.LN10),t)}function E(e){for(var t="";e--;)t+="0";return t}function S(e,t){var n,r,o,i,l,c,d,h,p,f=1,g=e,m=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(u+(g.s?"NaN":"-Infinity"));if(g.eq(a))return new y(0);if(null==t?(s=!1,h=v):h=t,g.eq(10))return null==t&&(s=!0),C(y,h);if(h+=10,y.precision=h,r=(n=x(m)).charAt(0),i=k(g),!(Math.abs(i)<15e14))return d=C(y,h+2,v).times(i+""),g=S(new y(r+"."+n.slice(1)),h-10).plus(d),y.precision=v,null==t?(s=!0,F(g,v)):g;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=x((g=g.times(e)).d)).charAt(0),f++;for(i=k(g),r>1?(g=new y("0."+n),i++):g=new y(r+"."+n.slice(1)),c=l=g=w(g.minus(a),g.plus(a),h),p=F(g.times(g),h),o=3;;){if(l=F(l.times(p),h),x((d=c.plus(w(l,new y(o),h))).d).slice(0,h)===x(c.d).slice(0,h))return c=c.times(2),0!==i&&(c=c.plus(C(y,h+2,v).times(i+""))),c=w(c,new y(f),h),y.precision=v,null==t?(s=!0,F(c,v)):c;c=d,o+=2}}function A(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(r,a)){if(a-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),s&&(e.e>m||e.e<-m))throw Error(c+n)}else e.s=0,e.e=0,e.d=[0];return e}function F(e,t,n){var r,a,o,i,u,l,p,g,y=e.d;for(i=1,o=y[0];o>=10;o/=10)i++;if((r=t-i)<0)r+=7,a=t,p=y[g=0];else{if((g=Math.ceil((r+1)/7))>=(o=y.length))return e;for(p=o=y[g],i=1;o>=10;o/=10)i++;a=(r%=7)-7+i}if(void 0!==n&&(u=p/(o=h(10,i-a-1))%10|0,l=t<0||void 0!==y[g+1]||p%o,l=n<4?(u||l)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||l||6==n&&(r>0?a>0?p/h(10,i-a):0:y[g-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return l?(o=k(e),y.length=1,t=t-o-1,y[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=g,o=1,g--):(y.length=g+1,o=h(10,7-r),y[g]=a>0?(p/h(10,i-a)%h(10,a)|0)*o:0),l)for(;;){if(0==g){(y[0]+=o)==f&&(y[0]=1,++e.e);break}if(y[g]+=o,y[g]!=f)break;y[g--]=0,o=1}for(r=y.length;0===y[--r];)y.pop();if(s&&(e.e>m||e.e<-m))throw Error(c+k(e));return e}function I(e,t){var n,r,a,o,i,u,l,c,d,h,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),s?F(t,g):t;if(l=e.d,h=t.d,r=t.e,c=e.e,l=l.slice(),i=c-r){for((d=i<0)?(n=l,i=-i,u=h.length):(n=h,r=c,u=l.length),i>(a=Math.max(Math.ceil(g/7),u)+2)&&(i=a,n.length=1),n.reverse(),a=i;a--;)n.push(0);n.reverse()}else{for((d=(a=l.length)<(u=h.length))&&(u=a),a=0;a<u;a++)if(l[a]!=h[a]){d=l[a]<h[a];break}i=0}for(d&&(n=l,l=h,h=n,t.s=-t.s),u=l.length,a=h.length-u;a>0;--a)l[u++]=0;for(a=h.length;a>i;){if(l[--a]<h[a]){for(o=a;o&&0===l[--o];)l[o]=f-1;--l[o],l[a]+=f}l[a]-=h[a]}for(;0===l[--u];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(t.d=l,t.e=r,s?F(t,g):t):new p(0)}function N(e,t,n){var r,a=k(e),o=x(e.d),i=o.length;return t?(n&&(r=n-i)>0?o=o.charAt(0)+"."+o.slice(1)+E(r):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(a<0?"e":"e+")+a):a<0?(o="0."+E(-a-1)+o,n&&(r=n-i)>0&&(o+=E(r))):a>=i?(o+=E(a+1-i),n&&(r=n-a-1)>0&&(o=o+"."+E(r))):((r=a+1)<i&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-i)>0&&(a+1===i&&(o+="."),o+=E(r))),e.s<0?"-"+o:o}function T(e,t){if(e.length>t)return e.length=t,!0}function O(e){if(!e||"object"!==typeof e)throw Error(u+"Object expected");var t,n,r,a=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(r=e[n=a[t]])){if(!(d(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(l+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(l+n+": "+r);this[n]=new this(r)}return this}i=function e(t){var n,r,a;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(l+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):A(t,e.toString())}if("string"!==typeof e)throw Error(l+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(l+e);A(t,e)}if(o.prototype=y,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=O,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<a.length;)t.hasOwnProperty(r=a[n++])||(t[r]=this[r]);return o.config(t),o}(i),i.default=i.Decimal=i,a=new i(1),void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},8268:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2132);t.isMatch=function(e,t){return r.isMatchWith(e,t,()=>{})}},8346:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365:(e,t,n)=>{"use strict";var r=n(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useSyncExternalStore,i=r.useRef,s=r.useEffect,u=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,c){var d=i(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=u(function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==c&&h.hasValue){var t=h.value;if(c(t,e))return i=t}return i=e}if(t=i,a(o,e))return t;var n=r(e);return void 0!==c&&c(t,n)?(o=e,t):(o=e,i=n)}var o,i,s=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,c]);var p=o(e,d[0],d[1]);return s(function(){h.hasValue=!0,h.value=p},[p]),l(p),p}},8396:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5508);t.cloneDeep=function(e){return r.cloneDeepWith(e)}},8420:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8499:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,i){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new a(r,o||e,i),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,o=r.length,i=new Array(o);a<o;a++)i[a]=r[a].fn;return i},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,a,o,i){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,a),!0;case 5:return c.fn.call(c.context,t,r,a,o),!0;case 6:return c.fn.call(c.context,t,r,a,o,i),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,a);break;default:if(!u)for(h=1,u=new Array(d-1);h<d;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,a){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return i(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||a&&!s.once||r&&s.context!==r||i(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||a&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:i(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},8590:()=>{},8845:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),a=n(3272),o=n(8396),i=n(9323),s=n(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":var n;Object.is(null===(n=e)||void 0===n?void 0:n.valueOf(),-0)&&(e="-0");break;case"number":e=a.toKey(e)}return t=o.cloneDeep(t),function(n){const a=i.get(n,e);return void 0===a?s.has(n,e):void 0===t?void 0===a:r.isMatch(a,t)}}},8853:(e,t,n)=>{"use strict";e.exports=n(5896)},9016:function(e,t,n){var r;!function(e,a){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9323:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(7260),a=n(2489),o=n(3272),i=n(1444);t.get=function e(t,n,s){if(null==t)return s;switch(typeof n){case"string":{if(r.isUnsafeProperty(n))return s;const o=t[n];return void 0===o?a.isDeepKey(n)?e(t,i.toPath(n),s):s:o}case"number":case"symbol":{"number"===typeof n&&(n=o.toKey(n));const e=t[n];return void 0===e?s:e}default:{var u;if(Array.isArray(n))return function(e,t,n){if(0===t.length)return n;let a=e;for(let o=0;o<t.length;o++){if(null==a)return n;if(r.isUnsafeProperty(t[o]))return n;a=a[t[o]]}if(void 0===a)return n;return a}(t,n,s);if(n=Object.is(null===(u=n)||void 0===u?void 0:u.valueOf(),-0)?"-0":String(n),r.isUnsafeProperty(n))return s;const e=t[n];return void 0===e?s:e}}}},9330:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4385),a=n(6443),o=n(5990),i=n(7599),s=n(9972);function u(e,t,n,r,a,o,i){const s=i(e,t,n,r,a,o);if(void 0!==s)return s;if(typeof e===typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return l(e,t,o,i)}return l(e,t,o,i)}function l(e,t,n,c){if(Object.is(e,t))return!0;let d=o.getTag(e),h=o.getTag(t);if(d===i.argumentsTag&&(d=i.objectTag),h===i.argumentsTag&&(h=i.objectTag),d!==h)return!1;switch(d){case i.stringTag:return e.toString()===t.toString();case i.numberTag:{const n=e.valueOf(),r=t.valueOf();return s.eq(n,r)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(e.valueOf(),t.valueOf());case i.regexpTag:return e.source===t.source&&e.flags===t.flags;case i.functionTag:return e===t}const p=(n=null!==n&&void 0!==n?n:new Map).get(e),f=n.get(t);if(null!=p&&null!=f)return p===t;n.set(e,t),n.set(t,e);try{switch(d){case i.mapTag:if(e.size!==t.size)return!1;for(const[r,a]of e.entries())if(!t.has(r)||!u(a,t.get(r),r,e,t,n,c))return!1;return!0;case i.setTag:{if(e.size!==t.size)return!1;const r=Array.from(e.values()),a=Array.from(t.values());for(let o=0;o<r.length;o++){const i=r[o],s=a.findIndex(r=>u(i,r,void 0,e,t,n,c));if(-1===s)return!1;a.splice(s,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:if("undefined"!==typeof Buffer&&Buffer.isBuffer(e)!==Buffer.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!u(e[r],t[r],r,e,t,n,c))return!1;return!0;case i.arrayBufferTag:return e.byteLength===t.byteLength&&l(new Uint8Array(e),new Uint8Array(t),n,c);case i.dataViewTag:return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&l(new Uint8Array(e),new Uint8Array(t),n,c);case i.errorTag:return e.name===t.name&&e.message===t.message;case i.objectTag:{if(!(l(e.constructor,t.constructor,n,c)||r.isPlainObject(e)&&r.isPlainObject(t)))return!1;const o=[...Object.keys(e),...a.getSymbols(e)],i=[...Object.keys(t),...a.getSymbols(t)];if(o.length!==i.length)return!1;for(let r=0;r<o.length;r++){const a=o[r],i=e[a];if(!Object.hasOwn(t,a))return!1;if(!u(i,t[a],a,e,t,n,c))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}t.isEqualWith=function(e,t,n){return u(e,t,void 0,void 0,void 0,void 0,n)}},9397:(e,t,n)=>{e.exports=n(2682).isPlainObject},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9538:function(e,t,n){var r;!function(e,a){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},9599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6392),a=n(8346),o=n(1203);t.last=function(e){if(o.isArrayLike(e))return r.last(a.toArray(e))}},9709:(e,t)=>{"use strict";function n(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,r)=>{if(e!==t){const a=n(e),o=n(t);if(a===o&&0===a){if(e<t)return"desc"===r?1:-1;if(e>t)return"desc"===r?-1:1}return"desc"===r?o-a:a-o}return 0}},9717:(e,t,n)=>{"use strict";var r=n(5043),a=n(9461);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=a.useSyncExternalStore,s=r.useRef,u=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l(function(){function e(e){if(!u){if(u=!0,i=e,e=r(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return s=t}return s=e}if(t=s,o(i,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(i=e,t):(i=e,s=n)}var i,s,u=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,a]);var p=i(e,d[0],d[1]);return u(function(){h.hasValue=!0,h.value=p},[p]),c(p),p}},9859:(e,t,n)=>{e.exports=n(7231).range},9921:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},9972:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(o,i),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".d1c529b6.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="drain-app:";n.l=(r,a,o,i)=>{if(e[r])e[r].push(a);else{var s,u;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[a];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="./",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=o);var i=n.p+n.u(t),s=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,o,i=r[0],s=r[1],u=r[2],l=0;if(i.some(t=>0!==e[t])){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);l<i.length;l++)o=i[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkdrain_app=self.webpackChunkdrain_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{boolean:()=>ka,booleanish:()=>Ca,commaOrSpaceSeparated:()=>Ia,commaSeparated:()=>Fa,number:()=>Sa,overloadedBoolean:()=>Ea,spaceSeparated:()=>Aa});var t={};n.r(t),n.d(t,{attentionMarkers:()=>as,contentInitial:()=>Ji,disable:()=>os,document:()=>Zi,flow:()=>es,flowInitial:()=>$i,insideSpan:()=>rs,string:()=>ts,text:()=>ns});var r={};n.r(r),n.d(r,{scaleBand:()=>vf,scaleDiverging:()=>hb,scaleDivergingLog:()=>pb,scaleDivergingPow:()=>gb,scaleDivergingSqrt:()=>mb,scaleDivergingSymlog:()=>fb,scaleIdentity:()=>im,scaleImplicit:()=>mf,scaleLinear:()=>om,scaleLog:()=>gm,scaleOrdinal:()=>yf,scalePoint:()=>xf,scalePow:()=>Cm,scaleQuantile:()=>Mm,scaleQuantize:()=>Bm,scaleRadial:()=>Am,scaleSequential:()=>ob,scaleSequentialLog:()=>ib,scaleSequentialPow:()=>ub,scaleSequentialQuantile:()=>cb,scaleSequentialSqrt:()=>lb,scaleSequentialSymlog:()=>sb,scaleSqrt:()=>Em,scaleSymlog:()=>bm,scaleThreshold:()=>Lm,scaleTime:()=>tb,scaleUtc:()=>nb,tickFormat:()=>rm});var a={};n.r(a),n.d(a,{assertParamsValid:()=>Mz,computeFlatOffset:()=>Yz,computeOutShape:()=>Lz,getNormalizedAxes:()=>Uz,isSliceContinous:()=>Xz,maskToAxes:()=>Bz,parseSliceParams:()=>Qz,sliceInfo:()=>Zz,startForAxis:()=>Kz,startIndicesWithElidedDims:()=>Vz,stopForAxis:()=>qz,stopIndicesWithElidedDims:()=>Hz,stridesForAxis:()=>Gz,stridesWithElidedDims:()=>jz});var o={};n.r(o),n.d(o,{collectGatherOpShapeInfo:()=>gG,computeOutShape:()=>fG,segOpComputeOptimalWindowSize:()=>pG});var i={};n.r(i),n.d(i,{ERF_A1:()=>TH,ERF_A2:()=>OH,ERF_A3:()=>RH,ERF_A4:()=>_H,ERF_A5:()=>PH,ERF_P:()=>NH,PARALLELIZE_THRESHOLD:()=>mH,RowPartitionType:()=>dH,SELU_SCALE:()=>IH,SELU_SCALEALPHA:()=>FH,applyActivation:()=>fV,assertAndGetBroadcastShape:()=>bz,assertAxesAreInnerMostDims:()=>sU,assertParamsConsistent:()=>lH,assignToTypedArray:()=>WH,axesAreInnerMostDims:()=>rU,calculateShapes:()=>AH,checkEinsumDimSizes:()=>QH,checkPadOnDimRoundingMode:()=>mW,combineLocations:()=>aU,combineRaggedTensorToTensorShapes:()=>hH,complexWithEvenIndex:()=>LH,complexWithOddIndex:()=>jH,computeConv2DInfo:()=>oW,computeConv3DInfo:()=>iW,computeDefaultPad:()=>sW,computeDilation2DInfo:()=>nW,computeOptimalWindowSize:()=>yH,computeOutAndReduceShapes:()=>oU,computeOutShape:()=>cH,computePool2DInfo:()=>rW,computePool3DInfo:()=>aW,convertConv2DDataFormat:()=>gW,decodeEinsumEquation:()=>XH,eitherStridesOrDilationsAreOne:()=>pW,expandShapeToKeepDim:()=>iU,exponent:()=>VH,exponents:()=>UH,fromStringArrayToUint8:()=>yG,fromUint8ToStringArray:()=>mG,getAxesPermutation:()=>uU,getBroadcastDims:()=>yz,getComplexWithIndex:()=>zH,getEinsumComputePath:()=>ZH,getEinsumPermutation:()=>YH,getFusedBiasGradient:()=>pV,getFusedDyActivation:()=>hV,getImageCenter:()=>vH,getInnerMostAxes:()=>cU,getPermuted:()=>xH,getRaggedRank:()=>fH,getReductionAxes:()=>vz,getReshaped:()=>bH,getReshapedPermuted:()=>wH,getRowPartitionTypesHelper:()=>pH,getSliceBeginCoords:()=>DH,getSliceSize:()=>kH,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>tG,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>nG,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>rG,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>iG,getSparseReshapeInputOutputMismatchErrorMessage:()=>uG,getSparseReshapeInputOutputMultipleErrorMessage:()=>sG,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>aG,getSparseReshapeNegativeOutputDimErrorMessage:()=>oG,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>hG,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>lG,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>cG,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>dG,getUndoAxesPermutation:()=>lU,isIdentityPermutation:()=>JH,log:()=>NB,mergeRealAndImagArrays:()=>MH,prepareAndValidate:()=>CH,prepareSplitSize:()=>eG,segment_util:()=>o,shouldFuse:()=>gV,slice_util:()=>a,splitRealAndImagArrays:()=>BH,stridesOrDilationsArePositive:()=>fW,tupleValuesAreOne:()=>hW,upcastType:()=>FL,validateDefaultValueShape:()=>gH,validateInput:()=>SH,validateUpdateShape:()=>EH,warn:()=>IB});var s={};n.r(s),n.d(s,{mx:()=>g1,XI:()=>s2,Nk:()=>u2,f6:()=>c2,ct:()=>c1,YG:()=>p2,hH:()=>b2,z3:()=>r3,sG:()=>f3,uM:()=>b3,vS:()=>M3,qB:()=>H3,GG:()=>K3,lg:()=>Z3,rq:()=>X3,cu:()=>c4,WR:()=>s4,GE:()=>p4,px:()=>g4,jC:()=>N4,He:()=>R4,hE:()=>V4,BF:()=>Y2,Dk:()=>$4,cl:()=>s5,_B:()=>x5,ub:()=>E5,_f:()=>F5,Ku:()=>_5,qy:()=>M5,Zy:()=>X5,bu:()=>Z5,zv:()=>t1,dH:()=>C1,HS:()=>r2,yH:()=>y6,l3:()=>b6,z9:()=>w6,x6:()=>S6,_m:()=>R6,eW:()=>L6,GK:()=>W6,SP:()=>H6,yr:()=>K6,dl:()=>E3,Dw:()=>J6,xT:()=>n8,_X:()=>T1,wz:()=>l8});var u=n(5043),l=n.t(u,2),c=n(4391);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function p(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r,"T").concat(a,":").concat(o)},y=()=>"id_".concat((new Date).getTime(),"_").concat(Math.random().toString(36).substr(2,9));var v=n(579);const b=e=>{let{drains:t,logs:n}=e;const r=[...t].sort((e,t)=>e.name.localeCompare(t.name));if(0===r.length)return(0,v.jsx)("p",{children:"Add drains to see the summary."});const a=n.reduce((e,t)=>{const n=new Date(t.date),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).toISOString().split("T")[0];return e[r]||(e[r]=[]),e[r].push(t),e},{}),o=Object.keys(a).sort((e,t)=>new Date(t)-new Date(e));return(0,v.jsx)("div",{className:"printable-summary",children:(0,v.jsxs)("table",{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Time"}),r.map(e=>(0,v.jsx)("th",{children:e.name},e.id))]})}),(0,v.jsx)("tbody",{children:0===n.length?(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:r.length+1,children:"No logs recorded yet."})}):o.map(e=>{const t=a[e].sort((e,t)=>new Date(e.date)-new Date(t.date)),n=[];let o=null;t.forEach(e=>{const t=new Date(e.date);(!o||t.getTime()-new Date(o.clumpTime).getTime()>6e5)&&(o&&n.push(o),o={clumpTime:e.date,outputs:{}}),o.outputs[e.drainId]=(o.outputs[e.drainId]||0)+parseFloat(e.amount)}),o&&n.push(o);const i={};return(0,v.jsxs)(u.Fragment,{children:[(0,v.jsx)("tr",{className:"day-header",children:(0,v.jsxs)("td",{colSpan:r.length+1,children:["Day: ",e]})}),n.map(e=>{const t=new Date(e.clumpTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:t}),r.map(t=>{const n=e.outputs[t.id]||0;return i[t.id]=(i[t.id]||0)+n,(0,v.jsx)("td",{children:n>0?"".concat(n.toFixed(1)," cc"):"-"},t.id)})]},e.clumpTime)}),(0,v.jsxs)("tr",{className:"total-row",children:[(0,v.jsx)("td",{children:"Total"}),r.map(e=>(0,v.jsxs)("td",{children:[(i[e.id]||0).toFixed(1)," cc"]},e.id))]})]},e)})})]})})};const x=e=>{let{onToggleTheme:t,isDark:n}=e;return(0,v.jsxs)("header",{className:"relative text-center mb-8 no-print",children:[(0,v.jsx)("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-500",children:"Drain Tracker"}),(0,v.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"A simple PWA to monitor drain output."}),(0,v.jsx)("div",{className:"absolute top-0 right-0",children:(0,v.jsxs)("button",{onClick:t,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900",children:[(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ".concat(n?"hidden":"block"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M12 5a7 7 0 100 14 7 7 0 000-14z"})}),(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ".concat(n?"block":"hidden"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})]})})]})};function w(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function D(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}function k(){let e=[],t={addEventListener:(e,n,r,a)=>(e.addEventListener(n,r,a),t.add(()=>e.removeEventListener(n,r,a))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add(()=>cancelAnimationFrame(e))},nextFrame(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(){let e=setTimeout(...arguments);return t.add(()=>clearTimeout(e))},microTask(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let a={current:!0};return D(()=>{a.current&&n[0]()}),t.add(()=>{a.current=!1})},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add(()=>{Object.assign(e.style,{[t]:r})})},group(e){let t=k();return e(t),this.add(()=>t.dispose())},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function C(){let[e]=(0,u.useState)(k);return(0,u.useEffect)(()=>()=>e.dispose(),[e]),e}var E=Object.defineProperty,S=(e,t,n)=>(((e,t,n)=>{t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let A=new class{constructor(){S(this,"current",this.detect()),S(this,"handoffState","pending"),S(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},F=(e,t)=>{A.isServer?(0,u.useEffect)(e,t):(0,u.useLayoutEffect)(e,t)};function I(e){let t=(0,u.useRef)(e);return F(()=>{t.current=e},[e]),t}let N=function(e){let t=I(e);return u.useCallback(function(){return t.current(...arguments)},[t])};function T(){let e=(0,u.useRef)(!1);return F(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function O(){let e=function(){let e="undefined"==typeof document;return(e=>e.useSyncExternalStore)(l)(()=>()=>{},()=>!1,()=>!e)}(),[t,n]=u.useState(A.isHandoffComplete);return t&&!1===A.isHandoffComplete&&n(!1),u.useEffect(()=>{!0!==t&&n(!0)},[t]),u.useEffect(()=>A.handoff(),[]),!e&&t}let R=Symbol();function _(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(e,{[R]:t})}function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=(0,u.useRef)(t);(0,u.useEffect)(()=>{r.current=t},[t]);let a=N(e=>{for(let t of r.current)null!=t&&("function"==typeof t?t(e):t.current=e)});return t.every(e=>null==e||(null==e?void 0:e[R]))?void 0:a}var M,B;"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&"test"===(null==(M=null==process?void 0:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})?void 0:M.NODE_ENV)&&"undefined"==typeof(null==(B=null==Element?void 0:Element.prototype)?void 0:B.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join("\n")),[]});var L=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(L||{});function j(e){let t={};for(let n in e)!0===e[n]&&(t["data-".concat(n)]="");return t}function z(e,t,n,r){let[a,o]=(0,u.useState)(n),{hasFlag:i,addFlag:s,removeFlag:l}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,n]=(0,u.useState)(e),r=(0,u.useCallback)(e=>n(e),[t]),a=(0,u.useCallback)(e=>n(t=>t|e),[t]),o=(0,u.useCallback)(e=>(t&e)===e,[t]),i=(0,u.useCallback)(e=>n(t=>t&~e),[n]),s=(0,u.useCallback)(e=>n(t=>t^e),[n]);return{flags:t,setFlag:r,addFlag:a,hasFlag:o,removeFlag:i,toggleFlag:s}}(e&&a?3:0),c=(0,u.useRef)(!1),d=(0,u.useRef)(!1),h=C();return F(()=>{var a;if(e)return n&&o(!0),t?(null==(a=null==r?void 0:r.start)||a.call(r,n),function(e,t){let{prepare:n,run:r,done:a,inFlight:o}=t,i=k();return function(e,t){let{inFlight:n,prepare:r}=t;if(null!=n&&n.current)return void r();let a=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=a}(e,{prepare:n,inFlight:o}),i.nextFrame(()=>{r(),i.requestAnimationFrame(()=>{i.add(function(e,t){var n,r;let a=k();if(!e)return a.dispose;let o=!1;a.add(()=>{o=!0});let i=null!=(r=null==(n=e.getAnimations)?void 0:n.call(e).filter(e=>e instanceof CSSTransition))?r:[];return 0===i.length?(t(),a.dispose):(Promise.allSettled(i.map(e=>e.finished)).then(()=>{o||t()}),a.dispose)}(e,a))})}),i.dispose}(t,{inFlight:c,prepare(){d.current?d.current=!1:d.current=c.current,c.current=!0,!d.current&&(n?(s(3),l(4)):(s(4),l(2)))},run(){d.current?n?(l(3),s(4)):(l(4),s(3)):n?l(1):s(1)},done(){var e;d.current&&"function"==typeof t.getAnimations&&t.getAnimations().length>0||(c.current=!1,l(7),n||o(!1),null==(e=null==r?void 0:r.end)||e.call(r,n))}})):void(n&&s(3))},[e,n,t,h]),e?[a,{closed:i(1),enter:i(2),leave:i(4),transition:i(2)||i(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}let W=(0,u.createContext)(null);W.displayName="OpenClosedContext";var U=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(U||{});function V(){return(0,u.useContext)(W)}function H(e){let{value:t,children:n}=e;return u.createElement(W.Provider,{value:t},n)}function G(e){let{children:t}=e;return u.createElement(W.Provider,{value:null},t)}function K(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}function q(e,t){if(e in t){let o=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return"function"==typeof o?o(...r):o}let o=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map(e=>'"'.concat(e,'"')).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(o,q),o}const X=["static"],Y=["unmount"],Q=["as","children","refName"];var Z=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Z||{}),J=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(J||{});function $(){let e=function(){let e=(0,u.useRef)([]),t=(0,u.useCallback)(t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)},[]);return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];if(!r.every(e=>null==e))return e.current=r,t}}();return(0,u.useCallback)(t=>function(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:a,features:o,visible:i=!0,name:s,mergeRefs:u}=e;u=null!=u?u:te;let l=ne(n,t);if(i)return ee(l,r,a,s,u);let c=null!=o?o:0;if(2&c){let{static:e=!1}=l,t=w(l,X);if(e)return ee(t,r,a,s,u)}if(1&c){let{unmount:e=!0}=l,t=w(l,Y);return q(e?0:1,{0:()=>null,1:()=>ee(g(g({},t),{},{hidden:!0,style:{display:"none"}}),r,a,s,u)})}return ee(l,r,a,s,u)}(g({mergeRefs:e},t)),[e])}function ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=ie(e,["unmount","static"]),{as:i=n,children:s,refName:l="ref"}=o,c=w(o,Q),d=void 0!==e.ref?{[l]:e.ref}:{},h="function"==typeof s?s(t):s;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(t){let e=!1,n=[];for(let[r,a]of Object.entries(t))"boolean"==typeof a&&(e=!0),!0===a&&n.push(r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())));if(e){p["data-headlessui-state"]=n.join(" ");for(let e of n)p["data-".concat(e)]=""}}if(i===u.Fragment&&(Object.keys(oe(c)).length>0||Object.keys(oe(p)).length>0)){if((0,u.isValidElement)(h)&&!(Array.isArray(h)&&h.length>1)){let e=h.props,t=null==e?void 0:e.className,n="function"==typeof t?function(){return K(t(...arguments),c.className)}:K(t,c.className),r=n?{className:n}:{},o=ne(h.props,oe(ie(c,["ref"])));for(let a in p)a in o&&delete p[a];return(0,u.cloneElement)(h,Object.assign({},o,p,d,{ref:a(se(h),d.ref)},r))}if(Object.keys(oe(c)).length>0)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(r,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(oe(c)).concat(Object.keys(oe(p))).map(e=>"  - ".concat(e)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>"  - ".concat(e)).join("\n")].join("\n"))}return(0,u.createElement)(i,Object.assign({},ie(c,["ref"]),i!==u.Fragment&&d,i!==u.Fragment&&p),h)}function te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(e=>null==e)?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},a={};for(let o of t)for(let e in o)e.startsWith("on")&&"function"==typeof o[e]?(null!=a[e]||(a[e]=[]),a[e].push(o[e])):r[e]=o[e];if(r.disabled||r["aria-disabled"])for(let o in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(o)&&(a[o]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let o in a)Object.assign(r,{[o](e){let t=a[o];for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(let a of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;a(e,...r)}}});return r}function re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},a={};for(let o of t)for(let e in o)e.startsWith("on")&&"function"==typeof o[e]?(null!=a[e]||(a[e]=[]),a[e].push(o[e])):r[e]=o[e];for(let o in a)Object.assign(r,{[o](){let e=a[o];for(let t of e)null==t||t(...arguments)}});return r}function ae(e){var t;return Object.assign((0,u.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function oe(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function ie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function se(e){return u.version.split(".")[0]>="19"?e.props.ref:e.ref}const ue=["transition","beforeEnter","afterEnter","beforeLeave","afterLeave","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"],le=["show","appear","unmount"];function ce(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||(null!=(t=e.as)?t:me)!==u.Fragment||1===u.Children.count(e.children)}let de=(0,u.createContext)(null);de.displayName="TransitionContext";var he=(e=>(e.Visible="visible",e.Hidden="hidden",e))(he||{});let pe=(0,u.createContext)(null);function fe(e){return"children"in e?fe(e.children):e.current.filter(e=>{let{el:t}=e;return null!==t.current}).filter(e=>{let{state:t}=e;return"visible"===t}).length>0}function ge(e,t){let n=I(e),r=(0,u.useRef)([]),a=T(),o=C(),i=N(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.Hidden,i=r.current.findIndex(t=>{let{el:n}=t;return n===e});-1!==i&&(q(t,{[J.Unmount](){r.current.splice(i,1)},[J.Hidden](){r.current[i].state="hidden"}}),o.microTask(()=>{var e;!fe(r)&&a.current&&(null==(e=n.current)||e.call(n))}))}),s=N(e=>{let t=r.current.find(t=>{let{el:n}=t;return n===e});return t?"visible"!==t.state&&(t.state="visible"):r.current.push({el:e,state:"visible"}),()=>i(e,J.Unmount)}),l=(0,u.useRef)([]),c=(0,u.useRef)(Promise.resolve()),d=(0,u.useRef)({enter:[],leave:[]}),h=N((e,n,r)=>{l.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter(t=>{let[n]=t;return n!==e})),null==t||t.chains.current[n].push([e,new Promise(e=>{l.current.push(e)})]),null==t||t.chains.current[n].push([e,new Promise(e=>{Promise.all(d.current[n].map(e=>{let[t,n]=e;return n})).then(()=>e())})]),"enter"===n?c.current=c.current.then(()=>null==t?void 0:t.wait.current).then(()=>r(n)):r(n)}),p=N((e,t,n)=>{Promise.all(d.current[t].splice(0).map(e=>{let[t,n]=e;return n})).then(()=>{var e;null==(e=l.current.shift())||e()}).then(()=>n(t))});return(0,u.useMemo)(()=>({children:r,register:s,unregister:i,onStart:h,onStop:p,wait:c,chains:d}),[s,i,r,h,p,d,c])}pe.displayName="NestingContext";let me=u.Fragment,ye=Z.RenderStrategy;let ve=ae(function(e,t){let{show:n,appear:r=!1,unmount:a=!0}=e,o=w(e,le),i=(0,u.useRef)(null),s=P(...ce(e)?[i,t]:null===t?[]:[t]);O();let l=V();if(void 0===n&&null!==l&&(n=(l&U.Open)===U.Open),void 0===n)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,d]=(0,u.useState)(n?"visible":"hidden"),h=ge(()=>{n||d("hidden")}),[p,f]=(0,u.useState)(!0),m=(0,u.useRef)([n]);F(()=>{!1!==p&&m.current[m.current.length-1]!==n&&(m.current.push(n),f(!1))},[m,n]);let y=(0,u.useMemo)(()=>({show:n,appear:r,initial:p}),[n,r,p]);F(()=>{n?d("visible"):!fe(h)&&null!==i.current&&d("hidden")},[n,h]);let v={unmount:a},b=N(()=>{var t;p&&f(!1),null==(t=e.beforeEnter)||t.call(e)}),x=N(()=>{var t;p&&f(!1),null==(t=e.beforeLeave)||t.call(e)}),D=$();return u.createElement(pe.Provider,{value:h},u.createElement(de.Provider,{value:y},D({ourProps:g(g({},v),{},{as:u.Fragment,children:u.createElement(be,g(g(g({ref:s},v),o),{},{beforeEnter:b,beforeLeave:x}))}),theirProps:{},defaultTag:u.Fragment,features:ye,visible:"visible"===c,name:"Transition"})))}),be=ae(function(e,t){var n,r;let{transition:a=!0,beforeEnter:o,afterEnter:i,beforeLeave:s,afterLeave:l,enter:c,enterFrom:d,enterTo:h,entered:p,leave:f,leaveFrom:m,leaveTo:y}=e,v=w(e,ue),[b,x]=(0,u.useState)(null),D=(0,u.useRef)(null),k=ce(e),C=P(...k?[D,t,x]:null===t?[]:[t]),E=null==(n=v.unmount)||n?J.Unmount:J.Hidden,{show:S,appear:A,initial:I}=function(){let e=(0,u.useContext)(de);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[T,R]=(0,u.useState)(S?"visible":"hidden"),_=function(){let e=(0,u.useContext)(pe);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:M,unregister:B}=_;F(()=>M(D),[M,D]),F(()=>{if(E===J.Hidden&&D.current)return S&&"visible"!==T?void R("visible"):q(T,{hidden:()=>B(D),visible:()=>M(D)})},[T,D,M,B,S,E]);let L=O();F(()=>{if(k&&L&&"visible"===T&&null===D.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[D,T,L,k]);let W=I&&!A,V=A&&S&&I,G=(0,u.useRef)(!1),X=ge(()=>{G.current||(R("hidden"),B(D))},_),Y=N(e=>{G.current=!0;let t=e?"enter":"leave";X.onStart(D,t,e=>{"enter"===e?null==o||o():"leave"===e&&(null==s||s())})}),Q=N(e=>{let t=e?"enter":"leave";G.current=!1,X.onStop(D,t,e=>{"enter"===e?null==i||i():"leave"===e&&(null==l||l())}),"leave"===t&&!fe(X)&&(R("hidden"),B(D))});(0,u.useEffect)(()=>{k&&a||(Y(S),Q(S))},[S,k,a]);let Z=!(!a||!k||!L||W),[,ee]=z(Z,b,S,{start:Y,end:Q}),te=oe(g({ref:C,className:(null==(r=K(v.className,V&&c,V&&d,ee.enter&&c,ee.enter&&ee.closed&&d,ee.enter&&!ee.closed&&h,ee.leave&&f,ee.leave&&!ee.closed&&m,ee.leave&&ee.closed&&y,!ee.transition&&S&&p))?void 0:r.trim())||void 0},j(ee))),ne=0;"visible"===T&&(ne|=U.Open),"hidden"===T&&(ne|=U.Closed),S&&"hidden"===T&&(ne|=U.Opening),!S&&"visible"===T&&(ne|=U.Closing);let re=$();return u.createElement(pe.Provider,{value:X},u.createElement(H,{value:ne},re({ourProps:te,theirProps:v,defaultTag:me,features:ye,visible:"visible"===T,name:"Transition.Child"})))}),xe=ae(function(e,t){let n=null!==(0,u.useContext)(de),r=null!==V();return u.createElement(u.Fragment,null,!n&&r?u.createElement(ve,g({ref:t},e)):u.createElement(be,g({ref:t},e)))}),we=Object.assign(ve,{Child:xe,Root:ve});var De=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(De||{});function ke(e,t,n,r){let a=I(n);(0,u.useEffect)(()=>{function n(e){a.current(e)}return(e=null!=e?e:window).addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)},[e,t,r])}class Ce extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}}var Ee,Se,Ae,Fe=Object.defineProperty,Ie=(e,t,n)=>(((e,t,n)=>{t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Ne=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Te=(e,t,n)=>(Ne(e,t,"read from private field"),n?n.call(e):t.get(e)),Oe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Re=(e,t,n,r)=>(Ne(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class _e{constructor(e){Oe(this,Ee,{}),Oe(this,Se,new Ce(()=>new Set)),Oe(this,Ae,new Set),Ie(this,"disposables",k()),Re(this,Ee,e)}dispose(){this.disposables.dispose()}get state(){return Te(this,Ee)}subscribe(e,t){let n={selector:e,callback:t,current:e(Te(this,Ee))};return Te(this,Ae).add(n),this.disposables.add(()=>{Te(this,Ae).delete(n)})}on(e,t){return Te(this,Se).get(e).add(t),this.disposables.add(()=>{Te(this,Se).get(e).delete(t)})}send(e){let t=this.reduce(Te(this,Ee),e);if(t!==Te(this,Ee)){Re(this,Ee,t);for(let e of Te(this,Ae)){let t=e.selector(Te(this,Ee));Pe(e.current,t)||(e.current=t,e.callback(t))}for(let t of Te(this,Se).get(e.type))t(Te(this,Ee),e)}}}function Pe(e,t){return!!Object.is(e,t)||"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&Me(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size===t.size&&Me(e.entries(),t.entries()):!(!Be(e)||!Be(t))&&Me(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()))}function Me(e,t){for(;;){let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}}function Be(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}function Le(e){let[t,n]=e(),r=k();return function(){t(...arguments),r.dispose(),r.microTask(n)}}Ee=new WeakMap,Se=new WeakMap,Ae=new WeakMap;var je=Object.defineProperty,ze=(e,t,n)=>(((e,t,n)=>{t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),We=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(We||{});let Ue={0(e,t){let n=t.id,r=e.stack,a=e.stack.indexOf(n);if(-1!==a){let t=e.stack.slice();return t.splice(a,1),t.push(n),r=t,g(g({},e),{},{stack:r})}return g(g({},e),{},{stack:[...e.stack,n]})},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(-1===r)return e;let a=e.stack.slice();return a.splice(r,1),g(g({},e),{},{stack:a})}};class Ve extends _e{constructor(){super(...arguments),ze(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),ze(this,"selectors",{isTop:(e,t)=>e.stack[e.stack.length-1]===t,inStack:(e,t)=>e.stack.includes(t)})}static new(){return new Ve({stack:[]})}reduce(e,t){return q(t.type,Ue,e,t)}}const He=new Ce(()=>Ve.new());var Ge=n(7237);function Ke(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe;return(0,Ge.useSyncExternalStoreWithSelector)(N(t=>e.subscribe(qe,t)),N(()=>e.state),N(()=>e.state),N(t),n)}function qe(e){return e}function Xe(e,t){let n=(0,u.useId)(),r=He.get(t),[a,o]=Ke(r,(0,u.useCallback)(e=>[r.selectors.isTop(e,n),r.selectors.inStack(e,n)],[r,n]));return F(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),!!e&&(!o||a)}function Ye(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"!=typeof document?document.defaultView:null,n=arguments.length>2?arguments[2]:void 0,r=Xe(e,"escape");ke(t,"keydown",e=>{r&&(e.defaultPrevented||e.key===De.Escape&&n(e))})}function Qe(e){var t,n;return A.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?null!=(n=null==(t=e.current)?void 0:t.ownerDocument)?n:document:null:document}let Ze=new Map,Je=new Map;function $e(e){var t;let n=null!=(t=Je.get(e))?t:0;return Je.set(e,n+1),0!==n||(Ze.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>et(e)}function et(e){var t;let n=null!=(t=Je.get(e))?t:1;if(1===n?Je.delete(e):Je.set(e,n-1),1!==n)return;let r=Ze.get(e);r&&(null===r["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Ze.delete(e))}function tt(e){let{allowed:t,disallowed:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Xe(e,"inert-others");F(()=>{var e,a;if(!r)return;let o=k();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&o.add($e(t));let i=null!=(a=null==t?void 0:t())?a:[];for(let t of i){if(!t)continue;let e=Qe(t);if(!e)continue;let n=t.parentElement;for(;n&&n!==e.body;){for(let e of n.children)i.some(t=>e.contains(t))||o.add($e(e));n=n.parentElement}}return o.dispose},[r,t,n])}function nt(e){return"object"==typeof e&&null!==e&&"nodeType"in e}function rt(e){return nt(e)&&"tagName"in e}function at(e){return rt(e)&&"accessKey"in e}function ot(e){return rt(e)&&"tabIndex"in e}function it(e){return at(e)&&"INPUT"===e.nodeName}function st(e){return at(e)&&"LABEL"===e.nodeName}function ut(e){return at(e)&&"FIELDSET"===e.nodeName}function lt(e){return at(e)&&"LEGEND"===e.nodeName}function ct(e,t,n){let r=I(e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&n()});(0,u.useEffect)(()=>{if(!e)return;let n=null===t?null:at(t)?t:t.current;if(!n)return;let a=k();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver(()=>r.current(n));e.observe(n),a.add(()=>e.disconnect())}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver(()=>r.current(n));e.observe(n),a.add(()=>e.disconnect())}return()=>a.dispose()},[t,r,e])}let dt=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>"".concat(e,":not([tabindex='-1'])")).join(","),ht=["[data-autofocus]"].map(e=>"".concat(e,":not([tabindex='-1'])")).join(",");var pt=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(pt||{}),ft=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ft||{}),gt=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(gt||{});function mt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(dt)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}var yt=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(yt||{});function vt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;return e!==(null==(n=Qe(e))?void 0:n.body)&&q(t,{0:()=>e.matches(dt),1(){let t=e;for(;null!==t;){if(t.matches(dt))return!0;t=t.parentElement}return!1}})}var bt=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(bt||{});function xt(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let wt=["textarea","input"].join(",");function Dt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort((e,n)=>{let r=t(e),a=t(n);if(null===r||null===a)return 0;let o=r.compareDocumentPosition(a);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function kt(e,t){let{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,i=Array.isArray(e)?n?Dt(e):e:64&t?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(ht)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):mt(e);a.length>0&&i.length>1&&(i=i.filter(e=>!a.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),r=null!=r?r:o.activeElement;let s,u=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,i.indexOf(r))-1;if(4&t)return Math.max(0,i.indexOf(r))+1;if(8&t)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=32&t?{preventScroll:!0}:{},d=0,h=i.length;do{if(d>=h||d+h<=0)return 0;let e=l+d;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}s=i[e],null==s||s.focus(c),d+=u}while(s!==o.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,wt))&&n}(s)&&s.select(),2}function Ct(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Et(){return Ct()||/Android/gi.test(window.navigator.userAgent)}function St(e,t,n,r){let a=I(n);(0,u.useEffect)(()=>{if(e)return document.addEventListener(t,n,r),()=>document.removeEventListener(t,n,r);function n(e){a.current(e)}},[e,t,r])}function At(e,t,n,r){let a=I(n);(0,u.useEffect)(()=>{if(e)return window.addEventListener(t,n,r),()=>window.removeEventListener(t,n,r);function n(e){a.current(e)}},[e,t,r])}function Ft(e,t,n){let r=I(n),a=(0,u.useCallback)(function(e,n){if(e.defaultPrevented)return;let a=n(e);if(null===a||!a.getRootNode().contains(a)||!a.isConnected)return;let o=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t);for(let t of o)if(null!==t&&(t.contains(a)||e.composed&&e.composedPath().includes(t)))return;return!vt(a,yt.Loose)&&-1!==a.tabIndex&&e.preventDefault(),r.current(e,a)},[r,t]),o=(0,u.useRef)(null);St(e,"pointerdown",e=>{var t,n;Et()||(o.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)},!0),St(e,"pointerup",e=>{if(Et()||!o.current)return;let t=o.current;return o.current=null,a(e,()=>t)},!0);let i=(0,u.useRef)({x:0,y:0});St(e,"touchstart",e=>{i.current.x=e.touches[0].clientX,i.current.y=e.touches[0].clientY},!0),St(e,"touchend",e=>{let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!(Math.abs(t-i.current.x)>=30||Math.abs(n-i.current.y)>=30))return a(e,()=>ot(e.target)?e.target:null)},!0),At(e,"blur",e=>a(e,()=>function(e){return at(e)&&"IFRAME"===e.nodeName}(window.document.activeElement)?window.document.activeElement:null),!0)}function It(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,u.useMemo)(()=>Qe(...t),[...t])}const Nt=["features"];var Tt=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Tt||{});let Ot=ae(function(e,t){var n;let{features:r=1}=e,a=w(e,Nt),o={ref:t,"aria-hidden":2===(2&r)||(null!=(n=a["aria-hidden"])?n:void 0),hidden:4===(4&r)||void 0,style:g({position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},4===(4&r)&&2!==(2&r)&&{display:"none"})};return $()({ourProps:o,theirProps:a,slot:{},defaultTag:"span",name:"Hidden"})});let Rt=(0,u.createContext)(null);function _t(e){let{children:t,node:n}=e,[r,a]=(0,u.useState)(null),o=Pt(null!=n?n:r);return u.createElement(Rt.Provider,{value:o},t,null===o&&u.createElement(Ot,{features:Tt.Hidden,ref:e=>{var t,n;if(e)for(let r of null!=(n=null==(t=Qe(e))?void 0:t.querySelectorAll("html > *, body > *"))?n:[])if(r!==document.body&&r!==document.head&&rt(r)&&null!=r&&r.contains(e)){a(r);break}}}))}function Pt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t;return null!=(t=(0,u.useContext)(Rt))?t:e}function Mt(){let e;return{before(t){let{doc:n}=t;var r;let a=n.documentElement,o=null!=(r=n.defaultView)?r:window;e=Math.max(0,o.innerWidth-a.clientWidth)},after(t){let{doc:n,d:r}=t,a=n.documentElement,o=Math.max(0,a.clientWidth-a.offsetWidth),i=Math.max(0,e-o);r.style(a,"paddingRight","".concat(i,"px"))}}}function Bt(){return Ct()?{before(e){let{doc:t,d:n,meta:r}=e;function a(e){return r.containers.flatMap(e=>e()).some(t=>t.contains(e))}n.microTask(()=>{var e;if("auto"!==window.getComputedStyle(t.documentElement).scrollBehavior){let e=k();e.style(t.documentElement,"scrollBehavior","auto"),n.add(()=>n.microTask(()=>e.dispose()))}let r=null!=(e=window.scrollY)?e:window.pageYOffset,o=null;n.addEventListener(t,"click",e=>{if(ot(e.target))try{let n=e.target.closest("a");if(!n)return;let{hash:r}=new URL(n.href),i=t.querySelector(r);ot(i)&&!a(i)&&(o=i)}catch(n){}},!0),n.addEventListener(t,"touchstart",e=>{if(ot(e.target)&&function(e){return rt(e)&&"style"in e}(e.target))if(a(e.target)){let t=e.target;for(;t.parentElement&&a(t.parentElement);)t=t.parentElement;n.style(t,"overscrollBehavior","contain")}else n.style(e.target,"touchAction","none")}),n.addEventListener(t,"touchmove",e=>{if(ot(e.target)){if(it(e.target))return;if(a(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}},{passive:!1}),n.add(()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;r!==t&&window.scrollTo(0,r),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Lt(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let jt=function(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];let s=t[e].call(n,...o);s&&(n=s,r.forEach(e=>e()))}}}(()=>new Map,{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:k(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT(e){let{doc:t,d:n,meta:r}=e,a={doc:t,d:n,meta:Lt(r)},o=[Bt(),Mt(),{before(e){let{doc:t,d:n}=e;n.style(t.documentElement,"overflow","hidden")}}];o.forEach(e=>{let{before:t}=e;return null==t?void 0:t(a)}),o.forEach(e=>{let{after:t}=e;return null==t?void 0:t(a)})},SCROLL_ALLOW(e){let{d:t}=e;t.dispose()},TEARDOWN(e){let{doc:t}=e;this.delete(t)}});function zt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>({containers:[]}),r=function(e){return(0,u.useSyncExternalStore)(e.subscribe,e.getSnapshot,e.getSnapshot)}(jt),a=t?r.get(t):void 0,o=!!a&&a.count>0;return F(()=>{if(t&&e)return jt.dispatch("PUSH",t,n),()=>jt.dispatch("POP",t,n)},[e,t]),o}function Wt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[document.body];zt(Xe(e,"scroll-lock"),t,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}})}jt.subscribe(()=>{let e=jt.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&jt.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&jt.dispatch("TEARDOWN",n)}});let Ut=(0,u.createContext)(()=>{});function Vt(e){let{value:t,children:n}=e;return u.createElement(Ut.Provider,{value:t},n)}let Ht=(0,u.createContext)(!1);function Gt(e){return u.createElement(Ht.Provider,{value:e.force},e.children)}let Kt=(0,u.createContext)(void 0);function qt(){return(0,u.useContext)(Kt)}function Xt(e){let{value:t,children:n}=e;return u.createElement(Kt.Provider,{value:t},n)}const Yt=["id"];let Qt=(0,u.createContext)(null);function Zt(){let e=(0,u.useContext)(Qt);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Zt),e}return e}function Jt(){var e,t;return null!=(t=null==(e=(0,u.useContext)(Qt))?void 0:e.value)?t:void 0}function $t(){let[e,t]=(0,u.useState)([]);return[e.length>0?e.join(" "):void 0,(0,u.useMemo)(()=>function(e){let n=N(e=>(t(t=>[...t,e]),()=>t(t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))),r=(0,u.useMemo)(()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value}),[n,e.slot,e.name,e.props,e.value]);return u.createElement(Qt.Provider,{value:r},e.children)},[t])]}Qt.displayName="DescriptionContext";let en=ae(function(e,t){let n=(0,u.useId)(),r=qt(),{id:a="headlessui-description-".concat(n)}=e,o=w(e,Yt),i=Zt(),s=P(t);F(()=>i.register(a),[a,i.register]);let l=r||!1,c=(0,u.useMemo)(()=>g(g({},i.slot),{},{disabled:l}),[i.slot,l]),d=g(g({ref:s},i.props),{},{id:a});return $()({ourProps:d,theirProps:o,slot:c,defaultTag:"p",name:i.name||"Description"})}),tn=Object.assign(en,{});function nn(e){let t=N(e),n=(0,u.useRef)(!1);(0,u.useEffect)(()=>(n.current=!1,()=>{n.current=!0,D(()=>{n.current&&t()})}),[t])}var rn=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(rn||{});function an(e,t){let n=(0,u.useRef)([]),r=N(e);(0,u.useEffect)(()=>{let e=[...n.current];for(let[a,o]of t.entries())if(n.current[a]!==o){let a=r(t,e);return n.current=t,a}},[r,...t])}let on=[];!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}(()=>{function e(e){if(!ot(e.target)||e.target===document.body||on[0]===e.target)return;let t=e.target;t=t.closest(dt),on.unshift(null!=t?t:e.target),on=on.filter(e=>null!=e&&e.isConnected),on.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});const sn=["initialFocus","initialFocusFallback","containers","features"];function un(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.current)rt(n.current)&&t.add(n.current);return t}var ln=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ln||{});let cn=ae(function(e,t){let n=(0,u.useRef)(null),r=P(n,t),{initialFocus:a,initialFocusFallback:o,containers:i,features:s=15}=e,l=w(e,sn);O()||(s=0);let c=It(n);!function(e,t){let{ownerDocument:n}=t,r=!!(8&e),a=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,u.useRef)(on.slice());return an((e,n)=>{let[r]=e,[a]=n;!0===a&&!1===r&&D(()=>{t.current.splice(0)}),!1===a&&!0===r&&(t.current=on.slice())},[e,on,t]),N(()=>{var e;return null!=(e=t.current.find(e=>null!=e&&e.isConnected))?e:null})}(r);an(()=>{r||(null==n?void 0:n.activeElement)===(null==n?void 0:n.body)&&xt(a())},[r]),nn(()=>{r&&xt(a())})}(s,{ownerDocument:c});let d=hn(s,{ownerDocument:c,container:n,initialFocus:a,initialFocusFallback:o});pn(s,{ownerDocument:c,container:n,containers:i,previousActiveElement:d});let h=function(){let e=(0,u.useRef)(0);return At(!0,"keydown",t=>{"Tab"===t.key&&(e.current=t.shiftKey?1:0)},!0),e}(),p=N(e=>{if(!at(n.current))return;let t=n.current;q(h.current,{[rn.Forwards]:()=>{kt(t,pt.First,{skipElements:[e.relatedTarget,o]})},[rn.Backwards]:()=>{kt(t,pt.Last,{skipElements:[e.relatedTarget,o]})}})}),f=Xe(!!(2&s),"focus-trap#tab-lock"),g=C(),m=(0,u.useRef)(!1),y={ref:r,onKeyDown(e){"Tab"==e.key&&(m.current=!0,g.requestAnimationFrame(()=>{m.current=!1}))},onBlur(e){if(!(4&s))return;let t=un(i);at(n.current)&&t.add(n.current);let r=e.relatedTarget;ot(r)&&"true"!==r.dataset.headlessuiFocusGuard&&(fn(t,r)||(m.current?kt(n.current,q(h.current,{[rn.Forwards]:()=>pt.Next,[rn.Backwards]:()=>pt.Previous})|pt.WrapAround,{relativeTo:e.target}):ot(e.target)&&xt(e.target)))}},v=$();return u.createElement(u.Fragment,null,f&&u.createElement(Ot,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Tt.Focusable}),v({ourProps:y,theirProps:l,defaultTag:"div",name:"FocusTrap"}),f&&u.createElement(Ot,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Tt.Focusable}))}),dn=Object.assign(cn,{features:ln});function hn(e,t){let{ownerDocument:n,container:r,initialFocus:a,initialFocusFallback:o}=t,i=(0,u.useRef)(null),s=Xe(!!(1&e),"focus-trap#initial-focus"),l=T();return an(()=>{if(0===e)return;if(!s)return void(null!=o&&o.current&&xt(o.current));let t=r.current;t&&D(()=>{if(!l.current)return;let r=null==n?void 0:n.activeElement;if(null!=a&&a.current){if((null==a?void 0:a.current)===r)return void(i.current=r)}else if(t.contains(r))return void(i.current=r);if(null!=a&&a.current)xt(a.current);else{if(16&e){if(kt(t,pt.First|pt.AutoFocus)!==ft.Error)return}else if(kt(t,pt.First)!==ft.Error)return;if(null!=o&&o.current&&(xt(o.current),(null==n?void 0:n.activeElement)===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=null==n?void 0:n.activeElement})},[o,s,e]),i}function pn(e,t){let{ownerDocument:n,container:r,containers:a,previousActiveElement:o}=t,i=T(),s=!!(4&e);ke(null==n?void 0:n.defaultView,"focus",e=>{if(!s||!i.current)return;let t=un(a);at(r.current)&&t.add(r.current);let n=o.current;if(!n)return;let u=e.target;at(u)?fn(t,u)?(o.current=u,xt(u)):(e.preventDefault(),e.stopPropagation(),xt(n)):xt(o.current)},!0)}function fn(e,t){for(let n of e)if(n.contains(t))return!0;return!1}var gn=n(7950);const mn=["ownerDocument"],yn=["enabled","ownerDocument"],vn=["target"];function bn(e){let t=(0,u.useContext)(Ht),n=(0,u.useContext)(kn),[r,a]=(0,u.useState)(()=>{var r;if(!t&&null!==n)return null!=(r=n.current)?r:null;if(A.isServer)return null;let a=null==e?void 0:e.getElementById("headlessui-portal-root");if(a)return a;if(null===e)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)});return(0,u.useEffect)(()=>{null!==r&&(null!=e&&e.body.contains(r)||null==e||e.body.appendChild(r))},[r,e]),(0,u.useEffect)(()=>{t||null!==n&&a(n.current)},[n,a,t]),r}let xn=u.Fragment,wn=ae(function(e,t){let{ownerDocument:n=null}=e,r=w(e,mn),a=(0,u.useRef)(null),o=P(_(e=>{a.current=e}),t),i=It(a),s=null!=n?n:i,l=bn(s),[c]=(0,u.useState)(()=>{var e;return A.isServer?null:null!=(e=null==s?void 0:s.createElement("div"))?e:null}),d=(0,u.useContext)(Cn),h=O();F(()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))},[l,c]),F(()=>{if(c&&d)return d.register(c)},[d,c]),nn(()=>{var e;!l||!c||(nt(c)&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&(null==(e=l.parentElement)||e.removeChild(l)))});let p=$();return h&&l&&c?(0,gn.createPortal)(p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:xn,name:"Portal"}),c):null});let Dn=u.Fragment,kn=(0,u.createContext)(null);let Cn=(0,u.createContext)(null);function En(){let e=(0,u.useContext)(Cn),t=(0,u.useRef)([]),n=N(n=>(t.current.push(n),e&&e.register(n),()=>r(n))),r=N(n=>{let r=t.current.indexOf(n);-1!==r&&t.current.splice(r,1),e&&e.unregister(n)}),a=(0,u.useMemo)(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,(0,u.useMemo)(()=>function(e){let{children:t}=e;return u.createElement(Cn.Provider,{value:a},t)},[a])]}let Sn=ae(function(e,t){let n=P(t),{enabled:r=!0,ownerDocument:a}=e,o=w(e,yn),i=$();return r?u.createElement(wn,g(g({},o),{},{ownerDocument:a,ref:n})):i({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:xn,name:"Portal"})}),An=ae(function(e,t){let{target:n}=e,r=w(e,vn),a={ref:P(t)},o=$();return u.createElement(kn.Provider,{value:n},o({ourProps:a,theirProps:r,defaultTag:Dn,name:"Popover.Group"}))}),Fn=Object.assign(Sn,{Group:An});const In=["id","open","onClose","initialFocus","role","autoFocus","__demoMode","unmount"],Nn=["transition","open"],Tn=["id","transition"],On=["transition"],Rn=["id"];var _n=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(_n||{}),Pn=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Pn||{});let Mn={0:(e,t)=>e.titleId===t.id?e:g(g({},e),{},{titleId:t.id})},Bn=(0,u.createContext)(null);function Ln(e){let t=(0,u.useContext)(Bn);if(null===t){let t=new Error("<".concat(e," /> is missing a parent <Dialog /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,Ln),t}return t}function jn(e,t){return q(t.type,Mn,e,t)}Bn.displayName="DialogContext";let zn=ae(function(e,t){let n=(0,u.useId)(),{id:r="headlessui-dialog-".concat(n),open:a,onClose:o,initialFocus:i,role:s="dialog",autoFocus:l=!0,__demoMode:c=!1,unmount:d=!1}=e,h=w(e,In),p=(0,u.useRef)(!1);s="dialog"===s||"alertdialog"===s?s:(p.current||(p.current=!0,console.warn("Invalid role [".concat(s,"] passed to <Dialog />. Only `dialog` and and `alertdialog` are supported. Using `dialog` instead."))),"dialog");let f=V();void 0===a&&null!==f&&(a=(f&U.Open)===U.Open);let g=(0,u.useRef)(null),m=P(g,t),y=It(g),v=a?0:1,[b,x]=(0,u.useReducer)(jn,{titleId:null,descriptionId:null,panelRef:(0,u.createRef)()}),D=N(()=>o(!1)),k=N(e=>x({type:0,id:e})),C=!!O()&&0===v,[E,S]=En(),A={get current(){var e;return null!=(e=b.panelRef.current)?e:g.current}},I=Pt(),{resolveContainers:T}=function(){let{defaultContainers:e=[],portals:t,mainTreeNode:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=It(n),a=N(()=>{var a,o;let i=[];for(let t of e)null!==t&&(rt(t)?i.push(t):"current"in t&&rt(t.current)&&i.push(t.current));if(null!=t&&t.current)for(let e of t.current)i.push(e);for(let e of null!=(a=null==r?void 0:r.querySelectorAll("html > *, body > *"))?a:[])e!==document.body&&e!==document.head&&rt(e)&&"headlessui-portal-root"!==e.id&&(n&&(e.contains(n)||e.contains(null==(o=null==n?void 0:n.getRootNode())?void 0:o.host))||i.some(t=>e.contains(t))||i.push(e));return i});return{resolveContainers:a,contains:N(e=>a().some(t=>t.contains(e)))}}({mainTreeNode:I,portals:E,defaultContainers:[A]}),R=null!==f&&(f&U.Closing)===U.Closing;tt(!c&&!R&&C,{allowed:N(()=>{var e,t;return[null!=(t=null==(e=g.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:N(()=>{var e;return[null!=(e=null==I?void 0:I.closest("body > *:not(#headlessui-portal-root)"))?e:null]})});let _=He.get(null);F(()=>{if(C)return _.actions.push(r),()=>_.actions.pop(r)},[_,r,C]);let M=Ke(_,(0,u.useCallback)(e=>_.selectors.isTop(e,r),[_,r]));Ft(M,T,e=>{e.preventDefault(),D()}),Ye(M,null==y?void 0:y.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),D()}),Wt(!c&&!R&&C,y,T),ct(C,g,D);let[B,L]=$t(),j=(0,u.useMemo)(()=>[{dialogState:v,close:D,setTitleId:k,unmount:d},b],[v,b,D,k,d]),z=(0,u.useMemo)(()=>({open:0===v}),[v]),W={ref:m,id:r,role:s,tabIndex:-1,"aria-modal":c?void 0:0===v||void 0,"aria-labelledby":b.titleId,"aria-describedby":B,unmount:d},H=!function(){var e;let[t]=(0,u.useState)(()=>"undefined"!=typeof window&&"function"==typeof window.matchMedia?window.matchMedia("(pointer: coarse)"):null),[n,r]=(0,u.useState)(null!=(e=null==t?void 0:t.matches)&&e);return F(()=>{if(t)return t.addEventListener("change",e),()=>t.removeEventListener("change",e);function e(e){r(e.matches)}},[t]),n}(),K=ln.None;C&&!c&&(K|=ln.RestoreFocus,K|=ln.TabLock,l&&(K|=ln.AutoFocus),H&&(K|=ln.InitialFocus));let q=$();return u.createElement(G,null,u.createElement(Gt,{force:!0},u.createElement(Fn,null,u.createElement(Bn.Provider,{value:j},u.createElement(An,{target:g},u.createElement(Gt,{force:!1},u.createElement(L,{slot:z},u.createElement(S,null,u.createElement(dn,{initialFocus:i,initialFocusFallback:g,containers:T,features:K},u.createElement(Vt,{value:D},q({ourProps:W,theirProps:h,slot:z,defaultTag:Wn,features:Un,visible:0===v,name:"Dialog"})))))))))))}),Wn="div",Un=Z.RenderStrategy|Z.Static;let Vn=ae(function(e,t){let{transition:n=!1,open:r}=e,a=w(e,Nn),o=V(),i=e.hasOwnProperty("open")||null!==o,s=e.hasOwnProperty("onClose");if(!i&&!s)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!i)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!s)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&"boolean"!=typeof e.open)throw new Error("You provided an `open` prop to the `Dialog`, but the value is not a boolean. Received: ".concat(e.open));if("function"!=typeof e.onClose)throw new Error("You provided an `onClose` prop to the `Dialog`, but the value is not a function. Received: ".concat(e.onClose));return void 0===r&&!n||a.static?u.createElement(_t,null,u.createElement(zn,g({ref:t,open:r},a))):u.createElement(_t,null,u.createElement(we,{show:r,transition:n,unmount:a.unmount},u.createElement(zn,g({ref:t},a))))}),Hn=ae(function(e,t){let n=(0,u.useId)(),{id:r="headlessui-dialog-panel-".concat(n),transition:a=!1}=e,o=w(e,Tn),[{dialogState:i,unmount:s},l]=Ln("Dialog.Panel"),c=P(t,l.panelRef),d=(0,u.useMemo)(()=>({open:0===i}),[i]),h=N(e=>{e.stopPropagation()}),p={ref:c,id:r,onClick:h},f=a?xe:u.Fragment,m=a?{unmount:s}:{},y=$();return u.createElement(f,g({},m),y({ourProps:p,theirProps:o,slot:d,defaultTag:"div",name:"Dialog.Panel"}))}),Gn=(ae(function(e,t){let{transition:n=!1}=e,r=w(e,On),[{dialogState:a,unmount:o}]=Ln("Dialog.Backdrop"),i=(0,u.useMemo)(()=>({open:0===a}),[a]),s={ref:t,"aria-hidden":!0},l=n?xe:u.Fragment,c=n?{unmount:o}:{},d=$();return u.createElement(l,g({},c),d({ourProps:s,theirProps:r,slot:i,defaultTag:"div",name:"Dialog.Backdrop"}))}),ae(function(e,t){let n=(0,u.useId)(),{id:r="headlessui-dialog-title-".concat(n)}=e,a=w(e,Rn),[{dialogState:o,setTitleId:i}]=Ln("Dialog.Title"),s=P(t);(0,u.useEffect)(()=>(i(r),()=>i(null)),[r,i]);let l=(0,u.useMemo)(()=>({open:0===o}),[o]),c={ref:s,id:r};return $()({ourProps:c,theirProps:a,slot:l,defaultTag:"h2",name:"Dialog.Title"})})),Kn=Object.assign(Vn,{Panel:Hn,Title:Gn,Description:tn});const qn="undefined"!==typeof document?u.useLayoutEffect:()=>{};function Xn(e){const t=(0,u.useRef)(null);return qn(()=>{t.current=e},[e]),(0,u.useCallback)(function(){const e=t.current;return null===e||void 0===e?void 0:e(...arguments)},[])}function Yn(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function Qn(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function Zn(e){let t=(0,u.useRef)({isFocused:!1,observer:null});qn(()=>{const e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}},[]);let n=Xn(t=>{null===e||void 0===e||e(t)});return(0,u.useCallback)(e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target,a=e=>{if(t.current.isFocused=!1,r.disabled){let t=Yn(e);n(t)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",a,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let Jn=!1;function $n(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function er(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function tr(e){let t=null;return()=>(null==t&&(t=e()),t)}const nr=tr(function(){return er(/^Mac/i)}),rr=tr(function(){return er(/^iPhone/i)}),ar=tr(function(){return er(/^iPad/i)||nr()&&navigator.maxTouchPoints>1}),or=tr(function(){return rr()||ar()}),ir=(tr(function(){return nr()||or()}),tr(function(){return $n(/AppleWebKit/i)&&!ir()}),tr(function(){return $n(/Chrome/i)})),sr=tr(function(){return $n(/Android/i)});tr(function(){return $n(/Firefox/i)});const ur=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.ownerDocument)&&void 0!==t?t:document},lr=e=>{if(e&&"window"in e&&e.window===e)return e;return ur(e).defaultView||window};function cr(e){return function(e){return null!==e&&"object"===typeof e&&"nodeType"in e&&"number"===typeof e.nodeType}(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let dr=null,hr=new Set,pr=new Map,fr=!1,gr=!1;const mr={Tab:!0,Escape:!0};function yr(e,t){for(let n of hr)n(e,t)}function vr(e){fr=!0,function(e){return!(e.metaKey||!nr()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(dr="keyboard",yr("keyboard",e))}function br(e){dr="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(fr=!0,yr("pointer",e))}function xr(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||(sr()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))&&(fr=!0,dr="virtual")}function wr(e){e.target!==window&&e.target!==document&&!Jn&&e.isTrusted&&(fr||gr||(dr="virtual",yr("virtual",e)),fr=!1,gr=!1)}function Dr(){Jn||(fr=!1,gr=!0)}function kr(e){if("undefined"===typeof window||"undefined"===typeof document||pr.get(lr(e)))return;const t=lr(e),n=ur(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){fr=!0,r.apply(this,arguments)},n.addEventListener("keydown",vr,!0),n.addEventListener("keyup",vr,!0),n.addEventListener("click",xr,!0),t.addEventListener("focus",wr,!0),t.addEventListener("blur",Dr,!1),"undefined"!==typeof PointerEvent&&(n.addEventListener("pointerdown",br,!0),n.addEventListener("pointermove",br,!0),n.addEventListener("pointerup",br,!0)),t.addEventListener("beforeunload",()=>{Cr(e)},{once:!0}),pr.set(t,{focus:r})}const Cr=(e,t)=>{const n=lr(e),r=ur(e);t&&r.removeEventListener("DOMContentLoaded",t),pr.has(n)&&(n.HTMLElement.prototype.focus=pr.get(n).focus,r.removeEventListener("keydown",vr,!0),r.removeEventListener("keyup",vr,!0),r.removeEventListener("click",xr,!0),n.removeEventListener("focus",wr,!0),n.removeEventListener("blur",Dr,!1),"undefined"!==typeof PointerEvent&&(r.removeEventListener("pointerdown",br,!0),r.removeEventListener("pointermove",br,!0),r.removeEventListener("pointerup",br,!0)),pr.delete(n))};function Er(){return"pointer"!==dr}"undefined"!==typeof document&&function(e){const t=ur(e);let n;"loading"!==t.readyState?kr(e):(n=()=>{kr(e)},t.addEventListener("DOMContentLoaded",n))}();const Sr=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Ar(e,t,n){kr(),(0,u.useEffect)(()=>{let t=(t,r)=>{(function(e,t,n){let r=ur(null===n||void 0===n?void 0:n.target);const a="undefined"!==typeof window?lr(null===n||void 0===n?void 0:n.target).HTMLInputElement:HTMLInputElement,o="undefined"!==typeof window?lr(null===n||void 0===n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,i="undefined"!==typeof window?lr(null===n||void 0===n?void 0:n.target).HTMLElement:HTMLElement,s="undefined"!==typeof window?lr(null===n||void 0===n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||r.activeElement instanceof a&&!Sr.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof i&&r.activeElement.isContentEditable)&&"keyboard"===t&&n instanceof s&&!mr[n.key])})(!!(null===n||void 0===n?void 0:n.isTextInput),t,r)&&e(Er())};return hr.add(t),()=>{hr.delete(t)}},t)}let Fr=!1;function Ir(){return Fr}function Nr(e,t){if(!Ir())return!(!t||!e)&&e.contains(t);if(!e||!t)return!1;let n=t;for(;null!==n;){if(n===e)return!0;n="SLOT"===n.tagName&&n.assignedSlot?n.assignedSlot.parentNode:cr(n)?n.host:n.parentNode}return!1}const Tr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var t;if(!Ir())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(null===(t=n.shadowRoot)||void 0===t?void 0:t.activeElement);)n=n.shadowRoot.activeElement;return n};function Or(e){return Ir()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function Rr(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:a}=e;const o=(0,u.useCallback)(e=>{if(e.target===e.currentTarget)return r&&r(e),a&&a(!1),!0},[r,a]),i=Zn(o),s=(0,u.useCallback)(e=>{const t=ur(e.target),r=t?Tr(t):Tr();e.target===e.currentTarget&&r===Or(e.nativeEvent)&&(n&&n(e),a&&a(!0),i(e))},[a,n,i]);return{focusProps:{onFocus:!t&&(n||a||r)?s:void 0,onBlur:t||!r&&!a?void 0:o}}}function _r(){let e=(0,u.useRef)(new Map),t=(0,u.useCallback)((t,n,r,a)=>{let o=(null===a||void 0===a?void 0:a.once)?function(){e.current.delete(r),r(...arguments)}:r;e.current.set(r,{type:n,eventTarget:t,fn:o,options:a}),t.addEventListener(n,o,a)},[]),n=(0,u.useCallback)((t,n,r,a)=>{var o;let i=(null===(o=e.current.get(r))||void 0===o?void 0:o.fn)||r;t.removeEventListener(n,i,a),e.current.delete(r)},[]),r=(0,u.useCallback)(()=>{e.current.forEach((e,t)=>{n(e.eventTarget,e.type,t,e.options)})},[n]);return(0,u.useEffect)(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function Pr(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:a}=e,o=(0,u.useRef)({isFocusWithin:!1}),{addGlobalListener:i,removeAllGlobalListeners:s}=_r(),l=(0,u.useCallback)(e=>{e.currentTarget.contains(e.target)&&o.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(o.current.isFocusWithin=!1,s(),n&&n(e),a&&a(!1))},[n,a,o,s]),c=Zn(l),d=(0,u.useCallback)(e=>{if(!e.currentTarget.contains(e.target))return;const t=ur(e.target),n=Tr(t);if(!o.current.isFocusWithin&&n===Or(e.nativeEvent)){r&&r(e),a&&a(!0),o.current.isFocusWithin=!0,c(e);let n=e.currentTarget;i(t,"focus",e=>{if(o.current.isFocusWithin&&!Nr(n,e.target)){let r=new t.defaultView.FocusEvent("blur",{relatedTarget:e.target});Qn(r,n);let a=Yn(r);l(a)}},{capture:!0})}},[r,a,c,i,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:l}}}function Mr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{autoFocus:t=!1,isTextInput:n,within:r}=e,a=(0,u.useRef)({isFocused:!1,isFocusVisible:t||Er()}),[o,i]=(0,u.useState)(!1),[s,l]=(0,u.useState)(()=>a.current.isFocused&&a.current.isFocusVisible),c=(0,u.useCallback)(()=>l(a.current.isFocused&&a.current.isFocusVisible),[]),d=(0,u.useCallback)(e=>{a.current.isFocused=e,i(e),c()},[c]);Ar(e=>{a.current.isFocusVisible=e,c()},[],{isTextInput:n});let{focusProps:h}=Rr({isDisabled:r,onFocusChange:d}),{focusWithinProps:p}=Pr({isDisabled:!r,onFocusWithinChange:d});return{isFocused:o,isFocusVisible:s,focusProps:r?p:h}}let Br=!1,Lr=0;function jr(e){"touch"===e.pointerType&&(Br=!0,setTimeout(()=>{Br=!1},50))}function zr(){if("undefined"!==typeof document)return"undefined"!==typeof PointerEvent&&document.addEventListener("pointerup",jr),Lr++,()=>{Lr--,Lr>0||"undefined"!==typeof PointerEvent&&document.removeEventListener("pointerup",jr)}}function Wr(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:a}=e,[o,i]=(0,u.useState)(!1),s=(0,u.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,u.useEffect)(zr,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=_r(),{hoverProps:d,triggerHoverEnd:h}=(0,u.useMemo)(()=>{let e=(e,t)=>{let a=s.target;s.pointerType="",s.target=null,"touch"!==t&&s.isHovered&&a&&(s.isHovered=!1,c(),r&&r({type:"hoverend",target:a,pointerType:t}),n&&n(!1),i(!1))},o={};return"undefined"!==typeof PointerEvent&&(o.onPointerEnter=r=>{Br&&"mouse"===r.pointerType||((r,o)=>{if(s.pointerType=o,a||"touch"===o||s.isHovered||!r.currentTarget.contains(r.target))return;s.isHovered=!0;let u=r.currentTarget;s.target=u,l(ur(r.target),"pointerover",t=>{s.isHovered&&s.target&&!Nr(s.target,t.target)&&e(t,t.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:u,pointerType:o}),n&&n(!0),i(!0)})(r,r.pointerType)},o.onPointerLeave=t=>{!a&&t.currentTarget.contains(t.target)&&e(t,t.pointerType)}),{hoverProps:o,triggerHoverEnd:e}},[t,n,r,a,s,l,c]);return(0,u.useEffect)(()=>{a&&h({currentTarget:s.target},s.pointerType)},[a]),{hoverProps:d,isHovered:o}}function Ur(){let{disabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useRef)(null),[n,r]=(0,u.useState)(!1),a=C(),o=N(()=>{t.current=null,r(!1),a.dispose()}),i=N(e=>{if(a.dispose(),null===t.current){t.current=e.currentTarget,r(!0);{let n=Qe(e.currentTarget);a.addEventListener(n,"pointerup",o,!1),a.addEventListener(n,"pointermove",e=>{if(t.current){let n=function(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}(e);r(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(n,t.current.getBoundingClientRect()))}},!1),a.addEventListener(n,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:i,onPointerUp:o,onClick:o}}}let Vr=(0,u.createContext)(void 0);function Hr(){return(0,u.useContext)(Vr)}function Gr(e){let{id:t,children:n}=e;return u.createElement(Vr.Provider,{value:t},n)}const Kr=["id","htmlFor","passive"];let qr=(0,u.createContext)(null);function Xr(){let e=(0,u.useContext)(qr);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Xr),e}return e}function Yr(e){var t,n,r;let a=null!=(n=null==(t=(0,u.useContext)(qr))?void 0:t.value)?n:void 0;return(null!=(r=null==e?void 0:e.length)?r:0)>0?[a,...e].filter(Boolean).join(" "):a}function Qr(){let{inherit:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Yr(),[n,r]=(0,u.useState)([]),a=e?[t,...n].filter(Boolean):n;return[a.length>0?a.join(" "):void 0,(0,u.useMemo)(()=>function(e){let t=N(e=>(r(t=>[...t,e]),()=>r(t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))),n=(0,u.useMemo)(()=>({register:t,slot:e.slot,name:e.name,props:e.props,value:e.value}),[t,e.slot,e.name,e.props,e.value]);return u.createElement(qr.Provider,{value:n},e.children)},[r])]}qr.displayName="LabelContext";let Zr=ae(function(e,t){var n;let r=(0,u.useId)(),a=Xr(),o=Hr(),i=qt(),{id:s="headlessui-label-".concat(r),htmlFor:l=(null!=o?o:null==(n=a.props)?void 0:n.htmlFor),passive:c=!1}=e,d=w(e,Kr),h=P(t);F(()=>a.register(s),[s,a.register]);let p=N(e=>{let t=e.currentTarget;if((e.target===e.currentTarget||!function(e){return!!rt(e)&&e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]')}(e.target))&&(st(t)&&e.preventDefault(),a.props&&"onClick"in a.props&&"function"==typeof a.props.onClick&&a.props.onClick(e),st(t))){let e=document.getElementById(t.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let n=e.getAttribute("aria-disabled");if("true"===n||""===n)return;(it(e)&&("file"===e.type||"radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}}),f=i||!1,m=(0,u.useMemo)(()=>g(g({},a.slot),{},{disabled:f}),[a.slot,f]),y=g(g({ref:h},a.props),{},{id:s,htmlFor:l,onClick:p});return c&&("onClick"in y&&(delete y.htmlFor,delete y.onClick),"onClick"in d&&delete d.onClick),$()({ourProps:y,theirProps:d,slot:m,defaultTag:l?"label":"div",name:a.name||"Label"})}),Jr=Object.assign(Zr,{});const $r=["id","disabled","invalid","autoFocus"];let ea=ae(function(e,t){let n=(0,u.useId)(),r=Hr(),a=qt(),{id:o=r||"headlessui-select-".concat(n),disabled:i=a||!1,invalid:s=!1,autoFocus:l=!1}=e,c=w(e,$r),d=Yr(),h=Jt(),{isFocusVisible:p,focusProps:f}=Mr({autoFocus:l}),{isHovered:g,hoverProps:m}=Wr({isDisabled:i}),{pressed:y,pressProps:v}=Ur({disabled:i}),b=re({ref:t,id:o,"aria-labelledby":d,"aria-describedby":h,"aria-invalid":s?"true":void 0,disabled:i||void 0,autoFocus:l},f,m,v),x=(0,u.useMemo)(()=>({disabled:i,invalid:s,hover:g,focus:p,active:y,autofocus:l}),[i,s,g,p,y,l]);return $()({ourProps:b,theirProps:c,slot:x,defaultTag:"select",name:"Select"})});const ta=["id","disabled","autoFocus","invalid"];let na=ae(function(e,t){let n=(0,u.useId)(),r=Hr(),a=qt(),{id:o=r||"headlessui-input-".concat(n),disabled:i=a||!1,autoFocus:s=!1,invalid:l=!1}=e,c=w(e,ta),d=Yr(),h=Jt(),{isFocused:p,focusProps:f}=Mr({autoFocus:s}),{isHovered:g,hoverProps:m}=Wr({isDisabled:i}),y=re({ref:t,id:o,"aria-labelledby":d,"aria-describedby":h,"aria-invalid":l?"true":void 0,disabled:i||void 0,autoFocus:s},f,m),v=(0,u.useMemo)(()=>({disabled:i,invalid:l,hover:g,focus:p,autofocus:s}),[i,l,g,p,s]);return $()({ourProps:y,theirProps:c,slot:v,defaultTag:"input",name:"Input"})});const ra=["id","disabled","autoFocus","invalid"];let aa=ae(function(e,t){let n=(0,u.useId)(),r=Hr(),a=qt(),{id:o=r||"headlessui-textarea-".concat(n),disabled:i=a||!1,autoFocus:s=!1,invalid:l=!1}=e,c=w(e,ra),d=Yr(),h=Jt(),{isFocused:p,focusProps:f}=Mr({autoFocus:s}),{isHovered:g,hoverProps:m}=Wr({isDisabled:i}),y=re({ref:t,id:o,"aria-labelledby":d,"aria-describedby":h,"aria-invalid":l?"true":void 0,disabled:i||void 0,autoFocus:s},f,m),v=(0,u.useMemo)(()=>({disabled:i,invalid:l,hover:g,focus:p,autofocus:s}),[i,l,g,p,s]);return $()({ourProps:y,theirProps:c,slot:v,defaultTag:"textarea",name:"Textarea"})});const oa=["disabled","autoFocus"];let ia=ae(function(e,t){var n;let r=qt(),{disabled:a=r||!1,autoFocus:o=!1}=e,i=w(e,oa),{isFocusVisible:s,focusProps:l}=Mr({autoFocus:o}),{isHovered:c,hoverProps:d}=Wr({isDisabled:a}),{pressed:h,pressProps:p}=Ur({disabled:a}),f=re({ref:t,type:null!=(n=i.type)?n:"button",disabled:a||void 0,autoFocus:o},l,d,p),g=(0,u.useMemo)(()=>({disabled:a,hover:c,focus:s,active:h,autofocus:o}),[a,c,s,h,o]);return $()({ourProps:f,theirProps:i,slot:g,defaultTag:"button",name:"Button"})});const sa=e=>{let{isOpen:t,onClose:n,drains:r,onAddLog:a}=e;const[o,i]=(0,u.useState)({drainId:"",amount:"",date:"",notes:""});(0,u.useEffect)(()=>{t&&i({drainId:r.length>0?r[0].id:"",amount:"",date:m(),notes:""})},[t,r]);const s=e=>{const{name:t,value:n}=e.target;i(e=>g(g({},e),{},{[t]:n}))};return(0,v.jsx)(we,{appear:!0,show:t,as:u.Fragment,children:(0,v.jsxs)(Kn,{as:"div",className:"relative z-50",onClose:n,children:[(0,v.jsx)(we.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,v.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,v.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,v.jsx)(we.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,v.jsxs)(Kn.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 dark:text-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,v.jsx)(Kn.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100 border-b dark:border-gray-700 pb-2 mb-4",children:"Log Drainage Output"}),(0,v.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.drainId&&o.amount&&o.date&&a(g(g({},o),{},{amount:parseFloat(o.amount)}))},className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"drainId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Drain:"}),(0,v.jsx)(ea,{name:"drainId",id:"drainId",value:o.drainId,onChange:s,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700",required:!0,children:[...r].sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,v.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Output (cc):"}),(0,v.jsx)(na,{type:"number",name:"amount",id:"amount",value:o.amount,onChange:s,min:"0",step:"1",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700",required:!0})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date & Time:"}),(0,v.jsx)(na,{type:"datetime-local",name:"date",id:"date",value:o.date,onChange:s,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700",required:!0})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional):"}),(0,v.jsx)(aa,{name:"notes",id:"notes",value:o.notes,onChange:s,rows:"3",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700",placeholder:"e.g., color, consistency"})]}),(0,v.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,v.jsx)(ia,{type:"button",onClick:n,className:"bg-gray-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-gray-600 transition duration-300",children:"Cancel"}),(0,v.jsx)(ia,{type:"submit",className:"bg-green-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-green-600 transition duration-300 shadow",children:"Log Output"})]})]})]})})})})]})})},ua=e=>{let{isOpen:t,onClose:n,drains:r,log:a,onEditLog:o}=e;const[i,s]=(0,u.useState)({drainId:"",amount:"",date:"",notes:""});(0,u.useEffect)(()=>{a&&s({id:a.id,drainId:a.drainId,amount:a.amount,date:a.date,notes:a.notes||""})},[a]);const l=e=>{const{name:t,value:n}=e.target;s(e=>g(g({},e),{},{[t]:n}))};return(0,v.jsx)(we,{appear:!0,show:t,as:u.Fragment,children:(0,v.jsxs)(Kn,{as:"div",className:"relative z-50",onClose:n,children:[(0,v.jsx)(we.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,v.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,v.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,v.jsx)(we.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,v.jsxs)(Kn.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 dark:text-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,v.jsx)(Kn.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100 border-b dark:border-gray-700 pb-2 mb-4",children:"Edit Log Entry"}),(0,v.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.drainId&&i.amount&&i.date&&o(g(g({},i),{},{amount:parseFloat(i.amount)}))},className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"edit-drainId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Drain:"}),(0,v.jsx)(ea,{name:"drainId",id:"edit-drainId",value:i.drainId,onChange:l,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700",required:!0,children:[...r].sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,v.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"edit-amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Output (cc):"}),(0,v.jsx)(na,{type:"number",name:"amount",id:"edit-amount",value:i.amount,onChange:l,min:"0",step:"1",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700",required:!0})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"edit-date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date & Time:"}),(0,v.jsx)(na,{type:"datetime-local",name:"date",id:"edit-date",value:i.date,onChange:l,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700",required:!0})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"edit-notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional):"}),(0,v.jsx)(aa,{name:"notes",id:"edit-notes",value:i.notes,onChange:l,rows:"3",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700",placeholder:"e.g., color, consistency"})]}),(0,v.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,v.jsx)(ia,{type:"button",onClick:n,className:"bg-gray-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-gray-600 transition duration-300",children:"Cancel"}),(0,v.jsx)(ia,{type:"submit",className:"bg-green-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-green-600 transition duration-300 shadow",children:"Save Changes"})]})]})]})})})})]})})},la=e=>{let{message:t,onClose:n}=e;return(0,v.jsx)(we,{appear:!0,show:!!t,as:u.Fragment,children:(0,v.jsxs)(Kn,{as:"div",className:"relative z-50",onClose:n,children:[(0,v.jsx)(we.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,v.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,v.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,v.jsx)(we.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,v.jsxs)(Kn.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 dark:text-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,v.jsx)(Kn.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100",children:"Notification"}),(0,v.jsx)("div",{className:"mt-2",children:(0,v.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})}),(0,v.jsx)("div",{className:"mt-4 flex justify-end",children:(0,v.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 dark:bg-blue-900 px-4 py-2 text-sm font-medium text-blue-900 dark:text-blue-200 hover:bg-blue-200 dark:hover:bg-blue-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:n,children:"OK"})})]})})})})]})})};function ca(){}function da(){}const ha=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/,pa=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[\$\x2D0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDD40-\uDD65\uDD69-\uDD6D\uDD6F-\uDD85\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEC2-\uDEC4\uDEFC-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD3\uDFE1\uDFE2]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDED0-\uDEE3\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0\uDFF0-\uDFF9]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF5A\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD39]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDD70-\uDD79\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDCF0-\uDCF9\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDDD0-\uDDFA\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/,fa={};function ga(e,t){return((t||fa).jsx?pa:ha).test(e)}const ma=/[ \t\n\f\r]/g;function ya(e){return""===e.replace(ma,"")}class va{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function ba(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new va(n,r,t)}function xa(e){return e.toLowerCase()}va.prototype.normal={},va.prototype.property={},va.prototype.space=void 0;class wa{constructor(e,t){this.attribute=t,this.property=e}}wa.prototype.attribute="",wa.prototype.booleanish=!1,wa.prototype.boolean=!1,wa.prototype.commaOrSpaceSeparated=!1,wa.prototype.commaSeparated=!1,wa.prototype.defined=!1,wa.prototype.mustUseProperty=!1,wa.prototype.number=!1,wa.prototype.overloadedBoolean=!1,wa.prototype.property="",wa.prototype.spaceSeparated=!1,wa.prototype.space=void 0;let Da=0;const ka=Na(),Ca=Na(),Ea=Na(),Sa=Na(),Aa=Na(),Fa=Na(),Ia=Na();function Na(){return 2**++Da}const Ta=Object.keys(e);class Oa extends wa{constructor(t,n,r,a){let o=-1;if(super(t,n),Ra(this,"space",a),"number"===typeof r)for(;++o<Ta.length;){const t=Ta[o];Ra(this,Ta[o],(r&e[t])===e[t])}}}function Ra(e,t,n){n&&(e[t]=n)}function _a(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const o=new Oa(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[xa(r)]=r,n[xa(o.attribute)]=r}return new va(t,n,e.space)}Oa.prototype.defined=!0;const Pa=_a({properties:{ariaActiveDescendant:null,ariaAtomic:Ca,ariaAutoComplete:null,ariaBusy:Ca,ariaChecked:Ca,ariaColCount:Sa,ariaColIndex:Sa,ariaColSpan:Sa,ariaControls:Aa,ariaCurrent:null,ariaDescribedBy:Aa,ariaDetails:null,ariaDisabled:Ca,ariaDropEffect:Aa,ariaErrorMessage:null,ariaExpanded:Ca,ariaFlowTo:Aa,ariaGrabbed:Ca,ariaHasPopup:null,ariaHidden:Ca,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Aa,ariaLevel:Sa,ariaLive:null,ariaModal:Ca,ariaMultiLine:Ca,ariaMultiSelectable:Ca,ariaOrientation:null,ariaOwns:Aa,ariaPlaceholder:null,ariaPosInSet:Sa,ariaPressed:Ca,ariaReadOnly:Ca,ariaRelevant:null,ariaRequired:Ca,ariaRoleDescription:Aa,ariaRowCount:Sa,ariaRowIndex:Sa,ariaRowSpan:Sa,ariaSelected:Ca,ariaSetSize:Sa,ariaSort:null,ariaValueMax:Sa,ariaValueMin:Sa,ariaValueNow:Sa,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function Ma(e,t){return t in e?e[t]:t}function Ba(e,t){return Ma(e,t.toLowerCase())}const La=_a({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Fa,acceptCharset:Aa,accessKey:Aa,action:null,allow:null,allowFullScreen:ka,allowPaymentRequest:ka,allowUserMedia:ka,alt:null,as:null,async:ka,autoCapitalize:null,autoComplete:Aa,autoFocus:ka,autoPlay:ka,blocking:Aa,capture:null,charSet:null,checked:ka,cite:null,className:Aa,cols:Sa,colSpan:null,content:null,contentEditable:Ca,controls:ka,controlsList:Aa,coords:Sa|Fa,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ka,defer:ka,dir:null,dirName:null,disabled:ka,download:Ea,draggable:Ca,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ka,formTarget:null,headers:Aa,height:Sa,hidden:Ea,high:Sa,href:null,hrefLang:null,htmlFor:Aa,httpEquiv:Aa,id:null,imageSizes:null,imageSrcSet:null,inert:ka,inputMode:null,integrity:null,is:null,isMap:ka,itemId:null,itemProp:Aa,itemRef:Aa,itemScope:ka,itemType:Aa,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ka,low:Sa,manifest:null,max:null,maxLength:Sa,media:null,method:null,min:null,minLength:Sa,multiple:ka,muted:ka,name:null,nonce:null,noModule:ka,noValidate:ka,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ka,optimum:Sa,pattern:null,ping:Aa,placeholder:null,playsInline:ka,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ka,referrerPolicy:null,rel:Aa,required:ka,reversed:ka,rows:Sa,rowSpan:Sa,sandbox:Aa,scope:null,scoped:ka,seamless:ka,selected:ka,shadowRootClonable:ka,shadowRootDelegatesFocus:ka,shadowRootMode:null,shape:null,size:Sa,sizes:null,slot:null,span:Sa,spellCheck:Ca,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Sa,step:null,style:null,tabIndex:Sa,target:null,title:null,translate:null,type:null,typeMustMatch:ka,useMap:null,value:Ca,width:Sa,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Aa,axis:null,background:null,bgColor:null,border:Sa,borderColor:null,bottomMargin:Sa,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ka,declare:ka,event:null,face:null,frame:null,frameBorder:null,hSpace:Sa,leftMargin:Sa,link:null,longDesc:null,lowSrc:null,marginHeight:Sa,marginWidth:Sa,noResize:ka,noHref:ka,noShade:ka,noWrap:ka,object:null,profile:null,prompt:null,rev:null,rightMargin:Sa,rules:null,scheme:null,scrolling:Ca,standby:null,summary:null,text:null,topMargin:Sa,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Sa,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ka,disableRemotePlayback:ka,prefix:null,property:null,results:Sa,security:null,unselectable:null},space:"html",transform:Ba}),ja=_a({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ia,accentHeight:Sa,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Sa,amplitude:Sa,arabicForm:null,ascent:Sa,attributeName:null,attributeType:null,azimuth:Sa,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Sa,by:null,calcMode:null,capHeight:Sa,className:Aa,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Sa,diffuseConstant:Sa,direction:null,display:null,dur:null,divisor:Sa,dominantBaseline:null,download:ka,dx:null,dy:null,edgeMode:null,editable:null,elevation:Sa,enableBackground:null,end:null,event:null,exponent:Sa,externalResourcesRequired:null,fill:null,fillOpacity:Sa,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Fa,g2:Fa,glyphName:Fa,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Sa,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Sa,horizOriginX:Sa,horizOriginY:Sa,id:null,ideographic:Sa,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Sa,k:Sa,k1:Sa,k2:Sa,k3:Sa,k4:Sa,kernelMatrix:Ia,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Sa,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Sa,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Sa,overlineThickness:Sa,paintOrder:null,panose1:null,path:null,pathLength:Sa,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Aa,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Sa,pointsAtY:Sa,pointsAtZ:Sa,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ia,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ia,rev:Ia,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ia,requiredFeatures:Ia,requiredFonts:Ia,requiredFormats:Ia,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Sa,specularExponent:Sa,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Sa,strikethroughThickness:Sa,string:null,stroke:null,strokeDashArray:Ia,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Sa,strokeOpacity:Sa,strokeWidth:null,style:null,surfaceScale:Sa,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ia,tabIndex:Sa,tableValues:null,target:null,targetX:Sa,targetY:Sa,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ia,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Sa,underlineThickness:Sa,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Sa,values:null,vAlphabetic:Sa,vMathematical:Sa,vectorEffect:null,vHanging:Sa,vIdeographic:Sa,version:null,vertAdvY:Sa,vertOriginX:Sa,vertOriginY:Sa,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Sa,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ma}),za=_a({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),Wa=_a({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Ba}),Ua=_a({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),Va=ba([Pa,La,za,Wa,Ua],"html"),Ha=ba([Pa,ja,za,Wa,Ua],"svg"),Ga=/[A-Z]/g,Ka=/-[a-z]/g,qa=/^data[-\w.:]+$/i;function Xa(e){return"-"+e.toLowerCase()}function Ya(e){return e.charAt(1).toUpperCase()}const Qa={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var Za=n(7294);const Ja=eo("end"),$a=eo("start");function eo(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function to(e){return e&&"object"===typeof e?"position"in e||"type"in e?ro(e.position):"start"in e||"end"in e?ro(e):"line"in e||"column"in e?no(e):"":""}function no(e){return ao(e&&e.line)+":"+ao(e&&e.column)}function ro(e){return no(e&&e.start)+"-"+no(e&&e.end)}function ao(e){return e&&"number"===typeof e?e:1}class oo extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let r="",a={},o=!1;if(t&&(a="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:g({},t)),"string"===typeof e?r=e:!a.cause&&e&&(o=!0,r=e.message,a.cause=e),!a.ruleId&&!a.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?a.ruleId=n:(a.source=n.slice(0,e),a.ruleId=n.slice(e+1))}if(!a.place&&a.ancestors&&a.ancestors){const e=a.ancestors[a.ancestors.length-1];e&&(a.place=e.position)}const i=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=i?i.line:void 0,this.name=to(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&"string"===typeof a.cause.stack?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}oo.prototype.file="",oo.prototype.name="",oo.prototype.reason="",oo.prototype.message="",oo.prototype.stack="",oo.prototype.column=void 0,oo.prototype.line=void 0,oo.prototype.ancestors=void 0,oo.prototype.cause=void 0,oo.prototype.fatal=void 0,oo.prototype.place=void 0,oo.prototype.ruleId=void 0,oo.prototype.source=void 0;const io={}.hasOwnProperty,so=new Map,uo=/[A-Z]/g,lo=new Set(["table","tbody","thead","tfoot","tr"]),co=new Set(["td","th"]),ho="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function po(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,a,o){const i=Array.isArray(a.children),s=$a(n);return t(r,a,o,i,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,a,o){const i=Array.isArray(a.children)?n:t;return o?i(r,a,o):i(r,a)}}(0,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Ha:Va,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},o=fo(a,e,void 0);return o&&"string"!==typeof o?o:a.create(e,a.Fragment,{children:o||void 0},void 0)}function fo(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let a=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(a=Ha,e.schema=a);e.ancestors.push(t);const o=bo(e,t.tagName,!1),i=function(e,t){const n={};let r,a;for(a in t.properties)if("children"!==a&&io.call(t.properties,a)){const o=vo(e,a,t.properties[a]);if(o){const[a,i]=o;e.tableCellAlignToStyle&&"align"===a&&"string"===typeof i&&co.has(t.tagName)?r=i:n[a]=i}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let s=yo(e,t);lo.has(t.tagName)&&(s=s.filter(function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&ya(t.value):ya(t));var t}));return go(e,i,o,t),mo(i,s),e.ancestors.pop(),e.schema=r,e.create(t,o,i,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}xo(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let a=r;"svg"===t.name&&"html"===r.space&&(a=Ha,e.schema=a);e.ancestors.push(t);const o=null===t.name?e.Fragment:bo(e,t.name,!0),i=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];ca(t.type);const a=t.expression;ca(a.type);const o=a.properties[0];ca(o.type),Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else xo(e,t.position);else{const a=r.name;let o;if(r.value&&"object"===typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];ca(t.type),o=e.evaluater.evaluateExpression(t.expression)}else xo(e,t.position);else o=null===r.value||r.value;n[a]=o}return n}(e,t),s=yo(e,t);return go(e,i,o,t),mo(i,s),e.ancestors.pop(),e.schema=r,e.create(t,o,i,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);xo(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return mo(r,yo(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function go(e,t,n,r){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function mo(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function yo(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:so;for(;++r<t.children.length;){const o=t.children[r];let i;if(e.passKeys){const e="element"===o.type?o.tagName:"mdxJsxFlowElement"===o.type||"mdxJsxTextElement"===o.type?o.name:void 0;if(e){const t=a.get(e)||0;i=e+"-"+t,a.set(e,t+1)}}const s=fo(e,o,i);void 0!==s&&n.push(s)}return n}function vo(e,t,n){const r=function(e,t){const n=xa(t);let r=t,a=wa;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&qa.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Ka,Ya);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Ka.test(e)){let n=e.replace(Ga,Xa);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}a=Oa}return new a(r,t)}(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"===typeof n?n:function(e,t){try{return Za(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,r=new oo("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=ho+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)io.call(e,n)&&(t[wo(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?Qa[r.property]||r.property:r.attribute,n]}}function bo(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,a=-1;for(;++a<e.length;){const t=ga(e[a])?{type:"Identifier",name:e[a]}:{type:"Literal",value:e[a]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(a&&"Literal"===t.type),optional:!1}:t}r=n}else r=ga(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return io.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);xo(e)}function xo(e,t){const n=new oo("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ho+"#cannot-handle-mdx-estrees-without-createevaluater",n}function wo(e){let t=e.replace(uo,Do);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function Do(e){return"-"+e.toLowerCase()}const ko={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Co={};function Eo(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return So(e.children,t,n)}return Array.isArray(e)?So(e,t,n):""}function So(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=Eo(e[a],t,n);return r.join("")}function Ao(e,t,n,r){const a=e.length;let o,i=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function Fo(e,t){return e.length>0?(Ao(e,e.length,0,t),e):t}class Io{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null===t||void 0===t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&No(this.left,n),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),No(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),No(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);No(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);No(this.left,t.reverse())}}}function No(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function To(e){const t={};let n,r,a,o,i,s,u,l=-1;const c=new Io(e);for(;++l<c.length;){for(;l in t;)l=t[l];if(n=c.get(l),l&&"chunkFlow"===n[1].type&&"listItemPrefix"===c.get(l-1)[1].type&&(s=n[1]._tokenizer.events,a=0,a<s.length&&"lineEndingBlank"===s[a][1].type&&(a+=2),a<s.length&&"content"===s[a][1].type))for(;++a<s.length&&"content"!==s[a][1].type;)"chunkText"===s[a][1].type&&(s[a][1]._isInFirstContentOfListItem=!0,a++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Oo(c,l)),l=t[l],u=!0);else if(n[1]._container){for(a=l,r=void 0;a--;)if(o=c.get(a),"lineEnding"===o[1].type||"lineEndingBlank"===o[1].type)"enter"===o[0]&&(r&&(c.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=a);else if("linePrefix"!==o[1].type&&"listItemIndent"!==o[1].type)break;r&&(n[1].end=g({},c.get(r)[1].start),i=c.slice(r,l),i.unshift(n),c.splice(r,l-r+1,i))}}return Ao(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function Oo(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const o=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const s=i.events,u=[],l={};let c,d,h=-1,p=n,f=0,g=0;const m=[g];for(;p;){for(;e.get(++a)[1]!==p;);o.push(a),p._tokenizer||(c=r.sliceStream(p),p.next||c.push(null),d&&i.defineSkip(p.start),p._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(c),p._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<s.length;)"exit"===s[h][0]&&"enter"===s[h-1][0]&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(g=h+1,m.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(i.events=[],p?(p._tokenizer=void 0,p.previous=void 0):m.pop(),h=m.length;h--;){const t=s.slice(m[h],m[h+1]),n=o.pop();u.push([n,n+t.length-1]),e.splice(n,2,t)}for(u.reverse(),h=-1;++h<u.length;)l[f+u[h][0]]=f+u[h][1],f+=u[h][1]-u[h][0]-1;return l}const Ro={}.hasOwnProperty;function _o(e,t){let n;for(n in t){const r=(Ro.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){Ro.call(r,o)||(r[o]=[]);const e=a[o];Po(r[o],Array.isArray(e)?e:e?[e]:[])}}}function Po(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);Ao(e,0,0,r)}const Mo=Xo(/[A-Za-z]/),Bo=Xo(/[\dA-Za-z]/),Lo=Xo(/[#-'*+\--9=?A-Z^-~]/);function jo(e){return null!==e&&(e<32||127===e)}const zo=Xo(/\d/),Wo=Xo(/[\dA-Fa-f]/),Uo=Xo(/[!-/:-@[-`{-~]/);function Vo(e){return null!==e&&e<-2}function Ho(e){return null!==e&&(e<0||32===e)}function Go(e){return-2===e||-1===e||32===e}const Ko=Xo(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),qo=Xo(/\s/);function Xo(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Yo(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let o=0;return function(r){if(Go(r))return e.enter(n),i(r);return t(r)};function i(r){return Go(r)&&o++<a?(e.consume(r),i):(e.exit(n),t(r))}}const Qo={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Yo(e,t,"linePrefix")},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,a(t)}function a(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Vo(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),a)}}};const Zo={tokenize:function(e){const t=this,n=[];let r,a,o,i=0;return s;function s(r){if(i<n.length){const a=n[i];return t.containerState=a[1],e.attempt(a[0].continuation,u,l)(r)}return l(r)}function u(e){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&b();const n=t.events.length;let a,o=n;for(;o--;)if("exit"===t.events[o][0]&&"chunkFlow"===t.events[o][1].type){a=t.events[o][1].end;break}v(i);let s=n;for(;s<t.events.length;)t.events[s][1].end=g({},a),s++;return Ao(t.events,o+1,0,t.events.slice(n)),t.events.length=s,l(e)}return s(e)}function l(a){if(i===n.length){if(!r)return h(a);if(r.currentConstruct&&r.currentConstruct.concrete)return f(a);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Jo,c,d)(a)}function c(e){return r&&b(),v(i),h(e)}function d(e){return t.parser.lazy[t.now().line]=i!==n.length,o=t.now().offset,f(e)}function h(n){return t.containerState={},e.attempt(Jo,p,f)(n)}function p(e){return i++,n.push([t.currentConstruct,t.containerState]),h(e)}function f(n){return null===n?(r&&b(),v(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:a}),m(n))}function m(n){return null===n?(y(e.exit("chunkFlow"),!0),v(0),void e.consume(n)):Vo(n)?(e.consume(n),y(e.exit("chunkFlow")),i=0,t.interrupt=void 0,s):(e.consume(n),m)}function y(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=a,a&&(a.next=e),a=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<o&&(!r.events[e][1].end||r.events[e][1].end.offset>o))return;const n=t.events.length;let a,s,u=n;for(;u--;)if("exit"===t.events[u][0]&&"chunkFlow"===t.events[u][1].type){if(a){s=t.events[u][1].end;break}a=!0}for(v(i),e=n;e<t.events.length;)t.events[e][1].end=g({},s),e++;Ao(t.events,u+1,0,t.events.slice(n)),t.events.length=e}}function v(r){let a=n.length;for(;a-- >r;){const r=n[a];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function b(){r.write([null]),a=void 0,r=void 0,t.containerState._closeFlow=void 0}}},Jo={tokenize:function(e,t,n){return Yo(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const $o={partial:!0,tokenize:function(e,t,n){return function(t){return Go(t)?Yo(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Vo(e)?t(e):n(e)}}};const ei={resolve:function(e){return To(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?a(t):Vo(t)?e.check(ti,o,a)(t):(e.consume(t),r)}function a(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},ti={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Yo(e,a,"linePrefix")};function a(a){if(null===a||Vo(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}};const ni={tokenize:function(e){const t=this,n=e.attempt($o,function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,Yo(e,e.attempt(this.parser.constructs.flow,r,e.attempt(ei,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const ri={resolveAll:si()},ai=ii("string"),oi=ii("text");function ii(e){return{resolveAll:si("text"===e?ui:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],a=t.attempt(r,o,i);return o;function o(e){return u(e)?a(e):i(e)}function i(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return u(e)?(t.exit("data"),a(e)):(t.consume(e),s)}function u(e){if(null===e)return!0;const t=r[e];let a=-1;if(t)for(;++a<t.length;){const e=t[a];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function si(e){return function(t,n){let r,a=-1;for(;++a<=t.length;)void 0===r?t[a]&&"data"===t[a][1].type&&(r=a,a++):t[a]&&"data"===t[a][1].type||(a!==r+2&&(t[r][1].end=t[a-1][1].end,t.splice(r+2,a-r-2),a=r+2),r=void 0);return e?e(t,n):t}}function ui(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],a=t.sliceStream(r);let o,i=a.length,s=-1,u=0;for(;i--;){const e=a[i];if("string"===typeof e){for(s=e.length;32===e.charCodeAt(s-1);)u++,s--;if(s)break;s=-1}else if(-2===e)o=!0,u++;else if(-1!==e){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const a={type:n===e.length||o||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?s:r.start._bufferIndex+s,_index:r.start._index+i,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:g({},r.end)};r.end=g({},a.start),r.start.offset===r.end.offset?Object.assign(r,a):(e.splice(n,0,["enter",a,t],["exit",a,t]),n+=2)}n++}return e}const li={name:"thematicBreak",tokenize:function(e,t,n){let r,a=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,o(e)}(t)};function o(o){return o===r?(e.enter("thematicBreakSequence"),i(o)):a>=3&&(null===o||Vo(o))?(e.exit("thematicBreak"),t(o)):n(o)}function i(t){return t===r?(e.consume(t),a++,i):(e.exit("thematicBreakSequence"),Go(t)?Yo(e,o,"whitespace")(t):o(t))}}};const ci={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check($o,a,o);function a(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Yo(e,t,"listItemIndent",r.containerState.size+1)(n)}function o(n){return r.containerState.furtherBlankLines||!Go(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(hi,t,i)(n))}function i(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Yo(e,e.attempt(ci,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,a=r.events[r.events.length-1];let o=a&&"linePrefix"===a[1].type?a[2].sliceSerialize(a[1],!0).length:0,i=0;return function(t){const a=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===a?!r.containerState.marker||t===r.containerState.marker:zo(t)){if(r.containerState.type||(r.containerState.type=a,e.enter(a,{_container:!0})),"listUnordered"===a)return e.enter("listItemPrefix"),42===t||45===t?e.check(li,n,u)(t):u(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return zo(t)&&++i<10?(e.consume(t),s):(!r.interrupt||i<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),u(t)):n(t)}function u(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check($o,r.interrupt?n:l,e.attempt(di,d,c))}function l(e){return r.containerState.initialBlankLine=!0,o++,d(e)}function c(t){return Go(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},di={partial:!0,tokenize:function(e,t,n){const r=this;return Yo(e,function(e){const a=r.events[r.events.length-1];return!Go(e)&&a&&"listItemPrefixWhitespace"===a[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},hi={partial:!0,tokenize:function(e,t,n){const r=this;return Yo(e,function(e){const a=r.events[r.events.length-1];return a&&"listItemIndent"===a[1].type&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)}};const pi={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Go(t))return Yo(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return a(t)};function a(r){return e.attempt(pi,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),a}return n(t)};function a(n){return Go(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};function fi(e,t,n,r,a,o,i,s,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return function(t){if(60===t)return e.enter(r),e.enter(a),e.enter(o),e.consume(t),e.exit(o),d;if(null===t||32===t||41===t||jo(t))return n(t);return e.enter(r),e.enter(i),e.enter(s),e.enter("chunkString",{contentType:"string"}),f(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(a),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||Vo(t)?n(t):(e.consume(t),92===t?p:h)}function p(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function f(a){return c||null!==a&&41!==a&&!Ho(a)?c<l&&40===a?(e.consume(a),c++,f):41===a?(e.consume(a),c--,f):null===a||32===a||40===a||jo(a)?n(a):(e.consume(a),92===a?g:f):(e.exit("chunkString"),e.exit(s),e.exit(i),e.exit(r),t(a))}function g(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function gi(e,t,n,r,a,o){const i=this;let s,u=0;return function(t){return e.enter(r),e.enter(a),e.consume(t),e.exit(a),e.enter(o),l};function l(d){return u>999||null===d||91===d||93===d&&!s||94===d&&!u&&"_hiddenFootnoteSupport"in i.parser.constructs?n(d):93===d?(e.exit(o),e.enter(a),e.consume(d),e.exit(a),e.exit(r),t):Vo(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(t){return null===t||91===t||93===t||Vo(t)||u++>999?(e.exit("chunkString"),l(t)):(e.consume(t),s||(s=!Go(t)),92===t?d:c)}function d(t){return 91===t||92===t||93===t?(e.consume(t),u++,c):c(t)}}function mi(e,t,n,r,a,o){let i;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(a),e.consume(t),e.exit(a),i=40===t?41:t,s;return n(t)};function s(n){return n===i?(e.enter(a),e.consume(n),e.exit(a),e.exit(r),t):(e.enter(o),u(n))}function u(t){return t===i?(e.exit(o),s(i)):null===t?n(t):Vo(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Yo(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(t))}function l(t){return t===i||null===t||Vo(t)?(e.exit("chunkString"),u(t)):(e.consume(t),92===t?c:l)}function c(t){return t===i||92===t?(e.consume(t),l):l(t)}}function yi(e,t){let n;return function r(a){if(Vo(a))return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r;if(Go(a))return Yo(e,r,n?"linePrefix":"lineSuffix")(a);return t(a)}}function vi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const bi={name:"definition",tokenize:function(e,t,n){const r=this;let a;return function(t){return e.enter("definition"),function(t){return gi.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function o(t){return a=vi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i):n(t)}function i(t){return Ho(t)?yi(e,s)(t):s(t)}function s(t){return fi(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function u(t){return e.attempt(xi,l,l)(t)}function l(t){return Go(t)?Yo(e,c,"whitespace")(t):c(t)}function c(o){return null===o||Vo(o)?(e.exit("definition"),r.parser.defined.push(a),t(o)):n(o)}}},xi={partial:!0,tokenize:function(e,t,n){return function(t){return Ho(t)?yi(e,r)(t):n(t)};function r(t){return mi(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function a(t){return Go(t)?Yo(e,o,"whitespace")(t):o(t)}function o(e){return null===e||Vo(e)?t(e):n(e)}}};const wi={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),Yo(e,a,"linePrefix",5)(t)};function a(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?s(t):Vo(t)?e.attempt(Di,o,s)(t):(e.enter("codeFlowValue"),i(t))}function i(t){return null===t||Vo(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),i)}function s(n){return e.exit("codeIndented"),t(n)}}},Di={partial:!0,tokenize:function(e,t,n){const r=this;return a;function a(t){return r.parser.lazy[r.now().line]?n(t):Vo(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):Yo(e,o,"linePrefix",5)(t)}function o(e){const o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):Vo(e)?a(e):n(e)}}};const ki={name:"headingAtx",resolve:function(e,t){let n,r,a=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);a-2>o&&"whitespace"===e[a][1].type&&(a-=2);"atxHeadingSequence"===e[a][1].type&&(o===a-1||a-4>o&&"whitespace"===e[a-2][1].type)&&(a-=o+1===a?2:4);a>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[a][1].end},r={type:"chunkText",start:e[o][1].start,end:e[a][1].end,contentType:"text"},Ao(e,o,a-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),a(t)}(t)};function a(t){return 35===t&&r++<6?(e.consume(t),a):null===t||Ho(t)?(e.exit("atxHeadingSequence"),o(t)):n(t)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),i(n)):null===n||Vo(n)?(e.exit("atxHeading"),t(n)):Go(n)?Yo(e,o,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function i(t){return 35===t?(e.consume(t),i):(e.exit("atxHeadingSequence"),o(t))}function s(t){return null===t||35===t||Ho(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),s)}}};const Ci={name:"setextUnderline",resolveTo:function(e,t){let n,r,a,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(r=o)}else"content"===e[o][1].type&&e.splice(o,1),a||"definition"!==e[o][1].type||(a=o);const i={type:"setextHeading",start:g({},e[n][1].start),end:g({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",a?(e.splice(r,0,["enter",i,t]),e.splice(a+1,0,["exit",e[n][1],t]),e[n][1].end=g({},e[a][1].end)):e[n][1]=i;return e.push(["exit",i,t]),e},tokenize:function(e,t,n){const r=this;let a;return function(t){let i,s=r.events.length;for(;s--;)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){i="paragraph"===r.events[s][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||i))return e.enter("setextHeadingLine"),a=t,function(t){return e.enter("setextHeadingLineSequence"),o(t)}(t);return n(t)};function o(t){return t===a?(e.consume(t),o):(e.exit("setextHeadingLineSequence"),Go(t)?Yo(e,i,"lineSuffix")(t):i(t))}function i(r){return null===r||Vo(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const Ei=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Si=["pre","script","style","textarea"],Ai={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let a,o,i,s,u;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),l}(t)};function l(s){return 33===s?(e.consume(s),c):47===s?(e.consume(s),o=!0,p):63===s?(e.consume(s),a=3,r.interrupt?t:_):Mo(s)?(e.consume(s),i=String.fromCharCode(s),f):n(s)}function c(o){return 45===o?(e.consume(o),a=2,d):91===o?(e.consume(o),a=5,s=0,h):Mo(o)?(e.consume(o),a=4,r.interrupt?t:_):n(o)}function d(a){return 45===a?(e.consume(a),r.interrupt?t:_):n(a)}function h(a){const o="CDATA[";return a===o.charCodeAt(s++)?(e.consume(a),6===s?r.interrupt?t:S:h):n(a)}function p(t){return Mo(t)?(e.consume(t),i=String.fromCharCode(t),f):n(t)}function f(s){if(null===s||47===s||62===s||Ho(s)){const u=47===s,l=i.toLowerCase();return u||o||!Si.includes(l)?Ei.includes(i.toLowerCase())?(a=6,u?(e.consume(s),g):r.interrupt?t(s):S(s)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):o?m(s):y(s)):(a=1,r.interrupt?t(s):S(s))}return 45===s||Bo(s)?(e.consume(s),i+=String.fromCharCode(s),f):n(s)}function g(a){return 62===a?(e.consume(a),r.interrupt?t:S):n(a)}function m(t){return Go(t)?(e.consume(t),m):C(t)}function y(t){return 47===t?(e.consume(t),C):58===t||95===t||Mo(t)?(e.consume(t),v):Go(t)?(e.consume(t),y):C(t)}function v(t){return 45===t||46===t||58===t||95===t||Bo(t)?(e.consume(t),v):b(t)}function b(t){return 61===t?(e.consume(t),x):Go(t)?(e.consume(t),b):y(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),u=t,w):Go(t)?(e.consume(t),x):D(t)}function w(t){return t===u?(e.consume(t),u=null,k):null===t||Vo(t)?n(t):(e.consume(t),w)}function D(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Ho(t)?b(t):(e.consume(t),D)}function k(e){return 47===e||62===e||Go(e)?y(e):n(e)}function C(t){return 62===t?(e.consume(t),E):n(t)}function E(t){return null===t||Vo(t)?S(t):Go(t)?(e.consume(t),E):n(t)}function S(t){return 45===t&&2===a?(e.consume(t),N):60===t&&1===a?(e.consume(t),T):62===t&&4===a?(e.consume(t),P):63===t&&3===a?(e.consume(t),_):93===t&&5===a?(e.consume(t),R):!Vo(t)||6!==a&&7!==a?null===t||Vo(t)?(e.exit("htmlFlowData"),A(t)):(e.consume(t),S):(e.exit("htmlFlowData"),e.check(Fi,M,A)(t))}function A(t){return e.check(Ii,F,M)(t)}function F(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return null===t||Vo(t)?A(t):(e.enter("htmlFlowData"),S(t))}function N(t){return 45===t?(e.consume(t),_):S(t)}function T(t){return 47===t?(e.consume(t),i="",O):S(t)}function O(t){if(62===t){const n=i.toLowerCase();return Si.includes(n)?(e.consume(t),P):S(t)}return Mo(t)&&i.length<8?(e.consume(t),i+=String.fromCharCode(t),O):S(t)}function R(t){return 93===t?(e.consume(t),_):S(t)}function _(t){return 62===t?(e.consume(t),P):45===t&&2===a?(e.consume(t),_):S(t)}function P(t){return null===t||Vo(t)?(e.exit("htmlFlowData"),M(t)):(e.consume(t),P)}function M(n){return e.exit("htmlFlow"),t(n)}}},Fi={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt($o,t,n)}}},Ii={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(Vo(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a;return n(t)};function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const Ni={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a};function a(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},Ti={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,a={partial:!0,tokenize:function(e,t,n){let a=0;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),u}function u(t){return e.enter("codeFencedFence"),Go(t)?Yo(e,l,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):l(t)}function l(t){return t===o?(e.enter("codeFencedFenceSequence"),c(t)):n(t)}function c(t){return t===o?(a++,e.consume(t),c):a>=s?(e.exit("codeFencedFenceSequence"),Go(t)?Yo(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||Vo(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let o,i=0,s=0;return function(t){return function(t){const n=r.events[r.events.length-1];return i=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,o=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(t)}(t)};function u(t){return t===o?(s++,e.consume(t),u):s<3?n(t):(e.exit("codeFencedFenceSequence"),Go(t)?Yo(e,l,"whitespace")(t):l(t))}function l(n){return null===n||Vo(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(Ni,p,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),c(n))}function c(t){return null===t||Vo(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),l(t)):Go(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Yo(e,d,"whitespace")(t)):96===t&&t===o?n(t):(e.consume(t),c)}function d(t){return null===t||Vo(t)?l(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||Vo(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),l(t)):96===t&&t===o?n(t):(e.consume(t),h)}function p(t){return e.attempt(a,v,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),g}function g(t){return i>0&&Go(t)?Yo(e,m,"linePrefix",i+1)(t):m(t)}function m(t){return null===t||Vo(t)?e.check(Ni,p,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||Vo(t)?(e.exit("codeFlowValue"),m(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}}};const Oi=document.createElement("i");function Ri(e){const t="&"+e+";";Oi.innerHTML=t;const n=Oi.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const _i={name:"characterReference",tokenize:function(e,t,n){const r=this;let a,o,i=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),a=31,o=Bo,l(t))}function u(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=Wo,l):(e.enter("characterReferenceValue"),a=7,o=zo,l(t))}function l(s){if(59===s&&i){const a=e.exit("characterReferenceValue");return o!==Bo||Ri(r.sliceSerialize(a))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return o(s)&&i++<a?(e.consume(s),l):n(s)}}};const Pi={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Uo(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Mi={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Yo(e,t,"linePrefix")}}};function Bi(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const o=e[a].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const Li={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&Ao(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,a,o,i=e.length,s=0;for(;i--;)if(n=e[i][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[i][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(a){if("enter"===e[i][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=i,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(a=i);const u={type:"labelLink"===e[r][1].type?"link":"image",start:g({},e[r][1].start),end:g({},e[e.length-1][1].end)},l={type:"label",start:g({},e[r][1].start),end:g({},e[a][1].end)},c={type:"labelText",start:g({},e[r+s+2][1].end),end:g({},e[a-2][1].start)};return o=[["enter",u,t],["enter",l,t]],o=Fo(o,e.slice(r+1,r+s+3)),o=Fo(o,[["enter",c,t]]),o=Fo(o,Bi(t.parser.constructs.insideSpan.null,e.slice(r+s+4,a-3),t)),o=Fo(o,[["exit",c,t],e[a-2],e[a-1],["exit",l,t]]),o=Fo(o,e.slice(a+1)),o=Fo(o,[["exit",u,t]]),Ao(e,r,e.length,o),e},tokenize:function(e,t,n){const r=this;let a,o,i=r.events.length;for(;i--;)if(("labelImage"===r.events[i][1].type||"labelLink"===r.events[i][1].type)&&!r.events[i][1]._balanced){a=r.events[i][1];break}return function(t){if(!a)return n(t);if(a._inactive)return c(t);return o=r.parser.defined.includes(vi(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s};function s(t){return 40===t?e.attempt(ji,l,o?l:c)(t):91===t?e.attempt(zi,l,o?u:c)(t):o?l(t):c(t)}function u(t){return e.attempt(Wi,l,c)(t)}function l(e){return t(e)}function c(e){return a._balanced=!0,n(e)}}},ji={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Ho(t)?yi(e,a)(t):a(t)}function a(t){return 41===t?l(t):fi(e,o,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function o(t){return Ho(t)?yi(e,s)(t):l(t)}function i(e){return n(e)}function s(t){return 34===t||39===t||40===t?mi(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):l(t)}function u(t){return Ho(t)?yi(e,l)(t):l(t)}function l(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},zi={tokenize:function(e,t,n){const r=this;return function(t){return gi.call(r,e,a,o,"reference","referenceMarker","referenceString")(t)};function a(e){return r.parser.defined.includes(vi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}},Wi={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const Ui={name:"labelStartImage",resolveAll:Li.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),a};function a(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};function Vi(e){return null===e||Ho(e)||qo(e)?1:Ko(e)?2:void 0}const Hi={name:"attention",resolveAll:function(e,t){let n,r,a,o,i,s,u,l,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close)for(n=c;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[n][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1;const d=g({},e[n][1].end),h=g({},e[c][1].start);Gi(d,-s),Gi(h,s),o={type:s>1?"strongSequence":"emphasisSequence",start:d,end:g({},e[n][1].end)},i={type:s>1?"strongSequence":"emphasisSequence",start:g({},e[c][1].start),end:h},a={type:s>1?"strongText":"emphasisText",start:g({},e[n][1].end),end:g({},e[c][1].start)},r={type:s>1?"strong":"emphasis",start:g({},o.start),end:g({},i.end)},e[n][1].end=g({},o.start),e[c][1].start=g({},i.end),u=[],e[n][1].end.offset-e[n][1].start.offset&&(u=Fo(u,[["enter",e[n][1],t],["exit",e[n][1],t]])),u=Fo(u,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",a,t]]),u=Fo(u,Bi(t.parser.constructs.insideSpan.null,e.slice(n+1,c),t)),u=Fo(u,[["exit",a,t],["enter",i,t],["exit",i,t],["exit",r,t]]),e[c][1].end.offset-e[c][1].start.offset?(l=2,u=Fo(u,[["enter",e[c][1],t],["exit",e[c][1],t]])):l=0,Ao(e,n-1,c-n+3,u),c=n+u.length-l-2;break}c=-1;for(;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Vi(r);let o;return function(t){return o=t,e.enter("attentionSequence"),i(t)};function i(s){if(s===o)return e.consume(s),i;const u=e.exit("attentionSequence"),l=Vi(s),c=!l||2===l&&a||n.includes(s),d=!a||2===a&&l||n.includes(r);return u._open=Boolean(42===o?c:c&&(a||!d)),u._close=Boolean(42===o?d:d&&(l||!c)),t(s)}}};function Gi(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ki={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a};function a(t){return Mo(t)?(e.consume(t),o):64===t?n(t):u(t)}function o(e){return 43===e||45===e||46===e||Bo(e)?(r=1,i(e)):u(e)}function i(t){return 58===t?(e.consume(t),r=0,s):(43===t||45===t||46===t||Bo(t))&&r++<32?(e.consume(t),i):(r=0,u(t))}function s(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||jo(r)?n(r):(e.consume(r),s)}function u(t){return 64===t?(e.consume(t),l):Lo(t)?(e.consume(t),u):n(t)}function l(e){return Bo(e)?c(e):n(e)}function c(n){return 46===n?(e.consume(n),r=0,l):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||Bo(t))&&r++<63){const n=45===t?d:c;return e.consume(t),n}return n(t)}}};const qi={name:"htmlText",tokenize:function(e,t,n){const r=this;let a,o,i;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),u):47===t?(e.consume(t),x):63===t?(e.consume(t),v):Mo(t)?(e.consume(t),k):n(t)}function u(t){return 45===t?(e.consume(t),l):91===t?(e.consume(t),o=0,p):Mo(t)?(e.consume(t),y):n(t)}function l(t){return 45===t?(e.consume(t),h):n(t)}function c(t){return null===t?n(t):45===t?(e.consume(t),d):Vo(t)?(i=c,O(t)):(e.consume(t),c)}function d(t){return 45===t?(e.consume(t),h):c(t)}function h(e){return 62===e?T(e):45===e?d(e):c(e)}function p(t){const r="CDATA[";return t===r.charCodeAt(o++)?(e.consume(t),6===o?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),g):Vo(t)?(i=f,O(t)):(e.consume(t),f)}function g(t){return 93===t?(e.consume(t),m):f(t)}function m(t){return 62===t?T(t):93===t?(e.consume(t),m):f(t)}function y(t){return null===t||62===t?T(t):Vo(t)?(i=y,O(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),b):Vo(t)?(i=v,O(t)):(e.consume(t),v)}function b(e){return 62===e?T(e):v(e)}function x(t){return Mo(t)?(e.consume(t),w):n(t)}function w(t){return 45===t||Bo(t)?(e.consume(t),w):D(t)}function D(t){return Vo(t)?(i=D,O(t)):Go(t)?(e.consume(t),D):T(t)}function k(t){return 45===t||Bo(t)?(e.consume(t),k):47===t||62===t||Ho(t)?C(t):n(t)}function C(t){return 47===t?(e.consume(t),T):58===t||95===t||Mo(t)?(e.consume(t),E):Vo(t)?(i=C,O(t)):Go(t)?(e.consume(t),C):T(t)}function E(t){return 45===t||46===t||58===t||95===t||Bo(t)?(e.consume(t),E):S(t)}function S(t){return 61===t?(e.consume(t),A):Vo(t)?(i=S,O(t)):Go(t)?(e.consume(t),S):C(t)}function A(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),a=t,F):Vo(t)?(i=A,O(t)):Go(t)?(e.consume(t),A):(e.consume(t),I)}function F(t){return t===a?(e.consume(t),a=void 0,N):null===t?n(t):Vo(t)?(i=F,O(t)):(e.consume(t),F)}function I(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Ho(t)?C(t):(e.consume(t),I)}function N(e){return 47===e||62===e||Ho(e)?C(e):n(e)}function T(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function O(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),R}function R(t){return Go(t)?Yo(e,_,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):_(t)}function _(t){return e.enter("htmlTextData"),i(t)}}};const Xi={name:"labelStartLink",resolveAll:Li.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),a};function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Yi={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Vo(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Qi={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,a=3;if(("lineEnding"===e[a][1].type||"space"===e[a][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=a;++t<r;)if("codeTextData"===e[t][1].type){e[a][1].type="codeTextPadding",e[r][1].type="codeTextPadding",a+=2,r-=2;break}t=a-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,a,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),i(t)};function i(t){return 96===t?(e.consume(t),o++,i):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(a=e.enter("codeTextSequence"),r=0,l(t)):Vo(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),u(t))}function u(t){return null===t||32===t||96===t||Vo(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),u)}function l(n){return 96===n?(e.consume(n),r++,l):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(a.type="codeTextData",u(n))}}};const Zi={42:ci,43:ci,45:ci,48:ci,49:ci,50:ci,51:ci,52:ci,53:ci,54:ci,55:ci,56:ci,57:ci,62:pi},Ji={91:bi},$i={[-2]:wi,[-1]:wi,32:wi},es={35:ki,42:li,45:[Ci,li],60:Ai,61:Ci,95:li,96:Ti,126:Ti},ts={38:_i,92:Pi},ns={[-5]:Mi,[-4]:Mi,[-3]:Mi,33:Ui,38:_i,42:Hi,60:[Ki,qi],91:Xi,92:[Yi,Pi],93:Li,95:Hi,96:Qi},rs={null:[Hi,ri]},as={null:[42,95]},os={null:[]};function is(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},o=[];let i=[],s=[],u=!0;const l={attempt:v(function(e,t){b(e,t.from)}),check:v(y),consume:function(e){Vo(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,x()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e,u=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=f(),c.events.push(["enter",n,c]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=f(),c.events.push(["exit",t,c]),t},interrupt:v(y,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){a[e.line]=e.column,x()},events:[],now:f,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const o=e[n];let i;if("string"===typeof o)i=o;else switch(o){case-5:i="\r";break;case-4:i="\n";break;case-3:i="\r\n";break;case-2:i=t?" ":"\t";break;case-1:if(!t&&a)continue;i=" ";break;default:i=String.fromCharCode(o)}a=-2===o,r.push(i)}return r.join("")}(p(e),t)},sliceStream:p,write:function(e){if(i=Fo(i,e),g(),null!==i[i.length-1])return[];return b(t,0),c.events=Bi(o,c.events,c),c.events}};let d,h=t.tokenize.call(c,l);return t.resolveAll&&o.push(t),c;function p(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,o=t.end._bufferIndex;let i;if(n===a)i=[e[n].slice(r,o)];else{if(i=e.slice(n,a),r>-1){const e=i[0];"string"===typeof e?i[0]=e.slice(r):i.shift()}o>0&&i.push(e[a].slice(0,o))}return i}(i,e)}function f(){const{_bufferIndex:e,_index:t,line:n,column:a,offset:o}=r;return{_bufferIndex:e,_index:t,line:n,column:a,offset:o}}function g(){let e;for(;r._index<i.length;){const t=i[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)m(t.charCodeAt(r._bufferIndex));else m(t)}}function m(e){u=void 0,d=e,h=h(e)}function y(e,t){t.restore()}function v(e,t){return function(n,a,o){let i,d,h,p;return Array.isArray(n)?g(n):"tokenize"in n?g([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return g([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function g(e){return i=e,d=0,0===e.length?o:m(e[d])}function m(e){return function(n){p=function(){const e=f(),t=c.previous,n=c.currentConstruct,a=c.events.length,o=Array.from(s);return{from:a,restore:i};function i(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=a,s=o,x()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return v(n);return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,y,v)(n)}}function y(t){return u=!0,e(h,p),a}function v(e){return u=!0,p.restore(),++d<i.length?m(i[d]):o}}}function b(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&Ao(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function x(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function ss(e){const n=function(e){const t={};let n=-1;for(;++n<e.length;)_o(t,e[n]);return t}([t,...(e||{}).extensions||[]]),r={constructs:n,content:a(Qo),defined:[],document:a(Zo),flow:a(ni),lazy:{},string:a(ai),text:a(oi)};return r;function a(e){return function(t){return is(r,e,t)}}}const us=/[\0\t\n\r]/g;function ls(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const cs=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ds(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return ls(n.slice(t?2:1),t?16:10)}return Ri(n)||e}const hs={}.hasOwnProperty;function ps(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(te),autolinkProtocol:E,autolinkEmail:E,atxHeading:o(Z),blockQuote:o(K),characterEscape:E,characterReference:E,codeFenced:o(q),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:o(q,i),codeText:o(X,i),codeTextData:E,data:E,codeFlowValue:E,definition:o(Y),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:o(Q),hardBreakEscape:o(J),hardBreakTrailing:o(J),htmlFlow:o($,i),htmlFlowData:E,htmlText:o($,i),htmlTextData:E,image:o(ee),label:i,link:o(te),listItem:o(re),listItemValue:h,listOrdered:o(ne,d),listUnordered:o(ne),paragraph:o(ae),reference:j,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:o(Z),strong:o(oe),thematicBreak:o(se)},exit:{atxHeading:u(),atxHeadingSequence:w,autolink:u(),autolinkEmail:G,autolinkProtocol:H,blockQuote:u(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:W,characterReferenceMarkerNumeric:W,characterReferenceValue:U,characterReference:V,codeFenced:u(m),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:f,codeFlowValue:S,codeIndented:u(y),codeText:u(T),codeTextData:S,data:S,definition:u(),definitionDestinationString:x,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(F),hardBreakTrailing:u(F),htmlFlow:u(I),htmlFlowData:S,htmlText:u(N),htmlTextData:S,image:u(R),label:P,labelText:_,lineEnding:A,link:u(O),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:z,resourceDestinationString:M,resourceTitleString:B,resource:L,setextHeading:u(C),setextHeadingLineSequence:k,setextHeadingText:D,strong:u(),thematicBreak:u()}};gs(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const o={stack:[r],tokenStack:[],config:t,enter:s,exit:l,buffer:i,resume:c,data:n},u=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])u.push(d);else{d=a(e,u.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];hs.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},o),e[d][1])}if(o.tokenStack.length>0){const e=o.tokenStack[o.tokenStack.length-1];(e[1]||ys).call(o,void 0,e[0])}for(r.position={start:fs(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:fs(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function a(e,t,n){let r,a,o,i,s=t-1,u=-1,l=!1;for(;++s<=n;){const t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?u++:u--,i=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||i||u||o||(o=s),i=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:i=void 0}if(!u&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===u&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let i=s;for(a=void 0;i--;){const t=e[i];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;a&&(e[a][1].type="lineEndingBlank",l=!0),t[1].type="lineEnding",a=i}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}o&&(!a||o<a)&&(r._spread=!0),r.end=Object.assign({},a?e[a][1].start:t[1].end),e.splice(a||s,0,["exit",r,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){const a={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=a,e.splice(s,0,["enter",a,t[2]]),s++,n++,o=void 0,i=!0}}}return e[t][1]._spread=l,n}function o(e,t){return n;function n(n){s.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function s(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:fs(t.start),end:void 0}}function u(e){return t;function t(t){e&&e.call(this,t),l.call(this,t)}}function l(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+to({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||ys).call(this,e,r[0])}n.position.end=fs(e.end)}function c(){return function(e,t){const n=t||Co;return Eo(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function v(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=vi(this.sliceSerialize(e)).toLowerCase()}function b(){const e=this.resume();this.stack[this.stack.length-1].title=e}function x(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function D(){this.data.setextHeadingSlurpLineEnding=!0}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function E(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ie(),n.position={start:fs(e.start),end:void 0},t.push(n)),this.stack.push(n)}function S(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=fs(e.end)}function A(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=fs(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(E.call(this,e),S.call(this,e))}function F(){this.data.atHardBreak=!0}function I(){const e=this.resume();this.stack[this.stack.length-1].value=e}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function O(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function R(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function _(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(cs,ds)}(t),n.identifier=vi(t).toLowerCase()}function P(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function M(){const e=this.resume();this.stack[this.stack.length-1].url=e}function B(){const e=this.resume();this.stack[this.stack.length-1].title=e}function L(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function z(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=vi(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function W(e){this.data.characterReferenceType=e.type}function U(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=ls(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=Ri(t)}this.stack[this.stack.length-1].value+=r}function V(e){this.stack.pop().position.end=fs(e.end)}function H(e){S.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function G(e){S.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function K(){return{type:"blockquote",children:[]}}function q(){return{type:"code",lang:null,meta:null,value:""}}function X(){return{type:"inlineCode",value:""}}function Y(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Q(){return{type:"emphasis",children:[]}}function Z(){return{type:"heading",depth:0,children:[]}}function J(){return{type:"break"}}function $(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ae(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function se(){return{type:"thematicBreak"}}}(n)(function(e){for(;!To(e););return e}(ss(n).document().write(function(){let e,t=1,n="",r=!0;return function(a,o,i){const s=[];let u,l,c,d,h;for(a=n+("string"===typeof a?a.toString():new TextDecoder(o||void 0).decode(a)),c=0,n="",r&&(65279===a.charCodeAt(0)&&c++,r=void 0);c<a.length;){if(us.lastIndex=c,u=us.exec(a),d=u&&void 0!==u.index?u.index:a.length,h=a.charCodeAt(d),!u){n=a.slice(c);break}if(10===h&&c===d&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),c<d&&(s.push(a.slice(c,d)),t+=d-c),h){case 0:s.push(65533),t++;break;case 9:for(l=4*Math.ceil(t/4),s.push(-2);t++<l;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}c=d+1}return i&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))}function fs(e){return{line:e.line,column:e.column,offset:e.offset}}function gs(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?gs(e,r):ms(e,r)}}function ms(e,t){let n;for(n in t)if(hs.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function ys(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+to({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+to({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+to({start:t.start,end:t.end})+") is still open")}function vs(e){const t=this;t.parser=function(n){return ps(n,g(g(g({},t.data("settings")),e),{},{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}}const bs="object"===typeof self?self:globalThis,xs=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=a=>{if(e.has(a))return e.get(a);const[o,i]=t[a];switch(o){case 0:case-1:return n(i,a);case 1:{const e=n([],a);for(const t of i)e.push(r(t));return e}case 2:{const e=n({},a);for(const[t,n]of i)e[r(t)]=r(n);return e}case 3:return n(new Date(i),a);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),a)}case 5:{const e=n(new Map,a);for(const[t,n]of i)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,a);for(const t of i)e.add(r(t));return e}case 7:{const{name:e,message:t}=i;return n(new bs[e](t),a)}case 8:return n(BigInt(i),a);case"BigInt":return n(Object(BigInt(i)),a);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:e}=new Uint8Array(i);return n(new DataView(e),i)}}return n(new bs[o](i),a)};return r})(new Map,e)(0),ws="",{toString:Ds}={},{keys:ks}=Object,Cs=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Ds.call(e).slice(8,-1);switch(n){case"Array":return[1,ws];case"Object":return[2,ws];case"Date":return[3,ws];case"RegExp":return[4,ws];case"Map":return[5,ws];case"Set":return[6,ws];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Es=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},Ss=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return((e,t,n,r)=>{const a=(e,t)=>{const a=r.push(e)-1;return n.set(t,a),a},o=r=>{if(n.has(r))return n.get(r);let[i,s]=Cs(r);switch(i){case 0:{let t=r;switch(s){case"bigint":i=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return a([-1],r)}return a([i,t],r)}case 1:{if(s){let e=r;return"DataView"===s?e=new Uint8Array(r.buffer):"ArrayBuffer"===s&&(e=new Uint8Array(r)),a([s,[...e]],r)}const e=[],t=a([i,e],r);for(const n of r)e.push(o(n));return t}case 2:{if(s)switch(s){case"BigInt":return a([s,r.toString()],r);case"Boolean":case"Number":case"String":return a([s,r.valueOf()],r)}if(t&&"toJSON"in r)return o(r.toJSON());const n=[],u=a([i,n],r);for(const t of ks(r))!e&&Es(Cs(r[t]))||n.push([o(t),o(r[t])]);return u}case 3:return a([i,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return a([i,{source:e,flags:t}],r)}case 5:{const t=[],n=a([i,t],r);for(const[a,i]of r)(e||!Es(Cs(a))&&!Es(Cs(i)))&&t.push([o(a),o(i)]);return n}case 6:{const t=[],n=a([i,t],r);for(const a of r)!e&&Es(Cs(a))||t.push(o(a));return n}}const{message:u}=r;return a([i,{name:s,message:u}],r)};return o})(!(t||n),!!t,new Map,r)(e),r},As="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?xs(Ss(e,t)):structuredClone(e):(e,t)=>xs(Ss(e,t));function Fs(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const o=e.charCodeAt(n);let i="";if(37===o&&Bo(e.charCodeAt(n+1))&&Bo(e.charCodeAt(n+2)))a=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(i=String.fromCharCode(o));else if(o>55295&&o<57344){const t=e.charCodeAt(n+1);o<56320&&t>56319&&t<57344?(i=String.fromCharCode(o,t),a=1):i="\ufffd"}else i=String.fromCharCode(o);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+a+1,i=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Is(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Ns(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const Ts=function(e){if(null===e||void 0===e)return Rs;if("function"===typeof e)return Os(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ts(e[n]);return Os(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return Os(n);function n(n){const r=n;let a;for(a in e)if(r[a]!==t[a])return!1;return!0}}(e);if("string"===typeof e)return function(e){return Os(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Os(e){return function(t,n,r){return Boolean(_s(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function Rs(){return!0}function _s(e){return null!==e&&"object"===typeof e&&"type"in e}const Ps=[],Ms=!0,Bs=!1;function Ls(e,t,n,r){let a;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):a=t;const o=Ts(a),i=r?-1:1;!function e(a,s,u){const l=a&&"object"===typeof a?a:{};if("string"===typeof l.type){const e="string"===typeof l.tagName?l.tagName:"string"===typeof l.name?l.name:void 0;Object.defineProperty(c,"name",{value:"node ("+a.type+(e?"<"+e+">":"")+")"})}return c;function c(){let l,c,d,h=Ps;if((!t||o(a,s,u[u.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[Ms,e];return null===e||void 0===e?Ps:[e]}(n(a,u)),h[0]===Bs))return h;if("children"in a&&a.children){const t=a;if(t.children&&"skip"!==h[0])for(c=(r?t.children.length:-1)+i,d=u.concat(t);c>-1&&c<t.children.length;){const n=t.children[c];if(l=e(n,c,d)(),l[0]===Bs)return l;c="number"===typeof l[1]?l[1]:c+i}}return h}}(e,void 0,[])()}function js(e,t,n,r){let a,o,i;"function"===typeof t&&"function"!==typeof n?(o=void 0,i=t,a=n):(o=t,i=n,a=r),Ls(e,o,function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return i(e,r,n)},a)}function zs(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),o=a[0];o&&"text"===o.type?o.value="["+o.value:a.unshift({type:"text",value:"["});const i=a[a.length-1];return i&&"text"===i.type?i.value+=r:a.push({type:"text",value:r}),a}function Ws(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}function Us(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const o=[];for(;r;)o.push(Vs(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return o.push(Vs(t.slice(a),a>0,!1)),o.join("")}function Vs(e,t,n){let r=0,a=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(a-1);for(;9===t||32===t;)a--,t=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}const Hs={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=Fs(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let i,s=e.footnoteCounts.get(r);void 0===s?(s=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=o+1,s+=1,e.footnoteCounts.set(r,s);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return zs(e,t);const a={src:Fs(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(a.title=r.title);const o={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){const n={src:Fs(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return zs(e,t);const a={href:Fs(r.url||"")};null!==r.title&&void 0!==r.title&&(a.title=r.title);const o={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){const n={href:Fs(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),a=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Ws(n[r])}return t}(n):Ws(t),o={},i=[];if("boolean"===typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(a||0!==s||"element"!==e.type||"p"!==e.tagName)&&i.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||a?i.push(e):i.push(...e.children)}const u=r[r.length-1];u&&(a||"element"!==u.type||"p"!==u.tagName)&&i.push({type:"text",value:"\n"});const l={type:"element",tagName:"li",properties:o,children:i};return e.patch(t,l),e.applyData(t,l)},list:function(e,t){const n={},r=e.all(t);let a=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++a<r.length;){const e=r[a];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),a.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=$a(t.children[1]),i=Ja(t.children[t.children.length-1]);o&&i&&(r.position={start:o,end:i}),a.push(r)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,o),e.applyData(t,o)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,a=0===(r?r.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,i=o?o.length:t.children.length;let s=-1;const u=[];for(;++s<i;){const n=t.children[s],r={},i=o?o[s]:void 0;i&&(r.align=i);let l={type:"element",tagName:a,properties:r,children:[]};n&&(l.children=e.all(n),e.patch(n,l),l=e.applyData(n,l)),u.push(l)}const l={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,l),e.applyData(t,l)},text:function(e,t){const n={type:"text",value:Us(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Gs,yaml:Gs,definition:Gs,footnoteDefinition:Gs};function Gs(){}const Ks=["children"],qs={}.hasOwnProperty,Xs={};function Ys(e,t){e.position&&(t.position=function(e){const t=$a(e),n=Ja(e);if(t&&n)return{start:t,end:n}}(e))}function Qs(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,a=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&a&&Object.assign(n.properties,As(a)),"children"in n&&n.children&&null!==r&&void 0!==r&&(n.children=r)}return n}function Zs(e,t){const n=t.data||{},r=!("value"in t)||qs.call(n,"hProperties")||qs.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function Js(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function $s(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function eu(e,t){const n=function(e,t){const n=t||Xs,r=new Map,a=new Map,o=new Map,i=g(g({},Hs),n.handlers),s={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const a=s.one(n[r],e);if(a){if(r&&"break"===n[r-1].type&&(Array.isArray(a)||"text"!==a.type||(a.value=$s(a.value)),!Array.isArray(a)&&"element"===a.type)){const e=a.children[0];e&&"text"===e.type&&(e.value=$s(e.value))}Array.isArray(a)?t.push(...a):t.push(a)}}}return t},applyData:Qs,definitionById:r,footnoteById:a,footnoteCounts:o,footnoteOrder:[],handlers:i,one:function(e,t){const n=e.type,r=s.handlers[n];if(qs.call(s.handlers,n)&&r)return r(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if("children"in e){const{children:t}=e,n=w(e,Ks),r=As(n);return r.children=s.all(e),r}return As(e)}return(s.options.unknownHandler||Zs)(s,e,t)},options:n,patch:Ys,wrap:Js};return js(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:a,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),s}(e,t),r=n.one(e,void 0),a=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Is,r=e.options.footnoteBackLabel||Ns,a=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let u=-1;for(;++u<e.footnoteOrder.length;){const a=e.footnoteById.get(e.footnoteOrder[u]);if(!a)continue;const o=e.all(a),i=String(a.identifier).toUpperCase(),l=Fs(i.toLowerCase());let c=0;const d=[],h=e.footnoteCounts.get(i);for(;void 0!==h&&++c<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"===typeof n?n:n(u,c);"string"===typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+l+(c>1?"-"+c:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof r?r:r(u,c),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=o[o.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...d)}else o.push(...d);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+l},children:e.wrap(o,!0)};e.patch(a,f),s.push(f)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:g(g({},As(i)),{},{id:"footnote-label"}),children:[{type:"text",value:a}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&o.children.push({type:"text",value:"\n"},a),o}function tu(e,t){return e&&"run"in e?async function(n,r){const a=eu(n,g({file:r},t));await e.run(a,r)}:function(n,r){return eu(n,g({file:r},e||t))}}function nu(e){if(e)throw e}var ru=n(3240);function au(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ou(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let a=-1;const o=n.pop();if("function"!==typeof o)throw new TypeError("Expected function as last argument, not "+o);!function t(r){const i=e[++a];let s=-1;if(r)o(r);else{for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];for(;++s<n.length;)null!==l[s]&&void 0!==l[s]||(l[s]=n[s]);n=l,i?function(e,t){let n;return a;function a(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];const u=e.length>a.length;let l;u&&a.push(o);try{l=e.apply(this,a)}catch(r){if(u&&n)throw r;return o(r)}u||(l&&l.then&&"function"===typeof l.then?l.then(i,o):l instanceof Error?o(l):i(l))}function o(e){if(!n){n=!0;for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];t(e,...a)}}function i(e){o(null,e)}}(i,t)(...l):o(null,...l)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const iu={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');su(e);let n,r=0,a=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else a<0&&(n=!0,a=o+1);return a<0?"":e.slice(r,a)}if(t===e)return"";let i=-1,s=t.length-1;for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else i<0&&(n=!0,i=o+1),s>-1&&(e.codePointAt(o)===t.codePointAt(s--)?s<0&&(a=o):(s=-1,a=i));r===a?a=i:a<0&&(a=e.length);return e.slice(r,a)},dirname:function(e){if(su(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){su(e);let t,n=e.length,r=-1,a=0,o=-1,i=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?o<0?o=n:1!==i&&(i=1):o>-1&&(i=-1);else if(t){a=n+1;break}}if(o<0||r<0||0===i||1===i&&o===r-1&&o===a+1)return"";return e.slice(o,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(;++t<r.length;)su(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){su(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,a="",o=0,i=-1,s=0,u=-1;for(;++u<=e.length;){if(u<e.length)n=e.codePointAt(u);else{if(47===n)break;n=47}if(47===n){if(i===u-1||1===s);else if(i!==u-1&&2===s){if(a.length<2||2!==o||46!==a.codePointAt(a.length-1)||46!==a.codePointAt(a.length-2))if(a.length>2){if(r=a.lastIndexOf("/"),r!==a.length-1){r<0?(a="",o=0):(a=a.slice(0,r),o=a.length-1-a.lastIndexOf("/")),i=u,s=0;continue}}else if(a.length>0){a="",o=0,i=u,s=0;continue}t&&(a=a.length>0?a+"/..":"..",o=2)}else a.length>0?a+="/"+e.slice(i+1,u):a=e.slice(i+1,u),o=u-i-1;i=u,s=0}else 46===n&&s>-1?s++:s=-1}return a}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function su(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const uu={cwd:function(){return"/"}};function lu(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function cu(e){if("string"===typeof e)e=new URL(e);else if(!lu(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const du=["history","path","basename","stem","extname","dirname"];class hu{constructor(e){let t;t=e?lu(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":uu.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<du.length;){const e=du[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)du.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?iu.basename(this.path):void 0}set basename(e){fu(e,"basename"),pu(e,"basename"),this.path=iu.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?iu.dirname(this.path):void 0}set dirname(e){gu(this.basename,"dirname"),this.path=iu.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?iu.extname(this.path):void 0}set extname(e){if(pu(e,"extname"),gu(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=iu.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){lu(e)&&(e=cu(e)),fu(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?iu.basename(this.path,this.extname):void 0}set stem(e){fu(e,"stem"),pu(e,"stem"),this.path=iu.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new oo(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function pu(e,t){if(e&&e.includes(iu.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+iu.sep+"`")}function fu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function gu(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const mu=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},yu={}.hasOwnProperty;class vu extends mu{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ou()}copy(){const e=new vu;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(ru(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(Du("data",this.frozen),this.namespace[e]=t,this):yu.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Du("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"===typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Eu(e),n=this.parser||this.Parser;return xu("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),xu("process",this.parser||this.Parser),wu("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,a){const o=Eu(e),i=n.parse(o);function s(e,n){e||!n?a(e):r?r(n):t(void 0,n)}n.run(i,o,function(e,t,r){if(e||!t||!r)return s(e);const a=t,o=n.stringify(a,r);!function(e){return"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)}(o)?r.result=o:r.value=o,s(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),xu("processSync",this.parser||this.Parser),wu("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,nu(e),t=r}),Cu("processSync","process",n),t}run(e,t,n){ku(e),this.freeze();const r=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?a(void 0,n):new Promise(a);function a(a,o){const i=Eu(t);r.run(e,i,function(t,r,i){const s=r||e;t?o(t):a?a(s):n(void 0,s,i)})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){nu(e),n=t,r=!0}),Cu("runSync","run",r),n}stringify(e,t){this.freeze();const n=Eu(t),r=this.compiler||this.Compiler;return wu("stringify",r),ku(e),r(e,n)}use(e){const t=this.attachers,n=this.namespace;if(Du("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];l(e,a)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?u(e):s(e)}return this;function i(e){if("function"===typeof e)l(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;l(t,n)}else s(e)}}function s(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(e.plugins),e.settings&&(n.settings=ru(!0,n.settings,e.settings))}function u(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){i(e[t])}}}function l(e,n){let r=-1,a=-1;for(;++r<t.length;)if(t[r][0]===e){a=r;break}if(-1===a)t.push([e,...n]);else if(n.length>0){let[r,...o]=n;const i=t[a][1];au(i)&&au(r)&&(r=ru(!0,i,r)),t[a]=[e,r,...o]}}}}const bu=(new vu).freeze();function xu(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function wu(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function Du(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ku(e){if(!au(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Cu(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Eu(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new hu(e)}const Su=[],Au={allowDangerousHtml:!0},Fu=/^(https?|ircs?|mailto|xmpp)$/i,Iu=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Nu(e){const t=Tu(e),n=Ou(e);return Ru(t.runSync(t.parse(n),n),e)}function Tu(e){const t=e.rehypePlugins||Su,n=e.remarkPlugins||Su,r=e.remarkRehypeOptions?g(g({},e.remarkRehypeOptions),Au):Au;return bu().use(vs).use(n).use(tu,r).use(t)}function Ou(e){const t=e.children||"",n=new hu;return"string"===typeof t&&(n.value=t),n}function Ru(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,o=t.disallowedElements,i=t.skipHtml,s=t.unwrapDisallowed,u=t.urlTransform||_u;for(const l of Iu)Object.hasOwn(t,l.from)&&da((l.from,l.to&&l.to,l.id));return js(e,function(e,t,a){if("raw"===e.type&&a&&"number"===typeof t)return i?a.children.splice(t,1):a.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in ko)if(Object.hasOwn(ko,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=ko[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=u(String(n||""),t,e))}}if("element"===e.type){let i=n?!n.includes(e.tagName):!!o&&o.includes(e.tagName);if(!i&&r&&"number"===typeof t&&(i=!r(e,t,a)),i&&a&&"number"===typeof t)return s&&e.children?a.children.splice(t,1,...e.children):a.children.splice(t,1),t}}),po(e,{Fragment:v.Fragment,components:a,ignoreInvalidStyle:!0,jsx:v.jsx,jsxs:v.jsxs,passKeys:!0,passNode:!0})}function _u(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return-1===t||-1!==a&&t>a||-1!==n&&t>n||-1!==r&&t>r||Fu.test(e.slice(0,t))?e:""}const Pu="0.6.0 (Prototype)",Mu=e=>{let{isOpen:t,onClose:n}=e;const[r,a]=(0,u.useState)("");return(0,u.useEffect)(()=>{t&&fetch("".concat(".","/changelog.md")).then(e=>{if(!e.ok)throw new Error("Changelog file not found");return e.text()}).then(e=>a(e)).catch(e=>console.error("Error fetching changelog:",e))},[t]),(0,v.jsx)(we,{appear:!0,show:t,as:u.Fragment,children:(0,v.jsxs)(Kn,{as:"div",className:"relative z-50",onClose:n,children:[(0,v.jsx)(we.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,v.jsx)("div",{className:"fixed inset-0 bg-black/50"})}),(0,v.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,v.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,v.jsx)(we.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,v.jsxs)(Kn.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[(0,v.jsxs)(Kn.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100",children:["Changelog - Version ",Pu]}),(0,v.jsx)("div",{className:"mt-4 max-h-96 overflow-y-auto pr-4",children:(0,v.jsx)("article",{className:"prose dark:prose-invert",children:(0,v.jsx)(Nu,{children:r})})}),(0,v.jsx)("div",{className:"mt-6",children:(0,v.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 dark:bg-blue-900 px-4 py-2 text-sm font-medium text-blue-900 dark:text-blue-100 hover:bg-blue-200 dark:hover:bg-blue-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:n,children:"Got it, thanks!"})})]})})})})]})})},Bu=e=>{let{drains:t,logs:n,rules:r=[],indicatorMode:a}=e;return 0===r.length?(0,v.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No thresholds defined. Go to Settings to add one."}):r.map(e=>{const r=new Date,o=new Date(r.getTime()-60*e.hours*60*1e3),i=e.interval||e.hours,s=e.hours/i;return(0,v.jsxs)("div",{className:"w-full p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,v.jsxs)("h3",{className:"font-bold text-lg text-center mb-2",children:["Rule: Avg < ",e.amount,"cc / ",i,"h (over ",e.hours,"h)"]}),(0,v.jsx)("ul",{className:"space-y-2",children:t.map(t=>{const r=n.filter(e=>e.drainId===t.id&&new Date(e.date)>=o),i=r.reduce((e,t)=>e+parseFloat(t.amount),0),u=s>0?i/s:0,l=("average"===a?u:i)<=e.amount?"bg-green-500":"bg-red-500";return(0,v.jsxs)("li",{className:"flex justify-between items-center p-2 bg-gray-200 dark:bg-gray-700/50 rounded-md",children:[(0,v.jsx)("span",{className:"font-medium",children:t.name}),(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsxs)("span",{className:"font-semibold mr-2",children:["Avg: ",u.toFixed(1)," cc | Total: ",i.toFixed(1)," cc"]}),(0,v.jsx)("span",{className:"w-4 h-4 rounded-full ".concat(l),title:"Indicator based on ".concat(a)})]})]},t.id)})})]},e.id)})};function Lu(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Lu(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ju(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Lu(e))&&(r&&(r+=" "),r+=t);return r}var zu=n(7820),Wu=n.n(zu),Uu=n(7770),Vu=n.n(Uu),Hu=e=>0===e?0:e>0?1:-1,Gu=e=>"number"==typeof e&&e!=+e,Ku=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,qu=e=>("number"===typeof e||e instanceof Number)&&!Gu(e),Xu=e=>qu(e)||"string"===typeof e,Yu=0,Qu=e=>{var t=++Yu;return"".concat(e||"").concat(t)},Zu=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!qu(e)&&"string"!==typeof e)return r;if(Ku(e)){if(null==t)return r;var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return Gu(n)&&(n=r),a&&null!=t&&n>t&&(n=t),n},Ju=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1},$u=(e,t)=>qu(e)&&qu(t)?n=>e+n*(t-e):()=>t;function el(e,t,n){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):Vu()(e,t))===n)}var tl=e=>null===e||"undefined"===typeof e,nl=e=>tl(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),rl=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a]};function al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?al(Object(n),!0).forEach(function(t){il(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):al(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function il(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sl=(0,u.forwardRef)((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:a="100%",height:o="100%",minWidth:i=0,minHeight:s,maxHeight:l,children:c,debounce:d=0,id:h,className:p,onResize:f,style:g={}}=e,m=(0,u.useRef)(null),y=(0,u.useRef)();y.current=f,(0,u.useImperativeHandle)(t,()=>m.current);var[v,b]=(0,u.useState)({containerWidth:r.width,containerHeight:r.height}),x=(0,u.useCallback)((e,t)=>{b(n=>{var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}})},[]);(0,u.useEffect)(()=>{var e=e=>{var t,{width:n,height:r}=e[0].contentRect;x(n,r),null===(t=y.current)||void 0===t||t.call(y,n,r)};d>0&&(e=Wu()(e,d,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:n,height:r}=m.current.getBoundingClientRect();return x(n,r),t.observe(m.current),()=>{t.disconnect()}},[x,d]);var w=(0,u.useMemo)(()=>{var{containerWidth:e,containerHeight:t}=v;if(e<0||t<0)return null;rl(Ku(a)||Ku(o),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,o),rl(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=Ku(a)?e:a,d=Ku(o)?t:o;return n&&n>0&&(r?d=r/n:d&&(r=d*n),l&&d>l&&(d=l)),rl(r>0||d>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,d,a,o,i,s,n),u.Children.map(c,e=>(0,u.cloneElement)(e,{width:r,height:d,style:ol({height:"100%",width:"100%",maxHeight:d,maxWidth:r},e.props.style)}))},[n,c,o,l,s,i,v,a]);return u.createElement("div",{id:h?"".concat(h):void 0,className:ju("recharts-responsive-container",p),style:ol(ol({},g),{},{width:a,height:o,minWidth:i,minHeight:s,maxHeight:l}),ref:m},w)});function ul(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var ll=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),cl=()=>Math.random().toString(36).substring(7).split("").join("."),dl={INIT:"@@redux/INIT".concat(cl()),REPLACE:"@@redux/REPLACE".concat(cl()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(cl())};function hl(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function pl(e,t,n){if("function"!==typeof e)throw new Error(ul(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(ul(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(ul(1));return n(pl)(e,t)}let r=e,a=t,o=new Map,i=o,s=0,u=!1;function l(){i===o&&(i=new Map,o.forEach((e,t)=>{i.set(t,e)}))}function c(){if(u)throw new Error(ul(3));return a}function d(e){if("function"!==typeof e)throw new Error(ul(4));if(u)throw new Error(ul(5));let t=!0;l();const n=s++;return i.set(n,e),function(){if(t){if(u)throw new Error(ul(6));t=!1,l(),i.delete(n),o=null}}}function h(e){if(!hl(e))throw new Error(ul(7));if("undefined"===typeof e.type)throw new Error(ul(8));if("string"!==typeof e.type)throw new Error(ul(17));if(u)throw new Error(ul(9));try{u=!0,a=r(a,e)}finally{u=!1}return(o=i).forEach(e=>{e()}),e}h({type:dl.INIT});return{dispatch:h,subscribe:d,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(ul(10));r=e,h({type:dl.REPLACE})},[ll]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(ul(11));function n(){const e=t;e.next&&e.next(c())}n();return{unsubscribe:e(n)}},[ll](){return this}}}}}function fl(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:dl.INIT}))throw new Error(ul(12));if("undefined"===typeof n(void 0,{type:dl.PROBE_UNKNOWN_ACTION()}))throw new Error(ul(13))})}(n)}catch(Ut){a=Ut}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let o=!1;const i={};for(let a=0;a<r.length;a++){const s=r[a],u=n[s],l=e[s],c=u(l,t);if("undefined"===typeof c){t&&t.type;throw new Error(ul(14))}i[s]=c,o=o||c!==l}return o=o||r.length!==Object.keys(e).length,o?i:e}}function gl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function ml(e){return hl(e)&&"type"in e&&"string"===typeof e.type}function yl(e){return t=>{let{dispatch:n,getState:r}=t;return t=>a=>"function"===typeof a?a(n,r,e):t(a)}}var vl=yl(),bl=yl,xl=Symbol.for("immer-nothing"),wl=Symbol.for("immer-draftable"),Dl=Symbol.for("immer-state");function kl(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Cl=Object.getPrototypeOf;function El(e){return!!e&&!!e[Dl]}function Sl(e){var t;return!!e&&(Fl(e)||Array.isArray(e)||!!e[wl]||!(null===(t=e.constructor)||void 0===t||!t[wl])||Rl(e)||_l(e))}var Al=Object.prototype.constructor.toString();function Fl(e){if(!e||"object"!==typeof e)return!1;const t=Cl(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Al}function Il(e,t){0===Nl(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Nl(e){const t=e[Dl];return t?t.type_:Array.isArray(e)?1:Rl(e)?2:_l(e)?3:0}function Tl(e,t){return 2===Nl(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ol(e,t,n){const r=Nl(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Rl(e){return e instanceof Map}function _l(e){return e instanceof Set}function Pl(e){return e.copy_||e.base_}function Ml(e,t){if(Rl(e))return new Map(e);if(_l(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Fl(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Dl];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Cl(e),t)}{const t=Cl(e);if(null!==t&&n)return g({},e);const r=Object.create(t);return Object.assign(r,e)}}function Bl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return jl(e)||El(e)||!Sl(e)||(Nl(e)>1&&(e.set=e.add=e.clear=e.delete=Ll),Object.freeze(e),t&&Object.entries(e).forEach(e=>{let[t,n]=e;return Bl(n,!0)})),e}function Ll(){kl(2)}function jl(e){return Object.isFrozen(e)}var zl,Wl={};function Ul(e){const t=Wl[e];return t||kl(0),t}function Vl(){return zl}function Hl(e,t){t&&(Ul("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Gl(e){Kl(e),e.drafts_.forEach(Xl),e.drafts_=null}function Kl(e){e===zl&&(zl=e.parent_)}function ql(e){return zl={drafts_:[],parent_:zl,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xl(e){const t=e[Dl];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Yl(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Dl].modified_&&(Gl(t),kl(4)),Sl(e)&&(e=Ql(t,e),t.parent_||Jl(t,e)),t.patches_&&Ul("Patches").generateReplacementPatches_(n[Dl].base_,e,t.patches_,t.inversePatches_)):e=Ql(t,n,[]),Gl(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==xl?e:void 0}function Ql(e,t,n){if(jl(t))return t;const r=t[Dl];if(!r)return Il(t,(a,o)=>Zl(e,r,t,a,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Jl(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let a=t,o=!1;3===r.type_&&(a=new Set(t),t.clear(),o=!0),Il(a,(a,i)=>Zl(e,r,t,a,i,n,o)),Jl(e,t,!1),n&&e.patches_&&Ul("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Zl(e,t,n,r,a,o,i){if(El(a)){const i=Ql(e,a,o&&t&&3!==t.type_&&!Tl(t.assigned_,r)?o.concat(r):void 0);if(Ol(n,r,i),!El(i))return;e.canAutoFreeze_=!1}else i&&n.add(a);if(Sl(a)&&!jl(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ql(e,a),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||Jl(e,a)}}function Jl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Bl(t,n)}var $l={get(e,t){if(t===Dl)return e;const n=Pl(e);if(!Tl(n,t))return function(e,t,n){var r;const a=nc(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Sl(r)?r:r===tc(e.base_,t)?(ac(e),e.copy_[t]=oc(r,e)):r},has:(e,t)=>t in Pl(e),ownKeys:e=>Reflect.ownKeys(Pl(e)),set(e,t,n){const r=nc(Pl(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=tc(Pl(e),t),a=null===r||void 0===r?void 0:r[Dl];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||Tl(e.base_,t)))return!0;ac(e),rc(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==tc(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ac(e),rc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Pl(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){kl(11)},getPrototypeOf:e=>Cl(e.base_),setPrototypeOf(){kl(12)}},ec={};function tc(e,t){const n=e[Dl];return(n?Pl(n):e)[t]}function nc(e,t){if(!(t in e))return;let n=Cl(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Cl(n)}}function rc(e){e.modified_||(e.modified_=!0,e.parent_&&rc(e.parent_))}function ac(e){e.copy_||(e.copy_=Ml(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Il($l,(e,t)=>{ec[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ec.deleteProperty=function(e,t){return ec.set.call(this,e,t,void 0)},ec.set=function(e,t,n){return $l.set.call(this,e[0],t,n,e[0])};function oc(e,t){const n=Rl(e)?Ul("MapSet").proxyMap_(e,t):_l(e)?Ul("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Vl(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,o=$l;n&&(a=[r],o=ec);const{revoke:i,proxy:s}=Proxy.revocable(a,o);return r.draft_=s,r.revoke_=i,s}(e,t);return(t?t.scope_:Vl()).drafts_.push(n),n}function ic(e){return El(e)||kl(10),sc(e)}function sc(e){if(!Sl(e)||jl(e))return e;const t=e[Dl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ml(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ml(e,!0);return Il(n,(e,t)=>{Ol(n,e,sc(t))}),t&&(t.finalized_=!1),n}var uc=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return r.produce(e,e=>t.call(this,e,...o))}}let r;if("function"!==typeof t&&kl(6),void 0!==n&&"function"!==typeof n&&kl(7),Sl(e)){const a=ql(this),o=oc(e,void 0);let i=!0;try{r=t(o),i=!1}finally{i?Gl(a):Kl(a)}return Hl(a,n),Yl(r,a)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===xl&&(r=void 0),this.autoFreeze_&&Bl(r,!0),n){const t=[],a=[];Ul("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}kl(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return t.produceWithPatches(n,t=>e(t,...a))};let r,a;return[this.produce(e,n,(e,t)=>{r=e,a=t}),r,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Sl(e)||kl(8),El(e)&&(e=ic(e));const t=ql(this),n=oc(e,void 0);return n[Dl].isManual_=!0,Kl(t),n}finishDraft(e,t){const n=e&&e[Dl];n&&n.isManual_||kl(9);const{scope_:r}=n;return Hl(r,t),Yl(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Ul("Patches").applyPatches_;return El(e)?r(e,t):this.produce(e,e=>r(e,t))}},lc=uc.produce;uc.produceWithPatches.bind(uc),uc.setAutoFreeze.bind(uc),uc.setUseStrictShallowCopy.bind(uc),uc.applyPatches.bind(uc),uc.createDraft.bind(uc),uc.finishDraft.bind(uc);const cc=["reducerPath"];var dc="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?gl:gl.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function hc(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(id(0));return g(g({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>ml(t)&&t.type===e,n}var pc=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function fc(e){return Sl(e)?lc(e,()=>{}):e}function gc(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var mc="RTK_autoBatch",yc=e=>t=>{setTimeout(t,e)},vc=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new pc(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,a=!1,o=!1;const i=new Set,s="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:yc(10):"callback"===e.type?e.queueNotification:yc(e.timeout),u=()=>{o=!1,a&&(a=!1,i.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>r&&e());return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[mc]),a=!r,a&&(o||(o=!0,s(u))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function bc(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=null!==e&&void 0!==e?e:{};let o=new pc;return t&&(function(e){return"boolean"===typeof e}(t)?o.push(vl):o.push(bl(t.extraArgument))),o},{reducer:n,middleware:r,devTools:a=!0,duplicateMiddlewareCheck:o=!0,preloadedState:i,enhancers:s}=e||{};let u,l;if("function"===typeof n)u=n;else{if(!hl(n))throw new Error(id(1));u=fl(n)}l="function"===typeof r?r(t):t();let c=gl;a&&(c=dc(g({trace:!1},"object"===typeof a&&a)));const d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const a=e(n,r);let o=()=>{throw new Error(ul(15))};const i={getState:a.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o(e,...n)}},s=t.map(e=>e(i));return o=gl(...s)(a.dispatch),g(g({},a),{},{dispatch:o})}}(...l),h=vc(d);return pl(u,i,c(..."function"===typeof s?s(h):h()))}function xc(e){const t={},n=[];let r;const a={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(id(28));if(r in t)throw new Error(id(29));return t[r]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(r=e,a)};return e(a),[t,n,r]}var wc=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Dc=Symbol.for("rtk-slice-createasyncthunk");function kc(e,t){return"".concat(e,"/").concat(t)}function Cc(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Dc];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(id(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return g({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(id(12));if(n in i.sliceCaseReducersByType)throw new Error(id(13));return i.sliceCaseReducersByType[n]=t,s},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),s),exposeAction:(e,t)=>(i.actionCreators[e]=t,s),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,s)};function u(){const[t={},n=[],r]="function"===typeof e.extraReducers?xc(e.extraReducers):[e.extraReducers],a=g(g({},t),i.sliceCaseReducersByType);return function(e,t){let n,[r,a,o]=xc(t);if(function(e){return"function"===typeof e}(e))n=()=>fc(e());else{const t=fc(e);n=()=>t}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,i=[r[t.type],...a.filter(e=>{let{matcher:n}=e;return n(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===i.filter(e=>!!e).length&&(i=[o]),i.reduce((e,n)=>{if(n){if(El(e)){const r=n(e,t);return void 0===r?e:r}if(Sl(e))return lc(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return i.getInitialState=n,i}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}o.forEach(r=>{const o=a[r],i={reducerName:r,type:kc(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function(e,t,n){let r,a,{type:o,reducerName:i,createNotation:s}=e;if("reducer"in t){if(s&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(id(17));r=t.reducer,a=t.prepare}else r=t;n.addCase(o,r).exposeCaseReducer(i,r).exposeAction(i,a?hc(o,a):hc(o))}(i,o,s):function(e,t,n,r){let{type:a,reducerName:o}=e;if(!r)throw new Error(id(18));const{payloadCreator:i,fulfilled:s,pending:u,rejected:l,settled:c,options:d}=t,h=r(a,i,d);n.exposeAction(o,h),s&&n.addCase(h.fulfilled,s);u&&n.addCase(h.pending,u);l&&n.addCase(h.rejected,l);c&&n.addMatcher(h.settled,c);n.exposeCaseReducer(o,{fulfilled:s||Ac,pending:u||Ac,rejected:l||Ac,settled:c||Ac})}(i,o,s,n)});const l=e=>e,c=new Map,d=new WeakMap;let h;function p(e,t){return h||(h=u()),h(e,t)}function f(){return h||(h=u()),h.getInitialState()}function m(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let a=e[t];return"undefined"===typeof a&&n&&(a=gc(d,r,f)),a}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;const r=gc(c,n,()=>new WeakMap);return gc(r,t,()=>{const r={};for(const[o,i]of Object.entries(null!==(a=e.selectors)&&void 0!==a?a:{})){var a;r[o]=Ec(i,t,()=>gc(d,t,f),n)}return r})}return{reducerPath:t,getSelectors:a,get selectors(){return a(r)},selectSlice:r}}const y=g(g({name:t,reducer:p,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:f},m(r)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,a=w(t,cc);const o=null!==n&&void 0!==n?n:r;return e.inject({reducerPath:o,reducer:p},a),g(g({},y),m(o,!0))}});return y}}function Ec(e,t,n,r){function a(a){let o=t(a);"undefined"===typeof o&&r&&(o=n());for(var i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];return e(o,...s)}return a.unwrapped=e,a}var Sc=Cc();function Ac(){}var Fc="listener",Ic="completed",Nc="cancelled",Tc="task-".concat(Nc),Oc="task-".concat(Ic),Rc="".concat(Fc,"-").concat(Nc),_c="".concat(Fc,"-").concat(Ic),Pc=class{constructor(e){p(this,"name","TaskAbortError"),p(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(Nc," (reason: ").concat(e,")")}},Mc=(e,t)=>{if("function"!==typeof e)throw new TypeError(id(32))},Bc=()=>{},Lc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bc;return e.catch(t),e},jc=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),zc=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Wc=e=>{if(e.aborted){const{reason:t}=e;throw new Pc(t)}};function Uc(e,t){let n=Bc;return new Promise((r,a)=>{const o=()=>a(new Pc(e.reason));e.aborted?o():(n=jc(e,o),t.finally(()=>n()).then(r,a))}).finally(()=>{n=Bc})}var Vc=e=>t=>Lc(Uc(e,t).then(t=>(Wc(e),t))),Hc=e=>{const t=Vc(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:Gc}=Object,Kc={},qc="listenerMiddleware",Xc=(e,t)=>(n,r)=>{Mc(n);const a=new AbortController;var o;o=a,jc(e,()=>zc(o,e.reason));const i=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Pc?"cancelled":"rejected",error:n}}finally{null===t||void 0===t||t()}})(async()=>{Wc(e),Wc(a.signal);const t=await n({pause:Vc(a.signal),delay:Hc(a.signal),signal:a.signal});return Wc(a.signal),t},()=>zc(a,Oc));return null!==r&&void 0!==r&&r.autoJoin&&t.push(i.catch(Bc)),{result:Vc(e)(i),cancel(){zc(a,Tc)}}},Yc=(e,t)=>(n,r)=>Lc((async(n,r)=>{Wc(t);let a=()=>{};const o=[new Promise((t,r)=>{let o=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});a=()=>{o(),r()}})];null!=r&&o.push(new Promise(e=>setTimeout(e,r,null)));try{const e=await Uc(t,Promise.race(o));return Wc(t),e}finally{a()}})(n,r)),Qc=e=>{let{type:t,actionCreator:n,matcher:r,predicate:a,effect:o}=e;if(t)a=hc(t).match;else if(n)t=n.type,a=n.match;else if(r)a=r;else if(!a)throw new Error(id(21));return Mc(o),{predicate:a,type:t,effect:o}},Zc=Gc(e=>{const{type:t,predicate:n,effect:r}=Qc(e);return{id:wc(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(id(22))}}},{withTypes:()=>Zc}),Jc=(e,t)=>{const{type:n,effect:r,predicate:a}=Qc(t);return Array.from(e.values()).find(e=>("string"===typeof n?e.type===n:e.predicate===a)&&e.effect===r)},$c=e=>{e.pending.forEach(e=>{zc(e,Rc)})},ed=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},td=Gc(hc("".concat(qc,"/add")),{withTypes:()=>td}),nd=hc("".concat(qc,"/removeAll")),rd=Gc(hc("".concat(qc,"/remove")),{withTypes:()=>rd}),ad=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("".concat(qc,"/error"),...t)},od=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,{extra:n,onError:r=ad}=e;Mc(r);const a=e=>{var n;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&$c(e)}))(null!==(n=Jc(t,e))&&void 0!==n?n:Zc(e))};Gc(a,{withTypes:()=>a});const o=e=>{const n=Jc(t,e);return n&&(n.unsubscribe(),e.cancelActive&&$c(n)),!!n};Gc(o,{withTypes:()=>o});const i=async(e,o,i,s)=>{const u=new AbortController,l=Yc(a,u.signal),c=[];try{e.pending.add(u),await Promise.resolve(e.effect(o,Gc({},i,{getOriginalState:s,condition:(e,t)=>l(e,t).then(Boolean),take:l,delay:Hc(u.signal),pause:Vc(u.signal),extra:n,signal:u.signal,fork:Xc(u.signal,c),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,n)=>{e!==u&&(zc(e,Rc),n.delete(e))})},cancel:()=>{zc(u,Rc),e.pending.delete(u)},throwIfCancelled:()=>{Wc(u.signal)}})))}catch(d){d instanceof Pc||ed(r,d,{raisedBy:"effect"})}finally{await Promise.all(c),zc(u,_c),e.pending.delete(u)}},s=(e=>()=>{e.forEach($c),e.clear()})(t);return{middleware:e=>n=>u=>{if(!ml(u))return n(u);if(td.match(u))return a(u.payload);if(nd.match(u))return void s();if(rd.match(u))return o(u.payload);let l=e.getState();const c=()=>{if(l===Kc)throw new Error(id(23));return l};let d;try{if(d=n(u),t.size>0){const n=e.getState(),a=Array.from(t.values());for(const t of a){let a=!1;try{a=t.predicate(u,n,l)}catch(h){a=!1,ed(r,h,{raisedBy:"predicate"})}a&&i(t,u,e,c)}}}finally{l=Kc}return d},startListening:a,stopListening:o,clearListeners:s}};Symbol.for("rtk-state-proxy-original");function id(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function sd(e,t){if(t){var n=Number.parseInt(t,10);if(!Gu(n))return null===e||void 0===e?void 0:e[n]}}var ud=Sc({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ld=ud.reducer,{createEventEmitter:cd}=ud.actions;function dd(e){e()}var hd={notify(){},get:()=>[]};function pd(e,t){let n,r=hd,a=0,o=!1;function i(){l.onStateChange&&l.onStateChange()}function s(){a++,n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dd(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){r&&null!==e&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function u(){a--,n&&0===a&&(n(),n=void 0,r.clear(),r=hd)}const l={addNestedSub:function(e){s();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),u())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,u())},getListeners:()=>r};return l}var fd=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),gd=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),md=(()=>fd||gd?u.useLayoutEffect:u.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var yd=Symbol.for("react-redux-context"),vd="undefined"!==typeof globalThis?globalThis:{};function bd(){var e;if(!u.createContext)return{};const t=null!==(e=vd[yd])&&void 0!==e?e:vd[yd]=new Map;let n=t.get(u.createContext);return n||(n=u.createContext(null),t.set(u.createContext,n)),n}var xd=bd();var wd=function(e){const{children:t,context:n,serverState:r,store:a}=e,o=u.useMemo(()=>{const e=pd(a);return{store:a,subscription:e,getServerState:r?()=>r:void 0}},[a,r]),i=u.useMemo(()=>a.getState(),[a]);md(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,i]);const s=n||xd;return u.createElement(s.Provider,{value:o},t)};var Dd=Symbol.for("immer-nothing"),kd=Symbol.for("immer-draftable"),Cd=Symbol.for("immer-state");function Ed(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Sd=Object.getPrototypeOf;function Ad(e){return!!e&&!!e[Cd]}function Fd(e){var t;return!!e&&(Nd(e)||Array.isArray(e)||!!e[kd]||!(null===(t=e.constructor)||void 0===t||!t[kd])||Pd(e)||Md(e))}var Id=Object.prototype.constructor.toString();function Nd(e){if(!e||"object"!==typeof e)return!1;const t=Sd(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Id}function Td(e,t){0===Od(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Od(e){const t=e[Cd];return t?t.type_:Array.isArray(e)?1:Pd(e)?2:Md(e)?3:0}function Rd(e,t){return 2===Od(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _d(e,t,n){const r=Od(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Pd(e){return e instanceof Map}function Md(e){return e instanceof Set}function Bd(e){return e.copy_||e.base_}function Ld(e,t){if(Pd(e))return new Map(e);if(Md(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Nd(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Cd];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Sd(e),t)}{const t=Sd(e);if(null!==t&&n)return g({},e);const r=Object.create(t);return Object.assign(r,e)}}function jd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Wd(e)||Ad(e)||!Fd(e)||(Od(e)>1&&(e.set=e.add=e.clear=e.delete=zd),Object.freeze(e),t&&Object.entries(e).forEach(e=>{let[t,n]=e;return jd(n,!0)})),e}function zd(){Ed(2)}function Wd(e){return Object.isFrozen(e)}var Ud,Vd={};function Hd(e){const t=Vd[e];return t||Ed(0),t}function Gd(){return Ud}function Kd(e,t){t&&(Hd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function qd(e){Xd(e),e.drafts_.forEach(Qd),e.drafts_=null}function Xd(e){e===Ud&&(Ud=e.parent_)}function Yd(e){return Ud={drafts_:[],parent_:Ud,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qd(e){const t=e[Cd];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Zd(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Cd].modified_&&(qd(t),Ed(4)),Fd(e)&&(e=Jd(t,e),t.parent_||eh(t,e)),t.patches_&&Hd("Patches").generateReplacementPatches_(n[Cd].base_,e,t.patches_,t.inversePatches_)):e=Jd(t,n,[]),qd(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Dd?e:void 0}function Jd(e,t,n){if(Wd(t))return t;const r=t[Cd];if(!r)return Td(t,(a,o)=>$d(e,r,t,a,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return eh(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let a=t,o=!1;3===r.type_&&(a=new Set(t),t.clear(),o=!0),Td(a,(a,i)=>$d(e,r,t,a,i,n,o)),eh(e,t,!1),n&&e.patches_&&Hd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function $d(e,t,n,r,a,o,i){if(Ad(a)){const i=Jd(e,a,o&&t&&3!==t.type_&&!Rd(t.assigned_,r)?o.concat(r):void 0);if(_d(n,r,i),!Ad(i))return;e.canAutoFreeze_=!1}else i&&n.add(a);if(Fd(a)&&!Wd(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jd(e,a),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||eh(e,a)}}function eh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jd(t,n)}var th={get(e,t){if(t===Cd)return e;const n=Bd(e);if(!Rd(n,t))return function(e,t,n){var r;const a=ah(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Fd(r)?r:r===rh(e.base_,t)?(ih(e),e.copy_[t]=sh(r,e)):r},has:(e,t)=>t in Bd(e),ownKeys:e=>Reflect.ownKeys(Bd(e)),set(e,t,n){const r=ah(Bd(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=rh(Bd(e),t),a=null===r||void 0===r?void 0:r[Cd];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||Rd(e.base_,t)))return!0;ih(e),oh(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==rh(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ih(e),oh(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Bd(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Ed(11)},getPrototypeOf:e=>Sd(e.base_),setPrototypeOf(){Ed(12)}},nh={};function rh(e,t){const n=e[Cd];return(n?Bd(n):e)[t]}function ah(e,t){if(!(t in e))return;let n=Sd(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Sd(n)}}function oh(e){e.modified_||(e.modified_=!0,e.parent_&&oh(e.parent_))}function ih(e){e.copy_||(e.copy_=Ld(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Td(th,(e,t)=>{nh[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),nh.deleteProperty=function(e,t){return nh.set.call(this,e,t,void 0)},nh.set=function(e,t,n){return th.set.call(this,e[0],t,n,e[0])};function sh(e,t){const n=Pd(e)?Hd("MapSet").proxyMap_(e,t):Md(e)?Hd("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Gd(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,o=th;n&&(a=[r],o=nh);const{revoke:i,proxy:s}=Proxy.revocable(a,o);return r.draft_=s,r.revoke_=i,s}(e,t);return(t?t.scope_:Gd()).drafts_.push(n),n}function uh(e){if(!Fd(e)||Wd(e))return e;const t=e[Cd];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ld(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ld(e,!0);return Td(n,(e,t)=>{_d(n,e,uh(t))}),t&&(t.finalized_=!1),n}var lh=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return r.produce(e,e=>t.call(this,e,...o))}}let r;if("function"!==typeof t&&Ed(6),void 0!==n&&"function"!==typeof n&&Ed(7),Fd(e)){const a=Yd(this),o=sh(e,void 0);let i=!0;try{r=t(o),i=!1}finally{i?qd(a):Xd(a)}return Kd(a,n),Zd(r,a)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===Dd&&(r=void 0),this.autoFreeze_&&jd(r,!0),n){const t=[],a=[];Hd("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}Ed(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return t.produceWithPatches(n,t=>e(t,...a))};let r,a;return[this.produce(e,n,(e,t)=>{r=e,a=t}),r,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Fd(e)||Ed(8),Ad(e)&&(e=function(e){Ad(e)||Ed(10);return uh(e)}(e));const t=Yd(this),n=sh(e,void 0);return n[Cd].isManual_=!0,Xd(t),n}finishDraft(e,t){const n=e&&e[Cd];n&&n.isManual_||Ed(9);const{scope_:r}=n;return Kd(r,t),Zd(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Hd("Patches").applyPatches_;return Ad(e)?r(e,t):this.produce(e,e=>r(e,t))}};lh.produce,lh.produceWithPatches.bind(lh),lh.setAutoFreeze.bind(lh),lh.setUseStrictShallowCopy.bind(lh),lh.applyPatches.bind(lh),lh.createDraft.bind(lh),lh.finishDraft.bind(lh);var ch={active:!1,index:null,dataKey:void 0,coordinate:void 0},dh=Sc({name:"tooltip",initialState:{itemInteraction:{click:ch,hover:ch},axisInteraction:{click:ch,hover:ch},keyboardInteraction:ch,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=ic(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:hh,removeTooltipEntrySettings:ph,setTooltipSettingsState:fh,setActiveMouseOverItemIndex:gh,mouseLeaveItem:mh,mouseLeaveChart:yh,setActiveClickItemIndex:vh,setMouseOverAxisIndex:bh,setMouseClickAxisIndex:xh,setSyncInteraction:wh,setKeyboardInteraction:Dh}=dh.actions,kh=dh.reducer,Ch=Sc({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;null!=n&&(e.dataStartIndex=n),null!=r&&(e.dataEndIndex=r)}}}),{setChartData:Eh,setDataStartEndIndexes:Sh,setComputedData:Ah}=Ch.actions,Fh=Ch.reducer,Ih=Sc({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Nh,setLayout:Th,setChartSize:Oh,setScale:Rh}=Ih.actions,_h=Ih.reducer;function Ph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Mh=e=>Array.isArray(e)?e:[e];function Bh(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const n=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Lh="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function jh(){return{s:0,v:void 0,o:null,p:null}}function zh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let a,o=0;function i(){let t=n;const{length:i}=arguments;for(let e=0,n=i;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=jh(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=jh(),e.set(n,t)):t=r}}const s=t;let u;if(1===t.s)u=t.v;else if(u=e.apply(null,arguments),o++,r){var l,c,d;const e=null!==(l=null===(c=a)||void 0===c||null===(d=c.deref)||void 0===d?void 0:d.call(c))&&void 0!==l?l:a;null!=e&&r(e,u)&&(u=e,0!==o&&o--);a="object"===typeof u&&null!==u||"function"===typeof u?new Lh(u):u}return s.s=1,s.v=u,u}return i.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>o,i.resetResultsCount=()=>{o=0},i}function Wh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a="function"===typeof e?{memoize:e,memoizeOptions:n}:e,o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,o=0,i=0,s={},u=t.pop();"object"===typeof u&&(s=u,u=t.pop()),Ph(u,"createSelector expects an output function after the inputs, but received: [".concat(typeof u,"]"));const l=g(g({},a),s),{memoize:c,memoizeOptions:d=[],argsMemoize:h=zh,argsMemoizeOptions:p=[],devModeChecks:f={}}=l,m=Mh(d),y=Mh(p),v=Bh(t),b=c(function(){return o++,u.apply(null,arguments)},...m);const x=h(function(){i++;const e=function(e,t){const n=[],{length:r}=e;for(let a=0;a<r;a++)n.push(e[a].apply(null,t));return n}(v,arguments);return r=b.apply(null,e),r},...y);return Object.assign(x,{resultFunc:u,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>r,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:c,argsMemoize:h})};return Object.assign(o,{withTypes:()=>o}),o}var Uh=Wh(zh),Vh=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uh;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((e,t,r)=>(e[n[r]]=t,e),{})});return r},{withTypes:()=>Vh}),Hh=n(8443),Gh=(0,u.createContext)(null),Kh=e=>e,qh=()=>{var e=(0,u.useContext)(Gh);return e?e.store.dispatch:Kh},Xh=()=>{},Yh=()=>Xh,Qh=(e,t)=>e===t;function Zh(e){var t=(0,u.useContext)(Gh);return(0,Hh.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:Yh,t?t.store.getState:Xh,t?t.store.getState:Xh,t?e:Xh,Qh)}var Jh=n(3821),$h=n.n(Jh),ep=e=>e.legend.settings,tp=Uh([e=>e.legend.payload,ep],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?$h()(r,n):r});function np(e,t){if((a=e.length)>1)for(var n,r,a,o=1,i=e[t[0]],s=i.length;o<a;++o)for(r=i,i=e[t[o]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}Array.prototype.slice;function rp(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function ap(e){return function(){return e}}function op(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ip(e,t){return e[t]}function sp(e){const t=[];return t.key=e,t}function up(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?up(Object(n),!0).forEach(function(t){cp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):up(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function cp(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dp=Math.PI/180,hp=e=>180*e/Math.PI,pp=(e,t,n,r)=>({x:e+Math.cos(-dp*r)*n,y:t+Math.sin(-dp*r)*n}),fp=(e,t)=>{var{x:n,y:r}=e,{cx:a,cy:o}=t,i=((e,t)=>{var{x:n,y:r}=e,{x:a,y:o}=t;return Math.sqrt((n-a)**2+(r-o)**2)})({x:n,y:r},{x:a,y:o});if(i<=0)return{radius:i,angle:0};var s=(n-a)/i,u=Math.acos(s);return r>o&&(u=2*Math.PI-u),{radius:i,angle:hp(u),angleInRadian:u}},gp=(e,t)=>{var{startAngle:n,endAngle:r}=t,a=Math.floor(n/360),o=Math.floor(r/360);return e+360*Math.min(a,o)},mp=(e,t)=>{var{x:n,y:r}=e,{radius:a,angle:o}=fp({x:n,y:r},t),{innerRadius:i,outerRadius:s}=t;if(a<i||a>s)return null;if(0===a)return null;var u,{startAngle:l,endAngle:c}=(e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),a=Math.floor(n/360),o=Math.min(r,a);return{startAngle:t-360*o,endAngle:n-360*o}})(t),d=o;if(l<=c){for(;d>c;)d-=360;for(;d<l;)d+=360;u=d>=l&&d<=c}else{for(;d>l;)d-=360;for(;d<c;)d+=360;u=d>=c&&d<=l}return u?lp(lp({},t),{},{radius:a,angle:gp(d,t)}):null};function yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(n),!0).forEach(function(t){bp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bp(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xp(e,t,n){return tl(e)||tl(t)?n:Xu(t)?Vu()(e,t,n):"function"===typeof t?t(e):n}var wp=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Dp=(e,t,n,r)=>{if(r)return e.map(e=>e.coordinate);var a,o,i=e.map(e=>(e.coordinate===t&&(a=!0),e.coordinate===n&&(o=!0),e.coordinate));return a||i.push(t),o||i.push(n),i},kp=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:a,range:o,scale:i,realScaleType:s,isCategorical:u,categoricalDomain:l,tickCount:c,ticks:d,niceTicks:h,axisType:p}=e;if(!i)return null;var f="scaleBand"===s&&i.bandwidth?i.bandwidth()/2:2,g=(t||n)&&"category"===a&&i.bandwidth?i.bandwidth()/f:0;if(g="angleAxis"===p&&o&&o.length>=2?2*Hu(o[0]-o[1])*g:g,t&&(d||h)){var m=(d||h||[]).map((e,t)=>{var n=r?r.indexOf(e):e;return{coordinate:i(n)+g,value:e,offset:g,index:t}});return m.filter(e=>!Gu(e.coordinate))}return u&&l?l.map((e,t)=>({coordinate:i(e)+g,value:e,index:t,offset:g})):i.ticks&&!n&&null!=c?i.ticks(c).map((e,t)=>({coordinate:i(e)+g,value:e,offset:g,index:t})):i.domain().map((e,t)=>({coordinate:i(e)+g,value:r?r[e]:e,index:t,offset:g}))},Cp=1e-4,Ep={sign:e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,o=0,i=0;i<t;++i){var s=Gu(e[i][n][1])?e[i][n][0]:e[i][n][1];s>=0?(e[i][n][0]=a,e[i][n][1]=a+s,a=e[i][n][1]):(e[i][n][0]=o,e[i][n][1]=o+s,o=e[i][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,a,o=0,i=e[0].length;o<i;++o){for(a=n=0;n<r;++n)a+=e[n][o][1]||0;if(a)for(n=0;n<r;++n)e[n][o][1]/=a}np(e,t)}},none:np,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],o=a.length;r<o;++r){for(var i=0,s=0;i<n;++i)s+=e[i][r][1]||0;a[r][1]+=a[r][0]=-s/2}np(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,o=0,i=1;i<r;++i){for(var s=0,u=0,l=0;s<a;++s){for(var c=e[t[s]],d=c[i][1]||0,h=(d-(c[i-1][1]||0))/2,p=0;p<s;++p){var f=e[t[p]];h+=(f[i][1]||0)-(f[i-1][1]||0)}u+=d,l+=h*d}n[i-1][1]+=n[i-1][0]=o,u&&(o-=l/u)}n[i-1][1]+=n[i-1][0]=o,np(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,o=0;o<t;++o){var i=Gu(e[o][n][1])?e[o][n][0]:e[o][n][1];i>=0?(e[o][n][0]=a,e[o][n][1]=a+i,a=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},Sp=(e,t,n)=>{var r=Ep[n],a=function(){var e=ap([]),t=op,n=np,r=ip;function a(a){var o,i,s=Array.from(e.apply(this,arguments),sp),u=s.length,l=-1;for(const e of a)for(o=0,++l;o<u;++o)(s[o][l]=[0,+r(e,s[o].key,l,a)]).data=e;for(o=0,i=rp(t(s));o<u;++o)s[i[o]].index=o;return n(s,i),s}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:ap(Array.from(t)),a):e},a.value=function(e){return arguments.length?(r="function"===typeof e?e:ap(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?op:"function"===typeof e?e:ap(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?np:e,a):n},a}().keys(t).value((e,t)=>+xp(e,t,0)).order(op).offset(r);return a(e)};function Ap(e){return null==e?void 0:String(e)}function Fp(e){var{axis:t,ticks:n,bandSize:r,entry:a,index:o,dataKey:i}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!tl(a[t.dataKey])){var s=el(n,"value",a[t.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var u=xp(a,tl(i)?t.dataKey:i);return tl(u)?null:t.scale(u)}var Ip=e=>{var{axis:t,ticks:n,offset:r,bandSize:a,entry:o,index:i}=e;if("category"===t.type)return n[i]?n[i].coordinate+r:null;var s=xp(o,t.dataKey,t.scale.domain()[i]);return tl(s)?null:t.scale(s)-a/2+r},Np=(e,t,n)=>{var r;if(null!=e)return r=Object.keys(e).reduce((r,a)=>{var o=e[a],{stackedData:i}=o,s=i.reduce((e,r)=>{var a=(e=>{var t=e.flat(2).filter(qu);return[Math.min(...t),Math.max(...t)]})(r.slice(t,n+1));return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]),[r[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]]},Tp=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Op=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Rp=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var a=$h()(t,e=>e.coordinate),o=1/0,i=1,s=a.length;i<s;i++){var u=a[i],l=a[i-1];o=Math.min((u.coordinate||0)-(l.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function _p(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:a,name:o}=e;return vp(vp({},t),{},{dataKey:n,payload:r,value:a,name:o})}function Pp(e,t){return e?String(e):"string"===typeof t?t:void 0}var Mp=e=>e.layout.width,Bp=e=>e.layout.height,Lp=e=>e.layout.scale,jp=e=>e.layout.margin,zp=Uh(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Wp=Uh(e=>e.cartesianAxis.yAxis,e=>Object.values(e));function Up(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Up(Object(n),!0).forEach(function(t){Hp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Up(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hp(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gp=Uh([Mp,Bp,jp,e=>e.brush.height,zp,Wp,ep,e=>e.legend.size],(e,t,n,r,a,o,i,s)=>{var u=o.reduce((e,t)=>{var{orientation:n}=t;if(!t.mirror&&!t.hide){var r="number"===typeof t.width?t.width:60;return Vp(Vp({},e),{},{[n]:e[n]+r})}return e},{left:n.left||0,right:n.right||0}),l=a.reduce((e,t)=>{var{orientation:n}=t;return t.mirror||t.hide?e:Vp(Vp({},e),{},{[n]:Vu()(e,"".concat(n))+t.height})},{top:n.top||0,bottom:n.bottom||0}),c=Vp(Vp({},l),u),d=c.bottom;c.bottom+=r,c=((e,t,n)=>{if(t&&n){var{width:r,height:a}=n,{align:o,verticalAlign:i,layout:s}=t;if(("vertical"===s||"horizontal"===s&&"middle"===i)&&"center"!==o&&qu(e[o]))return vp(vp({},e),{},{[o]:e[o]+(r||0)});if(("horizontal"===s||"vertical"===s&&"center"===o)&&"middle"!==i&&qu(e[i]))return vp(vp({},e),{},{[i]:e[i]+(a||0)})}return e})(c,i,s);var h=e-c.left-c.right,p=t-c.top-c.bottom;return Vp(Vp({brushBottom:d},c),{},{width:Math.max(h,0),height:Math.max(p,0)})}),Kp=Uh(Gp,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),qp=Uh(Mp,Bp,(e,t)=>({x:0,y:0,width:e,height:t})),Xp=(0,u.createContext)(null),Yp=()=>null!=(0,u.useContext)(Xp),Qp=e=>e.brush,Zp=Uh([Qp,Gp,jp],(e,t,n)=>({height:e.height,x:qu(e.x)?e.x:t.left,y:qu(e.y)?e.y:t.top+t.height+t.brushBottom-((null===n||void 0===n?void 0:n.bottom)||0),width:qu(e.width)?e.width:t.width})),Jp=()=>{var e,t=Yp(),n=Zh(Kp),r=Zh(Zp),a=null===(e=Zh(Qp))||void 0===e?void 0:e.padding;return t&&r&&a?{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,x:a.left,y:a.top}:n},$p={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},ef=()=>{var e;return null!==(e=Zh(Gp))&&void 0!==e?e:$p},tf=()=>Zh(Mp),nf=()=>Zh(Bp),rf={top:0,right:0,bottom:0,left:0},af=e=>e.layout.layoutType,of=()=>Zh(af),sf=n(9859),uf=n.n(sf);function lf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function cf(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class df extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gf;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(hf(this,e))}has(e){return super.has(hf(this,e))}set(e,t){return super.set(pf(this,e),t)}delete(e){return super.delete(ff(this,e))}}Set;function hf(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):t}function pf(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):(n.set(a,t),t)}function ff(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)&&(t=n.get(a),n.delete(a)),t}function gf(e){return null!==e&&"object"===typeof e?e.valueOf():e}const mf=Symbol("implicit");function yf(){var e=new df,t=[],n=[],r=mf;function a(a){let o=e.get(a);if(void 0===o){if(r!==mf)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new df;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return yf(t,n).unknown(r)},lf.apply(a,arguments),a}function vf(){var e,t,n=yf().unknown(void 0),r=n.domain,a=n.range,o=0,i=1,s=!1,u=0,l=0,c=.5;function d(){var n=r().length,d=i<o,h=d?i:o,p=d?o:i;e=(p-h)/Math.max(1,n-u+2*l),s&&(e=Math.floor(e)),h+=(p-h-e*(n-u))*c,t=e*(1-u),s&&(h=Math.round(h),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++r<a;)o[r]=e+r*n;return o}(n).map(function(t){return h+e*t});return a(d?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([o,i]=e,o=+o,i=+i,d()):[o,i]},n.rangeRound=function(e){return[o,i]=e,o=+o,i=+i,s=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,d()):s},n.padding=function(e){return arguments.length?(u=Math.min(1,l=+e),d()):u},n.paddingInner=function(e){return arguments.length?(u=Math.min(1,e),d()):u},n.paddingOuter=function(e){return arguments.length?(l=+e,d()):l},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),d()):c},n.copy=function(){return vf(r(),[o,i]).round(s).paddingInner(u).paddingOuter(l).align(c)},lf.apply(d(),arguments)}function bf(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return bf(t())},e}function xf(){return bf(vf.apply(null,arguments).paddingInner(1))}const wf=Math.sqrt(50),Df=Math.sqrt(10),kf=Math.sqrt(2);function Cf(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),o=r/Math.pow(10,a),i=o>=wf?10:o>=Df?5:o>=kf?2:1;let s,u,l;return a<0?(l=Math.pow(10,-a)/i,s=Math.round(e*l),u=Math.round(t*l),s/l<e&&++s,u/l>t&&--u,l=-l):(l=Math.pow(10,a)*i,s=Math.round(e/l),u=Math.round(t/l),s*l<e&&++s,u*l>t&&--u),u<s&&.5<=n&&n<2?Cf(e,t,2*n):[s,u,l]}function Ef(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[a,o,i]=r?Cf(t,e,n):Cf(e,t,n);if(!(o>=a))return[];const s=o-a+1,u=new Array(s);if(r)if(i<0)for(let l=0;l<s;++l)u[l]=(o-l)/-i;else for(let l=0;l<s;++l)u[l]=(o-l)*i;else if(i<0)for(let l=0;l<s;++l)u[l]=(a+l)/-i;else for(let l=0;l<s;++l)u[l]=(a+l)*i;return u}function Sf(e,t,n){return Cf(e=+e,t=+t,n=+n)[2]}function Af(e,t,n){n=+n;const r=(t=+t)<(e=+e),a=r?Sf(t,e,n):Sf(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function Ff(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function If(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nf(e){let t,n,r;function a(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==t(r,r))return o;do{const t=a+o>>>1;n(e[t],r)<0?a=t+1:o=t}while(a<o)}return a}return 2!==e.length?(t=Ff,n=(t,n)=>Ff(e(t),n),r=(t,n)=>e(t)-n):(t=e===Ff||e===If?e:Tf,n=e,r=e),{left:a,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=a(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==t(r,r))return o;do{const t=a+o>>>1;n(e[t],r)<=0?a=t+1:o=t}while(a<o)}return a}}}function Tf(){return 0}function Of(e){return null===e?NaN:+e}const Rf=Nf(Ff),_f=Rf.right,Pf=(Rf.left,Nf(Of).center,_f);function Mf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bf(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Lf(){}var jf=.7,zf=1/jf,Wf="\\s*([+-]?\\d+)\\s*",Uf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hf=/^#([0-9a-f]{3,8})$/,Gf=new RegExp("^rgb\\(".concat(Wf,",").concat(Wf,",").concat(Wf,"\\)$")),Kf=new RegExp("^rgb\\(".concat(Vf,",").concat(Vf,",").concat(Vf,"\\)$")),qf=new RegExp("^rgba\\(".concat(Wf,",").concat(Wf,",").concat(Wf,",").concat(Uf,"\\)$")),Xf=new RegExp("^rgba\\(".concat(Vf,",").concat(Vf,",").concat(Vf,",").concat(Uf,"\\)$")),Yf=new RegExp("^hsl\\(".concat(Uf,",").concat(Vf,",").concat(Vf,"\\)$")),Qf=new RegExp("^hsla\\(".concat(Uf,",").concat(Vf,",").concat(Vf,",").concat(Uf,"\\)$")),Zf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Jf(){return this.rgb().formatHex()}function $f(){return this.rgb().formatRgb()}function eg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?tg(t):3===n?new ag(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ng(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ng(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Gf.exec(e))?new ag(t[1],t[2],t[3],1):(t=Kf.exec(e))?new ag(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=qf.exec(e))?ng(t[1],t[2],t[3],t[4]):(t=Xf.exec(e))?ng(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Yf.exec(e))?cg(t[1],t[2]/100,t[3]/100,1):(t=Qf.exec(e))?cg(t[1],t[2]/100,t[3]/100,t[4]):Zf.hasOwnProperty(e)?tg(Zf[e]):"transparent"===e?new ag(NaN,NaN,NaN,0):null}function tg(e){return new ag(e>>16&255,e>>8&255,255&e,1)}function ng(e,t,n,r){return r<=0&&(e=t=n=NaN),new ag(e,t,n,r)}function rg(e,t,n,r){return 1===arguments.length?function(e){return e instanceof Lf||(e=eg(e)),e?new ag((e=e.rgb()).r,e.g,e.b,e.opacity):new ag}(e):new ag(e,t,n,null==r?1:r)}function ag(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function og(){return"#".concat(lg(this.r)).concat(lg(this.g)).concat(lg(this.b))}function ig(){const e=sg(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(ug(this.r),", ").concat(ug(this.g),", ").concat(ug(this.b)).concat(1===e?")":", ".concat(e,")"))}function sg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ug(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lg(e){return((e=ug(e))<16?"0":"")+e.toString(16)}function cg(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hg(e,t,n,r)}function dg(e){if(e instanceof hg)return new hg(e.h,e.s,e.l,e.opacity);if(e instanceof Lf||(e=eg(e)),!e)return new hg;if(e instanceof hg)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,s=o-a,u=(o+a)/2;return s?(i=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+a:2-o-a,i*=60):s=u>0&&u<1?0:i,new hg(i,s,u,e.opacity)}function hg(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function pg(e){return(e=(e||0)%360)<0?e+360:e}function fg(e){return Math.max(0,Math.min(1,e||0))}function gg(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function mg(e,t,n,r,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*a)/6}Mf(Lf,eg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jf,formatHex:Jf,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return dg(this).formatHsl()},formatRgb:$f,toString:$f}),Mf(ag,rg,Bf(Lf,{brighter(e){return e=null==e?zf:Math.pow(zf,e),new ag(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?jf:Math.pow(jf,e),new ag(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ag(ug(this.r),ug(this.g),ug(this.b),sg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:og,formatHex:og,formatHex8:function(){return"#".concat(lg(this.r)).concat(lg(this.g)).concat(lg(this.b)).concat(lg(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:ig,toString:ig})),Mf(hg,function(e,t,n,r){return 1===arguments.length?dg(e):new hg(e,t,n,null==r?1:r)},Bf(Lf,{brighter(e){return e=null==e?zf:Math.pow(zf,e),new hg(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?jf:Math.pow(jf,e),new hg(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new ag(gg(e>=240?e-240:e+120,a,r),gg(e,a,r),gg(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new hg(pg(this.h),fg(this.s),fg(this.l),sg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sg(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(pg(this.h),", ").concat(100*fg(this.s),"%, ").concat(100*fg(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const yg=e=>()=>e;function vg(e,t){return function(n){return e+n*t}}function bg(e){return 1===(e=+e)?xg:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):yg(isNaN(t)?n:t)}}function xg(e,t){var n=t-e;return n?vg(e,n):yg(isNaN(e)?t:e)}const wg=function e(t){var n=bg(t);function r(e,t){var r=n((e=rg(e)).r,(t=rg(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),i=xg(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Dg(e){return function(t){var n,r,a=t.length,o=new Array(a),i=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=rg(t[n]),o[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return o=e(o),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=i(e),r.b=s(e),r+""}}}Dg(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],o=e[r+1],i=r>0?e[r-1]:2*a-o,s=r<t-1?e[r+2]:2*o-a;return mg((n-r/t)*t,i,a,o,s)}}),Dg(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],o=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return mg((n-r/t)*t,a,o,i,s)}});function kg(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),i=new Array(r);for(n=0;n<a;++n)o[n]=Tg(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=o[n](e);return i}}function Cg(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Eg(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Sg(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Tg(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var Ag=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fg=new RegExp(Ag.source,"g");function Ig(e,t){var n,r,a,o=Ag.lastIndex=Fg.lastIndex=0,i=-1,s=[],u=[];for(e+="",t+="";(n=Ag.exec(e))&&(r=Fg.exec(t));)(a=r.index)>o&&(a=t.slice(o,a),s[i]?s[i]+=a:s[++i]=a),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,u.push({i:i,x:Eg(n,r)})),o=Fg.lastIndex;return o<t.length&&(a=t.slice(o),s[i]?s[i]+=a:s[++i]=a),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function Ng(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<r;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function Tg(e,t){var n,r=typeof t;return null==t||"boolean"===r?yg(t):("number"===r?Eg:"string"===r?(n=eg(t))?(t=n,wg):Ig:t instanceof eg?wg:t instanceof Date?Cg:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Ng:Array.isArray(t)?kg:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Sg:Eg)(e,t)}function Og(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Rg(e){return+e}var _g=[0,1];function Pg(e){return e}function Mg(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Bg(e,t,n){var r=e[0],a=e[1],o=t[0],i=t[1];return a<r?(r=Mg(a,r),o=n(i,o)):(r=Mg(r,a),o=n(o,i)),function(e){return o(r(e))}}function Lg(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),o=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)a[i]=Mg(e[i],e[i+1]),o[i]=n(t[i],t[i+1]);return function(t){var n=Pf(e,t,1,r)-1;return o[n](a[n](t))}}function jg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function zg(){var e,t,n,r,a,o,i=_g,s=_g,u=Tg,l=Pg;function c(){var e=Math.min(i.length,s.length);return l!==Pg&&(l=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(i[0],i[e-1])),r=e>2?Lg:Bg,a=o=null,d}function d(t){return null==t||isNaN(t=+t)?n:(a||(a=r(i.map(e),s,u)))(e(l(t)))}return d.invert=function(n){return l(t((o||(o=r(s,i.map(e),Eg)))(n)))},d.domain=function(e){return arguments.length?(i=Array.from(e,Rg),c()):i.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),u=Og,c()},d.clamp=function(e){return arguments.length?(l=!!e||Pg,c()):l!==Pg},d.interpolate=function(e){return arguments.length?(u=e,c()):u},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,c()}}function Wg(){return zg()(Pg,Pg)}var Ug,Vg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hg(e){if(!(t=Vg.exec(e)))throw new Error("invalid format: "+e);var t;return new Gg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Gg(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Kg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function qg(e){return(e=Kg(Math.abs(e)))?e[1]:NaN}function Xg(e,t){var n=Kg(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}Hg.prototype=Gg.prototype,Gg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Yg={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Xg(100*e,t),r:Xg,s:function(e,t){var n=Kg(e,t);if(!n)return e+"";var r=n[0],a=n[1],o=a-(Ug=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Kg(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Qg(e){return e}var Zg,Jg,$g,em=Array.prototype.map,tm=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function nm(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Qg:(t=em.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,o=[],i=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(a-=s,a+s)),!((u+=s+1)>r));)s=t[i=(i+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Qg:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(em.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Hg(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,g=e.comma,m=e.precision,y=e.trim,v=e.type;"n"===v?(g=!0,v="g"):Yg[v]||(void 0===m&&(m=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===h?o:/[%p]/.test(v)?u:"",w=Yg[v],D=/[defgprs%]/.test(v);function k(e){var a,o,u,h=b,k=x;if("c"===v)k=w(e)+k,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),m),y&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),C&&0===+e&&"+"!==d&&(C=!1),h=(C?"("===d?d:l:"-"===d||"("===d?"":d)+h,k=("s"===v?tm[8+Ug/3]:"")+k+(C&&"("===d?")":""),D)for(a=-1,o=e.length;++a<o;)if(48>(u=e.charCodeAt(a))||u>57){k=(46===u?i+e.slice(a+1):e.slice(a))+k,e=e.slice(0,a);break}}g&&!p&&(e=r(e,1/0));var E=h.length+e.length+k.length,S=E<f?new Array(f-E+1).join(t):"";switch(g&&p&&(e=r(S+e,S.length?f-k.length:1/0),S=""),n){case"<":e=h+e+k+S;break;case"=":e=h+S+e+k;break;case"^":e=S.slice(0,E=S.length>>1)+h+e+k+S.slice(E);break;default:e=S+h+e+k}return s(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return e+""},k}return{format:d,formatPrefix:function(e,t){var n=d(((e=Hg(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(qg(t)/3))),a=Math.pow(10,-r),o=tm[8+r/3];return function(e){return n(a*e)+o}}}}function rm(e,t,n,r){var a,o=Af(e,t,n);switch((r=Hg(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(qg(t)/3)))-qg(Math.abs(e)))}(o,i))||(r.precision=a),$g(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,qg(t)-qg(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-qg(Math.abs(e)))}(o))||(r.precision=a-2*("%"===r.type))}return Jg(r)}function am(e){var t=e.domain;return e.ticks=function(e){var n=t();return Ef(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return rm(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,o=t(),i=0,s=o.length-1,u=o[i],l=o[s],c=10;for(l<u&&(a=u,u=l,l=a,a=i,i=s,s=a);c-- >0;){if((a=Sf(u,l,n))===r)return o[i]=u,o[s]=l,t(o);if(a>0)u=Math.floor(u/a)*a,l=Math.ceil(l/a)*a;else{if(!(a<0))break;u=Math.ceil(u*a)/a,l=Math.floor(l*a)/a}r=a}return e},e}function om(){var e=Wg();return e.copy=function(){return jg(e,om())},lf.apply(e,arguments),am(e)}function im(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,Rg),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return im(e).unknown(t)},e=arguments.length?Array.from(e,Rg):[0,1],am(n)}function sm(e,t){var n,r=0,a=(e=e.slice()).length-1,o=e[r],i=e[a];return i<o&&(n=r,r=a,a=n,n=o,o=i,i=n),e[r]=t.floor(o),e[a]=t.ceil(i),e}function um(e){return Math.log(e)}function lm(e){return Math.exp(e)}function cm(e){return-Math.log(-e)}function dm(e){return-Math.exp(-e)}function hm(e){return isFinite(e)?+("1e"+e):e<0?0:e}function pm(e){return(t,n)=>-e(-t,n)}function fm(e){const t=e(um,lm),n=t.domain;let r,a,o=10;function i(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),a=function(e){return 10===e?hm:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=pm(r),a=pm(a),e(cm,dm)):e(um,lm),t}return t.base=function(e){return arguments.length?(o=+e,i()):o},t.domain=function(e){return arguments.length?(n(e),i()):n()},t.ticks=e=>{const t=n();let i=t[0],s=t[t.length-1];const u=s<i;u&&([i,s]=[s,i]);let l,c,d=r(i),h=r(s);const p=null==e?10:+e;let f=[];if(!(o%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),i>0){for(;d<=h;++d)for(l=1;l<o;++l)if(c=d<0?l/a(-d):l*a(d),!(c<i)){if(c>s)break;f.push(c)}}else for(;d<=h;++d)for(l=o-1;l>=1;--l)if(c=d>0?l/a(-d):l*a(d),!(c<i)){if(c>s)break;f.push(c)}2*f.length<p&&(f=Ef(i,s,p))}else f=Ef(d,h,Math.min(h-d,p)).map(a);return u?f.reverse():f},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!==typeof n&&(o%1||null!=(n=Hg(n)).precision||(n.trim=!0),n=Jg(n)),e===1/0)return n;const i=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/a(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=i?n(e):""}},t.nice=()=>n(sm(n(),{floor:e=>a(Math.floor(r(e))),ceil:e=>a(Math.ceil(r(e)))})),t}function gm(){const e=fm(zg()).domain([1,10]);return e.copy=()=>jg(e,gm()).base(e.base()),lf.apply(e,arguments),e}function mm(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ym(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vm(e){var t=1,n=e(mm(t),ym(t));return n.constant=function(n){return arguments.length?e(mm(t=+n),ym(t)):t},am(n)}function bm(){var e=vm(zg());return e.copy=function(){return jg(e,bm()).constant(e.constant())},lf.apply(e,arguments)}function xm(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function wm(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Dm(e){return e<0?-e*e:e*e}function km(e){var t=e(Pg,Pg),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(Pg,Pg):.5===n?e(wm,Dm):e(xm(n),xm(1/n)):n},am(t)}function Cm(){var e=km(zg());return e.copy=function(){return jg(e,Cm()).exponent(e.exponent())},lf.apply(e,arguments),e}function Em(){return Cm.apply(null,arguments).exponent(.5)}function Sm(e){return Math.sign(e)*e*e}function Am(){var e,t=Wg(),n=[0,1],r=!1;function a(n){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(a)?e:r?Math.round(a):a}return a.invert=function(e){return t.invert(Sm(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((n=Array.from(e,Rg)).map(Sm)),a):n.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(r=!!e,a):r},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Am(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},lf.apply(a,arguments),am(a)}function Fm(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n<a||void 0===n&&a>=a)&&(n=a)}return n}function Im(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n>a||void 0===n&&a>=a)&&(n=a)}return n}function Nm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ff;if(e===Ff)return Tm;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function Tm(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function Om(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=void 0===a?Tm:Nm(a);r>n;){if(r-n>600){const o=r-n+1,i=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(i-o/2<0?-1:1);Om(e,t,Math.max(n,Math.floor(t-i*u/o+l)),Math.min(r,Math.floor(t+(o-i)*u/o+l)),a)}const o=e[t];let i=n,s=r;for(Rm(e,n,t),a(e[r],o)>0&&Rm(e,n,r);i<s;){for(Rm(e,i,s),++i,--s;a(e[i],o)<0;)++i;for(;a(e[s],o)>0;)--s}0===a(e[n],o)?Rm(e,n,s):(++s,Rm(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Rm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function _m(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return Im(e);if(t>=1)return Fm(e);var r,a=(r-1)*t,o=Math.floor(a),i=Fm(Om(e,o).subarray(0,o+1));return i+(Im(e.subarray(o+1))-i)*(a-o)}}function Pm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Of;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,o=Math.floor(a),i=+n(e[o],o,e);return i+(+n(e[o+1],o+1,e)-i)*(a-o)}}function Mm(){var e,t=[],n=[],r=[];function a(){var e=0,a=Math.max(1,n.length);for(r=new Array(a-1);++e<a;)r[e-1]=Pm(t,e/a);return o}function o(t){return null==t||isNaN(t=+t)?e:n[Pf(r,t)]}return o.invertExtent=function(e){var a=n.indexOf(e);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Ff),a()},o.range=function(e){return arguments.length?(n=Array.from(e),a()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return Mm().domain(t).range(n).unknown(e)},lf.apply(o,arguments)}function Bm(){var e,t=0,n=1,r=1,a=[.5],o=[0,1];function i(t){return null!=t&&t<=t?o[Pf(a,t,0,r)]:e}function s(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*n-(e-r)*t)/(r+1);return i}return i.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},i.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,s()):o.slice()},i.invertExtent=function(e){var i=o.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,a[0]]:i>=r?[a[r-1],n]:[a[i-1],a[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return a.slice()},i.copy=function(){return Bm().domain([t,n]).range(o).unknown(e)},lf.apply(am(i),arguments)}function Lm(){var e,t=[.5],n=[0,1],r=1;function a(a){return null!=a&&a<=a?n[Pf(t,a,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Lm().domain(t).range(n).unknown(e)},lf.apply(a,arguments)}!function(e){Zg=nm(e),Jg=Zg.format,$g=Zg.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const jm=1e3,zm=6e4,Wm=36e5,Um=864e5,Vm=6048e5,Hm=2592e6,Gm=31536e6,Km=new Date,qm=new Date;function Xm(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),a.round=e=>{const t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),a.range=(n,r,o)=>{const i=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return i;let s;do{i.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<r);return i},a.filter=n=>Xm(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(a.count=(t,r)=>(Km.setTime(+t),qm.setTime(+r),e(Km),e(qm),Math.floor(n(Km,qm))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?t=>r(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const Ym=Xm(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ym.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Xm(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ym:null);Ym.range;const Qm=Xm(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*jm)},(e,t)=>(t-e)/jm,e=>e.getUTCSeconds()),Zm=(Qm.range,Xm(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jm)},(e,t)=>{e.setTime(+e+t*zm)},(e,t)=>(t-e)/zm,e=>e.getMinutes())),Jm=(Zm.range,Xm(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zm)},(e,t)=>(t-e)/zm,e=>e.getUTCMinutes())),$m=(Jm.range,Xm(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jm-e.getMinutes()*zm)},(e,t)=>{e.setTime(+e+t*Wm)},(e,t)=>(t-e)/Wm,e=>e.getHours())),ey=($m.range,Xm(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Wm)},(e,t)=>(t-e)/Wm,e=>e.getUTCHours())),ty=(ey.range,Xm(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zm)/Um,e=>e.getDate()-1)),ny=(ty.range,Xm(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Um,e=>e.getUTCDate()-1)),ry=(ny.range,Xm(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Um,e=>Math.floor(e/Um)));ry.range;function ay(e){return Xm(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zm)/Vm)}const oy=ay(0),iy=ay(1),sy=ay(2),uy=ay(3),ly=ay(4),cy=ay(5),dy=ay(6);oy.range,iy.range,sy.range,uy.range,ly.range,cy.range,dy.range;function hy(e){return Xm(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/Vm)}const py=hy(0),fy=hy(1),gy=hy(2),my=hy(3),yy=hy(4),vy=hy(5),by=hy(6),xy=(py.range,fy.range,gy.range,my.range,yy.range,vy.range,by.range,Xm(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),wy=(xy.range,Xm(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Dy=(wy.range,Xm(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Dy.every=e=>isFinite(e=Math.floor(e))&&e>0?Xm(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;Dy.range;const ky=Xm(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ky.every=e=>isFinite(e=Math.floor(e))&&e>0?Xm(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;ky.range;function Cy(e,t,n,r,a,o){const i=[[Qm,1,jm],[Qm,5,5e3],[Qm,15,15e3],[Qm,30,3e4],[o,1,zm],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,Wm],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,Um],[r,2,1728e5],[n,1,Vm],[t,1,Hm],[t,3,7776e6],[e,1,Gm]];function s(t,n,r){const a=Math.abs(n-t)/r,o=Nf(e=>{let[,,t]=e;return t}).right(i,a);if(o===i.length)return e.every(Af(t/Gm,n/Gm,r));if(0===o)return Ym.every(Math.max(Af(t,n,r),1));const[s,u]=i[a/i[o-1][2]<i[o][2]/a?o-1:o];return s.every(u)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const a=n&&"function"===typeof n.range?n:s(e,t,n),o=a?a.range(e,+t+1):[];return r?o.reverse():o},s]}const[Ey,Sy]=Cy(ky,wy,py,ry,ey,Jm),[Ay,Fy]=Cy(Dy,xy,oy,ty,$m,Zm);function Iy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ny(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ty(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Oy,Ry,_y,Py={"-":"",_:" ",0:"0"},My=/^\s*\d+/,By=/^%/,Ly=/[\\^$*+?|[\]().{}]/g;function jy(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(t)+a:a)}function zy(e){return e.replace(Ly,"\\$&")}function Wy(e){return new RegExp("^(?:"+e.map(zy).join("|")+")","i")}function Uy(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function Vy(e,t,n){var r=My.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Hy(e,t,n){var r=My.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Gy(e,t,n){var r=My.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Ky(e,t,n){var r=My.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function qy(e,t,n){var r=My.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Xy(e,t,n){var r=My.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yy(e,t,n){var r=My.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Qy(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Zy(e,t,n){var r=My.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Jy(e,t,n){var r=My.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function $y(e,t,n){var r=My.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ev(e,t,n){var r=My.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function tv(e,t,n){var r=My.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function nv(e,t,n){var r=My.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function rv(e,t,n){var r=My.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function av(e,t,n){var r=My.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ov(e,t,n){var r=My.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function iv(e,t,n){var r=By.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sv(e,t,n){var r=My.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function uv(e,t,n){var r=My.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function lv(e,t){return jy(e.getDate(),t,2)}function cv(e,t){return jy(e.getHours(),t,2)}function dv(e,t){return jy(e.getHours()%12||12,t,2)}function hv(e,t){return jy(1+ty.count(Dy(e),e),t,3)}function pv(e,t){return jy(e.getMilliseconds(),t,3)}function fv(e,t){return pv(e,t)+"000"}function gv(e,t){return jy(e.getMonth()+1,t,2)}function mv(e,t){return jy(e.getMinutes(),t,2)}function yv(e,t){return jy(e.getSeconds(),t,2)}function vv(e){var t=e.getDay();return 0===t?7:t}function bv(e,t){return jy(oy.count(Dy(e)-1,e),t,2)}function xv(e){var t=e.getDay();return t>=4||0===t?ly(e):ly.ceil(e)}function wv(e,t){return e=xv(e),jy(ly.count(Dy(e),e)+(4===Dy(e).getDay()),t,2)}function Dv(e){return e.getDay()}function kv(e,t){return jy(iy.count(Dy(e)-1,e),t,2)}function Cv(e,t){return jy(e.getFullYear()%100,t,2)}function Ev(e,t){return jy((e=xv(e)).getFullYear()%100,t,2)}function Sv(e,t){return jy(e.getFullYear()%1e4,t,4)}function Av(e,t){var n=e.getDay();return jy((e=n>=4||0===n?ly(e):ly.ceil(e)).getFullYear()%1e4,t,4)}function Fv(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+jy(t/60|0,"0",2)+jy(t%60,"0",2)}function Iv(e,t){return jy(e.getUTCDate(),t,2)}function Nv(e,t){return jy(e.getUTCHours(),t,2)}function Tv(e,t){return jy(e.getUTCHours()%12||12,t,2)}function Ov(e,t){return jy(1+ny.count(ky(e),e),t,3)}function Rv(e,t){return jy(e.getUTCMilliseconds(),t,3)}function _v(e,t){return Rv(e,t)+"000"}function Pv(e,t){return jy(e.getUTCMonth()+1,t,2)}function Mv(e,t){return jy(e.getUTCMinutes(),t,2)}function Bv(e,t){return jy(e.getUTCSeconds(),t,2)}function Lv(e){var t=e.getUTCDay();return 0===t?7:t}function jv(e,t){return jy(py.count(ky(e)-1,e),t,2)}function zv(e){var t=e.getUTCDay();return t>=4||0===t?yy(e):yy.ceil(e)}function Wv(e,t){return e=zv(e),jy(yy.count(ky(e),e)+(4===ky(e).getUTCDay()),t,2)}function Uv(e){return e.getUTCDay()}function Vv(e,t){return jy(fy.count(ky(e)-1,e),t,2)}function Hv(e,t){return jy(e.getUTCFullYear()%100,t,2)}function Gv(e,t){return jy((e=zv(e)).getUTCFullYear()%100,t,2)}function Kv(e,t){return jy(e.getUTCFullYear()%1e4,t,4)}function qv(e,t){var n=e.getUTCDay();return jy((e=n>=4||0===n?yy(e):yy.ceil(e)).getUTCFullYear()%1e4,t,4)}function Xv(){return"+0000"}function Yv(){return"%"}function Qv(e){return+e}function Zv(e){return Math.floor(+e/1e3)}function Jv(e){return new Date(e)}function $v(e){return e instanceof Date?+e:+new Date(+e)}function eb(e,t,n,r,a,o,i,s,u,l){var c=Wg(),d=c.invert,h=c.domain,p=l(".%L"),f=l(":%S"),g=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function w(e){return(u(e)<e?p:s(e)<e?f:i(e)<e?g:o(e)<e?m:r(e)<e?a(e)<e?y:v:n(e)<e?b:x)(e)}return c.invert=function(e){return new Date(d(e))},c.domain=function(e){return arguments.length?h(Array.from(e,$v)):h().map(Jv)},c.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:l(t)},c.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(sm(n,e)):c},c.copy=function(){return jg(c,eb(e,t,n,r,a,o,i,s,u,l))},c}function tb(){return lf.apply(eb(Ay,Fy,Dy,xy,oy,ty,$m,Zm,Qm,Ry).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nb(){return lf.apply(eb(Ey,Sy,ky,wy,py,ny,ey,Jm,Qm,_y).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rb(){var e,t,n,r,a,o=0,i=1,s=Pg,u=!1;function l(t){return null==t||isNaN(t=+t)?a:s(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),l):[s(0),s(1)]}}return l.domain=function(a){return arguments.length?([o,i]=a,e=r(o=+o),t=r(i=+i),n=e===t?0:1/(t-e),l):[o,i]},l.clamp=function(e){return arguments.length?(u=!!e,l):u},l.interpolator=function(e){return arguments.length?(s=e,l):s},l.range=c(Tg),l.rangeRound=c(Og),l.unknown=function(e){return arguments.length?(a=e,l):a},function(a){return r=a,e=a(o),t=a(i),n=e===t?0:1/(t-e),l}}function ab(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ob(){var e=am(rb()(Pg));return e.copy=function(){return ab(e,ob())},cf.apply(e,arguments)}function ib(){var e=fm(rb()).domain([1,10]);return e.copy=function(){return ab(e,ib()).base(e.base())},cf.apply(e,arguments)}function sb(){var e=vm(rb());return e.copy=function(){return ab(e,sb()).constant(e.constant())},cf.apply(e,arguments)}function ub(){var e=km(rb());return e.copy=function(){return ab(e,ub()).exponent(e.exponent())},cf.apply(e,arguments)}function lb(){return ub.apply(null,arguments).exponent(.5)}function cb(){var e=[],t=Pg;function n(n){if(null!=n&&!isNaN(n=+n))return t((Pf(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Ff),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((n,r)=>t(r/(e.length-1)))},n.quantiles=function(t){return Array.from({length:t+1},(n,r)=>_m(e,r/t))},n.copy=function(){return cb(t).domain(e)},cf.apply(n,arguments)}function db(){var e,t,n,r,a,o,i,s=0,u=.5,l=1,c=1,d=Pg,h=!1;function p(e){return isNaN(e=+e)?i:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:a),d(h?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var n,r,a;return arguments.length?([n,r,a]=t,d=function(e,t){void 0===t&&(t=e,e=Tg);for(var n=0,r=t.length-1,a=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}(e,[n,r,a]),p):[d(0),d(.5),d(1)]}}return p.domain=function(i){return arguments.length?([s,u,l]=i,e=o(s=+s),t=o(u=+u),n=o(l=+l),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),c=t<e?-1:1,p):[s,u,l]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=f(Tg),p.rangeRound=f(Og),p.unknown=function(e){return arguments.length?(i=e,p):i},function(i){return o=i,e=i(s),t=i(u),n=i(l),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),c=t<e?-1:1,p}}function hb(){var e=am(db()(Pg));return e.copy=function(){return ab(e,hb())},cf.apply(e,arguments)}function pb(){var e=fm(db()).domain([.1,1,10]);return e.copy=function(){return ab(e,pb()).base(e.base())},cf.apply(e,arguments)}function fb(){var e=vm(db());return e.copy=function(){return ab(e,fb()).constant(e.constant())},cf.apply(e,arguments)}function gb(){var e=km(db());return e.copy=function(){return ab(e,gb()).exponent(e.exponent())},cf.apply(e,arguments)}function mb(){return gb.apply(null,arguments).exponent(.5)}!function(e){Oy=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,i=e.shortDays,s=e.months,u=e.shortMonths,l=Wy(a),c=Uy(a),d=Wy(o),h=Uy(o),p=Wy(i),f=Uy(i),g=Wy(s),m=Uy(s),y=Wy(u),v=Uy(u),b={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:lv,e:lv,f:fv,g:Ev,G:Av,H:cv,I:dv,j:hv,L:pv,m:gv,M:mv,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Qv,s:Zv,S:yv,u:vv,U:bv,V:wv,w:Dv,W:kv,x:null,X:null,y:Cv,Y:Sv,Z:Fv,"%":Yv},x={a:function(e){return i[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Iv,e:Iv,f:_v,g:Gv,G:qv,H:Nv,I:Tv,j:Ov,L:Rv,m:Pv,M:Mv,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Qv,s:Zv,S:Bv,u:Lv,U:jv,V:Wv,w:Uv,W:Vv,x:null,X:null,y:Hv,Y:Kv,Z:Xv,"%":Yv},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return C(e,t,n,r)},d:$y,e:$y,f:ov,g:Yy,G:Xy,H:tv,I:tv,j:ev,L:av,m:Jy,M:nv,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Zy,Q:sv,s:uv,S:rv,u:Hy,U:Gy,V:Ky,w:Vy,W:qy,x:function(e,t,r){return C(e,n,t,r)},X:function(e,t,n){return C(e,r,t,n)},y:Yy,Y:Xy,Z:Qy,"%":iv};function D(e,t){return function(n){var r,a,o,i=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(i.push(e.slice(u,s)),null!=(a=Py[r=e.charAt(++s)])?r=e.charAt(++s):a="e"===r?" ":"0",(o=t[r])&&(r=o(n,a)),i.push(r),u=s+1);return i.push(e.slice(u,s)),i.join("")}}function k(e,t){return function(n){var r,a,o=Ty(1900,void 0,1);if(C(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=(r=Ny(Ty(o.y,0,1))).getUTCDay(),r=a>4||0===a?fy.ceil(r):fy(r),r=ny.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(a=(r=Iy(Ty(o.y,0,1))).getDay(),r=a>4||0===a?iy.ceil(r):iy(r),r=ty.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?Ny(Ty(o.y,0,1)).getUTCDay():Iy(Ty(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ny(o)):Iy(o)}}function C(e,t,n,r){for(var a,o,i=0,s=t.length,u=n.length;i<s;){if(r>=u)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(o=w[a in Py?t.charAt(i++):a])||(r=o(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=D(n,b),b.X=D(r,b),b.c=D(t,b),x.x=D(n,x),x.X=D(r,x),x.c=D(t,x),{format:function(e){var t=D(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=D(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}(e),Ry=Oy.format,Oy.parse,_y=Oy.utcFormat,Oy.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var yb=e=>e.chartData,vb=Uh([yb],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),bb=(e,t,n,r)=>r?vb(e):yb(e);function xb(e){return Number.isFinite(e)}function wb(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function Db(e){if(Array.isArray(e)&&2===e.length){var[t,n]=e;if(xb(t)&&xb(n))return!0}return!1}function kb(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}var Cb=n(8210),Eb=n.n(Cb),Sb=e=>e,Ab={"@@functional/placeholder":!0},Fb=e=>e===Ab,Ib=e=>function t(){return 0===arguments.length||1===arguments.length&&Fb(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Nb=(e,t)=>1===e?t:Ib(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=r.filter(e=>e!==Ab).length;return o>=e?t(...r):Nb(e-o,Ib(function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o=r.map(e=>Fb(e)?n.shift():e);return t(...o,...n)}))}),Tb=e=>Nb(e.length,e),Ob=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Rb=Tb((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)),_b=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Pb=e=>{var t=null,n=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t&&a.every((e,n)=>{var r;return e===(null===(r=t)||void 0===r?void 0:r[n])})?n:(t=a,n=e(...a))}};function Mb(e){return 0===e?1:Math.floor(new(Eb())(e).abs().log(10).toNumber())+1}function Bb(e,t,n){for(var r=new(Eb())(e),a=0,o=[];r.lt(t)&&a<1e5;)o.push(r.toNumber()),r=r.add(n),a++;return o}Tb((e,t,n)=>{var r=+e;return r+n*(+t-r)}),Tb((e,t,n)=>{var r=t-+e;return(n-e)/(r=r||1/0)}),Tb((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var Lb=e=>{var[t,n]=e,[r,a]=[t,n];return t>n&&([r,a]=[n,t]),[r,a]},jb=(e,t,n)=>{if(e.lte(0))return new(Eb())(0);var r=Mb(e.toNumber()),a=new(Eb())(10).pow(r),o=e.div(a),i=1!==r?.05:.1,s=new(Eb())(Math.ceil(o.div(i).toNumber())).add(n).mul(i).mul(a);return t?new(Eb())(s.toNumber()):new(Eb())(Math.ceil(s.toNumber()))},zb=(e,t,n)=>{var r=new(Eb())(1),a=new(Eb())(e);if(!a.isint()&&n){var o=Math.abs(e);o<1?(r=new(Eb())(10).pow(Mb(e)-1),a=new(Eb())(Math.floor(a.div(r).toNumber())).mul(r)):o>1&&(a=new(Eb())(Math.floor(e)))}else 0===e?a=new(Eb())(Math.floor((t-1)/2)):n||(a=new(Eb())(Math.floor(e)));var i=Math.floor((t-1)/2),s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return Sb;var r=t.reverse(),a=r[0],o=r.slice(1);return function(){return o.reduce((e,t)=>t(e),a(...arguments))}}(Rb(e=>a.add(new(Eb())(e-i).mul(r)).toNumber()),Ob);return s(0,t)},Wb=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(Eb())(0),tickMin:new(Eb())(0),tickMax:new(Eb())(0)};var o,i=jb(new(Eb())(t).sub(e).div(n-1),r,a);o=e<=0&&t>=0?new(Eb())(0):(o=new(Eb())(e).add(t).div(2)).sub(new(Eb())(o).mod(i));var s=Math.ceil(o.sub(e).div(i).toNumber()),u=Math.ceil(new(Eb())(t).sub(o).div(i).toNumber()),l=s+u+1;return l>n?Wb(e,t,n,r,a+1):(l<n&&(u=t>0?u+(n-l):u,s=t>0?s:s+(n-l)),{step:i,tickMin:o.sub(new(Eb())(s).mul(i)),tickMax:o.add(new(Eb())(u).mul(i))})};var Ub=Pb(function(e){var[t,n]=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(r,2),[i,s]=Lb([t,n]);if(i===-1/0||s===1/0){var u=s===1/0?[i,...Ob(0,r-1).map(()=>1/0)]:[...Ob(0,r-1).map(()=>-1/0),s];return t>n?_b(u):u}if(i===s)return zb(i,r,a);var{step:l,tickMin:c,tickMax:d}=Wb(i,s,o,a,0),h=Bb(c,d.add(new(Eb())(.1).mul(l)),l);return t>n?_b(h):h}),Vb=Pb(function(e,t){var[n,r]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[o,i]=Lb([n,r]);if(o===-1/0||i===1/0)return[n,r];if(o===i)return[o];var s=Math.max(t,2),u=jb(new(Eb())(i).sub(o).div(s-1),a,0),l=[...Bb(new(Eb())(o),new(Eb())(i).sub(new(Eb())(.99).mul(u)),u),i];return n>r?_b(l):l}),Hb=e=>e.rootProps.maxBarSize,Gb=e=>e.rootProps.barCategoryGap,Kb=e=>e.rootProps.stackOffset,qb=e=>e.options.chartName,Xb=e=>e.rootProps.syncId,Yb=e=>e.rootProps.syncMethod,Qb=e=>e.options.eventEmitter,Zb=0,Jb="auto",$b=!0,ex=!1,tx=!0,nx=0,rx="auto",ax=!0,ox=5,ix=(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t},sx={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zb,includeHidden:!1,name:void 0,reversed:!1,scale:Jb,tick:$b,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},ux={allowDataOverflow:ex,allowDecimals:!1,allowDuplicatedCategory:tx,dataKey:void 0,domain:void 0,id:nx,includeHidden:!1,name:void 0,reversed:!1,scale:rx,tick:ax,tickCount:ox,ticks:void 0,type:"number",unit:void 0},lx={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:Zb,includeHidden:!1,name:void 0,reversed:!1,scale:Jb,tick:$b,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},cx={allowDataOverflow:ex,allowDecimals:!1,allowDuplicatedCategory:tx,dataKey:void 0,domain:void 0,id:nx,includeHidden:!1,name:void 0,reversed:!1,scale:rx,tick:ax,tickCount:ox,ticks:void 0,type:"category",unit:void 0},dx=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?lx:sx,hx=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?cx:ux,px=e=>e.polarOptions,fx=Uh([Mp,Bp,Gp],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2}),gx=Uh([px,fx],(e,t)=>{if(null!=e)return Zu(e.innerRadius,t,0)}),mx=Uh([px,fx],(e,t)=>{if(null!=e)return Zu(e.outerRadius,t,.8*t)}),yx=Uh([px],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]}),vx=(Uh([dx,yx],ix),Uh([fx,gx,mx],(e,t,n)=>{if(null!=e&&null!=t&&null!=n)return[t,n]})),bx=(Uh([hx,vx],ix),Uh([af,px,gx,mx,Mp,Bp],(e,t,n,r,a,o)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=n&&null!=r){var{cx:i,cy:s,startAngle:u,endAngle:l}=t;return{cx:Zu(i,a,a/2),cy:Zu(s,o,o/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:l,clockWise:!1}}})),xx=(e,t)=>t,wx=(e,t,n)=>n;function Dx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dx(Object(n),!0).forEach(function(t){Cx(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Cx(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ex=[0,"auto"],Sx={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Ax=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return null==n?Sx:n},Fx={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Ex,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},Ix=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return null==n?Fx:n},Nx={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Tx=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return null==n?Nx:n},Ox=(e,t,n)=>{switch(t){case"xAxis":return Ax(e,n);case"yAxis":return Ix(e,n);case"zAxis":return Tx(e,n);case"angleAxis":return dx(e,n);case"radiusAxis":return hx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Rx=(e,t,n)=>{switch(t){case"xAxis":return Ax(e,n);case"yAxis":return Ix(e,n);case"angleAxis":return dx(e,n);case"radiusAxis":return hx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},_x=e=>e.graphicalItems.countOfBars>0;function Px(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Mx=e=>e.graphicalItems.cartesianItems,Bx=Uh([xx,wx],Px),Lx=(e,t,n)=>e.filter(n).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),jx=Uh([Mx,Ox,Bx],Lx),zx=e=>e.filter(e=>void 0===e.stackId),Wx=Uh([jx],zx),Ux=e=>e.map(e=>e.data).filter(Boolean).flat(1),Vx=Uh([jx],Ux),Hx=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:a}=t;return e.length>0?e:n.slice(r,a+1)},Gx=Uh([Vx,bb],Hx),Kx=(e,t,n)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:xp(e,t.dataKey)})):n.length>0?n.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:xp(e,t)}))):e.map(e=>({value:e})),qx=Uh([Gx,Ox,jx],Kx);function Xx(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function Yx(e){return e.filter(e=>Xu(e)||e instanceof Date).map(Number).filter(e=>!1===Gu(e))}function Qx(e,t,n){return!n||"number"!==typeof t||Gu(t)?[]:n.length?Yx(n.flatMap(n=>{var r,a,o=xp(e,n.dataKey);if(Array.isArray(o)?[r,a]=o:r=a=o,xb(r)&&xb(a))return[t-r,t+a]})):[]}var Zx=(e,t,n)=>{var r=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(r).map(t=>{var[r,a]=t,o=a.map(e=>e.dataKey);return[r,{stackedData:Sp(e,o,n),graphicalItems:a}]}))},Jx=Uh([Gx,jx,Kb],Zx),$x=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:a}=t;if("zAxis"!==n){var o=Np(e,r,a);if(null==o||0!==o[0]||0!==o[1])return o}},ew=Uh([Jx,yb,xx],$x),tw=(e,t,n,r)=>n.length>0?e.flatMap(e=>n.flatMap(n=>{var a,o,i=null===(a=n.errorBars)||void 0===a?void 0:a.filter(e=>Xx(r,e)),s=xp(e,null!==(o=t.dataKey)&&void 0!==o?o:n.dataKey);return{value:s,errorDomain:Qx(e,s,i)}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:xp(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})),nw=Uh(Gx,Ox,Wx,xx,tw);function rw(e){var{value:t}=e;if(Xu(t)||t instanceof Date)return t}var aw=e=>{var t;if(null==e||!("domain"in e))return Ex;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var n=Yx(e.ticks);return[Math.min(...n),Math.max(...n)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:Ex},ow=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);if(0!==r.length){var a=r.flat();return[Math.min(...a),Math.max(...a)]}},iw=e=>e.referenceElements.dots,sw=(e,t,n)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===n:e.yAxisId===n),uw=Uh([iw,xx,wx],sw),lw=e=>e.referenceElements.areas,cw=Uh([lw,xx,wx],sw),dw=e=>e.referenceElements.lines,hw=Uh([dw,xx,wx],sw),pw=(e,t)=>{var n=Yx(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},fw=Uh(uw,xx,pw),gw=(e,t)=>{var n=Yx(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},mw=Uh([cw,xx],gw),yw=(e,t)=>{var n=Yx(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},vw=Uh(hw,xx,yw),bw=Uh(fw,vw,mw,(e,t,n)=>ow(e,n,t)),xw=Uh([Ox],aw),ww=(e,t,n,r,a)=>{var o=function(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var n,r,[a,o]=e;if(xb(a))n=a;else if("function"===typeof a)return;if(xb(o))r=o;else if("function"===typeof o)return;var i=[n,r];if(Db(i))return i}}(t,e.allowDataOverflow);return null!=o?o:function(e,t,n){if(n||null!=t){if("function"===typeof e&&null!=t)try{var r=e(t,n);if(Db(r))return kb(r,t,n)}catch(p){}if(Array.isArray(e)&&2===e.length){var a,o,[i,s]=e;if("auto"===i)null!=t&&(a=Math.min(...t));else if(qu(i))a=i;else if("function"===typeof i)try{null!=t&&(a=i(null===t||void 0===t?void 0:t[0]))}catch(f){}else if("string"===typeof i&&Tp.test(i)){var u=Tp.exec(i);if(null==u||null==t)a=void 0;else{var l=+u[1];a=t[0]-l}}else a=null===t||void 0===t?void 0:t[0];if("auto"===s)null!=t&&(o=Math.max(...t));else if(qu(s))o=s;else if("function"===typeof s)try{null!=t&&(o=s(null===t||void 0===t?void 0:t[1]))}catch(g){}else if("string"===typeof s&&Op.test(s)){var c=Op.exec(s);if(null==c||null==t)o=void 0;else{var d=+c[1];o=t[1]+d}}else o=null===t||void 0===t?void 0:t[1];var h=[a,o];if(Db(h))return null==t?h:kb(h,t,n)}}}(t,ow(n,a,(e=>{var t=e.flatMap(e=>[e.value,e.errorDomain]).flat(1),n=Yx(t);if(0!==n.length)return[Math.min(...n),Math.max(...n)]})(r)),e.allowDataOverflow)},Dw=Uh([Ox,xw,ew,nw,bw],ww),kw=[0,1],Cw=(e,t,n,r,a,o,i)=>{if(null!=e&&null!=n&&0!==n.length){var{dataKey:s,type:u}=e,l=wp(t,o);return l&&null==s?uf()(0,n.length):"category"===u?((e,t,n)=>{var r=e.map(rw).filter(e=>null!=e);return n&&(null==t.dataKey||t.allowDuplicatedCategory&&Ju(r))?uf()(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))})(r,e,l):"expand"===a?kw:i}},Ew=Uh([Ox,af,Gx,qx,Kb,xx,Dw],Cw),Sw=(e,t,n,a,o)=>{if(null!=e){var{scale:i,type:s}=e;if("auto"===i)return"radial"===t&&"radiusAxis"===o?"band":"radial"===t&&"angleAxis"===o?"linear":"category"===s&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":"category"===s?"band":"linear";if("string"===typeof i){var u="scale".concat(nl(i));return u in r?u:"point"}}},Aw=Uh([Ox,af,_x,qb,xx],Sw);function Fw(e,t,n,a){if(null!=n&&null!=a){if("function"===typeof e.scale)return e.scale.copy().domain(n).range(a);var o=function(e){if(null!=e){if(e in r)return r[e]();var t="scale".concat(nl(e));return t in r?r[t]():void 0}}(t);if(null!=o){var i=o.domain(n).range(a);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),a=Math.min(r[0],r[1])-Cp,o=Math.max(r[0],r[1])+Cp,i=e(t[0]),s=e(t[n-1]);(i<a||i>o||s<a||s>o)&&e.domain([t[0],t[n-1]])}})(i),i}}}var Iw=(e,t,n)=>{var r=aw(t);if("auto"===n||"linear"===n)return null!=t&&t.tickCount&&Array.isArray(r)&&("auto"===r[0]||"auto"===r[1])&&Db(e)?Ub(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&Db(e)?Vb(e,t.tickCount,t.allowDecimals):void 0},Nw=Uh([Ew,Rx,Aw],Iw),Tw=(e,t,n,r)=>{if("angleAxis"!==r&&"number"===(null===e||void 0===e?void 0:e.type)&&Db(t)&&Array.isArray(n)&&n.length>0){var a=t[0],o=n[0],i=t[1],s=n[n.length-1];return[Math.min(a,o),Math.max(i,s)]}return t},Ow=Uh([Ox,Ew,Nw,xx],Tw),Rw=Uh(qx,Ox,(e,t)=>{if(t&&"number"===t.type){var n=1/0,r=Array.from(Yx(e.map(e=>e.value))).sort((e,t)=>e-t);if(r.length<2)return 1/0;var a=r[r.length-1]-r[0];if(0===a)return 1/0;for(var o=0;o<r.length-1;o++){var i=r[o+1]-r[o];n=Math.min(n,i)}return n/a}}),_w=Uh(Rw,af,Gb,Gp,(e,t,n,r)=>r,(e,t,n,r,a)=>{if(!xb(e))return 0;var o="vertical"===t?r.height:r.width;if("gap"===a)return e*o/2;if("no-gap"===a){var i=Zu(n,e*o),s=e*o/2;return s-i-(s-i)/o*i}return 0}),Pw=Uh(Ax,(e,t)=>{var n=Ax(e,t);return null==n||"string"!==typeof n.padding?0:_w(e,"xAxis",t,n.padding)},(e,t)=>{var n,r;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"===typeof a?{left:t,right:t}:{left:(null!==(n=a.left)&&void 0!==n?n:0)+t,right:(null!==(r=a.right)&&void 0!==r?r:0)+t}}),Mw=Uh(Ix,(e,t)=>{var n=Ix(e,t);return null==n||"string"!==typeof n.padding?0:_w(e,"yAxis",t,n.padding)},(e,t)=>{var n,r;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"===typeof a?{top:t,bottom:t}:{top:(null!==(n=a.top)&&void 0!==n?n:0)+t,bottom:(null!==(r=a.bottom)&&void 0!==r?r:0)+t}}),Bw=Uh([Gp,Pw,Zp,Qp,(e,t,n)=>n],(e,t,n,r,a)=>{var{padding:o}=r;return a?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),Lw=Uh([Gp,af,Mw,Zp,Qp,(e,t,n)=>n],(e,t,n,r,a,o)=>{var{padding:i}=a;return o?[r.height-i.bottom,i.top]:"horizontal"===t?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),jw=(e,t,n,r)=>{var a;switch(t){case"xAxis":return Bw(e,n,r);case"yAxis":return Lw(e,n,r);case"zAxis":return null===(a=Tx(e,n))||void 0===a?void 0:a.range;case"angleAxis":return yx(e);case"radiusAxis":return vx(e,n);default:return}},zw=Uh([Ox,jw],ix),Ww=Uh([Ox,Aw,Ow,zw],Fw);Uh(jx,xx,(e,t)=>e.flatMap(e=>{var t;return null!==(t=e.errorBars)&&void 0!==t?t:[]}).filter(e=>Xx(t,e)));function Uw(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Vw=(e,t)=>t,Hw=(e,t,n)=>n,Gw=Uh(zp,Vw,Hw,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(Uw)),Kw=Uh(Wp,Vw,Hw,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(Uw)),qw=(e,t)=>({width:e.width,height:t.height}),Xw=Uh(Gp,Ax,qw),Yw=Uh(Bp,Gp,Gw,Vw,Hw,(e,t,n,r,a)=>{var o,i={};return n.forEach(n=>{var s=qw(t,n);null==o&&(o=((e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}})(t,r,e));var u="top"===r&&!a||"bottom"===r&&a;i[n.id]=o-Number(u)*s.height,o+=(u?-1:1)*s.height}),i}),Qw=Uh(Mp,Gp,Kw,Vw,Hw,(e,t,n,r,a)=>{var o,i={};return n.forEach(n=>{var s=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,n);null==o&&(o=((e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}})(t,r,e));var u="left"===r&&!a||"right"===r&&a;i[n.id]=o-Number(u)*s.width,o+=(u?-1:1)*s.width}),i}),Zw=Uh(Gp,Ix,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),Jw=(e,t,n)=>{switch(t){case"xAxis":return Xw(e,n).width;case"yAxis":return Zw(e,n).height;default:return}},$w=(e,t,n,r)=>{if(null!=n){var{allowDuplicatedCategory:a,type:o,dataKey:i}=n,s=wp(e,r),u=t.map(e=>e.value);return i&&s&&"category"===o&&a&&Ju(u)?u:void 0}},eD=Uh([af,qx,Ox,xx],$w),tD=(e,t,n,r)=>{if(null!=n&&null!=n.dataKey){var{type:a,scale:o}=n;return!wp(e,r)||"number"!==a&&"auto"===o?void 0:t.map(e=>e.value)}},nD=Uh([af,qx,Rx,xx],tD),rD=Uh([af,(e,t,n)=>{switch(t){case"xAxis":return Ax(e,n);case"yAxis":return Ix(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Aw,Ww,eD,nD,jw,Nw,xx],(e,t,n,r,a,o,i,s,u)=>{if(null==t)return null;var l=wp(e,u);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:u,categoricalDomain:o,duplicateDomain:a,isCategorical:l,niceTicks:s,range:i,realScaleType:n,scale:r}}),aD=Uh([af,Rx,Aw,Ww,Nw,jw,eD,nD,xx],(e,t,n,r,a,o,i,s,u)=>{if(null!=t&&null!=r){var l=wp(e,u),{type:c,ticks:d,tickCount:h}=t,p="scaleBand"===n&&"function"===typeof r.bandwidth?r.bandwidth()/2:2,f="category"===c&&r.bandwidth?r.bandwidth()/p:0;f="angleAxis"===u&&null!=o&&o.length>=2?2*Hu(o[0]-o[1])*f:f;var g=d||a;if(g){var m=g.map((e,t)=>{var n=i?i.indexOf(e):e;return{index:t,coordinate:r(n)+f,value:e,offset:f}});return m.filter(e=>!Gu(e.coordinate))}return l&&s?s.map((e,t)=>({coordinate:r(e)+f,value:e,index:t,offset:f})):r.ticks?r.ticks(h).map(e=>({coordinate:r(e)+f,value:e,offset:f})):r.domain().map((e,t)=>({coordinate:r(e)+f,value:i?i[e]:e,index:t,offset:f}))}}),oD=Uh([af,Rx,Ww,jw,eD,nD,xx],(e,t,n,r,a,o,i)=>{if(null!=t&&null!=n&&null!=r&&r[0]!==r[1]){var s=wp(e,i),{tickCount:u}=t,l=0;return l="angleAxis"===i&&(null===r||void 0===r?void 0:r.length)>=2?2*Hu(r[0]-r[1])*l:l,s&&o?o.map((e,t)=>({coordinate:n(e)+l,value:e,index:t,offset:l})):n.ticks?n.ticks(u).map(e=>({coordinate:n(e)+l,value:e,offset:l})):n.domain().map((e,t)=>({coordinate:n(e)+l,value:a?a[e]:e,index:t,offset:l}))}}),iD=Uh(Ox,Ww,(e,t)=>{if(null!=e&&null!=t)return kx(kx({},e),{},{scale:t})}),sD=Uh([Ox,Aw,Ew,zw],Fw),uD=(Uh((e,t,n)=>Tx(e,n),sD,(e,t)=>{if(null!=e&&null!=t)return kx(kx({},e),{},{scale:t})}),Uh([af,zp,Wp],(e,t,n)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),lD=e=>e.options.defaultTooltipEventType,cD=e=>e.options.validateTooltipEventTypes;function dD(e,t,n){if(null==e)return t;var r=e?"axis":"item";return null==n?t:n.includes(r)?r:t}function hD(e,t){return dD(t,lD(e),cD(e))}var pD=(e,t)=>{var n,r=Number(t);if(!Gu(r)&&null!=t)return r>=0?null===e||void 0===e||null===(n=e[r])||void 0===n?void 0:n.value:void 0};function fD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fD(Object(n),!0).forEach(function(t){mD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yD=(e,t,n,r)=>{if(null==t)return ch;var a=function(e,t,n){return"axis"===t?"click"===n?e.axisInteraction.click:e.axisInteraction.hover:"click"===n?e.itemInteraction.click:e.itemInteraction.hover}(e,t,n);if(null==a)return ch;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var o=!0===e.settings.active;if(null!=a.index){if(o)return gD(gD({},a),{},{active:!0})}else if(null!=r)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return gD(gD({},ch),{},{coordinate:a.coordinate})},vD=(e,t)=>{var n=null===e||void 0===e?void 0:e.index;if(null==n)return null;var r=Number(n);if(!xb(r))return n;var a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(0,Math.min(r,a)))},bD=(e,t,n,r,a,o,i,s)=>{if(null!=o&&null!=s){var u=i[0],l=null==u?void 0:s(u.positions,o);if(null!=l)return l;var c=null===a||void 0===a?void 0:a[Number(o)];if(c)return"horizontal"===n?{x:c.coordinate,y:(r.top+t)/2}:{x:(r.left+e)/2,y:c.coordinate}}},xD=(e,t,n,r)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(a="hover"===n?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=r?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===a});var a},wD=e=>e.options.tooltipPayloadSearcher,DD=e=>e.tooltip,kD=e=>{var t=af(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},CD=e=>e.tooltip.settings.axisId,ED=e=>{var t=kD(e),n=CD(e);return Rx(e,t,n)},SD=Uh([ED,af,_x,qb,kD],Sw),AD=Uh([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),FD=Uh([kD,CD],Px),ID=Uh([AD,ED,FD],Lx),ND=Uh([ID],Ux),TD=Uh([ND,yb],Hx),OD=Uh([TD,ED,ID],Kx),RD=Uh([ED],aw),_D=Uh([TD,ID,Kb],Zx),PD=Uh([_D,yb,kD],$x),MD=Uh([ID],zx),BD=Uh([TD,ED,MD,kD],tw),LD=Uh([iw,kD,CD],sw),jD=Uh([LD,kD],pw),zD=Uh([lw,kD,CD],sw),WD=Uh([zD,kD],gw),UD=Uh([dw,kD,CD],sw),VD=Uh([UD,kD],yw),HD=Uh([jD,VD,WD],ow),GD=Uh([ED,RD,PD,BD,HD],ww),KD=Uh([ED,af,TD,OD,Kb,kD,GD],Cw),qD=Uh([KD,ED,SD],Iw),XD=Uh([ED,KD,qD,kD],Tw),YD=e=>{var t=kD(e),n=CD(e);return jw(e,t,n,!1)},QD=Uh([ED,YD],ix),ZD=Uh([ED,SD,XD,QD],Fw),JD=Uh([af,OD,ED,kD],$w),$D=Uh([af,OD,ED,kD],tD),ek=Uh([af,ED,SD,ZD,YD,JD,$D,kD],(e,t,n,r,a,o,i,s)=>{if(t){var{type:u}=t,l=wp(e,s);if(r){var c="scaleBand"===n&&r.bandwidth?r.bandwidth()/2:2,d="category"===u&&r.bandwidth?r.bandwidth()/c:0;return d="angleAxis"===s&&null!=a&&(null===a||void 0===a?void 0:a.length)>=2?2*Hu(a[0]-a[1])*d:d,l&&i?i.map((e,t)=>({coordinate:r(e)+d,value:e,index:t,offset:d})):r.domain().map((e,t)=>({coordinate:r(e)+d,value:o?o[e]:e,index:t,offset:d}))}}}),tk=Uh([lD,cD,e=>e.tooltip.settings],(e,t,n)=>dD(n.shared,e,t)),nk=e=>e.tooltip.settings.trigger,rk=e=>e.tooltip.settings.defaultIndex,ak=Uh([DD,tk,nk,rk],yD),ok=Uh([ak,TD],vD),ik=Uh([ek,ok],pD),sk=Uh([ak],e=>{if(e)return e.dataKey}),uk=Uh([DD,tk,nk,rk],xD),lk=Uh([Mp,Bp,af,Gp,ek,rk,uk,wD],bD),ck=Uh([ak,lk],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),dk=Uh([ak],e=>e.active);function hk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hk(Object(n),!0).forEach(function(t){fk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gk=(e,t)=>t,mk=(e,t,n)=>n,yk=(e,t,n,r)=>r;var vk=Uh(ek,e=>$h()(e,e=>e.coordinate)),bk=Uh([DD,gk,mk,yk],yD),xk=Uh([bk,TD],vD),wk=Uh([DD,gk,mk,yk],xD),Dk=Uh([Mp,Bp,af,Gp,ek,yk,wk,wD],bD),kk=Uh([bk,Dk],(e,t)=>{var n;return null!==(n=e.coordinate)&&void 0!==n?n:t}),Ck=Uh(ek,xk,pD);var Ek=Uh([wk,xk,yb,ED,Ck,wD,gk],(e,t,n,r,a,o,i)=>{if(null!=t&&null!=o){var{chartData:s,computedData:u,dataStartIndex:l,dataEndIndex:c}=n;return e.reduce((e,n)=>{var d,h,p,f,g,m,{dataDefinedOnItem:y,settings:v}=n,b=function(e,t){return null!=e?e:t}(y,s),x=(h=b,p=l,f=c,Array.isArray(h)&&h&&p+f!==0?h.slice(p,f+1):h),w=null!==(d=null===v||void 0===v?void 0:v.dataKey)&&void 0!==d?d:null===r||void 0===r?void 0:r.dataKey,D=null===v||void 0===v?void 0:v.nameKey;(g=null===r||void 0===r||!r.dataKey||null!==r&&void 0!==r&&r.allowDuplicatedCategory||!Array.isArray(x)||"axis"!==i?o(x,t,u,D):el(x,r.dataKey,a),Array.isArray(g))?g.forEach(t=>{var n=pk(pk({},v),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(_p({tooltipEntrySettings:n,dataKey:t.dataKey,payload:t.payload,value:xp(t.payload,t.dataKey),name:t.name}))}):e.push(_p({tooltipEntrySettings:v,dataKey:w,payload:g,value:xp(g,w),name:null!==(m=xp(g,D))&&void 0!==m?m:null===v||void 0===v?void 0:v.name}));return e},[])}}),Sk=Uh([bk],e=>({isActive:e.active,activeIndex:e.index})),Ak=Uh([(e,t)=>t,af,bx,kD,QD,ek,vk,Gp],(e,t,n,r,a,o,i,s)=>{if(e&&t&&r&&a&&o){var u=function(e,t,n,r,a){return"horizontal"===n||"vertical"===n?e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height?{x:e,y:t}:null:r?mp({x:e,y:t},r):null}(e.chartX,e.chartY,t,n,s);if(u){var l=((e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius)(u,t),c=((e,t,n,r,a)=>{var o,i=-1,s=null!==(o=null===t||void 0===t?void 0:t.length)&&void 0!==o?o:0;if(s<=1||null==e)return 0;if("angleAxis"===r&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var u=0;u<s;u++){var l=u>0?n[u-1].coordinate:n[s-1].coordinate,c=n[u].coordinate,d=u>=s-1?n[0].coordinate:n[u+1].coordinate,h=void 0;if(Hu(c-l)!==Hu(d-c)){var p=[];if(Hu(d-c)===Hu(a[1]-a[0])){h=d;var f=c+a[1]-a[0];p[0]=Math.min(f,(f+l)/2),p[1]=Math.max(f,(f+l)/2)}else{h=l;var g=d+a[1]-a[0];p[0]=Math.min(c,(g+c)/2),p[1]=Math.max(c,(g+c)/2)}var m=[Math.min(c,(h+c)/2),Math.max(c,(h+c)/2)];if(e>m[0]&&e<=m[1]||e>=p[0]&&e<=p[1]){({index:i}=n[u]);break}}else{var y=Math.min(l,d),v=Math.max(l,d);if(e>(y+c)/2&&e<=(v+c)/2){({index:i}=n[u]);break}}}else if(t)for(var b=0;b<s;b++)if(0===b&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<s-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===s-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:i}=t[b]);break}return i})(l,i,o,r,a),d=((e,t,n,r)=>{var a=t.find(e=>e&&e.index===n);if(a){if("horizontal"===e)return{x:a.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:a.coordinate};if("centric"===e){var o=a.coordinate,{radius:i}=r;return vp(vp(vp({},r),pp(r.cx,r.cy,i,o)),{},{angle:o,radius:i})}var s=a.coordinate,{angle:u}=r;return vp(vp(vp({},r),pp(r.cx,r.cy,s,u)),{},{angle:u,radius:s})}return{x:0,y:0}})(t,o,c,u);return{activeIndex:String(c),activeCoordinate:d}}}}),Fk=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},Ik=hc("mouseClick"),Nk=od();Nk.startListening({actionCreator:Ik,effect:(e,t)=>{var n=e.payload,r=Ak(t.getState(),Fk(n));null!=(null===r||void 0===r?void 0:r.activeIndex)&&t.dispatch(xh({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Tk=hc("mouseMove"),Ok=od();function Rk(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}function _k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_k(Object(n),!0).forEach(function(t){Mk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ok.startListening({actionCreator:Tk,effect:(e,t)=>{var n=e.payload,r=t.getState(),a=hD(r,r.tooltip.settings.shared),o=Ak(r,Fk(n));"axis"===a&&(null!=(null===o||void 0===o?void 0:o.activeIndex)?t.dispatch(bh({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(yh()))}});var Bk=Sc({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=Pk(Pk({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:Lk,removeXAxis:jk,addYAxis:zk,removeYAxis:Wk,addZAxis:Uk,removeZAxis:Vk,updateYAxisWidth:Hk}=Bk.actions,Gk=Bk.reducer,Kk=Sc({name:"graphicalItems",initialState:{countOfBars:0,cartesianItems:[],polarItems:[]},reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},removeCartesianGraphicalItem(e,t){var n=ic(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=ic(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addBar:qk,removeBar:Xk,addCartesianGraphicalItem:Yk,removeCartesianGraphicalItem:Qk,addPolarGraphicalItem:Zk,removePolarGraphicalItem:Jk}=Kk.actions,$k=Kk.reducer,eC=Sc({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ic(e).dots.findIndex(e=>e===t.payload);-1!==n&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ic(e).areas.findIndex(e=>e===t.payload);-1!==n&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ic(e).lines.findIndex(e=>e===t.payload);-1!==n&&e.lines.splice(n,1)}}}),{addDot:tC,removeDot:nC,addArea:rC,removeArea:aC,addLine:oC,removeLine:iC}=eC.actions,sC=eC.reducer,uC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},lC=Sc({name:"brush",initialState:uC,reducers:{setBrushSettings:(e,t)=>null==t.payload?uC:t.payload}}),{setBrushSettings:cC}=lC.actions,dC=lC.reducer,hC=Sc({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=ic(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:pC,setLegendSettings:fC,addLegendPayload:gC,removeLegendPayload:mC}=hC.actions,yC=hC.reducer,vC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},bC=Sc({name:"rootProps",initialState:vC,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:vC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),xC=bC.reducer,{updateOptions:wC}=bC.actions,DC=Sc({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:kC,removeRadiusAxis:CC,addAngleAxis:EC,removeAngleAxis:SC}=DC.actions,AC=DC.reducer,FC=Sc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:IC}=FC.actions,NC=FC.reducer,TC=hc("keyDown"),OC=hc("focus"),RC=od();RC.startListening({actionCreator:TC,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var o=Number(vD(r,TD(n))),i=ek(n);if("Enter"!==a){var s=o+("ArrowRight"===a?1:-1)*("left-to-right"===uD(n)?1:-1);if(!(null==i||s>=i.length||s<0)){var u=Dk(n,"axis","hover",String(s));t.dispatch(Dh({active:!0,activeIndex:s.toString(),activeDataKey:void 0,activeCoordinate:u}))}}else{var l=Dk(n,"axis","hover",String(r.index));t.dispatch(Dh({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:l}))}}}}}),RC.startListening({actionCreator:OC,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&null==r.index){var a=Dk(n,"axis","hover",String("0"));t.dispatch(Dh({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var _C=hc("externalEvent"),PC=od();PC.startListening({actionCreator:_C,effect:(e,t)=>{if(null!=e.payload.handler){var n=t.getState(),r={activeCoordinate:ck(n),activeDataKey:sk(n),activeIndex:ok(n),activeLabel:ik(n),activeTooltipIndex:ok(n),isTooltipActive:dk(n)};e.payload.handler(r,e.payload.reactEvent)}}});var MC=Uh([DD],e=>e.tooltipItemPayloads),BC=Uh([MC,wD,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var a=e.find(e=>e.settings.dataKey===r);if(null!=a){var{positions:o}=a;if(null!=o)return t(o,n)}}),LC=hc("touchMove"),jC=od();jC.startListening({actionCreator:LC,effect:(e,t)=>{var n=e.payload,r=t.getState(),a=hD(r,r.tooltip.settings.shared);if("axis"===a){var o=Ak(r,Fk({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));null!=(null===o||void 0===o?void 0:o.activeIndex)&&t.dispatch(bh({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if("item"===a){var i,s=n.touches[0],u=document.elementFromPoint(s.clientX,s.clientY);if(!u||!u.getAttribute)return;var l=u.getAttribute("data-recharts-item-index"),c=null!==(i=u.getAttribute("data-recharts-item-data-key"))&&void 0!==i?i:void 0,d=BC(t.getState(),l,c);t.dispatch(gh({activeDataKey:c,activeIndex:l,activeCoordinate:d}))}}});var zC=fl({brush:dC,cartesianAxis:Gk,chartData:Fh,graphicalItems:$k,layout:_h,legend:yC,options:ld,polarAxis:AC,polarOptions:NC,referenceElements:sC,rootProps:xC,tooltip:kh});function WC(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,a=Yp(),o=(0,u.useRef)(null);if(a)return n;null==o.current&&(o.current=function(e){return bc({reducer:zC,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([Nk.middleware,Ok.middleware,RC.middleware,PC.middleware,jC.middleware]),devTools:{serialize:{replacer:Rk},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,r));var i=Gh;return u.createElement(wd,{context:i,store:o.current},n)}var UC=e=>{var{chartData:t}=e,n=qh(),r=Yp();return(0,u.useEffect)(()=>r?()=>{}:(n(Eh(t)),()=>{n(Eh(void 0))}),[t,n,r]),null};function VC(e){var{layout:t,width:n,height:r,margin:a}=e,o=qh(),i=Yp();return(0,u.useEffect)(()=>{i||(o(Th(t)),o(Oh({width:n,height:r})),o(Nh(a)))},[o,i,t,n,r,a]),null}function HC(e){var t=qh();return(0,u.useEffect)(()=>{t(wC(e))},[t,e]),null}var GC=n(2086),KC=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qC=["points","pathLength"],XC={svg:["viewBox","children"],polygon:qC,polyline:qC},YC=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],QC=(e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,u.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var r={};return Object.keys(n).forEach(e=>{YC.includes(e)&&(r[e]=t||(t=>n[e](n,t)))}),r},ZC=(e,t,n)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var r=null;return Object.keys(e).forEach(a=>{var o=e[a];YC.includes(a)&&"function"===typeof o&&(r||(r={}),r[a]=((e,t,n)=>r=>(e(t,n,r),null))(o,t,n))}),r},JC=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",$C=null,eE=null,tE=e=>{if(e===$C&&Array.isArray(eE))return eE;var t=[];return u.Children.forEach(e,e=>{tl(e)||((0,GC.isFragment)(e)?t=t.concat(tE(e.props.children)):t.push(e))}),eE=t,$C=e,t};function nE(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(e=>JC(e)):[JC(t)],tE(e).forEach(e=>{var t=Vu()(e,"type.displayName")||Vu()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)}),n}var rE=e=>!e||"object"!==typeof e||!("clipDot"in e)||Boolean(e.clipDot),aE=(e,t,n)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,u.isValidElement)(e)&&(r=e.props),"object"!==typeof r&&"function"!==typeof r)return null;var a={};return Object.keys(r).forEach(e=>{var o;((e,t,n,r)=>{var a,o=null!==(a=r&&(null===XC||void 0===XC?void 0:XC[r]))&&void 0!==a?a:[];return t.startsWith("data-")||"function"!==typeof e&&(r&&o.includes(t)||KC.includes(t))||n&&YC.includes(t)})(null===(o=r)||void 0===o?void 0:o[e],e,t,n)&&(a[e]=r[e])}),a},oE=()=>Zh(e=>e.rootProps.accessibilityLayer),iE=["children","width","height","viewBox","className","style","title","desc"];function sE(){return sE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sE.apply(null,arguments)}var uE=(0,u.forwardRef)((e,t)=>{var{children:n,width:r,height:a,viewBox:o,className:i,style:s,title:l,desc:c}=e,d=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,iE),h=o||{width:r,height:a,x:0,y:0},p=ju("recharts-surface",i);return u.createElement("svg",sE({},aE(d,!0,"svg"),{className:p,width:r,height:a,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),u.createElement("title",null,l),u.createElement("desc",null,c),n)}),lE=["children"];function cE(){return cE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cE.apply(null,arguments)}var dE={width:"100%",height:"100%"},hE=(0,u.forwardRef)((e,t)=>{var n=tf(),r=nf(),a=oE();if(!wb(n)||!wb(r))return null;var o,i,{children:s,otherAttributes:l,title:c,desc:d}=e;return o="number"===typeof l.tabIndex?l.tabIndex:a?0:void 0,i="string"===typeof l.role?l.role:a?"application":void 0,u.createElement(uE,cE({},l,{title:c,desc:d,role:i,tabIndex:o,width:n,height:r,style:dE,ref:t}),s)}),pE=e=>{var{children:t}=e,n=Zh(Zp);if(!n)return null;var{width:r,height:a,y:o,x:i}=n;return u.createElement(uE,{width:r,height:a,x:i,y:o},t)},fE=(0,u.forwardRef)((e,t)=>{var{children:n}=e,r=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,lE);return Yp()?u.createElement(pE,null,n):u.createElement(hE,cE({ref:t},r),n)});var gE=new(n(8499)),mE="recharts.syncEvent.tooltip",yE="recharts.syncEvent.brush";function vE(e){return e.tooltip.syncInteraction}var bE=()=>{};function xE(){var e=qh();(0,u.useEffect)(()=>{e(cd())},[e]),function(){var e=Zh(Xb),t=Zh(Qb),n=qh(),r=Zh(Yb),a=Zh(ek),o=of(),i=Jp(),s=Zh(e=>e.rootProps.className);(0,u.useEffect)(()=>{if(null==e)return bE;var s=(s,u,l)=>{if(t!==l&&e===s)if("index"!==r){if(null!=a){var c;if("function"===typeof r){var d={activeTooltipIndex:null==u.payload.index?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:null==u.payload.index?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},h=r(a,d);c=a[h]}else"value"===r&&(c=a.find(e=>String(e.value)===u.payload.label));var{coordinate:p}=u.payload;if(null!=c&&!1!==u.payload.active&&null!=p&&null!=i){var{x:f,y:g}=p,m=Math.min(f,i.x+i.width),y=Math.min(g,i.y+i.height),v={x:"horizontal"===o?c.coordinate:m,y:"horizontal"===o?y:c.coordinate},b=wh({active:u.payload.active,coordinate:v,dataKey:u.payload.dataKey,index:String(c.index),label:u.payload.label});n(b)}else n(wh({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}))}}else n(u)};return gE.on(mE,s),()=>{gE.off(mE,s)}},[s,n,t,e,r,a,o,i])}(),function(){var e=Zh(Xb),t=Zh(Qb),n=qh();(0,u.useEffect)(()=>{if(null==e)return bE;var r=(r,a,o)=>{t!==o&&e===r&&n(Sh(a))};return gE.on(yE,r),()=>{gE.off(yE,r)}},[n,t,e])}()}function wE(e,t,n,r,a,o){var i=Zh(n=>((e,t,n)=>{if(null!=t){var r=DD(e);return"axis"===t?"hover"===n?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:"hover"===n?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}})(n,e,t)),s=Zh(Qb),l=Zh(Xb),c=Zh(Yb),d=Zh(vE),h=null===d||void 0===d?void 0:d.active;(0,u.useEffect)(()=>{if(!h&&null!=l&&null!=s){var e=wh({active:o,coordinate:n,dataKey:i,index:a,label:"number"===typeof r?String(r):r});gE.emit(mE,l,e,s)}},[h,n,i,a,r,s,l,c,o])}var DE=(0,u.createContext)(null),kE=(0,u.createContext)(null);function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function EE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(t){SE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function SE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var AE=(0,u.forwardRef)((e,t)=>{var{children:n,className:r,height:a,onClick:o,onContextMenu:i,onDoubleClick:s,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,onMouseMove:h,onMouseUp:p,onTouchEnd:f,onTouchMove:g,onTouchStart:m,style:y,width:v}=e,b=qh(),[x,w]=(0,u.useState)(null),[D,k]=(0,u.useState)(null);xE();var C=function(){var e=qh(),[t,n]=(0,u.useState)(null),r=Zh(Lp);return(0,u.useEffect)(()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;xb(n)&&n!==r&&e(Rh(n))}},[t,e,r]),n}(),E=(0,u.useCallback)(e=>{C(e),"function"===typeof t&&t(e),w(e),k(e)},[C,t,w,k]),S=(0,u.useCallback)(e=>{b(Ik(e)),b(_C({handler:o,reactEvent:e}))},[b,o]),A=(0,u.useCallback)(e=>{b(Tk(e)),b(_C({handler:c,reactEvent:e}))},[b,c]),F=(0,u.useCallback)(e=>{b(yh()),b(_C({handler:d,reactEvent:e}))},[b,d]),I=(0,u.useCallback)(e=>{b(Tk(e)),b(_C({handler:h,reactEvent:e}))},[b,h]),N=(0,u.useCallback)(()=>{b(OC())},[b]),T=(0,u.useCallback)(e=>{b(TC(e.key))},[b]),O=(0,u.useCallback)(e=>{b(_C({handler:i,reactEvent:e}))},[b,i]),R=(0,u.useCallback)(e=>{b(_C({handler:s,reactEvent:e}))},[b,s]),_=(0,u.useCallback)(e=>{b(_C({handler:l,reactEvent:e}))},[b,l]),P=(0,u.useCallback)(e=>{b(_C({handler:p,reactEvent:e}))},[b,p]),M=(0,u.useCallback)(e=>{b(_C({handler:m,reactEvent:e}))},[b,m]),B=(0,u.useCallback)(e=>{b(LC(e)),b(_C({handler:g,reactEvent:e}))},[b,g]),L=(0,u.useCallback)(e=>{b(_C({handler:f,reactEvent:e}))},[b,f]);return u.createElement(DE.Provider,{value:x},u.createElement(kE.Provider,{value:D},u.createElement("div",{className:ju("recharts-wrapper",r),style:EE({position:"relative",cursor:"default",width:v,height:a},y),role:"application",onClick:S,onContextMenu:O,onDoubleClick:R,onFocus:N,onKeyDown:T,onMouseDown:_,onMouseEnter:A,onMouseLeave:F,onMouseMove:I,onMouseUp:P,onTouchEnd:L,onTouchMove:B,onTouchStart:M,ref:E},n)))}),FE=(0,u.createContext)(void 0),IE=e=>{var{children:t}=e,[n]=(0,u.useState)("".concat(Qu("recharts"),"-clip")),r=ef();if(null==r)return null;var{left:a,top:o,height:i,width:s}=r;return u.createElement(FE.Provider,{value:n},u.createElement("defs",null,u.createElement("clipPath",{id:n},u.createElement("rect",{x:a,y:o,height:i,width:s}))),t)},NE=["children","className","width","height","style","compact","title","desc"];var TE=(0,u.forwardRef)((e,t)=>{var{children:n,className:r,width:a,height:o,style:i,compact:s,title:l,desc:c}=e,d=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,NE),h=aE(d,!1);return s?u.createElement(fE,{otherAttributes:h,title:l,desc:c},n):u.createElement(AE,{className:r,style:i,width:a,height:o,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},u.createElement(fE,{otherAttributes:h,title:l,desc:c,ref:t},u.createElement(IE,null,n)))});function OE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function RE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _E(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OE(Object(n),!0).forEach(function(t){RE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),r=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==r[t]&&(e[t]=r[t]),e),n)}var PE=["width","height"];function ME(){return ME=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ME.apply(null,arguments)}var BE={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},LE=(0,u.forwardRef)(function(e,t){var n,r=_E(e.categoricalChartProps,BE),{width:a,height:o}=r,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(r,PE);if(!wb(a)||!wb(o))return null;var{chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,categoricalChartProps:h}=e,p={chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return u.createElement(WC,{preloadedState:{options:p},reduxStoreName:null!==(n=h.id)&&void 0!==n?n:s},u.createElement(UC,{chartData:h.data}),u.createElement(VC,{width:a,height:o,layout:r.layout,margin:r.margin}),u.createElement(HC,{accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className}),u.createElement(TE,ME({},i,{width:a,height:o,ref:t})))}),jE=["axis"],zE=(0,u.forwardRef)((e,t)=>u.createElement(LE,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jE,tooltipPayloadSearcher:sd,categoricalChartProps:e,ref:t})),WE=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function UE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UE(Object(n),!0).forEach(function(t){HE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function HE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GE={widthCache:{},cacheCount:0},KE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qE="recharts_measurement_span";var XE=function(e){if(void 0===e||null===e||WE)return{width:0,height:0};var t=function(e){var t=VE({},e);return Object.keys(t).forEach(e=>{t[e]||delete t[e]}),t}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=JSON.stringify({text:e,copyStyle:t});if(GE.widthCache[n])return GE.widthCache[n];try{var r=document.getElementById(qE);r||((r=document.createElement("span")).setAttribute("id",qE),r.setAttribute("aria-hidden","true"),document.body.appendChild(r));var a=VE(VE({},KE),t);Object.assign(r.style,a),r.textContent="".concat(e);var o=r.getBoundingClientRect(),i={width:o.width,height:o.height};return GE.widthCache[n]=i,++GE.cacheCount>2e3&&(GE.cacheCount=0,GE.widthCache={}),i}catch(s){return{width:0,height:0}}};function YE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class QE{static create(e){return new QE(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(t){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}YE(QE,"EPS",1e-4);function ZE(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],a=0;a<e.length;a+=t){if(void 0!==n&&!0!==n(e[a]))return;r.push(e[a])}return r}function JE(e,t,n){return function(e){var{width:t,height:n}=e,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=r*Math.PI/180,o=Math.atan(n/t),i=a>o&&a<Math.PI-o?n/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},n)}function $E(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-a)<=0}function eS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(n),!0).forEach(function(t){nS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rS(e,t,n){var r,{tick:a,ticks:o,viewBox:i,minTickGap:s,orientation:u,interval:l,tickFormatter:c,unit:d,angle:h}=e;if(!o||!o.length||!a)return[];if(qu(l)||WE)return null!==(r=function(e,t){return ZE(e,t+1)}(o,qu(l)?l:0))&&void 0!==r?r:[];var p=[],f="top"===u||"bottom"===u?"width":"height",g=d&&"width"===f?XE(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=(e,r)=>{var a="function"===typeof c?c(e.value,r):e.value;return"width"===f?JE(XE(a,{fontSize:t,letterSpacing:n}),g,h):XE(a,{fontSize:t,letterSpacing:n})[f]},y=o.length>=2?Hu(o[1].coordinate-o[0].coordinate):1,v=function(e,t,n){var r="width"===n,{x:a,y:o,width:i,height:s}=e;return 1===t?{start:r?a:o,end:r?a+i:o+s}:{start:r?a+i:o+s,end:r?a:o}}(i,y,f);return"equidistantPreserveStart"===l?function(e,t,n,r,a){for(var o,i=(r||[]).slice(),{start:s,end:u}=t,l=0,c=1,d=s,h=function(){var t=null===r||void 0===r?void 0:r[l];if(void 0===t)return{v:ZE(r,c)};var o,i=l,h=()=>(void 0===o&&(o=n(t,i)),o),p=t.coordinate,f=0===l||$E(e,p,h,d,u);f||(l=0,d=s,c+=1),f&&(d=p+e*(h()/2+a),l+=c)};c<=i.length;)if(o=h())return o.v;return[]}(y,v,m,o,s):(p="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,a,o){var i=(r||[]).slice(),s=i.length,{start:u,end:l}=t;if(o){var c=r[s-1],d=n(c,s-1),h=e*(c.coordinate+e*d/2-l);i[s-1]=c=tS(tS({},c),{},{tickCoord:h>0?c.coordinate-h*e:c.coordinate}),$E(e,c.tickCoord,()=>d,u,l)&&(l=c.tickCoord-e*(d/2+a),i[s-1]=tS(tS({},c),{},{isShow:!0}))}for(var p=o?s-1:s,f=function(t){var r,o=i[t],s=()=>(void 0===r&&(r=n(o,t)),r);if(0===t){var c=e*(o.coordinate-e*s()/2-u);i[t]=o=tS(tS({},o),{},{tickCoord:c<0?o.coordinate-c*e:o.coordinate})}else i[t]=o=tS(tS({},o),{},{tickCoord:o.coordinate});$E(e,o.tickCoord,s,u,l)&&(u=o.tickCoord+e*(s()/2+a),i[t]=tS(tS({},o),{},{isShow:!0}))},g=0;g<p;g++)f(g);return i}(y,v,m,o,s,"preserveStartEnd"===l):function(e,t,n,r,a){for(var o=(r||[]).slice(),i=o.length,{start:s}=t,{end:u}=t,l=function(t){var r,l=o[t],c=()=>(void 0===r&&(r=n(l,t)),r);if(t===i-1){var d=e*(l.coordinate+e*c()/2-u);o[t]=l=tS(tS({},l),{},{tickCoord:d>0?l.coordinate-d*e:l.coordinate})}else o[t]=l=tS(tS({},l),{},{tickCoord:l.coordinate});$E(e,l.tickCoord,c,s,u)&&(u=l.tickCoord-e*(c()/2+a),o[t]=tS(tS({},l),{},{isShow:!0}))},c=i-1;c>=0;c--)l(c);return o}(y,v,m,o,s),p.filter(e=>e.isShow))}function aS(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}var oS=["children","className"];function iS(){return iS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iS.apply(null,arguments)}var sS=u.forwardRef((e,t)=>{var{children:n,className:r}=e,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,oS),o=ju("recharts-layer",r);return u.createElement("g",iS({className:o},aE(a,!0),{ref:t}),n)}),uS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cS=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,dS=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hS={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},pS=Object.keys(hS),fS="NaN";class gS{static parse(e){var t,[,n,r]=null!==(t=dS.exec(e))&&void 0!==t?t:[];return new gS(parseFloat(n),null!==r&&void 0!==r?r:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Gu(e)&&(this.unit=""),""===t||cS.test(t)||(this.num=NaN,this.unit=""),pS.includes(t)&&(this.num=function(e,t){return e*hS[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new gS(NaN,""):new gS(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new gS(NaN,""):new gS(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new gS(NaN,""):new gS(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new gS(NaN,""):new gS(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Gu(this.num)}}function mS(e){if(e.includes(fS))return fS;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,a,o]=null!==(n=uS.exec(t))&&void 0!==n?n:[],i=gS.parse(null!==r&&void 0!==r?r:""),s=gS.parse(null!==o&&void 0!==o?o:""),u="*"===a?i.multiply(s):i.divide(s);if(u.isNaN())return fS;t=t.replace(uS,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var l,[,c,d,h]=null!==(l=lS.exec(t))&&void 0!==l?l:[],p=gS.parse(null!==c&&void 0!==c?c:""),f=gS.parse(null!==h&&void 0!==h?h:""),g="+"===d?p.add(f):p.subtract(f);if(g.isNaN())return fS;t=t.replace(lS,g.toString())}return t}var yS=/\(([^()]*)\)/;function vS(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,n=e;null!=(t=yS.exec(n));){var[,r]=t;n=n.replace(yS,mS(r))}return n}(t),t=mS(t)}function bS(e){var t=function(e){try{return vS(e)}catch(t){return fS}}(e.slice(5,-1));return t===fS?"":t}var xS=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],wS=["dx","dy","angle","className","breakAll"];function DS(){return DS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DS.apply(null,arguments)}function kS(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var CS=/[ \f\n\r\t\v\u2028\u2029]+/,ES=e=>{var{children:t,breakAll:n,style:r}=e;try{var a=[];return tl(t)||(a=n?t.toString().split(""):t.toString().split(CS)),{wordsWithComputedWidth:a.map(e=>({word:e,width:XE(e,r).width})),spaceWidth:n?0:XE("\xa0",r).width}}catch(o){return null}},SS=e=>[{words:tl(e)?[]:e.toString().split(CS)}],AS=e=>{var{width:t,scaleToFit:n,children:r,style:a,breakAll:o,maxLines:i}=e;if((t||n)&&!WE){var s=ES({breakAll:o,children:r,style:a});if(!s)return SS(r);var{wordsWithComputedWidth:u,spaceWidth:l}=s;return((e,t,n,r,a)=>{var{maxLines:o,children:i,style:s,breakAll:u}=e,l=qu(o),c=i,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{var{word:o,width:i}=t,s=e[e.length-1];if(s&&(null==r||a||s.width+i+n<Number(r)))s.words.push(o),s.width+=i+n;else{var u={words:[o],width:i};e.push(u)}return e},[])},h=d(t),p=e=>e.reduce((e,t)=>e.width>t.width?e:t);if(!l||a)return h;if(!(h.length>o||p(h).width>Number(r)))return h;for(var f,g=e=>{var t=c.slice(0,e),n=ES({breakAll:u,style:s,children:t+"\u2026"}).wordsWithComputedWidth,a=d(n);return[a.length>o||p(a).width>Number(r),a]},m=0,y=c.length-1,v=0;m<=y&&v<=c.length-1;){var b=Math.floor((m+y)/2),x=b-1,[w,D]=g(x),[k]=g(b);if(w||k||(m=b+1),w&&k&&(y=b-1),!w&&k){f=D;break}v++}return f||h})({breakAll:o,children:r,maxLines:i,style:a},u,l,t,n)}return SS(r)},FS="#808080",IS=(0,u.forwardRef)((e,t)=>{var{x:n=0,y:r=0,lineHeight:a="1em",capHeight:o="0.71em",scaleToFit:i=!1,textAnchor:s="start",verticalAnchor:l="end",fill:c=FS}=e,d=kS(e,xS),h=(0,u.useMemo)(()=>AS({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:p,dy:f,angle:g,className:m,breakAll:y}=d,v=kS(d,wS);if(!Xu(n)||!Xu(r))return null;var b,x=n+(qu(p)?p:0),w=r+(qu(f)?f:0);switch(l){case"start":b=bS("calc(".concat(o,")"));break;case"middle":b=bS("calc(".concat((h.length-1)/2," * -").concat(a," + (").concat(o," / 2))"));break;default:b=bS("calc(".concat(h.length-1," * -").concat(a,")"))}var D=[];if(i){var k=h[0].width,{width:C}=d;D.push("scale(".concat(qu(C)?C/k:1,")"))}return g&&D.push("rotate(".concat(g,", ").concat(x,", ").concat(w,")")),D.length&&(v.transform=D.join(" ")),u.createElement("text",DS({},aE(v,!0),{ref:t,x:x,y:w,className:ju("recharts-text",m),textAnchor:s,fill:c.includes("url")?FS:c}),h.map((e,t)=>{var n=e.words.join(y?"":" ");return u.createElement("tspan",{x:x,dy:0===t?b:a,key:"".concat(n,"-").concat(t)},n)}))});IS.displayName="Text";var NS=["offset"],TS=["labelRef"];function OS(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function RS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RS(Object(n),!0).forEach(function(t){PS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MS.apply(null,arguments)}var BS=e=>null!=e&&"function"===typeof e,LS=(e,t,n)=>{var r,a,{position:o,viewBox:i,offset:s,className:l}=e,{cx:c,cy:d,innerRadius:h,outerRadius:p,startAngle:f,endAngle:g,clockWise:m}=i,y=(h+p)/2,v=((e,t)=>Hu(t-e)*Math.min(Math.abs(t-e),360))(f,g),b=v>=0?1:-1;"insideStart"===o?(r=f+b*s,a=m):"insideEnd"===o?(r=g-b*s,a=!m):"end"===o&&(r=g+b*s,a=m),a=v<=0?a:!a;var x=pp(c,d,y,r),w=pp(c,d,y,r+359*(a?1:-1)),D="M".concat(x.x,",").concat(x.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(a?0:1,",\n    ").concat(w.x,",").concat(w.y),k=tl(e.id)?Qu("recharts-radial-line-"):e.id;return u.createElement("text",MS({},n,{dominantBaseline:"central",className:ju("recharts-radial-bar-label",l)}),u.createElement("defs",null,u.createElement("path",{id:k,d:D})),u.createElement("textPath",{xlinkHref:"#".concat(k)},t))};function jS(e){var t,{offset:n=5}=e,r=_S({offset:n},OS(e,NS)),{viewBox:a,position:o,value:i,children:s,content:l,className:c="",textBreakAll:d,labelRef:h}=r,p=Jp(),f=a||p;if(!f||tl(i)&&tl(s)&&!(0,u.isValidElement)(l)&&"function"!==typeof l)return null;if((0,u.isValidElement)(l)){var{labelRef:g}=r,m=OS(r,TS);return(0,u.cloneElement)(l,m)}if("function"===typeof l){if(t=(0,u.createElement)(l,r),(0,u.isValidElement)(t))return t}else t=(e=>{var{value:t,formatter:n}=e,r=tl(e.children)?t:e.children;return"function"===typeof n?n(r):r})(r);var y=(e=>"cx"in e&&qu(e.cx))(f),v=aE(r,!0);if(y&&("insideStart"===o||"insideEnd"===o||"end"===o))return LS(r,t,v);var b=y?(e=>{var{viewBox:t,offset:n,position:r}=e,{cx:a,cy:o,innerRadius:i,outerRadius:s,startAngle:u,endAngle:l}=t,c=(u+l)/2;if("outside"===r){var{x:d,y:h}=pp(a,o,s+n,c);return{x:d,y:h,textAnchor:d>=a?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var p=(i+s)/2,{x:f,y:g}=pp(a,o,p,c);return{x:f,y:g,textAnchor:"middle",verticalAnchor:"middle"}})(r):((e,t)=>{var{parentViewBox:n,offset:r,position:a}=e,{x:o,y:i,width:s,height:u}=t,l=u>=0?1:-1,c=l*r,d=l>0?"end":"start",h=l>0?"start":"end",p=s>=0?1:-1,f=p*r,g=p>0?"end":"start",m=p>0?"start":"end";if("top"===a)return _S(_S({},{x:o+s/2,y:i-l*r,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(i-n.y,0),width:s}:{});if("bottom"===a)return _S(_S({},{x:o+s/2,y:i+u+c,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(n.y+n.height-(i+u),0),width:s}:{});if("left"===a){var y={x:o-f,y:i+u/2,textAnchor:g,verticalAnchor:"middle"};return _S(_S({},y),n?{width:Math.max(y.x-n.x,0),height:u}:{})}if("right"===a){var v={x:o+s+f,y:i+u/2,textAnchor:m,verticalAnchor:"middle"};return _S(_S({},v),n?{width:Math.max(n.x+n.width-v.x,0),height:u}:{})}var b=n?{width:s,height:u}:{};return"insideLeft"===a?_S({x:o+f,y:i+u/2,textAnchor:m,verticalAnchor:"middle"},b):"insideRight"===a?_S({x:o+s-f,y:i+u/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===a?_S({x:o+s/2,y:i+c,textAnchor:"middle",verticalAnchor:h},b):"insideBottom"===a?_S({x:o+s/2,y:i+u-c,textAnchor:"middle",verticalAnchor:d},b):"insideTopLeft"===a?_S({x:o+f,y:i+c,textAnchor:m,verticalAnchor:h},b):"insideTopRight"===a?_S({x:o+s-f,y:i+c,textAnchor:g,verticalAnchor:h},b):"insideBottomLeft"===a?_S({x:o+f,y:i+u-c,textAnchor:m,verticalAnchor:d},b):"insideBottomRight"===a?_S({x:o+s-f,y:i+u-c,textAnchor:g,verticalAnchor:d},b):a&&"object"===typeof a&&(qu(a.x)||Ku(a.x))&&(qu(a.y)||Ku(a.y))?_S({x:o+Zu(a.x,s),y:i+Zu(a.y,u),textAnchor:"end",verticalAnchor:"end"},b):_S({x:o+s/2,y:i+u/2,textAnchor:"middle",verticalAnchor:"middle"},b)})(r,f);return u.createElement(IS,MS({ref:h,className:ju("recharts-label",c)},v,b,{breakAll:d}),t)}jS.displayName="Label";var zS=e=>{var{cx:t,cy:n,angle:r,startAngle:a,endAngle:o,r:i,radius:s,innerRadius:u,outerRadius:l,x:c,y:d,top:h,left:p,width:f,height:g,clockWise:m,labelViewBox:y}=e;if(y)return y;if(qu(f)&&qu(g)){if(qu(c)&&qu(d))return{x:c,y:d,width:f,height:g};if(qu(h)&&qu(p))return{x:h,y:p,width:f,height:g}}return qu(c)&&qu(d)?{x:c,y:d,width:0,height:0}:qu(t)&&qu(n)?{cx:t,cy:n,startAngle:a||r||0,endAngle:o||r||0,innerRadius:u||0,outerRadius:l||s||i||0,clockWise:m}:e.viewBox?e.viewBox:void 0};jS.parseViewBox=zS,jS.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var{children:r,labelRef:a}=e,o=zS(e),i=nE(r,jS).map((e,n)=>(0,u.cloneElement)(e,{viewBox:t||o,key:"label-".concat(n)}));if(!n)return i;var s=((e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return!0===e?u.createElement(jS,MS({key:"label-implicit"},r)):Xu(e)?u.createElement(jS,MS({key:"label-implicit",value:e},r)):(0,u.isValidElement)(e)?e.type===jS?(0,u.cloneElement)(e,_S({key:"label-implicit"},r)):u.createElement(jS,MS({key:"label-implicit",content:e},r)):BS(e)?u.createElement(jS,MS({key:"label-implicit",content:e},r)):e&&"object"===typeof e?u.createElement(jS,MS({},e,{key:"label-implicit"},r)):null})(e.label,t||o,a);return[s,...i]};var WS=["viewBox"],US=["viewBox"];function VS(){return VS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VS.apply(null,arguments)}function HS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function GS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HS(Object(n),!0).forEach(function(t){qS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function KS(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function qS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class XS extends u.Component{constructor(e){super(e),this.tickRefs=u.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,t){var{viewBox:n}=e,r=KS(e,WS),a=this.props,{viewBox:o}=a,i=KS(a,US);return!aS(n,o)||!aS(r,i)||!aS(t,this.state)}getTickLineCoord(e){var t,n,r,a,o,i,{x:s,y:u,width:l,height:c,orientation:d,tickSize:h,mirror:p,tickMargin:f}=this.props,g=p?-1:1,m=e.tickSize||h,y=qu(e.tickCoord)?e.tickCoord:e.coordinate;switch(d){case"top":t=n=e.coordinate,i=(r=(a=u+ +!p*c)-g*m)-g*f,o=y;break;case"left":r=a=e.coordinate,o=(t=(n=s+ +!p*l)-g*m)-g*f,i=y;break;case"right":r=a=e.coordinate,o=(t=(n=s+ +p*l)+g*m)+g*f,i=y;break;default:t=n=e.coordinate,i=(r=(a=u+ +p*c)+g*m)+g*f,o=y}return{line:{x1:t,y1:r,x2:n,y2:a},tick:{x:o,y:i}}}getTickTextAnchor(){var e,{orientation:t,mirror:n}=this.props;switch(t){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}getTickVerticalAnchor(){var{orientation:e,mirror:t}=this.props;switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}renderAxisLine(){var{x:e,y:t,width:n,height:r,orientation:a,mirror:o,axisLine:i}=this.props,s=GS(GS(GS({},aE(this.props,!1)),aE(i,!1)),{},{fill:"none"});if("top"===a||"bottom"===a){var l=+("top"===a&&!o||"bottom"===a&&o);s=GS(GS({},s),{},{x1:e,y1:t+l*r,x2:e+n,y2:t+l*r})}else{var c=+("left"===a&&!o||"right"===a&&o);s=GS(GS({},s),{},{x1:e+c*n,y1:t,x2:e+c*n,y2:t+r})}return u.createElement("line",VS({},s,{className:ju("recharts-cartesian-axis-line",Vu()(i,"className"))}))}static renderTickItem(e,t,n){var r,a=ju(t.className,"recharts-cartesian-axis-tick-value");if(u.isValidElement(e))r=u.cloneElement(e,GS(GS({},t),{},{className:a}));else if("function"===typeof e)r=e(GS(GS({},t),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";"boolean"!==typeof e&&(o=ju(o,e.className)),r=u.createElement(IS,VS({},t,{className:o}),n)}return r}renderTicks(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],{tickLine:r,stroke:a,tick:o,tickFormatter:i,unit:s}=this.props,l=rS(GS(GS({},this.props),{},{ticks:n}),e,t),c=this.getTickTextAnchor(),d=this.getTickVerticalAnchor(),h=aE(this.props,!1),p=aE(o,!1),f=GS(GS({},h),{},{fill:"none"},aE(r,!1)),g=l.map((e,t)=>{var{line:n,tick:g}=this.getTickLineCoord(e),m=GS(GS(GS(GS({textAnchor:c,verticalAnchor:d},h),{},{stroke:"none",fill:a},p),g),{},{index:t,payload:e,visibleTicksCount:l.length,tickFormatter:i});return u.createElement(sS,VS({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},ZC(this.props,e,t)),r&&u.createElement("line",VS({},f,n,{className:ju("recharts-cartesian-axis-tick-line",Vu()(r,"className"))})),o&&XS.renderTickItem(o,m,"".concat("function"===typeof i?i(e.value,t):e.value).concat(s||"")))});return g.length>0?u.createElement("g",{className:"recharts-cartesian-axis-ticks"},g):null}render(){var{axisLine:e,width:t,height:n,className:r,hide:a}=this.props;if(a)return null;var{ticks:o}=this.props;return null!=t&&t<=0||null!=n&&n<=0?null:u.createElement(sS,{className:ju("recharts-cartesian-axis",r),ref:e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(t);var n=t[0];if(n){var r=window.getComputedStyle(n).fontSize,a=window.getComputedStyle(n).letterSpacing;r===this.state.fontSize&&a===this.state.letterSpacing||this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),jS.renderCallByParent(this.props))}}qS(XS,"displayName","CartesianAxis"),qS(XS,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var YS=["x1","y1","x2","y2","key"],QS=["offset"],ZS=["xAxisId","yAxisId"],JS=["xAxisId","yAxisId"];function $S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$S(Object(n),!0).forEach(function(t){tA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nA(){return nA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nA.apply(null,arguments)}function rA(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var aA=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:n,x:r,y:a,width:o,height:i,ry:s}=e;return u.createElement("rect",{x:r,y:a,ry:s,width:o,height:i,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function oA(e,t){var n;if(u.isValidElement(e))n=u.cloneElement(e,t);else if("function"===typeof e)n=e(t);else{var{x1:r,y1:a,x2:o,y2:i,key:s}=t,l=rA(t,YS),c=aE(l,!1),{offset:d}=c,h=rA(c,QS);n=u.createElement("line",nA({},h,{x1:r,y1:a,x2:o,y2:i,fill:"none",key:s}))}return n}function iA(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:a}=e;if(!r||!a||!a.length)return null;var{xAxisId:o,yAxisId:i}=e,s=rA(e,ZS),l=a.map((e,a)=>{var o=eA(eA({},s),{},{x1:t,y1:e,x2:t+n,y2:e,key:"line-".concat(a),index:a});return oA(r,o)});return u.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function sA(e){var{y:t,height:n,vertical:r=!0,verticalPoints:a}=e;if(!r||!a||!a.length)return null;var{xAxisId:o,yAxisId:i}=e,s=rA(e,JS),l=a.map((e,a)=>{var o=eA(eA({},s),{},{x1:e,y1:t,x2:e,y2:t+n,key:"line-".concat(a),index:a});return oA(r,o)});return u.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function uA(e){var{horizontalFill:t,fillOpacity:n,x:r,y:a,width:o,height:i,horizontalPoints:s,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var c=s.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var d=c.map((e,s)=>{var l=!c[s+1]?a+i-e:c[s+1]-e;if(l<=0)return null;var d=s%t.length;return u.createElement("rect",{key:"react-".concat(s),y:e,x:r,height:l,width:o,stroke:"none",fill:t[d],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return u.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function lA(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:a,y:o,width:i,height:s,verticalPoints:l}=e;if(!t||!n||!n.length)return null;var c=l.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var d=c.map((e,t)=>{var l=!c[t+1]?a+i-e:c[t+1]-e;if(l<=0)return null;var d=t%n.length;return u.createElement("rect",{key:"react-".concat(t),x:e,y:o,width:l,height:s,stroke:"none",fill:n[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return u.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var cA=(e,t)=>{var{xAxis:n,width:r,height:a,offset:o}=e;return Dp(rS(eA(eA(eA({},XS.defaultProps),n),{},{ticks:kp(n,!0),viewBox:{x:0,y:0,width:r,height:a}})),o.left,o.left+o.width,t)},dA=(e,t)=>{var{yAxis:n,width:r,height:a,offset:o}=e;return Dp(rS(eA(eA(eA({},XS.defaultProps),n),{},{ticks:kp(n,!0),viewBox:{x:0,y:0,width:r,height:a}})),o.top,o.top+o.height,t)},hA={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function pA(e){var t=tf(),n=nf(),r=ef(),a=eA(eA({},_E(e,hA)),{},{x:qu(e.x)?e.x:r.left,y:qu(e.y)?e.y:r.top,width:qu(e.width)?e.width:r.width,height:qu(e.height)?e.height:r.height}),{xAxisId:o,yAxisId:i,x:s,y:l,width:c,height:d,syncWithTicks:h,horizontalValues:p,verticalValues:f}=a,g=Yp(),m=Zh(e=>rD(e,"xAxis",o,g)),y=Zh(e=>rD(e,"yAxis",i,g));if(!qu(c)||c<=0||!qu(d)||d<=0||!qu(s)||s!==+s||!qu(l)||l!==+l)return null;var v=a.verticalCoordinatesGenerator||cA,b=a.horizontalCoordinatesGenerator||dA,{horizontalPoints:x,verticalPoints:w}=a;if((!x||!x.length)&&"function"===typeof b){var D=p&&p.length,k=b({yAxis:y?eA(eA({},y),{},{ticks:D?p:y.ticks}):void 0,width:t,height:n,offset:r},!!D||h);rl(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(x=k)}if((!w||!w.length)&&"function"===typeof v){var C=f&&f.length,E=v({xAxis:m?eA(eA({},m),{},{ticks:C?f:m.ticks}):void 0,width:t,height:n,offset:r},!!C||h);rl(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(w=E)}return u.createElement("g",{className:"recharts-cartesian-grid"},u.createElement(aA,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),u.createElement(uA,nA({},a,{horizontalPoints:x})),u.createElement(lA,nA({},a,{verticalPoints:w})),u.createElement(iA,nA({},a,{offset:r,horizontalPoints:x,xAxis:m,yAxis:y})),u.createElement(sA,nA({},a,{offset:r,verticalPoints:w,xAxis:m,yAxis:y})))}pA.displayName="CartesianGrid";var fA=["children"],gA=["dangerouslySetInnerHTML","ticks"];function mA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yA(){return yA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yA.apply(null,arguments)}function vA(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function bA(e){var t=qh(),n=(0,u.useMemo)(()=>{var{children:t}=e;return vA(e,fA)},[e]),r=Zh(e=>Ax(e,n.id)),a=n===r;return(0,u.useEffect)(()=>(t(Lk(n)),()=>{t(jk(n))}),[n,t]),a?e.children:null}var xA=e=>{var{xAxisId:t,className:n}=e,r=Zh(qp),a=Yp(),o="xAxis",i=Zh(e=>Ww(e,o,t,a)),s=Zh(e=>aD(e,o,t,a)),l=Zh(e=>Xw(e,t)),c=Zh(e=>((e,t)=>{var n=Gp(e),r=Ax(e,t);if(null!=r){var a=Yw(e,r.orientation,r.mirror)[t];return null==a?{x:n.left,y:0}:{x:n.left,y:a}}})(e,t));if(null==l||null==c)return null;var{dangerouslySetInnerHTML:d,ticks:h}=e,p=vA(e,gA);return u.createElement(XS,yA({},p,{scale:i,x:c.x,y:c.y,width:l.width,height:l.height,className:ju("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:s}))},wA=e=>{var t,n,r,a,o;return u.createElement(bA,{interval:null!==(t=e.interval)&&void 0!==t?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:null!==(n=e.includeHidden)&&void 0!==n&&n,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(r=e.angle)&&void 0!==r?r:0,minTickGap:null!==(a=e.minTickGap)&&void 0!==a?a:5,tick:null===(o=e.tick)||void 0===o||o,tickFormatter:e.tickFormatter},u.createElement(xA,e))};class DA extends u.Component{render(){return u.createElement(wA,this.props)}}mA(DA,"displayName","XAxis"),mA(DA,"defaultProps",{allowDataOverflow:Sx.allowDataOverflow,allowDecimals:Sx.allowDecimals,allowDuplicatedCategory:Sx.allowDuplicatedCategory,height:Sx.height,hide:!1,mirror:Sx.mirror,orientation:Sx.orientation,padding:Sx.padding,reversed:Sx.reversed,scale:Sx.scale,tickCount:Sx.tickCount,type:Sx.type,xAxisId:0});var kA=["dangerouslySetInnerHTML","ticks"];function CA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EA(){return EA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EA.apply(null,arguments)}function SA(e){var t=qh();return(0,u.useEffect)(()=>(t(zk(e)),()=>{t(Wk(e))}),[e,t]),null}var AA=e=>{var t,{yAxisId:n,className:r,width:a,label:o}=e,i=(0,u.useRef)(null),s=(0,u.useRef)(null),l=Zh(qp),c=Yp(),d=qh(),h="yAxis",p=Zh(e=>Ww(e,h,n,c)),f=Zh(e=>Zw(e,n)),g=Zh(e=>((e,t)=>{var n=Gp(e),r=Ix(e,t);if(null!=r){var a=Qw(e,r.orientation,r.mirror)[t];return null==a?{x:0,y:n.top}:{x:a,y:n.top}}})(e,n)),m=Zh(e=>aD(e,h,n,c));if((0,u.useLayoutEffect)(()=>{var e;if("auto"===a&&f&&!BS(o)&&!(0,u.isValidElement)(o)){var t=i.current,r=null===t||void 0===t||null===(e=t.tickRefs)||void 0===e?void 0:e.current,{tickSize:l,tickMargin:c}=t.props,h=(e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:a=0,tickMargin:o=0}=e,i=0;if(t){t.forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>i&&(i=t.width)}});var s=n?n.getBoundingClientRect().width:0,u=i+(a+o)+s+(n?r:0);return Math.round(u)}return 0})({ticks:r,label:s.current,labelGapWithTick:5,tickSize:l,tickMargin:c});Math.round(f.width)!==Math.round(h)&&d(Hk({id:n,width:h}))}},[i,null===i||void 0===i||null===(t=i.current)||void 0===t||null===(t=t.tickRefs)||void 0===t?void 0:t.current,null===f||void 0===f?void 0:f.width,f,d,o,n,a]),null==f||null==g)return null;var{dangerouslySetInnerHTML:y,ticks:v}=e,b=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,kA);return u.createElement(XS,EA({},b,{ref:i,labelRef:s,scale:p,x:g.x,y:g.y,width:f.width,height:f.height,className:ju("recharts-".concat(h," ").concat(h),r),viewBox:l,ticks:m}))},FA=e=>{var t,n,r,a,o;return u.createElement(u.Fragment,null,u.createElement(SA,{interval:null!==(t=e.interval)&&void 0!==t?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:null!==(n=e.includeHidden)&&void 0!==n&&n,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(r=e.angle)&&void 0!==r?r:0,minTickGap:null!==(a=e.minTickGap)&&void 0!==a?a:5,tick:null===(o=e.tick)||void 0===o||o,tickFormatter:e.tickFormatter}),u.createElement(AA,e))},IA={allowDataOverflow:Fx.allowDataOverflow,allowDecimals:Fx.allowDecimals,allowDuplicatedCategory:Fx.allowDuplicatedCategory,hide:!1,mirror:Fx.mirror,orientation:Fx.orientation,padding:Fx.padding,reversed:Fx.reversed,scale:Fx.scale,tickCount:Fx.tickCount,type:Fx.type,width:Fx.width,yAxisId:0};class NA extends u.Component{render(){return u.createElement(FA,this.props)}}function TA(){return TA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TA.apply(null,arguments)}function OA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function RA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OA(Object(n),!0).forEach(function(t){_A(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PA(e){return Array.isArray(e)&&Xu(e[0])&&Xu(e[1])?e.join(" ~ "):e}CA(NA,"displayName","YAxis"),CA(NA,"defaultProps",IA);var MA=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:a={},payload:o,formatter:i,itemSorter:s,wrapperClassName:l,labelClassName:c,label:d,labelFormatter:h,accessibilityLayer:p=!1}=e,f=RA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),g=RA({margin:0},a),m=!tl(d),y=m?d:"",v=ju("recharts-default-tooltip",l),b=ju("recharts-tooltip-label",c);m&&h&&void 0!==o&&null!==o&&(y=h(d,o));var x=p?{role:"status","aria-live":"assertive"}:{};return u.createElement("div",TA({className:v,style:f},x),u.createElement("p",{className:b,style:g},u.isValidElement(y)?y:"".concat(y)),(()=>{if(o&&o.length){var e=(s?$h()(o,s):o).map((e,n)=>{if("none"===e.type)return null;var a=e.formatter||i||PA,{value:s,name:l}=e,c=s,d=l;if(a){var h=a(s,l,e,n,o);if(Array.isArray(h))[c,d]=h;else{if(null==h)return null;c=h}}var p=RA({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},r);return u.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:p},Xu(d)?u.createElement("span",{className:"recharts-tooltip-item-name"},d):null,Xu(d)?u.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,u.createElement("span",{className:"recharts-tooltip-item-value"},c),u.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return u.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},BA="recharts-tooltip-wrapper",LA={visibility:"hidden"};function jA(e){var{coordinate:t,translateX:n,translateY:r}=e;return ju(BA,{["".concat(BA,"-right")]:qu(n)&&t&&qu(t.x)&&n>=t.x,["".concat(BA,"-left")]:qu(n)&&t&&qu(t.x)&&n<t.x,["".concat(BA,"-bottom")]:qu(r)&&t&&qu(t.y)&&r>=t.y,["".concat(BA,"-top")]:qu(r)&&t&&qu(t.y)&&r<t.y})}function zA(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:a,position:o,reverseDirection:i,tooltipDimension:s,viewBox:u,viewBoxDimension:l}=e;if(o&&qu(o[r]))return o[r];var c=n[r]-s-(a>0?a:0),d=n[r]+a;if(t[r])return i[r]?c:d;var h=u[r];return null==h?0:i[r]?c<h?Math.max(d,h):Math.max(c,h):null==l?0:d+s>h+l?Math.max(c,h):Math.max(d,h)}function WA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function UA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WA(Object(n),!0).forEach(function(t){VA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function VA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class HA extends u.PureComponent{constructor(){super(...arguments),VA(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),VA(this,"handleKeyDown",e=>{var t,n,r,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(n=this.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(r=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==r?r:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:r,children:a,coordinate:o,hasPayload:i,isAnimationActive:s,offset:l,position:c,reverseDirection:d,useTranslate3d:h,viewBox:p,wrapperStyle:f,lastBoundingBox:g,innerRef:m,hasPortalFromProps:y}=this.props,{cssClasses:v,cssProperties:b}=function(e){var t,n,r,{allowEscapeViewBox:a,coordinate:o,offsetTopLeft:i,position:s,reverseDirection:u,tooltipBox:l,useTranslate3d:c,viewBox:d}=e;return t=l.height>0&&l.width>0&&o?function(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:n=zA({allowEscapeViewBox:a,coordinate:o,key:"x",offsetTopLeft:i,position:s,reverseDirection:u,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:r=zA({allowEscapeViewBox:a,coordinate:o,key:"y",offsetTopLeft:i,position:s,reverseDirection:u,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):LA,{cssProperties:t,cssClasses:jA({translateX:n,translateY:r,coordinate:o})}}({allowEscapeViewBox:t,coordinate:o,offsetTopLeft:l,position:c,reverseDirection:d,tooltipBox:{height:g.height,width:g.width},useTranslate3d:h,viewBox:p}),x=y?{}:UA(UA({transition:s&&e?"transform ".concat(n,"ms ").concat(r):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&i?"visible":"hidden",position:"absolute",top:0,left:0}),w=UA(UA({},x),{},{visibility:!this.state.dismissed&&e&&i?"visible":"hidden"},f);return u.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:v,style:w,ref:m},a)}}var GA=n(4332),KA=n.n(GA);function qA(e,t,n){return!0===t?KA()(e,n):"function"===typeof t?KA()(e,t):e}var XA,YA,QA,ZA,JA,$A,eF,tF,nF,rF,aF,oF,iF,sF;function uF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,u.useState)({height:0,left:0,top:0,width:0}),r=(0,u.useCallback)(e=>{if(null!=e){var r=e.getBoundingClientRect(),a={height:r.height,left:r.left,top:r.top,width:r.width};(Math.abs(a.height-t.height)>1||Math.abs(a.left-t.left)>1||Math.abs(a.top-t.top)>1||Math.abs(a.width-t.width)>1)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function lF(){}function cF(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function dF(e){this._context=e}function hF(e){this._context=e}function pF(e){this._context=e}dF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cF(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cF(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},hF.prototype={areaStart:lF,areaEnd:lF,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cF(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},pF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:cF(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class fF{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function gF(e){this._context=e}function mF(e){this._context=e}function yF(e){return new mF(e)}function vF(e){return e<0?-1:1}function bF(e,t,n){var r=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(r||a<0&&-0),i=(n-e._y1)/(a||r<0&&-0),s=(o*a+i*r)/(r+a);return(vF(o)+vF(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(s))||0}function xF(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function wF(e,t,n){var r=e._x0,a=e._y0,o=e._x1,i=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,a+s*t,o-s,i-s*n,o,i)}function DF(e){this._context=e}function kF(e){this._context=new CF(e)}function CF(e){this._context=e}function EF(e){this._context=e}function SF(e){var t,n,r=e.length-1,a=new Array(r),o=new Array(r),i=new Array(r);for(a[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,o[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/o[t-1],o[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/o[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/o[t];for(o[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function AF(e,t){this._context=e,this._t=t}function FF(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}gF.prototype={areaStart:lF,areaEnd:lF,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},mF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},DF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wF(this,this._t0,xF(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wF(this,xF(this,n=bF(this,e,t)),n);break;default:wF(this,this._t0,n=bF(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(kF.prototype=Object.create(DF.prototype)).point=function(e,t){DF.prototype.point.call(this,t,e)},CF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,o){this._context.bezierCurveTo(t,e,r,n,o,a)}},EF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=SF(e),a=SF(t),o=0,i=1;i<n;++o,++i)this._context.bezierCurveTo(r[0][o],a[0][o],r[1][o],a[1][o],e[i],t[i]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},AF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const IF=Math.PI,NF=2*IF,TF=1e-6,OF=NF-TF;function RF(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class _F{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?RF:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return RF;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(XA||(XA=FF(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(YA||(YA=FF(["Z"]))))}lineTo(e,t){this._append(QA||(QA=FF(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,r){this._append(ZA||(ZA=FF(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}bezierCurveTo(e,t,n,r,a,o){this._append(JA||(JA=FF(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+a,this._y1=+o)}arcTo(e,t,n,r,a){if(e=+e,t=+t,n=+n,r=+r,(a=+a)<0)throw new Error("negative radius: ".concat(a));let o=this._x1,i=this._y1,s=n-e,u=r-t,l=o-e,c=i-t,d=l*l+c*c;if(null===this._x1)this._append($A||($A=FF(["M",",",""])),this._x1=e,this._y1=t);else if(d>TF)if(Math.abs(c*s-u*l)>TF&&a){let h=n-o,p=r-i,f=s*s+u*u,g=h*h+p*p,m=Math.sqrt(f),y=Math.sqrt(d),v=a*Math.tan((IF-Math.acos((f+d-g)/(2*m*y)))/2),b=v/y,x=v/m;Math.abs(b-1)>TF&&this._append(tF||(tF=FF(["L",",",""])),e+b*l,t+b*c),this._append(nF||(nF=FF(["A",",",",0,0,",",",",",""])),a,a,+(c*h>l*p),this._x1=e+x*s,this._y1=t+x*u)}else this._append(eF||(eF=FF(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,r,a,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error("negative radius: ".concat(n));let i=n*Math.cos(r),s=n*Math.sin(r),u=e+i,l=t+s,c=1^o,d=o?r-a:a-r;null===this._x1?this._append(rF||(rF=FF(["M",",",""])),u,l):(Math.abs(this._x1-u)>TF||Math.abs(this._y1-l)>TF)&&this._append(aF||(aF=FF(["L",",",""])),u,l),n&&(d<0&&(d=d%NF+NF),d>OF?this._append(oF||(oF=FF(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,c,e-i,t-s,n,n,c,this._x1=u,this._y1=l):d>TF&&this._append(iF||(iF=FF(["A",",",",0,",",",",",",",""])),n,n,+(d>=IF),c,this._x1=e+n*Math.cos(a),this._y1=t+n*Math.sin(a)))}rect(e,t,n,r){this._append(sF||(sF=FF(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}toString(){return this._}}function PF(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new _F(t)}function MF(e){return e[0]}function BF(e){return e[1]}function LF(e,t){var n=ap(!0),r=null,a=yF,o=null,i=PF(s);function s(s){var u,l,c,d=(s=rp(s)).length,h=!1;for(null==r&&(o=a(c=i())),u=0;u<=d;++u)!(u<d&&n(l=s[u],u,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(l,u,s),+t(l,u,s));if(c)return o=null,c+""||null}return e="function"===typeof e?e:void 0===e?MF:ap(e),t="function"===typeof t?t:void 0===t?BF:ap(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:ap(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:ap(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:ap(!!e),s):n},s.curve=function(e){return arguments.length?(a=e,null!=r&&(o=a(r)),s):a},s.context=function(e){return arguments.length?(null==e?r=o=null:o=a(r=e),s):r},s}function jF(e,t,n){var r=null,a=ap(!0),o=null,i=yF,s=null,u=PF(l);function l(l){var c,d,h,p,f,g=(l=rp(l)).length,m=!1,y=new Array(g),v=new Array(g);for(null==o&&(s=i(f=u())),c=0;c<=g;++c){if(!(c<g&&a(p=l[c],c,l))===m)if(m=!m)d=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=d;--h)s.point(y[h],v[h]);s.lineEnd(),s.areaEnd()}m&&(y[c]=+e(p,c,l),v[c]=+t(p,c,l),s.point(r?+r(p,c,l):y[c],n?+n(p,c,l):v[c]))}if(f)return s=null,f+""||null}function c(){return LF().defined(a).curve(i).context(o)}return e="function"===typeof e?e:void 0===e?MF:ap(+e),t="function"===typeof t?t:ap(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?BF:ap(+n),l.x=function(t){return arguments.length?(e="function"===typeof t?t:ap(+t),r=null,l):e},l.x0=function(t){return arguments.length?(e="function"===typeof t?t:ap(+t),l):e},l.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:ap(+e),l):r},l.y=function(e){return arguments.length?(t="function"===typeof e?e:ap(+e),n=null,l):t},l.y0=function(e){return arguments.length?(t="function"===typeof e?e:ap(+e),l):t},l.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:ap(+e),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(e){return arguments.length?(a="function"===typeof e?e:ap(!!e),l):a},l.curve=function(e){return arguments.length?(i=e,null!=o&&(s=i(o)),l):i},l.context=function(e){return arguments.length?(null==e?o=s=null:s=i(o=e),l):o},l}function zF(){return zF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zF.apply(null,arguments)}function WF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function UF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WF(Object(n),!0).forEach(function(t){VF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function VF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HF={curveBasisClosed:function(e){return new hF(e)},curveBasisOpen:function(e){return new pF(e)},curveBasis:function(e){return new dF(e)},curveBumpX:function(e){return new fF(e,!0)},curveBumpY:function(e){return new fF(e,!1)},curveLinearClosed:function(e){return new gF(e)},curveLinear:yF,curveMonotoneX:function(e){return new DF(e)},curveMonotoneY:function(e){return new kF(e)},curveNatural:function(e){return new EF(e)},curveStep:function(e){return new AF(e,.5)},curveStepAfter:function(e){return new AF(e,1)},curveStepBefore:function(e){return new AF(e,0)}},GF=e=>xb(e.x)&&xb(e.y),KF=e=>e.x,qF=e=>e.y,XF=e=>{var t,{type:n="linear",points:r=[],baseLine:a,layout:o,connectNulls:i=!1}=e,s=((e,t)=>{if("function"===typeof e)return e;var n="curve".concat(nl(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?HF[n]||yF:HF["".concat(n).concat("vertical"===t?"Y":"X")]})(n,o),u=i?r.filter(GF):r;if(Array.isArray(a)){var l=i?a.filter(e=>GF(e)):a,c=u.map((e,t)=>UF(UF({},e),{},{base:l[t]}));return t="vertical"===o?jF().y(qF).x1(KF).x0(e=>e.base.x):jF().x(KF).y1(qF).y0(e=>e.base.y),t.defined(GF).curve(s),t(c)}return(t="vertical"===o&&qu(a)?jF().y(qF).x1(KF).x0(a):qu(a)?jF().x(KF).y1(qF).y0(a):LF().x(KF).y(qF)).defined(GF).curve(s),t(u)},YF=e=>{var{className:t,points:n,path:r,pathRef:a}=e;if((!n||!n.length)&&!r)return null;var o=n&&n.length?XF(e):r;return u.createElement("path",zF({},aE(e,!1),QC(e),{className:ju("recharts-curve",t),d:null===o?void 0:o,ref:a}))},QF=["x","y","top","left","width","height","className"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZF.apply(null,arguments)}function JF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eI=(e,t,n,r,a,o)=>"M".concat(e,",").concat(a,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n),tI=e=>{var{x:t=0,y:n=0,top:r=0,left:a=0,width:o=0,height:i=0,className:s}=e,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,QF),c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JF(Object(n),!0).forEach(function(t){$F(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:t,y:n,top:r,left:a,width:o,height:i},l);return qu(t)&&qu(n)&&qu(o)&&qu(i)&&qu(r)&&qu(a)?u.createElement("path",ZF({},aE(c,!0),{className:ju("recharts-cross",s),d:eI(t,n,o,i,r,a)})):null};var nI=n(4250),rI=n.n(nI);var aI=1e-4,oI=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],iI=(e,t)=>e.map((e,n)=>e*t**n).reduce((e,t)=>e+t),sI=(e,t)=>n=>{var r=oI(e,t);return iI(r,n)},uI=function(){for(var e,t,n,r,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];if(1===o.length)switch(o[0]){case"linear":[e,n,t,r]=[0,0,1,1];break;case"ease":[e,n,t,r]=[.25,.1,.25,1];break;case"ease-in":[e,n,t,r]=[.42,0,1,1];break;case"ease-out":[e,n,t,r]=[.42,0,.58,1];break;case"ease-in-out":[e,n,t,r]=[0,0,.58,1];break;default:var s=o[0].split("(");"cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length&&([e,n,t,r]=s[1].split(")")[0].split(",").map(e=>parseFloat(e)))}else 4===o.length&&([e,n,t,r]=o);var u,l,c=sI(e,t),d=sI(n,r),h=(u=e,l=t,e=>{var t=[...oI(u,l).map((e,t)=>e*t).slice(1),0];return iI(t,e)}),p=e=>e>1?1:e<0?0:e,f=e=>{for(var t=e>1?1:e,n=t,r=0;r<8;++r){var a=c(n)-t,o=h(n);if(Math.abs(a-t)<aI||o<aI)return d(n);n=p(n-a/o)}return d(n)};return f.isStepper=!1,f},lI=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uI(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:n=8,dt:r=17}=e,a=(e,a,o)=>{var i=o+(-(e-a)*t-o*n)*r/1e3,s=o*r/1e3+e;return Math.abs(s-a)<aI&&Math.abs(i)<aI?[a,0]:[s,i]};return a.isStepper=!0,a.dt=r,a}();default:if("cubic-bezier"===e.split("(")[0])return uI(e)}return"function"===typeof e?e:null};function cI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cI(Object(n),!0).forEach(function(t){hI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pI=(e,t)=>Object.keys(t).reduce((n,r)=>dI(dI({},n),{},{[r]:e(r,t[r])}),{});function fI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fI(Object(n),!0).forEach(function(t){mI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yI=(e,t,n)=>e+(t-e)*n,vI=e=>{var{from:t,to:n}=e;return t!==n},bI=(e,t,n)=>{var r=pI((t,n)=>{if(vI(n)){var[r,a]=e(n.from,n.to,n.velocity);return gI(gI({},n),{},{from:r,velocity:a})}return n},t);return n<1?pI((e,t)=>vI(t)?gI(gI({},t),{},{velocity:yI(t.velocity,r[e].velocity,n),from:yI(t.from,r[e].from,n)}):t,t):bI(e,r,n-1)};function xI(e,t,n,r,a,o){var i,s=r.reduce((n,r)=>gI(gI({},n),{},{[r]:{from:e[r],velocity:0,to:t[r]}}),{}),u=null,l=r=>{i||(i=r);var c=(r-i)/n.dt;s=bI(n,s,c),a(gI(gI(gI({},e),t),pI((e,t)=>t.from,s))),i=r,Object.values(s).filter(vI).length&&(u=o.setTimeout(l))};return()=>(u=o.setTimeout(l),()=>{u()})}const wI=(e,t,n,r,a,o)=>{var i,s,u=(i=e,s=t,[Object.keys(i),Object.keys(s)].reduce((e,t)=>e.filter(e=>t.includes(e))));return!0===n.isStepper?xI(e,t,n,u,a,o):function(e,t,n,r,a,o,i){var s,u=null,l=a.reduce((n,r)=>gI(gI({},n),{},{[r]:[e[r],t[r]]}),{}),c=a=>{s||(s=a);var d=(a-s)/r,h=pI((e,t)=>yI(...t,n(d)),l);if(o(gI(gI(gI({},e),t),h)),d<1)u=i.setTimeout(c);else{var p=pI((e,t)=>yI(...t,n(1)),l);o(gI(gI(gI({},e),t),p))}};return()=>(u=i.setTimeout(c),()=>{u()})}(e,t,n,r,u,a,o)};class DI{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now(),r=null,a=o=>{o-n>=t?e(o):"function"===typeof requestAnimationFrame&&(r=requestAnimationFrame(a))};return r=requestAnimationFrame(a),()=>{cancelAnimationFrame(r)}}}var kI=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function CI(){return CI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CI.apply(null,arguments)}function EI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function SI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EI(Object(n),!0).forEach(function(t){AI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function AI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FI(){return function(e){var t=()=>null,n=!1,r=null,a=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var i=o,[s,...u]=i;return"number"===typeof s?void(r=e.setTimeout(a.bind(null,u),s)):(a(s),void(r=e.setTimeout(a.bind(null,u))))}"object"===typeof o&&t(o),"function"===typeof o&&o()}};return{stop:()=>{n=!0},start:e=>{n=!1,r&&(r(),r=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new DI)}class II extends u.PureComponent{constructor(e,t){super(e,t),AI(this,"mounted",!1),AI(this,"manager",null),AI(this,"stopJSAnimation",null),AI(this,"unSubscribe",null);var{isActive:n,attributeName:r,from:a,to:o,children:i,duration:s,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||s<=0)return this.state={style:{}},void("function"===typeof i&&(this.state={style:o}));if(a){if("function"===typeof i)return void(this.state={style:a});this.state={style:r?{[r]:a}:a}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:t}=this.props;this.mounted=!0,e&&t&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:t,canBegin:n,attributeName:r,shouldReAnimate:a,to:o,from:i}=this.props,{style:s}=this.state;if(n)if(t){if(!(rI()(e.to,o)&&e.canBegin&&e.isActive)){var u=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var l=u||a?i:e.to;if(this.state&&s){var c={style:r?{[r]:l}:l};(r&&s[r]!==l||!r&&s!==l)&&this.setState(c)}this.runAnimation(SI(SI({},this.props),{},{from:l,begin:0}))}}else{var d={style:r?{[r]:o}:o};this.state&&s&&(r&&s[r]!==o||!r&&s!==o)&&this.setState(d)}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:t,to:n,duration:r,easing:a,begin:o,onAnimationEnd:i,onAnimationStart:s}=e,u=wI(t,n,lI(a),r,this.changeStyle,this.manager.getTimeoutController());this.manager.start([s,o,()=>{this.stopJSAnimation=u()},r,i])}runAnimation(e){var{begin:t,duration:n,attributeName:r,to:a,easing:o,onAnimationStart:i,onAnimationEnd:s,children:u}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),"function"!==typeof o&&"function"!==typeof u&&"spring"!==o){var l=r?{[r]:a}:a,c=((e,t,n)=>e.map(e=>{return"".concat((r=e,r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(n);var r}).join(","))(Object.keys(l),n,o);this.manager.start([i,t,SI(SI({},l),{},{transition:c}),n,s])}else this.runJSAnimation(e)}render(){var e=this.props,{children:t,begin:n,duration:r,attributeName:a,easing:o,isActive:i,from:s,to:l,canBegin:c,onAnimationEnd:d,shouldReAnimate:h,onAnimationReStart:p,animationManager:f}=e,g=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,kI),m=u.Children.count(t),y=this.state.style;if("function"===typeof t)return t(y);if(!i||0===m||r<=0)return t;var v=e=>{var{style:t={},className:n}=e.props;return(0,u.cloneElement)(e,SI(SI({},g),{},{style:SI(SI({},t),y),className:n}))};return 1===m?v(u.Children.only(t)):u.createElement("div",null,u.Children.map(t,e=>v(e)))}}AI(II,"displayName","Animate"),AI(II,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var NI=(0,u.createContext)(null);function TI(e){var t,n,r=(0,u.useContext)(NI);return u.createElement(II,CI({},e,{animationManager:null!==(t=null!==(n=e.animationManager)&&void 0!==n?n:r)&&void 0!==t?t:FI()}))}function OI(){return OI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OI.apply(null,arguments)}var RI=(e,t,n,r,a)=>{var o,i=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,u=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0;if(i>0&&a instanceof Array){for(var c=[0,0,0,0],d=0;d<4;d++)c[d]=a[d]>i?i:a[d];o="M".concat(e,",").concat(t+s*c[0]),c[0]>0&&(o+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(l,",").concat(e+u*c[0],",").concat(t)),o+="L ".concat(e+n-u*c[1],",").concat(t),c[1]>0&&(o+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(l,",\n        ").concat(e+n,",").concat(t+s*c[1])),o+="L ".concat(e+n,",").concat(t+r-s*c[2]),c[2]>0&&(o+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(l,",\n        ").concat(e+n-u*c[2],",").concat(t+r)),o+="L ".concat(e+u*c[3],",").concat(t+r),c[3]>0&&(o+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(l,",\n        ").concat(e,",").concat(t+r-s*c[3])),o+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);o="M ".concat(e,",").concat(t+s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+u*h,",").concat(t,"\n            L ").concat(e+n-u*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+n,",").concat(t+s*h,"\n            L ").concat(e+n,",").concat(t+r-s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+n-u*h,",").concat(t+r,"\n            L ").concat(e+u*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e,",").concat(t+r-s*h," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},_I={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},PI=e=>{var t=_E(e,_I),n=(0,u.useRef)(null),[r,a]=(0,u.useState)(-1);(0,u.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(t){}},[]);var{x:o,y:i,width:s,height:l,radius:c,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:f,isAnimationActive:g,isUpdateAnimationActive:m}=t;if(o!==+o||i!==+i||s!==+s||l!==+l||0===s||0===l)return null;var y=ju("recharts-rectangle",d);return m?u.createElement(TI,{canBegin:r>0,from:{width:s,height:l,x:o,y:i},to:{width:s,height:l,x:o,y:i},duration:p,animationEasing:h,isActive:m},e=>{var{width:a,height:o,x:i,y:s}=e;return u.createElement(TI,{canBegin:r>0,from:"0px ".concat(-1===r?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,isActive:g,easing:h},u.createElement("path",OI({},aE(t,!0),{className:y,d:RI(i,s,a,o,c),ref:n})))}):u.createElement("path",OI({},aE(t,!0),{className:y,d:RI(o,i,s,l,c)}))};function MI(e){var{cx:t,cy:n,radius:r,startAngle:a,endAngle:o}=e;return{points:[pp(t,n,r,a),pp(t,n,r,o)],cx:t,cy:n,radius:r,startAngle:a,endAngle:o}}function BI(){return BI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BI.apply(null,arguments)}var LI=e=>{var{cx:t,cy:n,radius:r,angle:a,sign:o,isExternal:i,cornerRadius:s,cornerIsExternal:u}=e,l=s*(i?1:-1)+r,c=Math.asin(s/l)/dp,d=u?a:a+o*c,h=u?a-o*c:a;return{center:pp(t,n,l,d),circleTangency:pp(t,n,r,d),lineTangency:pp(t,n,l*Math.cos(c*dp),h),theta:c}},jI=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:o,endAngle:i}=e,s=((e,t)=>Hu(t-e)*Math.min(Math.abs(t-e),359.999))(o,i),u=o+s,l=pp(t,n,a,o),c=pp(t,n,a,u),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(o>u),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var h=pp(t,n,r,o),p=pp(t,n,r,u);d+="L ".concat(p.x,",").concat(p.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(o<=u),",\n            ").concat(h.x,",").concat(h.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},zI={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},WI=e=>{var t=_E(e,zI),{cx:n,cy:r,innerRadius:a,outerRadius:o,cornerRadius:i,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:d,className:h}=t;if(o<a||c===d)return null;var p,f=ju("recharts-sector",h),g=o-a,m=Zu(i,g,0,!0);return p=m>0&&Math.abs(c-d)<360?(e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,cornerRadius:o,forceCornerRadius:i,cornerIsExternal:s,startAngle:u,endAngle:l}=e,c=Hu(l-u),{circleTangency:d,lineTangency:h,theta:p}=LI({cx:t,cy:n,radius:a,angle:u,sign:c,cornerRadius:o,cornerIsExternal:s}),{circleTangency:f,lineTangency:g,theta:m}=LI({cx:t,cy:n,radius:a,angle:l,sign:-c,cornerRadius:o,cornerIsExternal:s}),y=s?Math.abs(u-l):Math.abs(u-l)-p-m;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):jI({cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:u,endAngle:l});var v="M ".concat(h.x,",").concat(h.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(c<0),",").concat(f.x,",").concat(f.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(g.x,",").concat(g.y,"\n  ");if(r>0){var{circleTangency:b,lineTangency:x,theta:w}=LI({cx:t,cy:n,radius:r,angle:u,sign:c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),{circleTangency:D,lineTangency:k,theta:C}=LI({cx:t,cy:n,radius:r,angle:l,sign:-c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),E=s?Math.abs(u-l):Math.abs(u-l)-w-C;if(E<0&&0===o)return"".concat(v,"L").concat(t,",").concat(n,"Z");v+="L".concat(k.x,",").concat(k.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(D.x,",").concat(D.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(E>180),",").concat(+(c>0),",").concat(b.x,",").concat(b.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(x.x,",").concat(x.y,"Z")}else v+="L".concat(t,",").concat(n,"Z");return v})({cx:n,cy:r,innerRadius:a,outerRadius:o,cornerRadius:Math.min(m,g/2),forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:d}):jI({cx:n,cy:r,innerRadius:a,outerRadius:o,startAngle:c,endAngle:d}),u.createElement("path",BI({},aE(t,!0),{className:f,d:p}))};function UI(e,t,n){var r,a,o,i;if("horizontal"===e)o=r=t.x,a=n.top,i=n.top+n.height;else if("vertical"===e)i=a=t.y,r=n.left,o=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return MI(t);var{cx:s,cy:u,innerRadius:l,outerRadius:c,angle:d}=t,h=pp(s,u,l,d),p=pp(s,u,c,d);r=h.x,a=h.y,o=p.x,i=p.y}return[{x:r,y:a},{x:o,y:i}]}function VI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function HI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VI(Object(n),!0).forEach(function(t){GI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function GI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var KI=()=>Zh(ED);function qI(){return qI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qI.apply(null,arguments)}function XI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function YI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XI(Object(n),!0).forEach(function(t){QI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function QI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZI(e){var t,n,{coordinate:r,payload:a,index:o,offset:i,tooltipAxisBandSize:s,layout:l,cursor:c,tooltipEventType:d,chartName:h}=e,p=r,f=a,g=o;if(!c||!p||"ScatterChart"!==h&&"axis"!==d)return null;if("ScatterChart"===h)t=p,n=tI;else if("BarChart"===h)t=function(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-a,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(l,p,i,s),n=PI;else if("radial"===l){var{cx:m,cy:y,radius:v,startAngle:b,endAngle:x}=MI(p);t={cx:m,cy:y,startAngle:b,endAngle:x,innerRadius:v,outerRadius:v},n=WI}else t={points:UI(l,p,i)},n=YF;var w="object"===typeof c&&"className"in c?c.className:void 0,D=YI(YI(YI(YI({stroke:"#ccc",pointerEvents:"none"},i),t),aE(c,!1)),{},{payload:f,payloadIndex:g,className:ju("recharts-tooltip-cursor",w)});return(0,u.isValidElement)(c)?(0,u.cloneElement)(c,D):(0,u.createElement)(n,D)}function JI(e){var t=(()=>{var e=KI(),t=Zh(ek),n=Zh(ZD);return Rp(HI(HI({},e),{},{scale:n}),t)})(),n=ef(),r=of(),a=Zh(qb);return u.createElement(ZI,qI({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:a}))}function $I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$I(Object(n),!0).forEach(function(t){tN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nN(e){return e.dataKey}var rN=[],aN={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!WE,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function oN(e){var t=_E(e,aN),{active:n,allowEscapeViewBox:r,animationDuration:a,animationEasing:o,content:i,filterNull:s,isAnimationActive:l,offset:c,payloadUniqBy:d,position:h,reverseDirection:p,useTranslate3d:f,wrapperStyle:g,cursor:m,shared:y,trigger:v,defaultIndex:b,portal:x,axisId:w}=t,D=qh(),k="number"===typeof b?String(b):b;(0,u.useEffect)(()=>{D(fh({shared:y,trigger:v,axisId:w,active:n,defaultIndex:k}))},[D,y,v,w,n,k]);var C=Jp(),E=oE(),S=function(e){return Zh(t=>hD(t,e))}(y),{activeIndex:A,isActive:F}=Zh(e=>Sk(e,S,v,k)),I=Zh(e=>Ek(e,S,v,k)),N=Zh(e=>Ck(e,S,v,k)),T=Zh(e=>kk(e,S,v,k)),O=I,R=(0,u.useContext)(DE),_=null!==n&&void 0!==n?n:F,[P,M]=uF([O,_]),B="axis"===S?N:void 0;wE(S,v,T,B,A,_);var L=null!==x&&void 0!==x?x:R;if(null==L)return null;var j=null!==O&&void 0!==O?O:rN;_||(j=rN),s&&j.length&&(j=qA(O.filter(e=>null!=e.value&&(!0!==e.hide||t.includeHidden)),d,nN));var z=j.length>0,W=u.createElement(HA,{allowEscapeViewBox:r,animationDuration:a,animationEasing:o,isAnimationActive:l,active:_,coordinate:T,hasPayload:z,offset:c,position:h,reverseDirection:p,useTranslate3d:f,viewBox:C,wrapperStyle:g,lastBoundingBox:P,innerRef:M,hasPortalFromProps:Boolean(x)},function(e,t){return u.isValidElement(e)?u.cloneElement(e,t):"function"===typeof e?u.createElement(e,t):u.createElement(MA,t)}(i,eN(eN({},t),{},{payload:j,label:B,active:_,coordinate:T,accessibilityLayer:E})));return u.createElement(u.Fragment,null,(0,gn.createPortal)(W,L),_&&u.createElement(JI,{cursor:m,tooltipEventType:S,coordinate:T,payload:O,index:A}))}Math.abs,Math.atan2;const iN=Math.cos,sN=(Math.max,Math.min,Math.sin),uN=Math.sqrt,lN=Math.PI,cN=2*lN;const dN={draw(e,t){const n=uN(t/lN);e.moveTo(n,0),e.arc(0,0,n,0,cN)}},hN={draw(e,t){const n=uN(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},pN=uN(1/3),fN=2*pN,gN={draw(e,t){const n=uN(t/fN),r=n*pN;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},mN={draw(e,t){const n=uN(t),r=-n/2;e.rect(r,r,n,n)}},yN=sN(lN/10)/sN(7*lN/10),vN=sN(cN/10)*yN,bN=-iN(cN/10)*yN,xN={draw(e,t){const n=uN(.8908130915292852*t),r=vN*n,a=bN*n;e.moveTo(0,-n),e.lineTo(r,a);for(let o=1;o<5;++o){const t=cN*o/5,i=iN(t),s=sN(t);e.lineTo(s*n,-i*n),e.lineTo(i*r-s*a,s*r+i*a)}e.closePath()}},wN=uN(3),DN={draw(e,t){const n=-uN(t/(3*wN));e.moveTo(0,2*n),e.lineTo(-wN*n,-n),e.lineTo(wN*n,-n),e.closePath()}},kN=-.5,CN=uN(3)/2,EN=1/uN(12),SN=3*(EN/2+1),AN={draw(e,t){const n=uN(t/SN),r=n/2,a=n*EN,o=r,i=n*EN+n,s=-o,u=i;e.moveTo(r,a),e.lineTo(o,i),e.lineTo(s,u),e.lineTo(kN*r-CN*a,CN*r+kN*a),e.lineTo(kN*o-CN*i,CN*o+kN*i),e.lineTo(kN*s-CN*u,CN*s+kN*u),e.lineTo(kN*r+CN*a,kN*a-CN*r),e.lineTo(kN*o+CN*i,kN*i-CN*o),e.lineTo(kN*s+CN*u,kN*u-CN*s),e.closePath()}};uN(3),uN(3);var FN=["type","size","sizeType"];function IN(){return IN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IN.apply(null,arguments)}function NN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function TN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NN(Object(n),!0).forEach(function(t){ON(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ON(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RN={symbolCircle:dN,symbolCross:hN,symbolDiamond:gN,symbolSquare:mN,symbolStar:xN,symbolTriangle:DN,symbolWye:AN},_N=Math.PI/180,PN=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,FN),o=TN(TN({},a),{},{type:t,size:n,sizeType:r}),{className:i,cx:s,cy:l}=o,c=aE(o,!0);return s===+s&&l===+l&&n===+n?u.createElement("path",IN({},c,{className:ju("recharts-symbols",i),transform:"translate(".concat(s,", ").concat(l,")"),d:(()=>{var e=(e=>{var t="symbol".concat(nl(e));return RN[t]||dN})(t),a=function(e,t){let n=null,r=PF(a);function a(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return e="function"===typeof e?e:ap(e||dN),t="function"===typeof t?t:ap(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:ap(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:ap(+e),a):t},a.context=function(e){return arguments.length?(n=null==e?null:e,a):n},a}().type(e).size(((e,t,n)=>{if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*_N;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.tan(r)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,r,t));return a()})()})):null};function MN(){return MN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MN.apply(null,arguments)}function BN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function LN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}PN.registerSymbol=(e,t)=>{RN["symbol".concat(nl(e))]=t};var jN=32;class zN extends u.PureComponent{renderIcon(e,t){var{inactiveColor:n}=this.props,r=16,a=jN/6,o=jN/3,i=e.inactive?n:e.color,s=null!==t&&void 0!==t?t:e.type;if("none"===s)return null;if("plainline"===s)return u.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:jN,y2:r,className:"recharts-legend-icon"});if("line"===s)return u.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(r,"h").concat(o,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(r,"\n            H").concat(jN,"M").concat(2*o,",").concat(r,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if("rect"===s)return u.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(jN,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(u.isValidElement(e.legendIcon)){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BN(Object(n),!0).forEach(function(t){LN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return delete l.legendIcon,u.cloneElement(e.legendIcon,l)}return u.createElement(PN,{fill:i,cx:r,cy:r,size:jN,sizeType:"diameter",type:s})}renderItems(){var{payload:e,iconSize:t,layout:n,formatter:r,inactiveColor:a,iconType:o}=this.props,i={x:0,y:0,width:jN,height:jN},s={display:"horizontal"===n?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((e,n)=>{var c=e.formatter||r,d=ju({"recharts-legend-item":!0,["legend-item-".concat(n)]:!0,inactive:e.inactive});if("none"===e.type)return null;var h=e.inactive?a:e.color,p=c?c(e.value,e,n):e.value;return u.createElement("li",MN({className:d,style:s,key:"legend-item-".concat(n)},ZC(this.props,e,n)),u.createElement(uE,{width:t,height:t,viewBox:i,style:l,"aria-label":"".concat(p," legend icon")},this.renderIcon(e,o)),u.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},p))})}render(){var{payload:e,layout:t,align:n}=this.props;if(!e||!e.length)return null;var r={padding:0,margin:0,textAlign:"horizontal"===t?n:"left"};return u.createElement("ul",{className:"recharts-default-legend",style:r},this.renderItems())}}LN(zN,"displayName","Legend"),LN(zN,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var WN=["contextPayload"];function UN(){return UN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UN.apply(null,arguments)}function VN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function HN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VN(Object(n),!0).forEach(function(t){GN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function GN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KN(e){return e.value}function qN(e){var{contextPayload:t}=e,n=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,WN),r=qA(t,e.payloadUniqBy,KN),a=HN(HN({},n),{},{payload:r});return u.isValidElement(e.content)?u.cloneElement(e.content,a):"function"===typeof e.content?u.createElement(e.content,a):u.createElement(zN,a)}function XN(e){var t=qh();return(0,u.useEffect)(()=>{t(fC(e))},[t,e]),null}function YN(e){var t=qh();return(0,u.useEffect)(()=>(t(pC(e)),()=>{t(pC({width:0,height:0}))}),[t,e]),null}function QN(e){var t=Zh(tp),n=(0,u.useContext)(kE),r=(()=>{var e;return null!==(e=Zh(e=>e.layout.margin))&&void 0!==e?e:rf})(),{width:a,height:o,wrapperStyle:i,portal:s}=e,[l,c]=uF([t]),d=tf(),h=nf(),p=d-(r.left||0)-(r.right||0),f=ZN.getWidthOrHeight(e.layout,o,a,p),g=s?i:HN(HN({position:"absolute",width:(null===f||void 0===f?void 0:f.width)||a||"auto",height:(null===f||void 0===f?void 0:f.height)||o||"auto"},function(e,t,n,r,a,o){var i,s,{layout:u,align:l,verticalAlign:c}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(i="center"===l&&"vertical"===u?{left:((r||0)-o.width)/2}:"right"===l?{right:n&&n.right||0}:{left:n&&n.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(s="middle"===c?{top:((a||0)-o.height)/2}:"bottom"===c?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),HN(HN({},i),s)}(i,e,r,d,h,l)),i),m=null!==s&&void 0!==s?s:n;if(null==m)return null;var y=u.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:c},u.createElement(XN,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),u.createElement(YN,{width:l.width,height:l.height}),u.createElement(qN,UN({},e,f,{margin:r,chartWidth:d,chartHeight:h,contextPayload:t})));return(0,gn.createPortal)(y,m)}class ZN extends u.PureComponent{static getWidthOrHeight(e,t,n,r){return"vertical"===e&&qu(t)?{height:t}:"horizontal"===e?{width:n||r}:null}render(){return u.createElement(QN,this.props)}}function JN(){return JN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JN.apply(null,arguments)}GN(ZN,"displayName","Legend"),GN(ZN,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});var $N=e=>{var{cx:t,cy:n,r:r,className:a}=e,o=ju("recharts-dot",a);return t===+t&&n===+n&&r===+r?u.createElement("circle",JN({},aE(e,!1),QC(e),{className:o,cx:t,cy:n,r:r})):null},eT=n(356),tT=n.n(eT),nT=["valueAccessor"],rT=["data","dataKey","clockWise","id","textBreakAll"];function aT(){return aT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aT.apply(null,arguments)}function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oT(Object(n),!0).forEach(function(t){sT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uT(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var lT=e=>Array.isArray(e.value)?tT()(e.value):e.value;function cT(e){var{valueAccessor:t=lT}=e,n=uT(e,nT),{data:r,dataKey:a,clockWise:o,id:i,textBreakAll:s}=n,l=uT(n,rT);return r&&r.length?u.createElement(sS,{className:"recharts-label-list"},r.map((e,n)=>{var r=tl(a)?t(e,n):xp(e&&e.payload,a),c=tl(i)?{}:{id:"".concat(i,"-").concat(n)};return u.createElement(jS,aT({},aE(e,!0),l,c,{parentViewBox:e.parentViewBox,value:r,textBreakAll:s,viewBox:jS.parseViewBox(tl(o)?e:iT(iT({},e),{},{clockWise:o})),key:"label-".concat(n),index:n}))})):null}function dT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dT(Object(n),!0).forEach(function(t){pT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fT(e){var t=qh();return(0,u.useEffect)(()=>{var n=hT(hT({},e),{},{stackId:Ap(e.stackId)});return t(Yk(n)),()=>{t(Qk(n))}},[t,e]),null}cT.displayName="LabelList",cT.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var{children:r}=e,a=nE(r,cT).map((e,n)=>(0,u.cloneElement)(e,{data:t,key:"labelList-".concat(n)}));return n?[function(e,t){return e?!0===e?u.createElement(cT,{key:"labelList-implicit",data:t}):u.isValidElement(e)||BS(e)?u.createElement(cT,{key:"labelList-implicit",data:t,content:e}):"object"===typeof e?u.createElement(cT,aT({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t),...a]:a};var gT=["children"];var mT=()=>{},yT=(0,u.createContext)({addErrorBar:mT,removeErrorBar:mT}),vT={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},bT=(0,u.createContext)(vT);function xT(e){var{children:t}=e,n=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,gT);return u.createElement(bT.Provider,{value:n},t)}var wT=e=>{var{children:t,xAxisId:n,yAxisId:r,zAxisId:a,dataKey:o,data:i,stackId:s,hide:l,type:c,barSize:d}=e,[h,p]=u.useState([]),f=(0,u.useCallback)(e=>{p(t=>[...t,e])},[p]),g=(0,u.useCallback)(e=>{p(t=>t.filter(t=>t!==e))},[p]),m=Yp();return u.createElement(yT.Provider,{value:{addErrorBar:f,removeErrorBar:g}},u.createElement(fT,{type:c,data:i,xAxisId:n,yAxisId:r,zAxisId:a,dataKey:o,errorBars:h,stackId:s,hide:l,barSize:d,isPanorama:m}),t)};function DT(e){var{addErrorBar:t,removeErrorBar:n}=(0,u.useContext)(yT);return(0,u.useEffect)(()=>(t(e),()=>{n(e)}),[t,n,e]),null}var kT=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function CT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ET(){return ET=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ET.apply(null,arguments)}function ST(e){var{direction:t,width:n,dataKey:r,isAnimationActive:a,animationBegin:o,animationDuration:i,animationEasing:s}=e,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,kT),c=aE(l,!1),{data:d,dataPointFormatter:h,xAxisId:p,yAxisId:f,errorBarOffset:g}=(0,u.useContext)(bT),m=(e=>{var t=Yp();return Zh(n=>iD(n,"xAxis",e,t))})(p),y=(e=>{var t=Yp();return Zh(n=>iD(n,"yAxis",e,t))})(f);if(null==(null===m||void 0===m?void 0:m.scale)||null==(null===y||void 0===y?void 0:y.scale)||null==d)return null;if("x"===t&&"number"!==m.type)return null;var v=d.map(e=>{var{x:l,y:d,value:p,errorVal:f}=h(e,r,t);if(!f)return null;var v,b,x=[];if(Array.isArray(f)?[v,b]=f:v=b=f,"x"===t){var{scale:w}=m,D=d+g,k=D+n,C=D-n,E=w(p-v),S=w(p+b);x.push({x1:S,y1:k,x2:S,y2:C}),x.push({x1:E,y1:D,x2:S,y2:D}),x.push({x1:E,y1:k,x2:E,y2:C})}else if("y"===t){var{scale:A}=y,F=l+g,I=F-n,N=F+n,T=A(p-v),O=A(p+b);x.push({x1:I,y1:O,x2:N,y2:O}),x.push({x1:F,y1:T,x2:F,y2:O}),x.push({x1:I,y1:T,x2:N,y2:T})}var R="".concat(l+g,"px ").concat(d+g,"px");return u.createElement(sS,ET({className:"recharts-errorBar",key:"bar-".concat(x.map(e=>"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)))},c),x.map(e=>{var t=a?{transformOrigin:"".concat(e.x1-5,"px")}:void 0;return u.createElement(TI,{from:{transform:"scaleY(0)",transformOrigin:R},to:{transform:"scaleY(1)",transformOrigin:R},begin:o,easing:s,isActive:a,duration:i,key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2),style:{transformOrigin:R}},u.createElement("line",ET({},e,{style:t})))}))});return u.createElement(sS,{className:"recharts-errorBars"},v)}var AT=(0,u.createContext)(void 0);function FT(e){var{direction:t,children:n}=e;return u.createElement(AT.Provider,{value:t},n)}var IT={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function NT(e){var t=function(e){var t=(0,u.useContext)(AT);return null!=e?e:null!=t?t:"x"}(e.direction),{width:n,isAnimationActive:r,animationBegin:a,animationDuration:o,animationEasing:i}=_E(e,IT);return u.createElement(u.Fragment,null,u.createElement(DT,{dataKey:e.dataKey,direction:t}),u.createElement(ST,ET({},e,{direction:t,width:n,isAnimationActive:r,animationBegin:a,animationDuration:o,animationEasing:i})))}class TT extends u.Component{render(){return u.createElement(NT,this.props)}}function OT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function RT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OT(Object(n),!0).forEach(function(t){_T(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}CT(TT,"defaultProps",IT),CT(TT,"displayName","ErrorBar");function PT(e){var t,{points:n,mainColor:r,activeDot:a,itemDataKey:o}=e,i=KI(),s=Zh(ok),l=Zh(ik);if(!s)return null;var c=i.dataKey;if(c&&!i.allowDuplicatedCategory){var d="function"===typeof c?e=>c(e.payload):"payload.".concat(c);t=el(n,d,l)}else t=null===n||void 0===n?void 0:n[Number(s)];return tl(t)?null:(e=>{var{point:t,childIndex:n,mainColor:r,activeDot:a,dataKey:o}=e;if(!1===a||null==t.x||null==t.y)return null;var i,s=RT(RT({index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:null!==r&&void 0!==r?r:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},aE(a,!1)),QC(a));return i=(0,u.isValidElement)(a)?(0,u.cloneElement)(a,s):"function"===typeof a?a(s):u.createElement($N,s),u.createElement(sS,{className:"recharts-active-dot"},i)})({point:t,childIndex:Number(s),mainColor:r,dataKey:o,activeDot:a})}function MT(e){var{fn:t,args:n}=e,r=qh(),a=Yp();return(0,u.useEffect)(()=>{if(!a){var e=t(n);return r(hh(e)),()=>{r(ph(e))}}},[t,n,r,a]),null}function BT(e,t){var n,r,a=Zh(t=>Ax(t,e)),o=Zh(e=>Ix(e,t)),i=null!==(n=null===a||void 0===a?void 0:a.allowDataOverflow)&&void 0!==n?n:Sx.allowDataOverflow,s=null!==(r=null===o||void 0===o?void 0:o.allowDataOverflow)&&void 0!==r?r:Fx.allowDataOverflow;return{needClip:i||s,needClipX:i,needClipY:s}}function LT(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,a=ef(),{needClipX:o,needClipY:i,needClip:s}=BT(t,n);if(!s)return null;var{left:l,top:c,width:d,height:h}=a;return u.createElement("clipPath",{id:"clipPath-".concat(r)},u.createElement("rect",{x:o?l:l-d/2,y:i?c:c-h/2,width:o?d:2*d,height:i?h:2*h}))}var jT=(e,t,n,r)=>iD(e,"xAxis",t,r),zT=(e,t,n,r)=>oD(e,"xAxis",t,r),WT=(e,t,n,r)=>iD(e,"yAxis",n,r),UT=(e,t,n,r)=>oD(e,"yAxis",n,r),VT=Uh([af,jT,WT,zT,UT],(e,t,n,r,a)=>wp(e,"xAxis")?Rp(t,r,!1):Rp(n,a,!1)),HT=Uh([Mx,(e,t,n,r,a)=>a],(e,t)=>{if(e.some(e=>"line"===e.type&&t.dataKey===e.dataKey&&t.data===e.data))return t}),GT=Uh([af,jT,WT,zT,UT,HT,VT,bb],(e,t,n,r,a,o,i,s)=>{var{chartData:u,dataStartIndex:l,dataEndIndex:c}=s;if(null!=o&&null!=t&&null!=n&&null!=r&&null!=a&&0!==r.length&&0!==a.length&&null!=i){var d,{dataKey:h,data:p}=o;if(null!=(d=null!=p&&p.length>0?p:null===u||void 0===u?void 0:u.slice(l,c+1)))return function(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:a,yAxisTicks:o,dataKey:i,bandSize:s,displayedData:u}=e;return u.map((e,u)=>{var l=xp(e,i);return"horizontal"===t?{x:Fp({axis:n,ticks:a,bandSize:s,entry:e,index:u}),y:tl(l)?null:r.scale(l),value:l,payload:e}:{x:tl(l)?null:n.scale(l),y:Fp({axis:r,ticks:o,bandSize:s,entry:e,index:u}),value:l,payload:e}})}({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:a,dataKey:h,bandSize:i,displayedData:d})}}),KT=()=>{};function qT(e){var{legendPayload:t}=e,n=qh(),r=Yp();return(0,u.useEffect)(()=>r?KT:(n(gC(t)),()=>{n(mC(t))}),[n,r,t]),null}function XT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,u.useRef)(Qu(t)),r=(0,u.useRef)(e);return r.current!==e&&(n.current=Qu(t),r.current=e),n.current}var YT=["type","layout","connectNulls","needClip"],QT=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function ZT(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function JT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JT(Object(n),!0).forEach(function(t){eO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tO(){return tO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tO.apply(null,arguments)}var nO=e=>{var{dataKey:t,name:n,stroke:r,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:r,value:Pp(n,t),payload:e}]};function rO(e){var{dataKey:t,data:n,stroke:r,strokeWidth:a,fill:o,name:i,hide:s,unit:u}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:o,dataKey:t,nameKey:void 0,name:Pp(i,t),hide:s,type:e.tooltipType,color:e.stroke,unit:u}}}var aO=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function oO(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],a=0;a<t;++a)r=[...r,...n];return r}function iO(e){var{clipPathId:t,points:n,props:r}=e,{dot:a,dataKey:o,needClip:i}=r;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(n,a))return null;var s=rE(a),l=aE(r,!1),c=aE(a,!0),d=n.map((e,t)=>{var r=$T($T($T({key:"dot-".concat(t),r:3},l),c),{},{index:t,cx:e.x,cy:e.y,dataKey:o,value:e.value,payload:e.payload,points:n});return function(e,t){var n;if(u.isValidElement(e))n=u.cloneElement(e,t);else if("function"===typeof e)n=e(t);else{var r=ju("recharts-line-dot","boolean"!==typeof e?e.className:"");n=u.createElement($N,tO({},t,{className:r}))}return n}(a,r)}),h={clipPath:i?"url(#clipPath-".concat(s?"":"dots-").concat(t,")"):null};return u.createElement(sS,tO({className:"recharts-line-dots",key:"dots"},h),d)}function sO(e){var{clipPathId:t,pathRef:n,points:r,strokeDasharray:a,props:o,showLabels:i}=e,{type:s,layout:l,connectNulls:c,needClip:d}=o,h=ZT(o,YT),p=$T($T({},aE(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:r,type:s,layout:l,connectNulls:c,strokeDasharray:null!==a&&void 0!==a?a:o.strokeDasharray});return u.createElement(u.Fragment,null,(null===r||void 0===r?void 0:r.length)>1&&u.createElement(YF,tO({},p,{pathRef:n})),u.createElement(iO,{points:r,clipPathId:t,props:o}),i&&cT.renderCallByParent(o,r))}function uO(e){var{clipPathId:t,props:n,pathRef:r,previousPointsRef:a,longestAnimatedLengthRef:o}=e,{points:i,strokeDasharray:s,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:h,animateNewValues:p,width:f,height:g,onAnimationEnd:m,onAnimationStart:y}=n,v=a.current,b=XT(n,"recharts-line-"),[x,w]=(0,u.useState)(!1),D=(0,u.useCallback)(()=>{"function"===typeof m&&m(),w(!1)},[m]),k=(0,u.useCallback)(()=>{"function"===typeof y&&y(),w(!0)},[y]),C=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}(r.current),E=o.current;return u.createElement(TI,{begin:c,duration:d,isActive:l,easing:h,from:{t:0},to:{t:1},onAnimationEnd:D,onAnimationStart:k,key:b},e=>{var l,{t:c}=e,d=$u(E,C+E),h=Math.min(d(c),C);if(s){var m="".concat(s).split(/[,\s]+/gim).map(e=>parseFloat(e));l=((e,t,n)=>{var r=n.reduce((e,t)=>e+t);if(!r)return aO(t,e);for(var a=Math.floor(e/r),o=e%r,i=t-e,s=[],u=0,l=0;u<n.length;l+=n[u],++u)if(l+n[u]>o){s=[...n.slice(0,u),o-l];break}var c=s.length%2===0?[0,i]:[i];return[...oO(n,a),...s,...c].map(e=>"".concat(e,"px")).join(", ")})(h,C,m)}else l=aO(C,h);if(v){var y=v.length/i.length,b=1===c?i:i.map((e,t)=>{var n=Math.floor(t*y);if(v[n]){var r=v[n],a=$u(r.x,e.x),o=$u(r.y,e.y);return $T($T({},e),{},{x:a(c),y:o(c)})}if(p){var i=$u(2*f,e.x),s=$u(g/2,e.y);return $T($T({},e),{},{x:i(c),y:s(c)})}return $T($T({},e),{},{x:e.x,y:e.y})});return a.current=b,u.createElement(sO,{props:n,points:b,clipPathId:t,pathRef:r,showLabels:!x,strokeDasharray:l})}return c>0&&C>0&&(a.current=i,o.current=h),u.createElement(sO,{props:n,points:i,clipPathId:t,pathRef:r,showLabels:!x,strokeDasharray:l})})}function lO(e){var{clipPathId:t,props:n}=e,{points:r,isAnimationActive:a}=n,o=(0,u.useRef)(null),i=(0,u.useRef)(0),s=(0,u.useRef)(null),l=o.current;return a&&r&&r.length&&l!==r?u.createElement(uO,{props:n,clipPathId:t,previousPointsRef:o,longestAnimatedLengthRef:i,pathRef:s}):u.createElement(sO,{props:n,points:r,clipPathId:t,pathRef:s,showLabels:!0})}var cO=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:xp(e.payload,t)});class dO extends u.Component{constructor(){super(...arguments),eO(this,"id",Qu("recharts-line-"))}render(){var e,{hide:t,dot:n,points:r,className:a,xAxisId:o,yAxisId:i,top:s,left:l,width:c,height:d,id:h,needClip:p,layout:f}=this.props;if(t)return null;var g=ju("recharts-line",a),m=tl(h)?this.id:h,{r:y=3,strokeWidth:v=2}=null!==(e=aE(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},b=rE(n),x=2*y+v;return u.createElement(u.Fragment,null,u.createElement(sS,{className:g},p&&u.createElement("defs",null,u.createElement(LT,{clipPathId:m,xAxisId:o,yAxisId:i}),!b&&u.createElement("clipPath",{id:"clipPath-dots-".concat(m)},u.createElement("rect",{x:l-x/2,y:s-x/2,width:c+x,height:d+x}))),u.createElement(lO,{props:this.props,clipPathId:m}),u.createElement(FT,{direction:"horizontal"===f?"y":"x"},u.createElement(xT,{xAxisId:o,yAxisId:i,data:r,dataPointFormatter:cO,errorBarOffset:0},this.props.children))),u.createElement(PT,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var hO={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!WE,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function pO(e){var t=_E(e,hO),{activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:o,animationEasing:i,connectNulls:s,dot:l,hide:c,isAnimationActive:d,label:h,legendType:p,xAxisId:f,yAxisId:g}=t,m=ZT(t,QT),{needClip:y}=BT(f,g),{height:v,width:b,left:x,top:w}=ef(),D=of(),k=Yp(),C=(0,u.useMemo)(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),E=Zh(e=>GT(e,f,g,k,C));return"horizontal"!==D&&"vertical"!==D?null:u.createElement(dO,tO({},m,{connectNulls:s,dot:l,activeDot:n,animateNewValues:r,animationBegin:a,animationDuration:o,animationEasing:i,isAnimationActive:d,hide:c,label:h,legendType:p,xAxisId:f,yAxisId:g,points:E,layout:D,height:v,width:b,left:x,top:w,needClip:y}))}class fO extends u.PureComponent{render(){return u.createElement(wT,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},u.createElement(qT,{legendPayload:nO(this.props)}),u.createElement(MT,{fn:rO,args:this.props}),u.createElement(pO,this.props))}}eO(fO,"displayName","Line"),eO(fO,"defaultProps",hO);var gO=["axis","item"],mO=(0,u.forwardRef)((e,t)=>u.createElement(LE,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:gO,tooltipPayloadSearcher:sd,categoricalChartProps:e,ref:t})),yO=e=>null;yO.displayName="Cell";var vO="Invariant failed";var bO=n(9397),xO=n.n(bO);function wO(){return wO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wO.apply(null,arguments)}var DO=(e,t,n,r,a)=>{var o,i=n-r;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-i/2,",").concat(t+a),o+="L ".concat(e+n-i/2-r,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z")},kO={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CO=e=>{var t=_E(e,kO),n=(0,u.useRef)(),[r,a]=(0,u.useState)(-1);(0,u.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(t){}},[]);var{x:o,y:i,upperWidth:s,lowerWidth:l,height:c,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:f,isUpdateAnimationActive:g}=t;if(o!==+o||i!==+i||s!==+s||l!==+l||c!==+c||0===s&&0===l||0===c)return null;var m=ju("recharts-trapezoid",d);return g?u.createElement(TI,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:c,x:o,y:i},to:{upperWidth:s,lowerWidth:l,height:c,x:o,y:i},duration:p,animationEasing:h,isActive:g},e=>{var{upperWidth:a,lowerWidth:o,height:i,x:s,y:l}=e;return u.createElement(TI,{canBegin:r>0,from:"0px ".concat(-1===r?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,easing:h},u.createElement("path",wO({},aE(t,!0),{className:m,d:DO(s,l,a,o,i),ref:n})))}):u.createElement("g",null,u.createElement("path",wO({},aE(t,!0),{className:m,d:DO(o,i,s,l,c)})))},EO=["option","shapeType","propTransformer","activeClassName","isActive"];function SO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function AO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SO(Object(n),!0).forEach(function(t){FO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function FO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IO(e,t){return AO(AO({},t),e)}function NO(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return u.createElement(PI,n);case"trapezoid":return u.createElement(CO,n);case"sector":return u.createElement(WI,n);case"symbols":if(function(e){return"symbols"===e}(t))return u.createElement(PN,n);break;default:return null}}function TO(e){var t,{option:n,shapeType:r,propTransformer:a=IO,activeClassName:o="recharts-active-shape",isActive:i}=e,s=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,EO);if((0,u.isValidElement)(n))t=(0,u.cloneElement)(n,AO(AO({},s),function(e){return(0,u.isValidElement)(e)?e.props:e}(n)));else if("function"===typeof n)t=n(s);else if(xO()(n)&&"boolean"!==typeof n){var l=a(n,s);t=u.createElement(NO,{shapeType:r,elementProps:l})}else{var c=s;t=u.createElement(NO,{shapeType:r,elementProps:c})}return i?u.createElement(sS,{className:o},t):t}var OO=["x","y"];function RO(){return RO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RO.apply(null,arguments)}function _O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function PO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_O(Object(n),!0).forEach(function(t){MO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function MO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BO(e,t){var{x:n,y:r}=e,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,OO),o="".concat(n),i=parseInt(o,10),s="".concat(r),u=parseInt(s,10),l="".concat(t.height||a.height),c=parseInt(l,10),d="".concat(t.width||a.width),h=parseInt(d,10);return PO(PO(PO(PO(PO({},t),a),i?{x:i}:{}),u?{y:u}:{}),{},{height:c,width:h,name:t.name,radius:t.radius})}function LO(e){return u.createElement(TO,RO({shapeType:"rectangle",propTransformer:BO,activeClassName:"recharts-active-bar"},e))}var jO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n,r)=>{if(qu(e))return e;var a=qu(n)||tl(n);return a?e(n,r):(a||function(e){if(!e)throw new Error(vO)}(!1),t)}},zO=(e,t)=>{var n=qh();return(r,a)=>o=>{null===e||void 0===e||e(r,a,o),n(gh({activeIndex:String(a),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},WO=e=>{var t=qh();return(n,r)=>a=>{null===e||void 0===e||e(n,r,a),t(mh())}},UO=(e,t)=>{var n=qh();return(r,a)=>o=>{null===e||void 0===e||e(r,a,o),n(vh({activeIndex:String(a),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},VO=()=>{var e=qh();return(0,u.useEffect)(()=>(e(qk()),()=>{e(Xk())})),null};function HO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HO(Object(n),!0).forEach(function(t){KO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function KO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qO=(e,t,n,r,a)=>a,XO=(e,t,n)=>{var r=null!==n&&void 0!==n?n:e;if(!tl(r))return Zu(r,t,0)},YO=Uh([af,Mx,(e,t)=>t,(e,t,n)=>n,(e,t,n,r)=>r],(e,t,n,r,a)=>t.filter(t=>"horizontal"===e?t.xAxisId===n:t.yAxisId===r).filter(e=>e.isPanorama===a).filter(e=>!1===e.hide).filter(e=>"bar"===e.type));function QO(e){return null!=e.stackId&&null!=e.dataKey}var ZO=Uh([YO,e=>e.rootProps.barSize,(e,t,n)=>"horizontal"===af(e)?Jw(e,"xAxis",t):Jw(e,"yAxis",n)],(e,t,n)=>{var r=e.filter(QO),a=e.filter(e=>null==e.stackId),o=r.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{}),i=Object.entries(o).map(e=>{var[r,a]=e,o=a.map(e=>e.dataKey);return{stackId:r,dataKeys:o,barSize:XO(t,n,a[0].barSize)}}),s=a.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:XO(t,n,e.barSize)}));return[...i,...s]}),JO=(e,t,n,r)=>{var a,o;return"horizontal"===af(e)?(a=iD(e,"xAxis",t,r),o=oD(e,"xAxis",t,r)):(a=iD(e,"yAxis",n,r),o=oD(e,"yAxis",n,r)),Rp(a,o)};var $O=Uh([ZO,Hb,e=>e.rootProps.barGap,Gb,(e,t,n,r,a)=>{var o,i,s,u,l=af(e),c=Hb(e),{maxBarSize:d}=a,h=tl(d)?c:d;return"horizontal"===l?(s=iD(e,"xAxis",t,r),u=oD(e,"xAxis",t,r)):(s=iD(e,"yAxis",n,r),u=oD(e,"yAxis",n,r)),null!==(o=null!==(i=Rp(s,u,!0))&&void 0!==i?i:h)&&void 0!==o?o:0},JO,(e,t,n,r,a)=>a.maxBarSize],(e,t,n,r,a,o,i)=>{var s=tl(i)?t:i,u=function(e,t,n,r,a){var o=r.length;if(!(o<1)){var i,s=Zu(e,n,0,!0),u=[];if(xb(r[0].barSize)){var l=!1,c=n/o,d=r.reduce((e,t)=>e+(t.barSize||0),0);(d+=(o-1)*s)>=n&&(d-=(o-1)*s,s=0),d>=n&&c>0&&(l=!0,d=o*(c*=.9));var h={offset:((n-d)/2|0)-s,size:0};i=r.reduce((e,t)=>{var n,r=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h.offset+h.size+s,size:l?c:null!==(n=t.barSize)&&void 0!==n?n:0}}];return h=r[r.length-1].position,r},u)}else{var p=Zu(t,n,0,!0);n-2*p-(o-1)*s<=0&&(s=0);var f=(n-2*p-(o-1)*s)/o;f>1&&(f>>=0);var g=xb(a)?Math.min(f,a):f;i=r.reduce((e,t,n)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:p+(f+s)*n+(f-g)/2,size:g}}],u)}return i}}(n,r,a!==o?a:o,e,s);return a!==o&&null!=u&&(u=u.map(e=>GO(GO({},e),{},{position:GO(GO({},e.position),{},{offset:e.position.offset-a/2})}))),u}),eR=Uh([$O,qO],(e,t)=>{if(null!=e){var n=e.find(e=>e.stackId===t.stackId&&e.dataKeys.includes(t.dataKey));if(null!=n)return n.position}}),tR=Uh([Mx,qO],(e,t)=>{if(e.some(e=>"bar"===e.type&&t.dataKey===e.dataKey&&t.stackId===e.stackId&&t.stackId===e.stackId))return t}),nR=Uh([(e,t,n,r)=>"horizontal"===af(e)?Jx(e,"yAxis",n,r):Jx(e,"xAxis",t,r),qO],(e,t)=>{if(e&&null!=(null===t||void 0===t?void 0:t.dataKey)){var{stackId:n}=t;if(null!=n){var r=e[n];if(r){var{stackedData:a}=r;if(a)return a.find(e=>e.key===t.dataKey)}}}}),rR=Uh([Gp,(e,t,n,r)=>iD(e,"xAxis",t,r),(e,t,n,r)=>iD(e,"yAxis",n,r),(e,t,n,r)=>oD(e,"xAxis",t,r),(e,t,n,r)=>oD(e,"yAxis",n,r),eR,af,bb,JO,nR,tR,(e,t,n,r,a,o)=>o],(e,t,n,r,a,o,i,s,u,l,c,d)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:f}=s;if(null!=c&&null!=o&&("horizontal"===i||"vertical"===i)&&null!=t&&null!=n&&null!=r&&null!=a&&null!=u){var g,{data:m}=c;if(null!=(g=null!=m&&m.length>0?m:null===h||void 0===h?void 0:h.slice(p,f+1)))return function(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:a,bandSize:o,xAxis:i,yAxis:s,xAxisTicks:u,yAxisTicks:l,stackedData:c,displayedData:d,offset:h,cells:p}=e,f="horizontal"===t?s:i,g=c?f.scale.domain():null,m=(e=>{var{numericAxis:t}=e,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]})({numericAxis:f});return d.map((e,d)=>{var f,y,v,b,x,w;c?f=((e,t)=>{if(!t||2!==t.length||!qu(t[0])||!qu(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!qu(e[0])||e[0]<n)&&(a[0]=n),(!qu(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a})(c[d],g):(f=xp(e,n),Array.isArray(f)||(f=[m,f]));var D=jO(r,vR)(f[1],d);if("horizontal"===t){var k,[C,E]=[s.scale(f[0]),s.scale(f[1])];y=Ip({axis:i,ticks:u,bandSize:o,offset:a.offset,entry:e,index:d}),v=null!==(k=null!==E&&void 0!==E?E:C)&&void 0!==k?k:void 0,b=a.size;var S=C-E;if(x=Gu(S)?0:S,w={x:y,y:h.top,width:b,height:h.height},Math.abs(D)>0&&Math.abs(x)<Math.abs(D)){var A=Hu(x||D)*(Math.abs(D)-Math.abs(x));v-=A,x+=A}}else{var[F,I]=[i.scale(f[0]),i.scale(f[1])];if(y=F,v=Ip({axis:s,ticks:l,bandSize:o,offset:a.offset,entry:e,index:d}),b=I-F,x=a.size,w={x:h.left,y:v,width:h.width,height:x},Math.abs(D)>0&&Math.abs(b)<Math.abs(D))b+=Hu(b||D)*(Math.abs(D)-Math.abs(b))}return lR(lR({},e),{},{x:y,y:v,width:b,height:x,value:c?f:f[1],payload:e,background:w,tooltipPosition:{x:y+b/2,y:v+x/2}},p&&p[d]&&p[d].props)})}({layout:i,barSettings:c,pos:o,bandSize:u,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:a,stackedData:l,displayedData:g,offset:e,cells:d})}}),aR=["onMouseEnter","onMouseLeave","onClick"],oR=["value","background","tooltipPosition"],iR=["onMouseEnter","onClick","onMouseLeave"];function sR(){return sR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sR.apply(null,arguments)}function uR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uR(Object(n),!0).forEach(function(t){cR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function cR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dR(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var hR=e=>{var{dataKey:t,name:n,fill:r,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:r,value:Pp(n,t),payload:e}]};function pR(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:a,name:o,hide:i,unit:s}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:a,dataKey:t,nameKey:void 0,name:Pp(o,t),hide:i,type:e.tooltipType,color:e.fill,unit:s}}}function fR(e){var t=Zh(ok),{data:n,dataKey:r,background:a,allOtherBarProps:o}=e,{onMouseEnter:i,onMouseLeave:s,onClick:l}=o,c=dR(o,aR),d=zO(i,r),h=WO(s),p=UO(l,r);if(!a||null==n)return null;var f=aE(a,!1);return u.createElement(u.Fragment,null,n.map((e,n)=>{var{value:o,background:i,tooltipPosition:s}=e,l=dR(e,oR);if(!i)return null;var g=d(e,n),m=h(e,n),y=p(e,n),v=lR(lR(lR(lR(lR({option:a,isActive:String(n)===t},l),{},{fill:"#eee"},i),f),ZC(c,e,n)),{},{onMouseEnter:g,onMouseLeave:m,onClick:y,dataKey:r,index:n,className:"recharts-bar-background-rectangle"});return u.createElement(LO,sR({key:"background-bar-".concat(n)},v))}))}function gR(e){var{data:t,props:n,showLabels:r}=e,a=aE(n,!1),{shape:o,dataKey:i,activeBar:s}=n,l=Zh(ok),c=Zh(sk),{onMouseEnter:d,onClick:h,onMouseLeave:p}=n,f=dR(n,iR),g=zO(d,i),m=WO(p),y=UO(h,i);return t?u.createElement(u.Fragment,null,t.map((e,t)=>{var n=s&&String(t)===l&&(null==c||i===c),r=n?s:o,d=lR(lR(lR({},a),e),{},{isActive:n,option:r,index:t,dataKey:i});return u.createElement(sS,sR({className:"recharts-bar-rectangle"},ZC(f,e,t),{onMouseEnter:g(e,t),onMouseLeave:m(e,t),onClick:y(e,t),key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(t)}),u.createElement(LO,d))}),r&&cT.renderCallByParent(n,t)):null}function mR(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:a,isAnimationActive:o,animationBegin:i,animationDuration:s,animationEasing:l,onAnimationEnd:c,onAnimationStart:d}=t,h=n.current,p=XT(t,"recharts-bar-"),[f,g]=(0,u.useState)(!1),m=(0,u.useCallback)(()=>{"function"===typeof c&&c(),g(!1)},[c]),y=(0,u.useCallback)(()=>{"function"===typeof d&&d(),g(!0)},[d]);return u.createElement(TI,{begin:i,duration:s,isActive:o,easing:l,from:{t:0},to:{t:1},onAnimationEnd:m,onAnimationStart:y,key:p},e=>{var{t:o}=e,i=1===o?r:r.map((e,t)=>{var n=h&&h[t];if(n){var r=$u(n.x,e.x),i=$u(n.y,e.y),s=$u(n.width,e.width),u=$u(n.height,e.height);return lR(lR({},e),{},{x:r(o),y:i(o),width:s(o),height:u(o)})}if("horizontal"===a){var l=$u(0,e.height)(o);return lR(lR({},e),{},{y:e.y+e.height-l,height:l})}var c=$u(0,e.width)(o);return lR(lR({},e),{},{width:c})});return o>0&&(n.current=i),u.createElement(sS,null,u.createElement(gR,{props:t,data:i,showLabels:!f}))})}function yR(e){var{data:t,isAnimationActive:n}=e,r=(0,u.useRef)(null);return n&&t&&t.length&&(null==r.current||r.current!==t)?u.createElement(mR,{previousRectanglesRef:r,props:e}):u.createElement(gR,{props:e,data:t,showLabels:!0})}var vR=0,bR=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:xp(e,t)}};class xR extends u.PureComponent{constructor(){super(...arguments),cR(this,"id",Qu("recharts-bar-"))}render(){var{hide:e,data:t,dataKey:n,className:r,xAxisId:a,yAxisId:o,needClip:i,background:s,id:l,layout:c}=this.props;if(e)return null;var d=ju("recharts-bar",r),h=tl(l)?this.id:l;return u.createElement(sS,{className:d},i&&u.createElement("defs",null,u.createElement(LT,{clipPathId:h,xAxisId:a,yAxisId:o})),u.createElement(sS,{className:"recharts-bar-rectangles",clipPath:i?"url(#clipPath-".concat(h,")"):null},u.createElement(fR,{data:t,dataKey:n,background:s,allOtherBarProps:this.props}),u.createElement(yR,this.props)),u.createElement(FT,{direction:"horizontal"===c?"y":"x"},this.props.children))}}var wR={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!WE,legendType:"rect",minPointSize:vR,xAxisId:0,yAxisId:0};function DR(e){var t,{xAxisId:n,yAxisId:r,hide:a,legendType:o,minPointSize:i,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:h}=_E(e,wR),{needClip:p}=BT(n,r),f=of(),g=Yp(),m=(0,u.useMemo)(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:Ap(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),y=nE(e.children,yO),v=Zh(e=>rR(e,n,r,g,m,y));if("vertical"!==f&&"horizontal"!==f)return null;var b=null===v||void 0===v?void 0:v[0];return t=null==b||null==b.height||null==b.width?0:"vertical"===f?b.height/2:b.width/2,u.createElement(xT,{xAxisId:n,yAxisId:r,data:v,dataPointFormatter:bR,errorBarOffset:t},u.createElement(xR,sR({},e,{layout:f,needClip:p,data:v,xAxisId:n,yAxisId:r,hide:a,legendType:o,minPointSize:i,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:h})))}class kR extends u.PureComponent{render(){return u.createElement(wT,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},u.createElement(VO,null),u.createElement(qT,{legendPayload:hR(this.props)}),u.createElement(MT,{fn:pR,args:this.props}),u.createElement(DR,this.props))}}cR(kR,"displayName","Bar"),cR(kR,"defaultProps",wR);const CR=e=>{let{logs:t,drains:n,isDark:r}=e;const a=(0,u.useMemo)(()=>{const e=t.reduce((e,t)=>{const r=new Date(t.date).toISOString().split("T")[0];e[r]||(e[r]={date:r});const a=n.find(e=>e.id===t.drainId);return a&&(e[r][a.name]=(e[r][a.name]||0)+parseFloat(t.amount)),e},{});return Object.values(e).sort((e,t)=>new Date(e.date)-new Date(t.date))},[t,n]),o=["#8884d8","#82ca9d","#ffc658","#ff7300","#00C49F","#FFBB28"];return t.length<2?(0,v.jsx)("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Log more data to see the chart."}):(0,v.jsxs)("div",{className:"w-full",children:[(0,v.jsx)("div",{style:{height:400},children:(0,v.jsx)(sl,{children:(0,v.jsxs)(zE,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[(0,v.jsx)(pA,{strokeDasharray:"3 3",stroke:r?"#4A5568":"#E2E8F0"}),(0,v.jsx)(DA,{dataKey:"date",stroke:r?"#A0AEC0":"#4A5568"}),(0,v.jsx)(NA,{label:{value:"cc",angle:-90,position:"insideLeft"},stroke:r?"#A0AEC0":"#4A5568"}),(0,v.jsx)(oN,{contentStyle:{backgroundColor:r?"#2D3748":"#FFFFFF",border:"1px solid #4A5568"}}),(0,v.jsx)(ZN,{wrapperStyle:{color:r?"#A0AEC0":"#4A5568"}}),n.map((e,t)=>(0,v.jsx)(fO,{type:"monotone",dataKey:e.name,stroke:o[t%o.length],activeDot:{r:8}},e.id))]})})}),(0,v.jsx)("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Daily total output for each drain over time."})]})},ER=e=>{let{logs:t,drains:n,isDark:r}=e;const a=(0,u.useMemo)(()=>{const e=new Date,r=new Date(e.getTime()-6048e5);return n.map(e=>{const n=t.filter(t=>t.drainId===e.id&&new Date(t.date)>=r),a=n.reduce((e,t)=>e+parseFloat(t.amount),0);return{name:e.name,total:a}})},[t,n]),o=["#8884d8","#82ca9d","#ffc658","#ff7300","#00C49F","#FFBB28"];return 0===t.length?(0,v.jsx)("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Log data to see the chart."}):(0,v.jsxs)("div",{className:"w-full",children:[(0,v.jsx)("div",{style:{height:400},children:(0,v.jsx)(sl,{children:(0,v.jsxs)(mO,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[(0,v.jsx)(pA,{strokeDasharray:"3 3",stroke:r?"#4A5568":"#E2E8F0"}),(0,v.jsx)(DA,{dataKey:"name",stroke:r?"#A0AEC0":"#4A5568"}),(0,v.jsx)(NA,{label:{value:"cc",angle:-90,position:"insideLeft"},stroke:r?"#A0AEC0":"#4A5568"}),(0,v.jsx)(oN,{itemStyle:{color:r?"white":"black"},contentStyle:{backgroundColor:r?"#2D3748":"#FFFFFF",border:"1px solid #4A5568"}}),(0,v.jsx)(kR,{dataKey:"total",children:a.map((e,t)=>(0,v.jsx)(yO,{fill:o[t%o.length]},"cell-".concat(t)))})]})})}),(0,v.jsx)("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Total output for each drain over the last 7 days."})]})};class SR{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class AR{refCount(e){return FR("refCount")}incRef(e){return FR("incRef")}timerAvailable(){return!0}time(e){return FR("time")}read(e){return FR("read")}readSync(e){return FR("readSync")}readToGPU(e,t){return FR("readToGPU")}numDataIds(){return FR("numDataIds")}disposeData(e,t){return FR("disposeData")}write(e,t,n){return FR("write")}move(e,t,n,r,a){return FR("move")}createTensorFromGPUData(e,t,n){return FR("createTensorFromGPUData")}memory(){return FR("memory")}floatPrecision(){return FR("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return FR("dispose")}}function FR(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function IR(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,OR(e,t,n)}function NR(e,t,n){return Math.max(e,Math.min(t,n))}function TR(e){return e%2===0?e:e+1}function OR(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function RR(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function _R(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";RR(BR(e,t),()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}function PR(e){RR(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function MR(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function BR(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function LR(e){return e%1===0}function jR(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function zR(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function WR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((a,o)=>{let i=0;const s=()=>{if(e())return void a();i++;const u=t(i);null!=n&&i>=n?o():null!=r?r(s,u):setTimeout(s,u)};s()})}function UR(e,t){let n=1,r=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(o));r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found ".concat(e[o]," at dim ").concat(o));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const a=e.slice();return a[r]=t/n,a}function VR(e,t){const n=t.length;return RR((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)),RR(e.every(e=>LR(e)),()=>"All values in axis param must be integers but "+"got axis ".concat(e)),e.map(e=>e<0?n+e:e)}function HR(e,t){const n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:VR(t,e).sort();let i=0;for(let s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function GR(e,t){return KR(e,t)}function KR(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function qR(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function XR(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function YR(e){return"string"===typeof e||e instanceof String}function QR(e){return"number"===typeof e}function ZR(e){return Array.isArray(e)?ZR(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":QR(e)?"float32":YR(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function JR(e){return!!(e&&e.constructor&&e.call&&e.apply)}function $R(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function e_(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function t_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=new Array;if(1===t.length){const o=t[0]*(r?2:1);for(let t=0;t<o;t++)a[t]=n[e+t]}else{const o=t[0],i=t.slice(1),s=i.reduce((e,t)=>e*t)*(r?2:1);for(let t=0;t<o;t++)a[t]=t_(e+t*s,i,n,r)}return a}function n_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return t_(0,e,t,n)}function r_(e,t){const n=a_(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function a_(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function o_(e,t){const n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return n_(e,new Float32Array(n));if("int32"===t)return n_(e,new Int32Array(n));if("bool"===t)return n_(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function i_(e){e.forEach(t=>{RR(Number.isInteger(t)&&t>=0,()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"]."))})}function s_(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function u_(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function l_(e){return e&&e.then&&"function"===typeof e.then}const c_="tfjsflags";class d_{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=h_,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(p_().getBool("IS_TEST")||p_().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];p_().getBool("IS_TEST")||p_().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(l_(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(c_ in e){e[c_].split(",").forEach(e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)})}}}function h_(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")}),t}function p_(){return g_}let f_,g_=null;function m_(){if(null==f_){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}f_=e}return f_}function y_(e,t){const n=function(){const e=m_();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const v_="Abs",b_="Acos",x_="Acosh",w_="Add",D_="AddN",k_="All",C_="Any",E_="ArgMax",S_="ArgMin",A_="Asin",F_="Asinh",I_="Atan",N_="Atanh",T_="Atan2",O_="AvgPool",R_="AvgPoolGrad",__="AvgPool3D",P_="AvgPool3DGrad",M_="BatchMatMul",B_="BatchToSpaceND",L_="Bincount",j_="BitwiseAnd",z_="BroadcastArgs",W_="Cast",U_="Ceil",V_="ClipByValue",H_="Complex",G_="ComplexAbs",K_="Concat",q_="Conv2D",X_="Conv2DBackpropFilter",Y_="Conv2DBackpropInput",Q_="Conv3D",Z_="Conv3DBackpropFilterV2",J_="Conv3DBackpropInputV2",$_="Cos",eP="Cosh",tP="Cumprod",nP="Cumsum",rP="CropAndResize",aP="DenseBincount",oP="DepthToSpace",iP="DepthwiseConv2dNative",sP="DepthwiseConv2dNativeBackpropFilter",uP="DepthwiseConv2dNativeBackpropInput",lP="Diag",cP="Dilation2D",dP="Dilation2DBackpropInput",hP="Dilation2DBackpropFilter",pP="Draw",fP="RealDiv",gP="Einsum",mP="Elu",yP="EluGrad",vP="Erf",bP="Equal",xP="Exp",wP="ExpandDims",DP="Expm1",kP="FFT",CP="Fill",EP="FlipLeftRight",SP="Floor",AP="FloorDiv",FP="FusedBatchNorm",IP="GatherV2",NP="GatherNd",TP="Greater",OP="GreaterEqual",RP="Identity",_P="IFFT",PP="Imag",MP="IsFinite",BP="IsInf",LP="IsNan",jP="LeakyRelu",zP="Less",WP="LessEqual",UP="LinSpace",VP="Log",HP="Log1p",GP="LogicalAnd",KP="LogicalNot",qP="LogicalOr",XP="LRN",YP="LRNGrad",QP="Max",ZP="Maximum",JP="MaxPool",$P="MaxPoolGrad",eM="MaxPool3D",tM="MaxPool3DGrad",nM="MaxPoolWithArgmax",rM="Mean",aM="Min",oM="Minimum",iM="MirrorPad",sM="Mod",uM="Multinomial",lM="Multiply",cM="Neg",dM="NotEqual",hM="NonMaxSuppressionV3",pM="NonMaxSuppressionV4",fM="NonMaxSuppressionV5",gM="OnesLike",mM="OneHot",yM="Pack",vM="PadV2",bM="Pow",xM="Prelu",wM="Prod",DM="RaggedGather",kM="RaggedRange",CM="RaggedTensorToTensor",EM="Range",SM="Real",AM="Reciprocal",FM="Relu",IM="Reshape",NM="ResizeNearestNeighbor",TM="ResizeNearestNeighborGrad",OM="ResizeBilinear",RM="ResizeBilinearGrad",_M="Relu6",PM="Reverse",MM="Round",BM="Rsqrt",LM="ScatterNd",jM="TensorScatterUpdate",zM="SearchSorted",WM="Select",UM="Selu",VM="Slice",HM="Sin",GM="Sinh",KM="Sign",qM="Sigmoid",XM="Softplus",YM="Sqrt",QM="Sum",ZM="SpaceToBatchND",JM="SplitV",$M="Softmax",eB="SparseFillEmptyRows",tB="SparseReshape",nB="SparseSegmentMean",rB="SparseSegmentSum",aB="SparseToDense",oB="SquaredDifference",iB="Square",sB="StaticRegexReplace",uB="StridedSlice",lB="StringNGrams",cB="StringSplit",dB="StringToHashBucketFast",hB="Sub",pB="Tan",fB="Tanh",gB="Tile",mB="TopK",yB="Transform",vB="Transpose",bB="Unique",xB="Unpack",wB="UnsortedSegmentSum",DB="ZerosLike",kB="Step",CB="FromPixels",EB="RotateWithOffset",SB="_FusedMatMul",AB="FusedConv2D",FB="FusedDepthwiseConv2D";function IB(){p_().getBool("IS_TEST")||p_().getBool("PROD")||console.warn(...arguments)}function NB(){p_().getBool("IS_TEST")||p_().getBool("PROD")||console.log(...arguments)}const TB=y_("kernelRegistry",()=>new Map),OB=y_("gradRegistry",()=>new Map);function RB(e,t){const n=LB(e,t);return TB.get(n)}function _B(e){return OB.get(e)}function PB(e){const t=TB.entries(),n=[];for(;;){const{done:r,value:a}=t.next();if(r)break;const[o,i]=a,[s]=o.split("_");s===e&&n.push(i)}return n}function MB(e){const{kernelName:t,backendName:n}=e,r=LB(t,n);TB.has(r)&&IB("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),TB.set(r,e)}function BB(e){const{kernelName:t}=e;OB.has(t)&&p_().getBool("DEBUG")&&IB("Overriding the gradient for '".concat(t,"'")),OB.set(t,e)}function LB(e,t){return"".concat(t,"_").concat(e)}function jB(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var zB=n(7353);const WB=n.n(zB)()||zB;function UB(e){return WB.fromString(e,!0,16)}const VB=UB("c3a5c85c97cb3127"),HB=UB("b492b66fbe98f273"),GB=UB("9ae16a3b2f90404f");function KB(e){return e.xor(e.shru(47))}function qB(e,t,n){const r=e.slice(t,t+n);return WB.fromBytes(Array.from(r),!0,!0)}function XB(e,t){return qB(e,t,8)}function YB(e,t){return qB(e,t,4)}function QB(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function ZB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UB("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function JB(e,t,n,r){return function(e,t,n,r,a,o){a=a.add(e),o=QB(o.add(a).add(r),21);const i=a;return a=(a=a.add(t)).add(n),o=o.add(QB(a,44)),[a.add(r),o.add(i)]}(XB(e,t),XB(e,t+8),XB(e,t+16),XB(e,t+24),n,r)}function $B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=WB.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=GB.add(2*t),r=XB(e,0).add(GB),a=XB(e,t-8);return ZB(QB(a,37).mul(n).add(r),QB(r,25).add(a).mul(n),n)}if(t>=4){const n=GB.add(2*t);return ZB(YB(e,0).shl(3).add(t),YB(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return KB(GB.mul(n).xor(VB.mul(r))).mul(GB)}return GB}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=GB.add(2*t),r=XB(e,0).mul(HB),a=XB(e,8),o=XB(e,t-8).mul(n),i=XB(e,t-16).mul(GB);return ZB(QB(r.add(a),43).add(QB(o,30)).add(i),r.add(QB(a.add(GB),18)).add(o),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=GB.add(2*t),r=XB(e,0).mul(GB),a=XB(e,8),o=XB(e,t-8).mul(n),i=XB(e,t-16).mul(GB),s=QB(r.add(a),43).add(QB(o,30)).add(i),u=ZB(s,r.add(QB(a.add(GB),18)).add(o),n),l=XB(e,16).mul(n),c=XB(e,24),d=s.add(XB(e,t-32)).mul(n),h=u.add(XB(e,t-24)).mul(n);return ZB(QB(l.add(c),43).add(QB(d,30)).add(h),l.add(QB(c.add(r),18)).add(d),n)}(e,t);let r=n,a=n.mul(HB).add(113),o=KB(a.mul(GB).add(113)).mul(GB),i=[WB.UZERO,WB.UZERO],s=[WB.UZERO,WB.UZERO];r=r.mul(GB).add(XB(e,0));let u=0;const l=64*(t-1>>6),c=l+(t-1&63)-63;do{r=QB(r.add(a).add(i[0]).add(XB(e,u+8)),37).mul(HB),a=QB(a.add(i[1]).add(XB(e,u+48)),42).mul(HB),r=r.xor(s[1]),a=a.add(i[0]).add(XB(e,u+40)),o=QB(o.add(s[0]),33).mul(HB),i=JB(e,u,i[1].mul(HB),r.add(s[0])),s=JB(e,u+32,o.add(s[1]),a.add(XB(e,u+16))),[o,r]=[r,o],u+=64}while(u!==l);const d=HB.add(o.and(255).shl(1));return u=c,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),r=QB(r.add(a).add(i[0]).add(XB(e,u+8)),37).mul(d),a=QB(a.add(i[1]).add(XB(e,u+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(i[0].mul(9).add(XB(e,u+40))),o=QB(o.add(s[0]),33).mul(d),i=JB(e,u,i[1].mul(d),r.add(s[0])),s=JB(e,u+32,o.add(s[1]),a.add(XB(e,u+16))),[o,r]=[r,o],ZB(ZB(i[0],s[0],d).add(KB(a).mul(VB)).add(o),ZB(i[1],s[1],d).add(r),d)}function eL(e,t){return"string"===t?rL(e):tL([e],t)}function tL(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=iL(e)),p_().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function nL(){return p_().platform.now()}function rL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",p_().platform.encode(e,t)}function aL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",p_().platform.decode(e,t)}function oL(e){return null!=p_().platform.isTypedArray?p_().platform.isTypedArray(e):jB(e)}function iL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||l_(e)||null==e||oL(e)&&n)t.push(e);else if(Array.isArray(e)||oL(e))for(let r=0;r<e.length;++r)iL(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let a=0;a<=r;a++)iL(e[a],t,n)}return t}class sL{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new lL)}profileKernel(e,t,n){let r;const a=()=>{r=n()};let o;const i=nL();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{a();for(const e of r)e.dataSync();o=Promise.resolve({kernelMs:nL()-i})}if(p_().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const t=r[s];t.data().then(n=>{uL(n,t.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:o.then(e=>e.kernelMs),extraInfo:o.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:o}=e;n.forEach(e=>{Promise.all([e.data(),r,o]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])})})}}function uL(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class lL{logKernelProfile(e,t,n,r,a,o){const i="number"===typeof r?zR("".concat(r,"ms"),9):r.error,s=zR(e,25),u=t.rank,l=t.size,c=zR(t.shape.toString(),14);let d="";for(const h in a){const e=a[h];if(null!=e){const n=e.shape||t.shape,r=n.length;d+="".concat(h,": ").concat(r,"D ").concat(r>0?n:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(c,"\t%c").concat(l,"\t%c").concat(d,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function cL(e,t,n,r){const a=e_(t),o=function(e,t,n,r){const a=MR(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?fL(e):e;if(s>1)for(let l=0;l<a/o;l++){const e=l*o;for(let t=0;t<o;t++)i[t]=Math.max(i[t],dL(u[e+t],0,n).length)}return i}(e,t,n,a),i=t.length,s=pL(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map(e=>"    "+e).join("\n")),u.join("\n")}function dL(e,t,n){let r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):YR(e)?"'".concat(e,"'"):"bool"===n?hL(e):parseFloat(e.toFixed(7)).toString(),zR(r,t)}function hL(e){return 0===e?"false":"true"}function pL(e,t,n,r,a){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){return[dL(fL(e)[0],0,n)]}return"bool"===n?[hL(e[0])]:[e[0].toString()]}if(1===u){if(s>20){const t=3*i;let r=Array.from(e.slice(0,t)),o=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(r=fL(r),o=fL(o)),["["+r.map((e,t)=>dL(e,a[t],n)).join(", ")+", ..., "+o.map((e,t)=>dL(e,a[s-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?fL(e):Array.from(e)).map((e,t)=>dL(e,a[t],n)).join(", ")+"]"]}const l=t.slice(1),c=r.slice(1),d=r[0]*i,h=[];if(s>20){for(let t=0;t<3;t++){const r=t*d,o=r+d;h.push(...pL(e.slice(r,o),l,n,c,a,!1))}h.push("...");for(let t=s-3;t<s;t++){const r=t*d,o=r+d;h.push(...pL(e.slice(r,o),l,n,c,a,t===s-1))}}else for(let g=0;g<s;g++){const t=g*d,r=t+d;h.push(...pL(e.slice(t,r),l,n,c,a,g===s-1))}const p=2===u?",":"";h[0]="["+(s>0?h[0]+p:"");for(let g=1;g<h.length-1;g++)h[g]=" "+h[g]+p;let f=",\n";for(let g=2;g<u;g++)f+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(o?"":f),h}function fL(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class gL{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=MR(e),null!=n){const e=n.length;RR(e===this.size,()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'."))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||KR(t,this.size),this.strides=e_(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),RR(n.length===this.rank,()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")"));const a=this.locToIndex(n);this.values[a]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const o of t){if(o<0||o>=this.shape[r]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}r++}let a=t[t.length-1];for(let o=0;o<t.length-1;++o)a+=this.strides[o]*t[o];return this.values[a]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return mL().makeTensor(this.values,this.shape,this.dtype)}}let mL=null,yL=null,vL=null;class bL{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=MR(e),this.strides=e_(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return yL.buffer(this.shape,this.dtype,e)}bufferSync(){return yL.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return n_(this.shape,e,"complex64"===this.dtype)}arraySync(){return n_(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=mL().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map(e=>aL(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),mL().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=mL().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>aL(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await mL().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),mL().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return yL.print(this,e)}clone(){return this.throwIfDisposed(),yL.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return cL(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),yL.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),mL().makeVariable(this,e,t,n)}}function xL(){return y_("Tensor",()=>bL)}Object.defineProperty(bL,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),xL();class wL extends bL{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!BR(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));mL().disposeTensor(this),this.dataId=e.dataId,mL().incRef(this,null)}dispose(){mL().disposeVariable(this),this.isDisposedInternal=!0}}var DL,kL,CL,EL,SL;Object.defineProperty(wL,Symbol.hasInstance,{value:e=>e instanceof bL&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(DL||(DL={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(kL||(kL={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(CL||(CL={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(EL||(EL={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(SL||(SL={}));const AL={float32:EL,int32:kL,bool:CL,complex64:SL};function FL(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return AL[e][t]}function IL(e){return FL(e,"int32")}function NL(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function TL(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function OL(e,t){if(e.dtype===t.dtype)return[e,t];const n=FL(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function RL(e,t){return t.some(t=>t.id===e.id)}function _L(e){const t=[];return PL(e,t,new Set),t}function PL(e,t,n){if(null==e)return;if(e instanceof bL)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const a=e;for(const o in a){const e=a[o];n.has(e)||(n.add(e),PL(e,t,n))}}function ML(e){return null!=e.kernelName}class BL{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class LL{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new BL}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(IB("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new sL(this.backendInstance),!0}setupRegisteredKernels(){PB(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){PB(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof AR||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,IB("Initialization of backend ".concat(e," failed")),IB(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return IB("Initialization of backend ".concat(e," failed")),IB(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return LL.nextTensorId++}nextVariableId(){return LL.nextVariableId++}clone(e){const t=zL.runKernel(RP,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],e=>({x:()=>{const t={x:e},n={dtype:"float32"};return zL.runKernel(W_,t,n)}}),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=RB(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),a=this.state.numBytes,o=this.state.numTensors;let i,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const u=ML(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(ML(e)){const{kernelName:t,inputs:a,attrs:o}=e;null==this.backendName&&this.backend;const u=RB(t,this.backendName);RR(null!=u,()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'")),i=()=>{const e=this.backend.numDataIds();s=u.kernelFunc({inputs:a,attrs:o,backend:this.backend});const i=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const l=i.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(r){const e=this.getTensorsForGradient(t,a,l);n=this.saveTensorsForBackwardMode(e)}return l}}else{const{forwardFunc:t}=e,a=e=>{r&&(n=e.map(e=>this.keep(this.clone(e))))};i=()=>{const e=this.backend.numDataIds();s=this.tidy(()=>t(this.backend,a));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,e,n),n}}const{inputs:l,attrs:c}=e,d=ML(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(h=this.profiler.profileKernel(u,l,()=>i()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs):t=i()}),r&&this.addTapeNode(u,l,t,d,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map(e=>null!=l[e]?l[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){const r=_B(e);if(null!=r){const e=r.inputsToSave||[],a=r.outputsToSave||[];let o;r.saveAllInputs?(RR(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(t).map(e=>t[e])):o=e.map(e=>t[e]);const i=n.filter((e,t)=>a[t]);return o.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;"string"===n&&YR(e[0])&&(a=e.map(e=>rL(e)));const o=r.write(a,t,n),i=new bL(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){const e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){const a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:a}=e,o=new bL(r,a,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const a=new wL(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*XR(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof wL||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*XR(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,o){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},s=_B(e);null!=s&&(r=s.gradFunc),null!=r&&(i.gradient=e=>(e=e.map((e,t)=>{if(null==e){const e=n[t],r=a_(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],a,o))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=_L(e),n=new Set(t.map(e=>e.id));for(let a=0;a<this.state.activeScope.track.length;a++){const e=this.state.activeScope.track[a];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(RR(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));RR(a instanceof bL,()=>"The result y returned by f() must be a tensor.");const o=function(e,t,n){const r={},a={};for(let u=0;u<t.length;u++)r[t[u].id]=!0;for(let u=0;u<e.length;u++){const n=e[u],o=n.inputs;for(const e in o){const i=o[e];let s=!1;for(let e=0;e<t.length;e++)if(r[i.id]){n.outputs.forEach(e=>r[e.id]=!0),s=!0,a[n.id]=!0;break}if(s)break}}const o={};o[n.id]=!0;const i={};for(let u=e.length-1;u>=0;u--){const t=e[u],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,i[t.id]=!0;break}}const s=[];for(let u=0;u<e.length;u++){const t=e[u];if(a[t.id]&&i[t.id]){const e={};for(const a in t.inputs){const n=t.inputs[a];r[n.id]&&(e[a]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,a);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[a.id]=null==n?function(e){const t=r_(MR(e),"float32");return zL.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){const o=t[a],i=[];if(o.outputs.forEach(t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)}),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));const s=o.gradient(i);for(const t in o.inputs){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));const a=n(()=>s[t]());if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));const i=o.inputs[t];if(!BR(a.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=a;else{const t=e[i.id];e[i.id]=r(t,a),t.dispose()}}}}(e,o,e=>this.tidy(e),WL);const r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:r}})}customGrad(e){var t=this;return RR(JR(e),()=>"The f passed in customGrad(f) must be a function."),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];let o;RR(r.every(e=>e instanceof bL),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const i={};r.forEach((e,t)=>{i[t]=e});return t.runKernelFunc({forwardFunc:(t,n)=>(o=e(...r,n),RR(o.value instanceof bL,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),RR(JR(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),backwardsFunc:(e,t)=>{const n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];RR(a.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),RR(a.every(e=>e instanceof bL),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const i={};return a.forEach((e,t)=>{i[t]=()=>e}),i},inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=nL(),n=await this.backend.time(e);return n.wallMs=nL()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new BL;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function jL(){const e=m_();if(null==e._tfengine){const t=new d_(e);e._tfengine=new LL(t)}var t;return t=e._tfengine.ENV,g_=t,mL=()=>e._tfengine,e._tfengine}LL.nextTensorId=0,LL.nextVariableId=0;const zL=jL();function WL(e,t){const n={a:e,b:t};return zL.runKernel(w_,n)}let UL;function VL(e){if(void 0!==UL)return UL;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function HL(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const GL=p_();function KL(e,t){let n=e;if(oL(e))return"string"===t?[]:[e.length];if(NL(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(TL(e))return[e.buffer.size/(null==t?4:XR(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||oL(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&p_().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&qL(e,r,[]),r}function qL(e,t,n){if(n=n||[],!Array.isArray(e)&&!oL(e))return void RR(0===t.length,()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements"));RR(t.length>0,()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")),RR(e.length===t[0],()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements"));const r=t.slice(1);for(let a=0;a<e.length;++a)qL(e[a],r,n.concat(a))}function XL(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function YL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof xL())return XL(r,e.dtype,t,n),e;let a=ZR(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),XL(r,a,t,n),null==e||!oL(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(r,"'"))}const o=KL(e,a);oL(e)||Array.isArray(e)||(e=[e]);const i="string"!==a?tL(e,a):iL(e,[],!0);return zL.makeTensor(i,o,a)}function QL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((e,a)=>YL(e,"".concat(t,"[").concat(a,"]"),n,r))}GL.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),GL.registerFlag("IS_BROWSER",()=>HL()),GL.registerFlag("IS_NODE",()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node),GL.registerFlag("IS_CHROME",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),GL.registerFlag("IS_SAFARI",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),GL.registerFlag("PROD",()=>!1),GL.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>GL.getBool("DEBUG")),GL.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),GL.registerFlag("IS_TEST",()=>!1),GL.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>GL.getBool("DEBUG")),GL.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),GL.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),GL.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function ZL(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const a=function(){zL.startScope(n);try{const e=r(...arguments);return l_(e)&&console.error("Cannot return a Promise inside of tidy."),zL.endScope(e),e}catch(e){throw zL.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}const JL=ZL({complex_:function(e,t){const n=YL(e,"real","complex"),r=YL(t,"imag","complex");_R(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");const a={real:n,imag:r};return zL.runKernel(H_,a)}});function $L(e,t,n,r){if(null==r)r=ZR(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(TL(e)||NL(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return zL.backend.createTensorFromGPUData(e,t||n,r)}if(!oL(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){i_(t);const e=MR(t),r=MR(n);RR(e===r,()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(r));for(let a=0;a<n.length;++a){const e=n[a],r=a!==n.length-1||e!==MR(t.slice(a));RR(n[a]===t[a]||!r,()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). "))}}return oL(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?tL(e,r):iL(e,[],!0),zL.makeTensor(e,t,r)}function ej(e,t,n){return $L(e,t,KL(e,n),n)}class tj{static join(e){return new tj(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map(e=>oL(e)?e.buffer:e)).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=t+r.byteLength;this.shards.push({buffer:r,start:t,end:a}),t=a}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const r=new ArrayBuffer(t-e),a=new Uint8Array(r);let o=0;for(let i=n;i<this.shards.length;i++){const n=this.shards[i],r=e+o-n.start,s=o,u=Math.min(t,n.end)-n.start,l=new Uint8Array(n.buffer,r,u-r);if(a.set(l,s),o+=l.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const a=Math.floor((r-n)/2)+n,o=t(e[a]);if(0===o)return a;o<0?r=a:n=a+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function nj(){return zL}function rj(){return zL.memory()}function aj(e,t){return zL.tidy(e,t)}function oj(e){_L(e).forEach(e=>e.dispose())}function ij(e){return zL.keep(e)}function sj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return zL.registerBackend(e,t,n)}function uj(){return zL.backend}vL=function(e){p_().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};async function lj(e,t){const n=[],r=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let o=0;o<a.length;++o){const i=a[o],s=Array.isArray(e)?e[o].tensor:e[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(s.dtype));const u={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise(async e=>{const t=await s.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,r=new Uint8Array(n);let a=0;for(let o=0;o<t.length;o++){const e=t[o],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,a),a+=4,r.set(e,a),a+=e.length}e(r)});r.push(e)}else r.push(s.data());null!=t&&(u.group=t),n.push(u)}return{data:cj(await Promise.all(r)),specs:n}}function cj(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))});const r=new Uint8Array(t);let a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}const dj="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function hj(e){return dj?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function pj(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function fj(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),function(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}(e,n,r)}function gj(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:hj(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:hj(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new tj(e.weightData).byteLength}}function mj(e){const t=[];for(const n of e)t.push(...n.weights);return t}class yj{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==yj.instance&&(yj.instance=new yj),yj.instance}static registerSaveRouter(e){yj.getInstance().saveRouters.push(e)}static registerLoadRouter(e){yj.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return yj.getHandlers(e,"save")}static getLoadHandlers(e,t){return yj.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?yj.getInstance().loadRouters:yj.getInstance().saveRouters).forEach(t=>{const a=t(e,n);null!==a&&r.push(a)}),r}}const vj="tensorflowjs",bj="models_store",xj="model_info_store";function wj(){if(!p_().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Dj(e){const t=e.result;t.createObjectStore(bj,{keyPath:"modelPath"}),t.createObjectStore(xj,{keyPath:"modelPath"})}class kj{constructor(e){if(this.indexedDB=wj(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{const r=this.indexedDB.open(vj,1);r.onupgradeneeded=()=>Dj(r),r.onsuccess=()=>{const a=r.result;if(null==t){const t=a.transaction(bj,"readonly"),r=t.objectStore(bj).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{t.weightData=tj.join(t.weightData);const r=gj(t),i=a.transaction(xj,"readwrite");let s,u,l=i.objectStore(xj);try{s=l.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(o){return n(o)}s.onsuccess=()=>{u=a.transaction(bj,"readwrite");const s=u.objectStore(bj);let c;try{c=s.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(o){return n(o)}c.onsuccess=()=>e({modelArtifactsInfo:r}),c.onerror=e=>{l=i.objectStore(xj);const t=l.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(c.error)),t.onerror=e=>(a.close(),n(c.error))}},s.onerror=e=>(a.close(),n(s.error)),i.oncomplete=()=>{null==u?a.close():u.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)})}}kj.URL_SCHEME="indexeddb://";const Cj=e=>{return p_().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(kj.URL_SCHEME)?(t=e.slice(kj.URL_SCHEME.length),new kj(t)):null;var t};yj.registerSaveRouter(Cj),yj.registerLoadRouter(Cj);class Ej{constructor(){this.indexedDB=wj()}async listModels(){return new Promise((e,t)=>{const n=this.indexedDB.open(vj,1);n.onupgradeneeded=()=>Dj(n),n.onsuccess=()=>{const r=n.result,a=r.transaction(xj,"readonly"),o=a.objectStore(xj).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(r.close(),t(o.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){var t;return e=(t=e).startsWith(kj.URL_SCHEME)?t.slice(kj.URL_SCHEME.length):t,new Promise((t,n)=>{const r=this.indexedDB.open(vj,1);r.onupgradeneeded=()=>Dj(r),r.onsuccess=()=>{const a=r.result,o=a.transaction(xj,"readwrite"),i=o.objectStore(xj),s=i.get(e);let u;s.onsuccess=()=>{if(null==s.result)return a.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const r=i.delete(e),o=()=>{u=a.transaction(bj,"readwrite");const r=u.objectStore(bj).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=o,r.onerror=e=>(o(),a.close(),n(s.error))}},s.onerror=e=>(a.close(),n(s.error)),o.oncomplete=()=>{null==u?a.close():u.oncomplete=()=>a.close()}},r.onerror=e=>n(r.error)})}}const Sj="/",Aj="tensorflowjs_models",Fj="info",Ij="model_topology",Nj="weight_specs",Tj="weight_data",Oj="model_metadata";function Rj(e){return{info:[Aj,e,Fj].join(Sj),topology:[Aj,e,Ij].join(Sj),weightSpecs:[Aj,e,Nj].join(Sj),weightData:[Aj,e,Tj].join(Sj),modelMetadata:[Aj,e,Oj].join(Sj)}}function _j(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function Pj(e){const t=e.split(Sj);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Sj)}class Mj{constructor(e){if(!p_().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Rj(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=gj(e),o=tj.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(dj)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(o));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:a}}catch(t){throw _j(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){const e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(dj){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(o),t}}Mj.URL_SCHEME="localstorage://";const Bj=e=>{return p_().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Mj.URL_SCHEME)?(t=e.slice(Mj.URL_SCHEME.length),new Mj(t)):null;var t};yj.registerSaveRouter(Bj),yj.registerLoadRouter(Bj);class Lj{constructor(){RR(p_().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),RR("undefined"===typeof window||"undefined"!==typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=Aj+Sj,n=Sj+Fj;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(n)){e[Pj(a)]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){var t;const n=Rj(e=(t=e).startsWith(Mj.URL_SCHEME)?t.slice(Mj.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const r=JSON.parse(this.LS.getItem(n.info));return _j(n),r}}const jj="://";class zj{constructor(){this.managers={}}static getInstance(){return null==zj.instance&&(zj.instance=new zj),zj.instance}static registerManager(e,t){RR(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(jj)&&(e=e.slice(0,e.indexOf(jj))),RR(e.length>0,()=>"scheme must not be an empty string.");const n=zj.getInstance();RR(null==n.managers[e],()=>"A model store manager is already registered for scheme '".concat(e,"'.")),n.managers[e]=t}static getManager(e){const t=zj.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(zj.getInstance().managers)}}class Wj{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&p_().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))):setTimeout(e,t)}isTypedArray(e){return jB(e)}}if(p_().get("IS_BROWSER")){p_().setPlatform("browser",new Wj);try{zj.registerManager(Mj.URL_SCHEME,new Lj)}catch(sde){}try{zj.registerManager(kj.URL_SCHEME,new Ej)}catch(sde){}}const Uj=()=>n(5817);let Vj;class Hj{constructor(){this.util=n(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=p_().global.fetch?p_().global.fetch(e,t):(null==Vj&&(Vj=Uj()),Vj(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function Gj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",i_(e),new gL(e,t,n)}p_().get("IS_NODE")&&!p_().get("IS_BROWSER")&&p_().setPlatform("node",new Hj);const Kj=ZL({cast_:function(e,t){const n=YL(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:t};return zL.runKernel(W_,r,a)}});const qj=ZL({clone_:function(e){const t={x:YL(e,"x","clone","string_or_numeric")};return zL.runKernel(RP,t)}});jL();const Xj={buffer:Gj,cast:Kj,clone:qj,print:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};yL=Xj;const Yj=ZL({add_:function(e,t){let n=YL(e,"a","add"),r=YL(t,"b","add");[n,r]=OL(n,r);const a={a:n,b:r};return zL.runKernel(w_,a)}});const Qj=ZL({floorDiv_:function(e,t){let n=YL(e,"a","floorDiv"),r=YL(t,"b","floorDiv");[n,r]=OL(n,r);const a={a:n,b:r};return zL.runKernel(AP,a)}});const Zj=ZL({div_:function(e,t){let n=YL(e,"a","div"),r=YL(t,"b","div");if([n,r]=OL(n,r),"int32"===n.dtype&&"int32"===r.dtype)return Qj(n,r);const a={a:n,b:r};return zL.runKernel(fP,a,{})}});const Jj=ZL({mul_:function(e,t){let n=YL(e,"a","mul"),r=YL(t,"b","mul");[n,r]=OL(n,r);const a={a:n,b:r};return zL.runKernel(lM,a)}});const $j=ZL({sqrt_:function(e){const t={x:YL(e,"x","sqrt","float32")};return zL.runKernel(YM,t)}});const ez=ZL({square_:function(e){const t=YL(e,"x","square");return zL.runKernel("Square",{x:t},{})}});const tz=ZL({zerosLike_:function(e){const t={x:YL(e,"x","zerosLike")};return zL.runKernel(DB,t)}});function nz(e){return zL.customGrad(e)}function rz(e,t){if((oL(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&oL(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return $L(e,[],[],t)}const az=new Map,oz=new Map;class iz{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class sz{constructor(){this.classNameMap={}}static getMap(){return null==sz.instance&&(sz.instance=new sz),sz.instance}static register(e){sz.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function uz(e,t,n){RR(null!=e.className,()=>"Class being registered does not have the static className property defined."),RR("string"===typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),RR(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return sz.register(e),az.set(r,e),oz.set(e,r),e}class lz extends iz{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){const e=n.map(e=>({name:e.name,tensor:a[e.name]}));this.applyGradients(e)}else this.applyGradients(a);return oj(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){RR(JR(e),()=>"The f passed in variableGrads(f) must be a function"),RR(null==t||Array.isArray(t)&&t.every(e=>e instanceof wL),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const e in zL.registeredVariables)t.push(zL.registeredVariables[e])}const r=n?t.filter(e=>!e.trainable):null,a=t.length;t=t.filter(e=>e.trainable),RR(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(a," variables is ")+"trainable.");const{value:o,grads:i}=zL.gradients(e,t,null,!0);RR(i.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),RR(0===o.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(o.rank," tensor"));const s={};return t.forEach((e,t)=>{null!=i[t]&&(s[e.name]=i[t])}),null!=r&&r.forEach(e=>s[e.name]=null),{value:o,grads:s}}(e,t)}dispose(){null!=this.iterations_&&oj(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:rz(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(lz,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class cz extends lz{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=zL.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=zL.registeredVariables[t],a=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:aj(()=>tz(r).variable(a))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:aj(()=>tz(r).variable(a))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const i=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;aj(()=>{const e=Yj(Jj(i,this.rho),Jj(ez(o),1-this.rho)),t=Jj(Zj($j(Yj(s,this.epsilon)),$j(Yj(i,this.epsilon))),o),n=Yj(Jj(s,this.rho),Jj(ez(t),1-this.rho));i.assign(e),s.assign(n);const a=Yj(Jj(t,-this.learningRate),r);r.assign(a)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(oj(this.accumulatedGrads.map(e=>e.variable)),oj(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function dz(e,t,n){i_(e);const r={shape:e,value:t,dtype:n=n||ZR(t)};return zL.runKernel(CP,{},r)}class hz extends lz{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=zL.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:aj(()=>dz(r.shape,this.initialAccumulatorValue).variable(e))}}const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const o=this.accumulatedGrads[n].variable;aj(()=>{const e=Yj(o,ez(a));o.assign(e);const t=Yj(Jj(Zj(a,$j(Yj(e,zL.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&oj(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const pz=ZL({pow_:function(e,t){let n=YL(e,"base","pow"),r=YL(t,"exp","pow");[n,r]=OL(n,r);const a={a:n,b:r};return zL.runKernel(bM,a)}});const fz=ZL({sub_:function(e,t){let n=YL(e,"a","sub"),r=YL(t,"b","sub");[n,r]=OL(n,r);const a={a:n,b:r};return zL.runKernel(hB,a)}});class gz extends lz{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],aj(()=>{this.accBeta1=rz(t).variable(),this.accBeta2=rz(n).variable()}),null==r&&(this.epsilon=zL.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);aj(()=>{const n=fz(1,this.accBeta1),r=fz(1,this.accBeta2);t.forEach((t,a)=>{const o=zL.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:"".concat(t,"/m"),variable:aj(()=>tz(o).variable(i))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:"".concat(t,"/v"),variable:aj(()=>tz(o).variable(i))});const s=Array.isArray(e)?e[a].tensor:e[t];if(null==s)return;const u=this.accumulatedFirstMoment[a].variable,l=this.accumulatedSecondMoment[a].variable,c=Yj(Jj(u,this.beta1),Jj(s,1-this.beta1)),d=Yj(Jj(l,this.beta2),Jj(ez(s),1-this.beta2)),h=Zj(c,n),p=Zj(d,r);u.assign(c),l.assign(d);const f=Yj(Jj(Zj(h,Yj($j(p),this.epsilon)),-this.learningRate),o);o.assign(f)}),this.accBeta1.assign(Jj(this.accBeta1,this.beta1)),this.accBeta2.assign(Jj(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&oj(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&oj(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),aj(()=>{this.accBeta1.assign(pz(this.beta1,this.iterations_+1)),this.accBeta2.assign(pz(this.beta2,this.iterations_+1))});const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const mz=ZL({abs_:function(e){const t=YL(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return zL.runKernel(G_,e)}{const e={x:t};return zL.runKernel(v_,e)}}});function yz(e,t){const n=e.length,r=[];for(let a=0;a<n;a++){const o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function vz(e,t){const n=[];for(let r=0;r<t.length;r++){const a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function bz(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let a=0;a<n;a++){let o=e[e.length-a-1];null==o&&(o=1);let i=t[t.length-a-1];if(null==i&&(i=1),1===o)r[n-a-1]=i;else if(1===i)r[n-a-1]=o;else{if(o!==i){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}r[n-a-1]=o}}return r}const xz=ZL({maximum_:function(e,t){let n=YL(e,"a","maximum"),r=YL(t,"b","maximum");[n,r]=OL(n,r),"bool"===n.dtype&&(n=Kj(n,"int32"),r=Kj(r,"int32")),bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(ZP,a)}});class wz extends lz{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],aj(()=>{this.iteration=rz(0).variable(),this.accBeta1=rz(t).variable()}),null==r&&(this.epsilon=zL.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);aj(()=>{const n=fz(1,this.accBeta1),r=Zj(-this.learningRate,Yj(Jj(this.iteration,this.decay),1));t.forEach((t,a)=>{const o=zL.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:"".concat(t,"/m"),variable:tz(o).variable(i)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:"".concat(t,"/v"),variable:tz(o).variable(i)});const s=Array.isArray(e)?e[a].tensor:e[t];if(null==s)return;const u=this.accumulatedFirstMoment[a].variable,l=this.accumulatedWeightedInfNorm[a].variable,c=Yj(Jj(u,this.beta1),Jj(s,1-this.beta1)),d=Jj(l,this.beta2),h=mz(s),p=xz(d,h);u.assign(c),l.assign(p);const f=Yj(Jj(Zj(r,n),Zj(c,Yj(p,this.epsilon))),o);o.assign(f)}),this.iteration.assign(Yj(this.iteration,1)),this.accBeta1.assign(Jj(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&oj(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&oj(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class Dz extends lz{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);t.forEach((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const a=zL.registeredVariables[t];aj(()=>{const e=Yj(Jj(this.c,r),a);a.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=ij(rz(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class kz extends Dz{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=rz(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=zL.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:aj(()=>tz(r).variable(e))}}const a=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&aj(()=>{let e;const t=Yj(Jj(this.m,a),o);e=this.useNesterov?Yj(Jj(this.c,Yj(o,Jj(t,this.m))),r):Yj(Jj(this.c,t),r),a.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&oj(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class Cz extends lz{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=zL.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=zL.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:aj(()=>tz(r).variable(a))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:aj(()=>tz(r).variable(a))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:aj(()=>tz(r).variable(a))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const i=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;aj(()=>{const e=Yj(Jj(i,this.decay),Jj(ez(o),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,a=Yj(Jj(t,this.decay),Jj(o,1-this.decay)),u=Zj(Jj(o,this.learningRate),$j(fz(e,Yj(ez(a),this.epsilon)))),l=Yj(Jj(s,this.momentum),u);i.assign(e),t.assign(a),s.assign(l);const c=fz(r,l);r.assign(c)}else{const e=Yj(Jj(i,this.decay),Jj(ez(o),1-this.decay)),t=Yj(Jj(s,this.momentum),Zj(Jj(o,this.learningRate),$j(Yj(e,this.epsilon))));i.assign(e),s.assign(t);const n=fz(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&oj(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&oj(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&oj(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const Ez=[cz,hz,gz,wz,kz,Cz,Dz];function Sz(e){return new Promise(e=>setTimeout(e)).then(e)}class Az{constructor(e){if(!p_().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Az.URL_SCHEME)&&(e=e.slice(Az.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=tj.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=pj(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=r,await Sz(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await Sz(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:gj(e)}}}}Az.URL_SCHEME="downloads://";function Fz(e,t,n,r){!function(e){RR(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array")}(e),function(e,t){RR(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)),RR(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)),RR(t>=e,()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t))}(n=null==n?0:n,r=null==r?1:r);let a=0;return Promise.all(e.map(o=>(o.then(o=>{const i=n+ ++a/e.length*(r-n);return t(i),o}),o)))}async function Iz(e,t){null==t&&(t={});const n=null==t.fetchFunc?p_().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),a=(null==t.onProgress?await Promise.all(r):await Fz(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(a):await Fz(a,t.onProgress,.5,1)}yj.registerSaveRouter(e=>p_().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Az.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Az(e)}(e.slice(Az.URL_SCHEME.length)):null);class Nz{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(RR("function"===typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=p_().platform.fetch,RR(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&RR(2===e.length,()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,").")),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=pj(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=tj.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:gj(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(Ut){let t="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return fj(await this.loadModelJSON(),e=>this.loadWeights(e))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=mj(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?p_().platform.fetch:t.fetchFunc;let a,o=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var i;o<e.length;){if(!a){const n=(await r(e[o],t.requestInit,{isBinary:!0})).body;a=n.getReader()}const{done:s,value:u}=await a.read();if(!s)return void n.enqueue(u);o++,a=void 0,null===(i=t.onProgress)||void 0===i||i.call(t,o/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}(t),a=this.weightPathPrefix||n,o=[],i=[];for(const s of e)for(const e of s.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):o.push(a+e+r);return this.weightUrlConverter&&o.push(...await Promise.all(i)),o}async loadWeights(e){const t=await this.getWeightUrls(e);return[mj(e),await Iz(t,this.loadOptions)]}}function Tz(e){return null!=e.match(Nz.URL_SCHEME_REGEX)}Nz.URL_SCHEME_REGEX=/^https?:\/\//;const Oz=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>Tz(e)):Tz(e),n)return Rz(e,t)}return null};function Rz(e,t){return new Nz(e,t)}yj.registerSaveRouter(Oz),yj.registerLoadRouter(Oz);const _z=-2,Pz=-1;function Mz(e,t,n){const r=e.shape.length;RR(r===t.length,()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")),RR(r===n.length,()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,")."));for(let a=0;a<r;++a)RR(t[a]+n[a]<=e.shape[a],()=>"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")"))}function Bz(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Lz(e,t,n){const r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function jz(e,t,n,r){const a=[...e];for(let o=a.length;o<r.length;o++)a.push(1);for(let o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function zz(e,t,n){return n<=e?n:n-(t-1)}function Wz(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function Uz(e,t,n,r,a,o,i,s,u){const l=e.length;let c=new Array(l),d=new Array(l),h=new Array(l);if(t.length&&n>0){const u=t[0],l=n+1;c=Vz(i,u,l,r,e),d=Hz(s,u,l,a,e),h=jz(o,u,l,e)}else for(let p=0;p<l;p++)c[p]=Kz(i,r,o,e,p,u),d[p]=qz(s,a,o,e,p,u),h[p]=Gz(o,p,u);return{begin:c,end:d,strides:h}}function Vz(e,t,n,r,a){const o=[...a],i=Wz(n,t);for(let s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=0;else{const a=zz(t,n,s);let i=r[a];e&1<<a&&(i=0),o[s]=i}return o}function Hz(e,t,n,r,a){const o=[...a],i=Wz(n,t);for(let s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{const a=zz(t,n,s);let i=r[a];e&1<<a&&(i=Number.MAX_SAFE_INTEGER),o[s]=i}for(let s=0;s<o.length;s++){const e=a[s];o[s]<0&&(o[s]+=e),o[s]=NR(0,o[s],a[s])}return o}function Gz(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Kz(e,t,n,r,a,o){let i=t[a];const s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const u=r[a];return i<0&&(i+=u),i=NR(0,i,u-1),i}function qz(e,t,n,r,a,o){let i=t[a];const s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const u=r[a];return i<0&&(i+=u),i=s>0?NR(0,i,u):NR(-1,i,u-1),i}function Xz(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function Yz(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Qz(e,t,n){let r;const a=e.shape.length;let o;return r="number"===typeof t?[t,...new Array(a-1).fill(0)]:t.length<a?t.concat(new Array(a-t.length).fill(0)):t.slice(),r.forEach(e=>{RR(-1!==e,()=>"slice() does not support negative begin indexing.")}),o=null==n?new Array(a).fill(-1):"number"===typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,o=o.map((t,n)=>t>=0?t:(RR(-1===t,()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")),e.shape[n]-r[n])),[r,o]}function Zz(e,t,n,r,a,o,i,s,u){let l;if(null==r?(l=new Array(t.length),l.fill(1)):l=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u};for(let v=0;v<d.dims;v++)c&&0!==(1<<v&s)&&d.numAddAxisAfterEllipsis++,1<<v&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(_z),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(Pz),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,h);let p=!0,f=!0,g=!0;const m=[],y=[];for(let v=0;v<e.length;++v){if(0===h.strides[v])throw Error("strides[".concat(v,"] must be non-zero"));const t=!!(h.shrinkAxisMask&1<<v),n=e[v];if(-1===n){m.push(t?1:-1);continue}const r=[h.beginMask&1<<v,h.endMask&1<<v],a=[h.strides[v]>0?0:-1,h.strides[v]>0?n:n-1];if(t&&h.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===h.strides[v];const o=!!(h.beginMask&1<<v&&h.endMask&1<<v);if(h.beginValid&&h.endValid){if(t){const e=h.begin[v]<0?n+h.begin[v]:h.begin[v];if(h.begin[v]=e,h.end[v]=h.begin[v]+1,e<0||e>=n)throw Error("slice index ".concat(h.begin[v]," of dimension ").concat(v," out of bounds."))}else h.begin[v]=Jz(h.begin[v],0,h.strides[v],n,r,a),h.end[v]=Jz(h.end[v],1,h.strides[v],n,r,a);const e=1===h.strides[v]&&0===h.begin[v]&&h.end[v]===n;p=p&&e,f=f&&(0===v&&1===h.strides[v]||e)}else p=p&&1===h.strides[v]&&o,f=f&&(0===v&&1===h.strides[v]||o);let i,s=!1;if(h.beginValid&&h.endValid?(i=h.end[v]-h.begin[v],s=!0):t?(i=1,s=!0):o&&n>=0&&(i=h.strides[v]<0?-n:n,s=!0),s){let e;e=0===i||i<0!==h.strides[v]<0?0:Math.trunc(i/h.strides[v])+(i%h.strides[v]!==0?1:0),m.push(e)}else m.push(-1)}for(let v=0;v<h.finalShapeGatherIndices.length;++v){const e=h.finalShapeGatherIndices[v];e>=0?y.push(m[e]):e===_z&&y.push(1)}return{finalShapeSparse:y.filter((e,t)=>h.finalShapeGatherIndices[t]!==_z),finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:g,begin:h.begin,end:h.end,strides:h.strides}}function Jz(e,t,n,r,a,o){if(a[t])return n>0?o[t]:o[t+1&1];{const t=e<0?r+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}const $z=ZL({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:YL(e,"x","all","bool")},a={axis:t,keepDims:n};return zL.runKernel(k_,r,a)}});const eW=ZL({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:YL(e,"x","any","bool")},a={axis:t,keepDims:n};return zL.runKernel(C_,r,a)}});const tW=ZL({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:YL(e,"x","argMax")},r={axis:t};return zL.runKernel(E_,n,r)}});function nW(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return oW(e,[...t,e[3]],n,o,r,null,null,gW(a))}function rW(e,t,n,r,a,o){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,u]=uW(t);let l;if("channelsLast"===i)l=[s,u,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));l=[s,u,e[1],e[1]]}return oW(e,l,n,r,a,o,!1,i)}function aW(e,t,n,r,a,o){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,u,l]=lW(t);let c,d;if("NDHWC"===i)d="channelsLast",c=[s,u,l,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat ".concat(i));d="channelsFirst",c=[s,u,l,e[1],e[1]]}return iW(e,c,n,r,a,!1,d,o)}function oW(e,t,n,r,a,o){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[u,l,c,d]=[-1,-1,-1,-1];if("channelsLast"===s)[u,l,c,d]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[u,d,l,c]=e}const[h,p,,f]=t,[g,m]=uW(n),[y,v]=uW(r),b=cW(h,y),x=cW(p,v),{padInfo:w,outHeight:D,outWidth:k}=function(e,t,n,r,a,o,i,s,u){let l,c,d;if("number"===typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const a=function(e,t,n,r,a){null==r&&(r=sW(e,t,n));const o=e[0],i=e[1],s=dW((o-t+2*r)/n+1,a),u=dW((i-t+2*r)/n+1,a);return[s,u]}([t,n],o,r,e,s);c=a[0],d=a[1]}else if("same"===e){c=Math.ceil(t/r),d=Math.ceil(n/a);const e=Math.max(0,(c-1)*r+o-t),s=Math.max(0,(d-1)*a+i-n),u=Math.floor(e/2),h=e-u,p=Math.floor(s/2);l={top:u,bottom:h,left:p,right:s-p,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/r),d=Math.ceil((n-i+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const h="channelsLast"===u?e[1][0]:e[2][0],p="channelsLast"===u?e[1][1]:e[2][1],f="channelsLast"===u?e[2][0]:e[3][0],g="channelsLast"===u?e[2][1]:e[3][1];l={top:h,bottom:p,left:f,right:g,type:0===h&&0===p&&0===f&&0===g?"VALID":"EXPLICIT"},c=dW((t-o+h+p)/r+1,s),d=dW((n-i+f+g)/a+1,s)}}return{padInfo:l,outHeight:c,outWidth:d}}(a,l,c,g,m,b,x,o,s),C=i?f*d:f;let E;return"channelsFirst"===s?E=[u,C,D,k]:"channelsLast"===s&&(E=[u,D,k,C]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:c,inChannels:d,outHeight:D,outWidth:k,outChannels:C,padInfo:w,strideHeight:g,strideWidth:m,filterHeight:h,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:e,outShape:E,filterShape:t}}function iW(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[u,l,c,d,h]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[u,l,c,d,h]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));[u,h,l,c,d]=e}const[p,f,g,,m]=t,[y,v,b]=lW(n),[x,w,D]=lW(r),k=cW(p,x),C=cW(f,w),E=cW(g,D),{padInfo:S,outDepth:A,outHeight:F,outWidth:I}=function(e,t,n,r,a,o,i,s,u,l,c){let d,h,p,f;"valid"===e&&(e=0);if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const g=function(e,t,n,r,a,o){null==a&&(a=sW(e,t[0],r[0]));const i=[0,0,0,n];for(let s=0;s<3;s++)e[s]+2*a>=t[s]&&(i[s]=dW((e[s]-t[s]+2*a)/r[s]+1,o));return i}([t,n,r,1],[s,u,l],1,[a,o,i],e,c);h=g[0],p=g[1],f=g[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{h=Math.ceil(t/a),p=Math.ceil(n/o),f=Math.ceil(r/i);const e=(h-1)*a+s-t,c=(p-1)*o+u-n,g=(f-1)*i+l-r,m=Math.floor(e/2),y=e-m,v=Math.floor(c/2),b=c-v,x=Math.floor(g/2);d={top:v,bottom:b,left:x,right:g-x,front:m,back:y,type:"SAME"}}}return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}(a,l,c,d,y,v,b,k,C,E,s),N=o?m*h:m;let T;return"channelsFirst"===i?T=[u,N,A,F,I]:"channelsLast"===i&&(T=[u,A,F,I,N]),{batchSize:u,dataFormat:i,inDepth:l,inHeight:c,inWidth:d,inChannels:h,outDepth:A,outHeight:F,outWidth:I,outChannels:N,padInfo:S,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:p,filterHeight:f,filterWidth:g,effectiveFilterDepth:k,effectiveFilterHeight:C,effectiveFilterWidth:E,dilationDepth:x,dilationHeight:w,dilationWidth:D,inShape:e,outShape:T,filterShape:t}}function sW(e,t,n){const r=cW(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function uW(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function lW(e){return"number"===typeof e?[e,e,e]:e}function cW(e,t){return t<=1?e:e+(e-1)*(t-1)}function dW(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function hW(e){const[t,n,r]=uW(e);return 1===t&&1===n&&1===r}function pW(e,t){return hW(e)||hW(t)}function fW(e){return uW(e).every(e=>e>0)}function gW(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function mW(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)RR(LR(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach(t=>{t.forEach(t=>{RR(LR(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."))})})}}}const yW=ZL({reshape_:function(e,t){const n={x:YL(e,"x","reshape","string_or_numeric")},r={shape:t};return zL.runKernel(IM,n,r)}});const vW=ZL({avgPool_:function(e,t,n,r,a){const o=YL(e,"x","avgPool","float32");RR(pW(n,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"));let i=o,s=!1;3===o.rank&&(s=!0,i=yW(o,[1,o.shape[0],o.shape[1],o.shape[2]])),RR(4===i.rank,()=>"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,".")),mW("avgPool",r,a);const u={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a};let c=zL.runKernel(O_,u,l);return c=Kj(c,o.dtype),s?yW(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const bW=ZL({avgPool3d_:function(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=YL(e,"x","avgPool3d","float32");let s=i,u=!1;4===i.rank&&(u=!0,s=yW(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),RR(5===s.rank,()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")),RR("NDHWC"===o,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)),RR("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")),mW("avgPool3d",r,a);const l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o};let d=zL.runKernel(__,l,c);return d=Kj(d,s.dtype),u?yW(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const xW=ZL({batchNorm_:function(e,t,n,r,a,o){null==o&&(o=.001);const i=YL(e,"x","batchNorm"),s=YL(t,"mean","batchNorm"),u=YL(n,"variance","batchNorm");let l,c;null!=a&&(l=YL(a,"scale","batchNorm")),null!=r&&(c=YL(r,"offset","batchNorm")),RR(s.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),RR(null==c||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),RR(null==l||s.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d=function(e){let t;return t=0===e.rank||1===e.rank?yW(e,[1,1,1,e.size]):2===e.rank?yW(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?yW(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),h={x:d,scale:l,offset:c,mean:s,variance:u},p={varianceEpsilon:o},f=zL.runKernel(FP,h,p);return yW(f,i.shape)}});const wW=ZL({batchNorm2d_:function(e,t,n,r,a,o){const i=YL(e,"x","batchNorm"),s=YL(t,"mean","batchNorm"),u=YL(n,"variance","batchNorm");let l,c;return null!=a&&(l=YL(a,"scale","batchNorm")),null!=r&&(c=YL(r,"offset","batchNorm")),RR(2===i.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(i.rank,".")),RR(2===s.rank||1===s.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,".")),RR(2===u.rank||1===u.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")),null!=l&&RR(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&RR(2===c.rank||1===c.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")),xW(i,s,u,c,l,o)}});const DW=ZL({batchNorm3d_:function(e,t,n,r,a,o){const i=YL(e,"x","batchNorm"),s=YL(t,"mean","batchNorm"),u=YL(n,"variance","batchNorm");let l,c;return null!=a&&(l=YL(a,"scale","batchNorm")),null!=r&&(c=YL(r,"offset","batchNorm")),RR(3===i.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(i.rank,".")),RR(3===s.rank||1===s.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,".")),RR(3===u.rank||1===u.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")),null!=l&&RR(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&RR(3===c.rank||1===c.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")),xW(i,s,u,c,l,o)}});const kW=ZL({batchNorm4d_:function(e,t,n,r,a,o){const i=YL(e,"x","batchNorm"),s=YL(t,"mean","batchNorm"),u=YL(n,"variance","batchNorm");let l,c;return null!=a&&(l=YL(a,"scale","batchNorm")),null!=r&&(c=YL(r,"offset","batchNorm")),RR(4===i.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(i.rank,".")),RR(4===s.rank||1===s.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,".")),RR(4===u.rank||1===u.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")),null!=l&&RR(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&RR(4===c.rank||1===c.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")),xW(i,s,u,c,l,o)}});const CW=ZL({broadcastTo_:function(e,t){let n=YL(e,"broadcastTo","x");const r=n.shape;if(i_(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=yW(n,e)}const a=n.shape,o=Array.from(t);for(let l=t.length-1;l>=0;l--)if(a[l]===t[l])o[l]=1;else if(1!==n.shape[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));const i=o.map((e,t)=>e>1?t:-1).filter(e=>e>=0);if(0===i.length)return qj(n);const s={x:n},u={reps:o};return zL.runKernel(gB,s,u)}});const EW=ZL({clipByValue_:function(e,t,n){const r=YL(e,"x","clipByValue");if(RR(t<=n,()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")),t===n)return dz(r.shape,t,r.dtype);const a={x:r},o={clipValueMin:t,clipValueMax:n};return zL.runKernel(V_,a,o)}});const SW=ZL({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;RR(e.length>=1,()=>"Pass at least one tensor to concat");const n=QL(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))}),1===n.length)return qj(n[0]);const r=n,a={axis:t};return zL.runKernel(K_,r,a)}});const AW=ZL({concat1d_:function(e){return SW(e,0)}});const FW=ZL({concat2d_:function(e,t){return SW(e,t)}});const IW=ZL({concat3d_:function(e,t){return SW(e,t)}});const NW=ZL({concat4d_:function(e,t){return SW(e,t)}});const TW=ZL({conv2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=YL(e,"x","conv2d","float32"),u=YL(t,"filter","conv2d","float32");let l=s,c=!1;3===s.rank&&(c=!0,l=yW(s,[1,s.shape[0],s.shape[1],s.shape[2]])),RR(4===l.rank,()=>"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")),RR(4===u.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")),mW("conv2d",r,i);const d="NHWC"===a?l.shape[3]:l.shape[1];RR(d===u.shape[2],()=>"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(u.shape[2],".")),RR(pW(n,o),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")),RR(fW(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),RR(fW(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:l,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},f=zL.runKernel(q_,h,p);return c?yW(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const OW=ZL({conv1d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const s=YL(e,"x","conv1d"),u=YL(t,"filter","conv1d");let l=s,c=!1;2===s.rank&&(c=!0,l=yW(s,[1,s.shape[0],s.shape[1]])),RR(3===l.rank,()=>"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")),RR(3===u.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")),mW("conv1d",r,i),RR(l.shape[2]===u.shape[1],()=>"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")),RR(pW(n,o),()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'")),RR(fW(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),RR(fW(n),()=>"Error in conv1D: Stride should be larger than 0."),RR("NWC"===a,()=>"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported."));const d=yW(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=yW(l,[l.shape[0],1,l.shape[1],l.shape[2]]),p=TW(h,d,[1,n],r,"NHWC",[1,o],i);return yW(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const RW=ZL({conv2DBackpropInput_:function(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;RR(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let s=e,u=t,l=!1;3===t.rank&&(l=!0,u=yW(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),RR(4===s.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")),RR(4===u.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)),RR(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank));const c="NHWC"===o?s[3]:s[1],d="NHWC"===o?u.shape[3]:u.shape[1];RR(c===n.shape[2],()=>"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")),RR(d===n.shape[3],()=>"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")),mW("conv2dDerInput",a,i);const h={dy:u,filter:n},p={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,inputShape:s},f=zL.runKernel(Y_,h,p);return l?yW(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const _W=ZL({conv2dTranspose_:function(e,t,n,r,a,o){const i=YL(e,"x","conv2dTranspose"),s=YL(t,"filter","conv2dTranspose");return RW(n,i,s,r,a,"NHWC",o)}});const PW=ZL({conv3d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const i=YL(e,"x","conv3d"),s=YL(t,"filter","conv3d");let u=i,l=!1;4===i.rank&&(l=!0,u=yW(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),RR(5===u.rank,()=>"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")),RR(5===s.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")),RR(u.shape[4]===s.shape[3],()=>"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")),RR(pW(n,o),()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")),RR("NDHWC"===a,()=>"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")),RR(fW(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),RR(fW(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:o},h=zL.runKernel(Q_,c,d);return l?yW(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const MW=ZL({conv3DBackpropInput_:function(e,t,n,r,a){RR(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let o=e,i=t,s=!1;4===t.rank&&(s=!0,i=yW(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const u=o[4],l=i.shape[4];RR(5===o.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(o.length,".")),RR(5===i.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank)),RR(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)),RR(u===n.shape[3],()=>"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")),RR(l===n.shape[4],()=>"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],"."));const c={dy:i,filter:n},d={pad:a,strides:r,inputShape:o},h=zL.runKernel(J_,c,d);return s?yW(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const BW=ZL({conv3dTranspose_:function(e,t,n,r,a){const o=YL(e,"x","conv3dTranspose"),i=YL(t,"filter","conv3dTranspose");return MW(n,o,i,r,a)}});const LW=ZL({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=YL(e,"x","denseBincount"),o=YL(t,"weights","denseBincount");RR("int32"===a.dtype,()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)),RR(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")),RR(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),RR(o.size===a.size||0===o.size,()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(o.shape,"."));const i={x:a,weights:o},s={size:n,binaryOutput:r};return zL.runKernel(aP,i,s)}});const jW=ZL({depthwiseConv2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=YL(e,"x","depthwiseConv2d","float32"),u=YL(t,"filter","depthwiseConv2d","float32");let l=s,c=!1;3===s.rank&&(c=!0,l=yW(s,[1,s.shape[0],s.shape[1],s.shape[2]])),RR(4===l.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")),RR(4===u.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,"."));const d="NHWC"===a?l.shape[3]:l.shape[1];RR(d===u.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")),mW("depthwiseConv2d",r,i);const h={x:l,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},f=zL.runKernel(iP,h,p);return c?yW(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const zW=ZL({elu_:function(e){const t={x:YL(e,"x","elu","float32")};return zL.runKernel(mP,t)}});const WW=ZL({equal_:function(e,t){let n=YL(e,"a","equal","string_or_numeric"),r=YL(t,"b","equal","string_or_numeric");[n,r]=OL(n,r),bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(bP,a)}});const UW=ZL({erf_:function(e){let t=YL(e,"x","erf");RR("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=Kj(t,"float32"));const n={x:t};return zL.runKernel(vP,n)}});const VW=ZL({exp_:function(e){const t={x:YL(e,"x","exp")};return zL.runKernel(xP,t)}});const HW=ZL({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=YL(e,"x","expandDims","string_or_numeric");RR(t<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:t};return zL.runKernel(wP,r,a)}});const GW=ZL({tile_:function(e,t){const n=YL(e,"x","tile","string_or_numeric");RR(n.rank===t.length,()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,"."));const r={x:n},a={reps:t};return zL.runKernel(gB,r,a)}});const KW=ZL({eye_:function(e,t,n){null==t&&(t=e);const r=Gj([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t;for(let i=0;i<a;++i)r.set(1,i,i);const o=yW(r.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return GW(HW(o,0),[n[0],1,1]);if(2===n.length)return GW(HW(HW(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return GW(HW(HW(HW(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const qW=ZL({floor_:function(e){const t={x:YL(e,"x","floor","float32")};return zL.runKernel(SP,t)}});const XW=ZL({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a={x:YL(e,"x","gather"),indices:YL(t,"indices","gather","int32")},o={axis:n,batchDims:r};return zL.runKernel(IP,a,o)}});const YW=ZL({greater_:function(e,t){let n=YL(e,"a","greater","string_or_numeric"),r=YL(t,"b","greater","string_or_numeric");[n,r]=OL(n,r),bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(TP,a)}});const QW=ZL({greaterEqual_:function(e,t){let n=YL(e,"a","greaterEqual","string_or_numeric"),r=YL(t,"b","greaterEqual","string_or_numeric");[n,r]=OL(n,r),bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(OP,a)}});const ZW=ZL({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:YL(e,"x","leakyRelu")},r={alpha:t};return zL.runKernel(jP,n,r)}});const JW=ZL({log_:function(e){const t={x:YL(e,"x","log","float32")};return zL.runKernel(VP,t)}});const $W=ZL({log1p_:function(e){const t={x:YL(e,"x","log1p")};return zL.runKernel(HP,t)}});const eU=ZL({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:YL(e,"x","max")},a={reductionIndices:t,keepDims:n};return zL.runKernel(QP,r,a)}});const tU=ZL({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=YL(e,"x","sum");"bool"===r.dtype&&(r=Kj(r,"int32"));const a={x:r},o={axis:t,keepDims:n};return zL.runKernel(QM,a,o)}});const nU=ZL({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=YL(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const r=nz((e,n)=>{const r=eU(e,t,!0),a=fz(e,r),o=fz(Kj(a,"float32"),JW(tU(VW(a),t,!0)));n([o]);return{value:o,gradFunc:(e,n)=>{const[r]=n,a=VW(r);return fz(e,Jj(tU(e,t,!0),a))}}});return r(n)}});function rU(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function aU(e,t,n){const r=e.length+t.length,a=[];let o=0,i=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function oU(e,t){const n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map(t=>e[t])]}function iU(e,t){return aU(e,t.map(e=>1),t)}function sU(e,t,n){RR(rU(t,n),()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input."))}function uU(e,t){if(rU(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function lU(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function cU(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const dU=ZL({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=YL(e,"x","logSumExp"),a=VR(t,r.shape),o=eU(r,a,!0),i=fz(r,o),s=VW(i),u=tU(s,a),l=JW(u),c=Yj(yW(o,l.shape),l);if(n){const e=iU(c.shape,a);return yW(c,e)}return c}});const hU=ZL({logicalAnd_:function(e,t){const n=YL(e,"a","logicalAnd","bool"),r=YL(t,"b","logicalAnd","bool");bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(GP,a)}});const pU=ZL({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=YL(e,"a","matMul"),o=YL(t,"b","matMul");[a,o]=OL(a,o);const i={a:a,b:o},s={transposeA:n,transposeB:r};return zL.runKernel(M_,i,s)}});const fU=ZL({maxPool_:function(e,t,n,r,a){const o=YL(e,"x","maxPool");let i=o,s=!1;3===o.rank&&(s=!0,i=yW(o,[1,o.shape[0],o.shape[1],o.shape[2]])),RR(4===i.rank,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,".")),RR(pW(n,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")),mW("maxPool",r,a);const u={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=zL.runKernel(JP,u,l);return s?yW(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const gU=ZL({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=YL(e,"x","maxPool3d");let s=i,u=!1;4===i.rank&&(u=!0,s=yW(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),RR(5===s.rank,()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")),RR("NDHWC"===o,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)),mW("maxPool3d",r,a);const l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},d=zL.runKernel(eM,l,c);return u?yW(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const mU=ZL({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:YL(e,"x","mean")},a={axis:t,keepDims:n};return zL.runKernel(rM,r,a)}});const yU=ZL({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:YL(e,"x","min")},a={axis:t,keepDims:n};return zL.runKernel(aM,r,a)}});const vU=ZL({minimum_:function(e,t){let n=YL(e,"a","minimum"),r=YL(t,"b","minimum");[n,r]=OL(n,r),"bool"===n.dtype&&(n=Kj(n,"int32"),r=Kj(r,"int32")),bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(oM,a)}});const bU=ZL({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=VR(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=YL(e,"x","moments")).shape),r=mU(e,n,t);let a=r.shape;t||(a=iU(r.shape,n));const o=ez(fz(Kj(e,"float32"),yW(r,a)));return{mean:r,variance:mU(o,n,t)}}});const xU=ZL({neg_:function(e){const t={x:YL(e,"x","neg")};return zL.runKernel(cM,t)}});const wU=ZL({notEqual_:function(e,t){let n=YL(e,"a","notEqual","string_or_numeric"),r=YL(t,"b","notEqual","string_or_numeric");[n,r]=OL(n,r),bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(dM,a)}});const DU=ZL({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const o={indices:YL(e,"indices","oneHot","int32")},i={dtype:a,depth:t,onValue:n,offValue:r};return zL.runKernel(mM,o,i)}});function kU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(i_(e),"complex64"===t){const t=kU(e,"float32"),n=kU(e,"float32");return JL(t,n)}const n=a_(MR(e),t);return zL.makeTensor(n,e,t)}function CU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(i_(e),"complex64"===t){const t=CU(e,"float32"),n=kU(e,"float32");return JL(t,n)}const n=r_(MR(e),t);return zL.makeTensor(n,e,t)}const EU=ZL({onesLike_:function(e){const t={x:YL(e,"x","onesLike")};return zL.runKernel(gM,t)}});const SU=ZL({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=YL(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:t,constantValue:n},o={x:r};return zL.runKernel(vM,o,a)}});const AU=ZL({prelu_:function(e,t){const n={x:YL(e,"x","prelu"),alpha:YL(t,"alpha","prelu")};return zL.runKernel(xM,n)}});var FU=n(4334);class IU{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=a||Math.random();this.random=FU.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,o;do{r=2*this.random()-1,a=2*this.random()-1,o=r*r+a*a}while(o>=1||0===o);const i=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*a*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class NU{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=FU.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const TU=ZL({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(i_(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));const o=new IU(t,n,r,!1,a),i=Gj(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});const OU=ZL({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;i_(e);const o=Gj(e,r),i=new NU(t,n,null,a);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});function RU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const a={start:e,stop:t,step:n,dtype:r};return zL.runKernel(EM,{},a)}const _U=ZL({relu_:function(e){const t={x:YL(e,"x","relu")};return zL.runKernel(FM,t)}});const PU=ZL({reverse_:function(e,t){const n={x:YL(e,"x","reverse")},r={dims:t};return zL.runKernel(PM,n,r)}});const MU=ZL({selu_:function(e){const t={x:YL(e,"x","selu")};return zL.runKernel(UM,t)}});const BU=ZL({separableConv2d_:function(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=YL(e,"x","separableConv2d"),u=YL(t,"depthwiseFilter","separableConv2d"),l=YL(n,"pointwiseFilter","separableConv2d");let c=s,d=!1;if(3===s.rank&&(d=!0,c=yW(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");RR(4===c.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")),RR(4===u.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")),RR(4===l.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")),RR(1===l.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")),RR(1===l.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],"."));const h=u.shape[2],p=u.shape[3];RR(l.shape[2]===h*p,()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*p,", ")+"but got ".concat(l.shape[2],"."));const f=jW(c,u,r,a,i,o),g=TW(f,l,1,"valid",i);return d?yW(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});const LU=ZL({sigmoid_:function(e){const t={x:YL(e,"x","sigmoid","float32")};return zL.runKernel(qM,t)}});const jU=ZL({slice_:function(e,t,n){const r=YL(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const a={x:r},o={begin:t,size:n};return zL.runKernel(VM,a,o)}});const zU=ZL({slice1d_:function(e,t,n){const r=YL(e,"x","slice1d");return RR(1===r.rank,()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")),jU(r,[t],[n])}});const WU=ZL({slice2d_:function(e,t,n){const r=YL(e,"x","slice2d");return RR(2===r.rank,()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")),jU(r,t,n)}});const UU=ZL({slice3d_:function(e,t,n){const r=YL(e,"x","slice3d");return RR(3===r.rank,()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")),jU(r,t,n)}});const VU=ZL({slice4d_:function(e,t,n){const r=YL(e,"x","slice4d");return RR(4===r.rank,()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")),jU(r,t,n)}});const HU=ZL({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=YL(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const r={logits:n},a={dim:t};return zL.runKernel($M,r,a)}});const GU=ZL({softplus_:function(e){const t={x:YL(e,"x","softplus")};return zL.runKernel(XM,t)}});const KU=ZL({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:YL(e,"x","split")},a={numOrSizeSplits:t,axis:n};return zL.runKernel(JM,r,a)}});const qU=ZL({squeeze_:function(e,t){const n=YL(e,"x","squeeze","string_or_numeric");return yW(n,HR(n.shape,t).newShape)}});const XU=ZL({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=QL(e,"tensors","stack","string_or_numeric");RR(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&RR(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:t};return zL.runKernel(yM,r,a)}});const YU=ZL({tanh_:function(e){const t={x:YL(e,"x","tanh","float32")};return zL.runKernel(fB,t)}});function QU(e,t){PR(e);const n=KL(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return $L(e,null,n,t)}function ZU(e,t,n){if(PR(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=KL(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return $L(e,t,r,n)}const JU=ZL({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(i_(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const o=new IU(t,n,r,!0,a),i=Gj(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});const $U=ZL({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=YL(e,"x","unstack","string_or_numeric");RR(t>=-n.shape.length&&t<n.shape.length,()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")"));const r={value:n},a={axis:t};return zL.runKernel(xB,r,a)}});const eV=ZL({where_:function(e,t,n){const r=YL(t,"a","where"),a=YL(n,"b","where"),o=YL(e,"condition","where","bool"),i=bz(bz(o.shape,r.shape),a.shape),s={condition:CW(o,i),t:CW(r,i),e:CW(a,i)};return zL.runKernel(WM,s)}});const tV=ZL({imag_:function(e){const t={input:YL(e,"input","imag")};return zL.runKernel(PP,t)}});const nV=ZL({real_:function(e){const t={input:YL(e,"input","real")};return zL.runKernel(SM,t)}});const rV=ZL({transpose_:function(e,t,n){const r=YL(e,"x","transpose");if(null==t&&(t=r.shape.map((e,t)=>t).reverse()),RR(r.rank===t.length,()=>"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")),t.forEach(e=>{RR(e>=0&&e<r.rank,()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t))}),r.rank<=1)return r.clone();const a={x:r},o={perm:t};return"complex64"===r.dtype?aj(()=>{let e=nV(r),t=tV(r);return e=zL.runKernel(vB,{x:e},o),t=zL.runKernel(vB,{x:t},o),n&&(t=xU(t)),JL(e,t)}):zL.runKernel(vB,a,o)}});const aV=ZL({dropout_:function(e,t,n,r){const a=YL(e,"x","dropout");if(RR("float32"===a.dtype,()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")),RR(t>=0&&t<1,()=>"rate must be a float in the range [0, 1), but got ".concat(t,".")),0===t)return e instanceof bL?a.clone():a;const o=function(e,t){if(null==t)return e.shape.slice();if(BR(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),i=1-t,s=Zj(qW(Yj(OU(o,0,1,"float32",r),i)),i);return Jj(a,s)}});const oV=ZL({fft_:function(e){RR("complex64"===e.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return zL.runKernel(kP,t)}});const iV=ZL({rfft_:function(e,t){RR("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got ".concat(e.dtype));let n=e.shape[e.shape.length-1];const r=e.size/n;let a;if(null!=t&&t<n){const r=e.shape.map(e=>0),o=e.shape.map(e=>e);o[e.shape.length-1]=t,a=jU(e,r,o),n=t}else if(null!=t&&t>n){const r=e.shape.map(e=>e);r[e.shape.length-1]=t-n,a=SW([e,kU(r)],e.shape.length-1),n=t}else a=e;const o=tz(a),i=yW(JL(a,o),[r,n]),s=oV(i),u=Math.floor(n/2)+1,l=nV(s),c=tV(s),d=KU(l,[u,n-u],l.shape.length-1),h=KU(c,[u,n-u],c.shape.length-1),p=a.shape.slice();return p[a.shape.length-1]=u,yW(JL(d[0],h[0]),p)}});const sV=ZL({ifft_:function(e){RR("complex64"===e.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return zL.runKernel(_P,t)}});const uV=ZL({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const a=yW(e,[n,t]);r=sV(a)}else{const a=[n,2*(t-1)],o=yW(nV(e),[n,t]),i=yW(tV(e),[n,t]),s=PU(jU(o,[0,1],[n,t-2]),1),u=Jj(PU(jU(i,[0,1],[n,t-2]),1),rz(-1)),l=SW([o,s],1),c=SW([i,u],1),d=yW(JL(l,c),[a[0],a[1]]);r=sV(d)}if(r=nV(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=yW(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const lV=ZL({conv2DBackpropFilter_:function(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=yW(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;3===u.rank&&(u=yW(t,[1,t.shape[0],t.shape[1],t.shape[2]])),RR(4===s.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")),RR(4===u.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")),RR(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,"."));const l="NHWC"===o?s.shape[3]:s.shape[1],c="NHWC"===o?u.shape[3]:u.shape[1];RR(l===n[2],()=>"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],".")),RR(c===n[3],()=>"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")),mW("conv2dDerFilter",a,i);const d={x:s,dy:u},h={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,filterShape:n};return zL.runKernel(X_,d,h)}});const cV=ZL({relu6_:function(e){const t={x:YL(e,"x","relu6")};return zL.runKernel(_M,t)}});const dV=ZL({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:YL(e,"x","step")},r={alpha:t};return zL.runKernel(kB,n,r)}});function hV(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Jj(e,dV(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function pV(e,t){let n=t;const r=vz(e.shape,t.shape);return r.length>0&&(n=tU(n,r)),yW(n,e.shape)}function fV(e,t,n,r){if("linear"===t)return e;if("relu"===t)return _U(e);if("elu"===t)return zW(e);if("relu6"===t)return cV(e);if("prelu"===t)return AU(e,n);if("leakyrelu"===t)return ZW(e,r);if("sigmoid"===t)return LU(e);throw new Error("Unknown fused activation ".concat(t,"."))}const gV=(e,t)=>!(e>0)||"linear"===t;const mV=ZL({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:a,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:u,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:d}=e;if(l=l||"linear",!1===gV(zL.state.gradientDepth,l)){RR("NHWC"===o,()=>"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.");let e=TW(t,n,r,a,o,i,s);return null!=u&&(e=Yj(e,u)),fV(e,l,c,d)}const h=YL(t,"x","conv2d","float32"),p=YL(n,"filter","conv2d","float32");let f=h,g=!1;3===h.rank&&(g=!0,f=yW(h,[1,h.shape[0],h.shape[1],h.shape[2]])),RR(4===f.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,".")),RR(4===p.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")),mW("fused conv2d",a,s);const m="NHWC"===o?f.shape[3]:f.shape[1];RR(p.shape[2]===m,()=>"Error in conv2d: depth of input (".concat(m,") must match ")+"input depth for filter ".concat(p.shape[2],".")),RR(pW(r,i),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(i,"'"));const y=oW(f.shape,p.shape,r,i,a,s);let v,b;if(null!=u&&(v=YL(u,"bias","fused conv2d"),[v]=OL(v,h),"NHWC"===o?bz(y.outShape,v.shape):(RR(v.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(v.shape.length,".")),RR(0===v.shape.length||v.shape[0]===y.outChannels||1===v.shape[0],()=>"Error in fused conv2d: bias shape (".concat(v.shape,") is not ")+"compatible with the number of output channels "+"(".concat(y.outChannels,")")))),null!=c){const e=c.shape;if(RR(e.length<=1||3===e.length,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,".")),1===e.length)RR(1===e[0]||e[0]===y.outChannels,()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(y.outChannels,")."));else if(3===e.length)try{bz(e,y.outShape)}catch(Ut){const n="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(y.outShape,").");throw Error(n)}b=YL(c,"prelu weights","fused conv2d")}const x=(e,t)=>{RR("NHWC"===o,()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported."));const[n,s,u,c]=t,d=hV(e,u,l);RR(hW(i),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'"));const h=[RW(s.shape,d,n,r,a),lV(s,d,n.shape,r,a)];if(null!=c){const e=pV(c,d);h.push(e)}return h},w={x:f,filter:p,bias:v,preluActivationWeights:b},D={strides:r,pad:a,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:d};if(null==u){const e=nz((e,t,n)=>{let r=zL.runKernel(AB,w,D);return n([t,e,r]),g&&(r=yW(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}});return e(f,p)}{const e=nz((e,t,n,r)=>{let a=zL.runKernel(AB,w,D);return r([t,e,a,n]),g&&(a=yW(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:x}});return e(f,p,v)}}});const yV=ZL({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=yW(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;3===u.rank&&(u=yW(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:i,dilations:o,filterShape:n};return zL.runKernel(sP,l,c)}});const vV=ZL({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=yW(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:i,dilations:o,inputShape:e},d=zL.runKernel(uP,l,c);return u?yW(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const bV=ZL({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:a=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:u=.2}=e;if(!1===gV(zL.state.gradientDepth,i)){let e=pU(t,n,r,a);return null!=o&&(e=Yj(e,o)),fV(e,i,s,u)}let l=YL(t,"a","fused matMul"),c=YL(n,"b","fused matMul");[l,c]=OL(l,c);const d=r?l.shape[l.rank-2]:l.shape[l.rank-1],h=a?c.shape[c.rank-1]:c.shape[c.rank-2],p=r?l.shape[l.rank-1]:l.shape[l.rank-2],f=a?c.shape[c.rank-2]:c.shape[c.rank-1],g=l.shape.slice(0,-2),m=c.shape.slice(0,-2),y=MR(g),v=MR(m);RR(d===h,()=>"Error in fused matMul: inner shapes (".concat(d,") and (")+"".concat(h,") of Tensors with shapes ").concat(l.shape," and ")+"".concat(c.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match."));const b=bz(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,f]),x=yW(l,r?[y,d,p]:[y,p,d]),w=yW(c,a?[v,f,h]:[v,h,f]);let D,k;null!=o&&(D=YL(o,"bias","fused matMul"),[D]=OL(D,l),bz(b,D.shape)),null!=s&&(k=YL(s,"prelu weights","fused matMul"));const C=(e,t)=>{const[n,s,u,l]=t,c=hV(yW(e,u.shape),u,i);let d,h;if(r||a?!r&&a?(d=pU(c,s,!1,!1),h=pU(c,n,!0,!1)):r&&!a?(d=pU(s,c,!1,!0),h=pU(n,c,!1,!1)):(d=pU(s,c,!0,!0),h=pU(c,n,!0,!0)):(d=pU(c,s,!1,!0),h=pU(n,c,!0,!1)),null!=o){return[d,h,pV(l,c)]}return[d,h]},E={a:x,b:w,bias:D,preluActivationWeights:k},S={transposeA:r,transposeB:a,activation:i,leakyreluAlpha:u};if(null==o){const e=nz((e,t,n)=>{const r=zL.runKernel(SB,E,S);return n([e,t,r]),{value:yW(r,b),gradFunc:C}});return e(x,w)}{const e=nz((e,t,n,r)=>{const a=zL.runKernel(SB,E,S);return r([e,t,a,n]),{value:yW(a,b),gradFunc:C}});return e(x,w,D)}}});const xV=ZL({cropAndResize_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=YL(e,"image","cropAndResize"),s=YL(t,"boxes","cropAndResize","float32"),u=YL(n,"boxInd","cropAndResize","int32"),l=s.shape[0];RR(4===i.rank,()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,".")),RR(2===s.rank&&4===s.shape[1],()=>"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,".")),RR(1===u.rank&&u.shape[0]===l,()=>"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,".")),RR(2===r.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")),RR(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was ".concat(r)),RR("bilinear"===a||"nearest"===a,()=>"method must be bilinear or nearest, but was ".concat(a));const c={image:i,boxes:s,boxInd:u},d={method:a,extrapolationValue:o,cropSize:r};return zL.runKernel(rP,c,d)}});const wV=ZL({flipLeftRight_:function(e){const t=YL(e,"image","flipLeftRight","float32");RR(4===t.rank,()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,"."));const n={image:t};return zL.runKernel(EP,n,{})}});const DV=ZL({grayscaleToRGB_:function(e){const t=YL(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];RR(t.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),RR(1===r,()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,"."));const a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,GW(t,a)}});const kV=ZL({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map((e,t)=>YL(e,"tensors".concat(t),"einsum")),o={equation:e};return zL.runKernel(gP,a,o)}});const CV=ZL({rgbToGrayscale_:function(e){const t=YL(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];RR(t.rank>=2,()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),RR(3===r,()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,"."));const a=t.dtype,o=Kj(t,"float32"),i=QU([.2989,.587,.114]);let s;switch(t.rank){case 2:s=kV("ij,j->i",o,i);break;case 3:s=kV("ijk,k->ij",o,i);break;case 4:s=kV("ijkl,l->ijk",o,i);break;case 5:s=kV("ijklm,m->ijkl",o,i);break;case 6:s=kV("ijklmn,n->ijklm",o,i);break;default:throw new Error("Not a valid tensor rank.")}return s=HW(s,-1),Kj(s,a)}});const EV=ZL({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const a=YL(e,"image","rotateWithOffset","float32");RR(4===a.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,"."));const o={image:a},i={radians:t,fillValue:n,center:r};return zL.runKernel(EB,o,i)}});function SV(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);const i=e.shape[0];return n=Math.min(n,i),RR(0<=r&&r<=1,()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'")),RR(2===e.rank,()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")),RR(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])),RR(1===t.rank,()=>"scores must be a 1D tensor"),RR(t.shape[0]===i,()=>"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0])),RR(0<=o&&o<=1,()=>"softNmsSigma must be in [0, 1], but was '".concat(o,"'")),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}const AV=ZL({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=YL(e,"boxes","nonMaxSuppression","float32"),i=YL(t,"scores","nonMaxSuppression","float32"),s=SV(o,i,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return zL.runKernel(hM,{boxes:o,scores:i},u)}});function FV(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,o=0,i=!1;for(;r<a;){o=r+(a-r>>>1);const s=n(t,e[o]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}(e,t,n||IV)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function IV(e,t){return e>t?1:e<t?-1:0}function NV(e,t,n,r,a){return RV(e,t,n,r,a,0)}function TV(e,t,n,r,a,o){return RV(e,t,n,r,a,0,!1,o,!0)}function OV(e,t,n,r,a,o){return RV(e,t,n,r,a,o,!0)}function RV(e,t,n,r,a,o){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const l=[];for(let m=0;m<t.length;m++)t[m]>a&&l.push({score:t[m],boxIndex:m,suppressBeginIndex:0});l.sort(MV);const c=o>0?-.5/o:0,d=[],h=[];for(;d.length<n&&l.length>0;){const t=l.pop(),{score:n,boxIndex:o,suppressBeginIndex:i}=t;if(n<a)break;let s=!1;for(let u=d.length-1;u>=i;--u){const n=_V(e,o,d[u]);if(n>=r){s=!0;break}if(t.score=t.score*PV(r,c,n),t.score<=a)break}t.suppressBeginIndex=d.length,s||(t.score===n?(d.push(o),h.push(t.score)):t.score>a&&FV(l,t,MV))}const p=d.length,f=n-p;s&&f>0&&(d.push(...new Array(f).fill(0)),h.push(...new Array(f).fill(0)));const g={selectedIndices:d};return i&&(g.selectedScores=h),u&&(g.validOutputs=p),g}function _V(e,t,n){const r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(s-o)*(u-i),f=(d-l)*(h-c);if(p<=0||f<=0)return 0;const g=Math.max(o,l),m=Math.max(i,c),y=Math.min(s,d),v=Math.min(u,h),b=Math.max(y-g,0)*Math.max(v-m,0);return b/(p+f-b)}function PV(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function MV(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const BV=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=YL(e,"boxes","nonMaxSuppressionAsync"),i=YL(t,"scores","nonMaxSuppressionAsync"),s=SV(o,i,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const u=await Promise.all([o.data(),i.data()]),l=u[0],c=u[1],{selectedIndices:d}=NV(l,c,n,r,a);return o!==e&&o.dispose(),i!==t&&i.dispose(),QU(d,"int32")};const LV=ZL({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=YL(e,"boxes","nonMaxSuppression"),s=YL(t,"scores","nonMaxSuppression"),u=SV(i,s,n,r,a,o);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,o=u.softNmsSigma;const l={boxes:i,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o},d=zL.runKernel(fM,l,c);return{selectedIndices:d[0],selectedScores:d[1]}}});const jV=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=YL(e,"boxes","nonMaxSuppressionAsync"),s=YL(t,"scores","nonMaxSuppressionAsync"),u=SV(i,s,n,r,a,o);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,o=u.softNmsSigma;const l=await Promise.all([i.data(),s.data()]),c=l[0],d=l[1],{selectedIndices:h,selectedScores:p}=OV(c,d,n,r,a,o);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:QU(h,"int32"),selectedScores:QU(p)}};const zV=ZL({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=YL(e,"boxes","nonMaxSuppression"),s=YL(t,"scores","nonMaxSuppression"),u=SV(i,s,n,r,a,null),l={boxes:i,scores:s},c={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:o},d=zL.runKernel(pM,l,c);return{selectedIndices:d[0],validOutputs:d[1]}}});const WV=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=YL(e,"boxes","nonMaxSuppressionAsync"),s=YL(t,"scores","nonMaxSuppressionAsync"),u=SV(i,s,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,d=u.scoreThreshold,[h,p]=await Promise.all([i.data(),s.data()]),{selectedIndices:f,validOutputs:g}=TV(h,p,l,c,d,o);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:QU(f,"int32"),validOutputs:rz(g,"int32")}};const UV=ZL({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=YL(e,"images","resizeBilinear");RR(3===a.rank||4===a.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")),RR(2===t.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")),RR(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=a,i=!1;3===a.rank&&(i=!0,o=yW(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,s={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},l=zL.runKernel(OM,s,u);return i?yW(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const VV=ZL({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=YL(e,"images","resizeNearestNeighbor");RR(3===a.rank||4===a.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")),RR(2===t.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")),RR("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),RR(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=a,i=!1;3===a.rank&&(i=!0,o=yW(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,s={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},l=zL.runKernel(NM,s,u);return i?yW(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const HV=ZL({bincount_:function(e,t,n){const r=YL(e,"x","bincount"),a=YL(t,"weights","bincount");RR("int32"===r.dtype,()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)),RR(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),RR(a.size===r.size||0===a.size,()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,"."));const o={x:r,weights:a},i={size:n};return zL.runKernel(L_,o,i)}});const GV=ZL({lessEqual_:function(e,t){let n=YL(e,"a","lessEqual","string_or_numeric"),r=YL(t,"b","lessEqual","string_or_numeric");[n,r]=OL(n,r),bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(WP,a)}});const KV=ZL({round_:function(e){const t={x:YL(e,"x","round")};return zL.runKernel(MM,t)}});const qV=ZL({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const a=YL(e,"image","threshold"),o=a.shape[0]*a.shape[1];let i,s,u,l,c=Jj(QU([r]),255);if(RR(3===a.rank,()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(a.rank,".")),RR(3===a.shape[2]||1===a.shape[2],()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(a.shape[2],".")),RR("int32"===a.dtype||"float32"===a.dtype,()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(a.dtype,".")),RR("otsu"===t||"binary"===t,()=>"Method must be binary or otsu, but was ".concat(t)),3===a.shape[2]){[i,s,u]=KU(a,[1,1,1],-1);const e=Jj(i,.2989),t=Jj(s,.587),n=Jj(u,.114);l=Yj(Yj(e,t),n)}else l=e;if("otsu"===t){c=function(e,t){let n,r,a,o,i,s,u=QU([-1]),l=QU([0]),c=QU([0]);for(let d=0;d<e.size-1;d++){n=jU(e,0,d+1),r=jU(e,d+1),i=Zj(tU(n),t),s=Zj(tU(r),t);const h=tU(Jj(n,RU(0,n.size)));a=Zj(h,tU(n));const p=dz(r.shape,n.size),f=Yj(RU(0,r.size),p),g=Jj(r,f);o=Zj(tU(g),tU(r));const m=fz(a,o),y=fz(a,o),v=Jj(i,s);c=Jj(Jj(v,m),y);const b=YW(c,l);l=eV(b,c,l),u=eV(b,QU([d]),u)}return u}(HV(Kj(KV(l),"int32"),ej([]),256),o)}const d=n?GV(l,c):YW(l,c);return Kj(Jj(d,255),"int32")}});const XV=ZL({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const i=YL(e,"image","transform","float32"),s=YL(t,"transforms","transform","float32");RR(4===i.rank,()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,".")),RR(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),RR(null==o||2===o.length,()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,"."));const u={image:i,transforms:s},l={interpolation:n,fillMode:r,fillValue:a,outputShape:o};return zL.runKernel(yB,u,l)}});const YV=ZL({less_:function(e,t){let n=YL(e,"a","less","string_or_numeric"),r=YL(t,"b","less","string_or_numeric");[n,r]=OL(n,r),bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(zP,a)}});const QV=ZL({bandPart_:function(e,t,n){const r=YL(e,"a","bandPart");RR(r.rank>=2,()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,"."));const a=r.shape,[o,i]=r.shape.slice(-2);let s,u;"number"===typeof t?(RR(t%1===0,()=>"bandPart(): numLower must be an integer, got ".concat(t,".")),RR(t<=o,()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,").")),s=YL(t<0?o:t,"numLower","bandPart")):(RR("int32"===t.dtype,()=>"bandPart(): numLower's dtype must be an int32."),s=eV(YV(t,0),o,vU(t,o))),"number"===typeof n?(RR(n%1===0,()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")),RR(n<=i,()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(i,").")),u=YL(n<0?i:n,"numUpper","bandPart")):(RR("int32"===n.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),u=eV(YV(n,0),i,vU(n,i)));const l=yW(RU(0,o,1,"int32"),[-1,1]),c=RU(0,i,1,"int32"),d=fz(l,c),h=hU(GV(d,s),QW(d,xU(u))),p=kU([o,i],r.dtype);return yW(XU($U(yW(r,[-1,o,i])).map(e=>eV(h,e,p))),a)}});function ZV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return mz(e);if(1!==e.rank&&null===n)return ZV(yW(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return tU(mz(e),n);if(t===1/0)return eU(mz(e),n);if(t===-1/0)return yU(mz(e),n);if("euclidean"===t||2===t)return $j(tU(pz(mz(e),rz(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return eU(tU(mz(e),n[0]),n[1]-1);if(t===1/0)return eU(tU(mz(e),n[1]),n[0]);if(t===-1/0)return yU(tU(mz(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return $j(tU(ez(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const JV=ZL({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=ZV(e=YL(e,"x","norm"),t,n);let o=a.shape;if(r){const t=VR(n,e.shape);o=iU(a.shape,t)}return yW(a,o)}});const $V=ZL({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,RR(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=e[0].shape[0];for(let t=1;t<e.length;++t)RR(e[t].shape[0]===n,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")"))}else t=!0,e=KU(e,e.shape[0],0).map(e=>qU(e,[0]));RR(e.length<=e[0].shape[0],()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],")."));const n=[],r=e;for(let a=0;a<e.length;++a)n.push(zL.tidy(()=>{let e=r[a];if(a>0)for(let t=0;t<a;++t){const r=Jj(tU(Jj(n[t],e)),n[t]);e=fz(e,r)}return Zj(e,JV(e,"euclidean"))}));return t?XU(n,0):n}});function eH(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return zL.tidy(()=>{RR(2===e.shape.length,()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor."));const n=e.shape[0],r=e.shape[1];let a=KW(n),o=qj(e);const i=ZU([[1]],[1,1]);let s=qj(i);const u=n>=r?r:n;for(let e=0;e<u;++e){const t=o,u=s,l=a;[s,o,a]=zL.tidy(()=>{const t=jU(o,[e,e],[n-e,1]),u=JV(t),l=jU(o,[e,e],[1,1]),c=eV(YW(l,0),ZU([[-1]]),ZU([[1]])),d=fz(l,Jj(c,u)),h=Zj(t,d);s=1===h.shape[0]?qj(i):SW([i,jU(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);const p=xU(Zj(pU(c,d),u)),f=jU(o,[e,0],[n-e,r]),g=Jj(p,s),m=rV(s);if(0===e)o=fz(f,pU(g,pU(m,f)));else{const t=fz(f,pU(g,pU(m,f)));o=SW([jU(o,[0,0],[e,r]),t],0)}const y=rV(g),v=jU(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=fz(v,pU(pU(v,s),y));else{const t=fz(v,pU(pU(v,s),y));a=SW([jU(a,[0,0],[n,e]),t],1)}return[s,o,a]}),oj([t,u,l])}return!t&&n>r&&(a=jU(a,[0,0],[n,r]),o=jU(o,[0,0],[r,r])),[a,o]})}const tH=ZL({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(RR(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)),2===e.rank)return eH(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=$U(yW(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];r.forEach(e=>{const[n,r]=eH(e,t);a.push(n),o.push(r)});return[yW(XU(a,0),e.shape),yW(XU(o,0),e.shape)]}}});var nH;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(nH||(nH={}));const rH=ZL({squaredDifference_:function(e,t){let n=YL(e,"a","squaredDifference"),r=YL(t,"b","squaredDifference");[n,r]=OL(n,r),bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(oB,a,{})}});const aH={flipLeftRight:wV,grayscaleToRGB:DV,resizeNearestNeighbor:VV,resizeBilinear:UV,rgbToGrayscale:CV,rotateWithOffset:EV,cropAndResize:xV,nonMaxSuppression:AV,nonMaxSuppressionAsync:BV,nonMaxSuppressionWithScore:LV,nonMaxSuppressionWithScoreAsync:jV,nonMaxSuppressionPadded:zV,nonMaxSuppressionPaddedAsync:WV,threshold:qV,transform:XV},oH={bandPart:QV,gramSchmidt:$V,qr:tH};const iH=class{static sgd(e){return new Dz(e)}static momentum(e,t){return new kz(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new Cz(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new gz(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new cz(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new wz(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new hz(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},sH="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function uH(){return new Promise(e=>sH(()=>e()))}function lH(e,t){const n=e[0].length;e.forEach((e,t)=>{RR(e.length===n,()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")"))}),RR(t>=0&&t<n,()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,"."));const r=e[0];e.forEach((e,a)=>{for(let o=0;o<n;o++)RR(o===t||e[o]===r[o],()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,"."))})}function cH(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var dH;function hH(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let a=1;a<n.length;++a){const o=n[a],i=r[r.length-n.length+a],s=r[i];if(o>=0)if(s>=0){if(s!==o)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(o," but shape[").concat(a+e,"] = ").concat(s))}else r[i]=o}return r}function pH(e){const t={FIRST_DIM_SIZE:dH.FIRST_DIM_SIZE,VALUE_ROWIDS:dH.VALUE_ROWIDS,ROW_LENGTHS:dH.ROW_LENGTHS,ROW_SPLITS:dH.ROW_SPLITS,ROW_LIMITS:dH.ROW_LIMITS,ROW_STARTS:dH.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function fH(e){return 0===e.length?0:e[0]===dH.FIRST_DIM_SIZE?e.length-1:e.length}function gH(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let a=0;a<Math.min(n,r-1);++a){const n=e[a],r=t[a+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(r))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(dH||(dH={}));const mH=30;function yH(e){return e<=mH?e:$R(e,Math.floor(Math.sqrt(e)))}function vH(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function bH(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let a=0;a<n;++a)r=r.concat([e[a+1]/t[a],t[a]]);r=r.concat(e.slice(n+1))}return r}function xH(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],a=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?a.push(n):r.push(n);n.push(...r),n.push(0),n.push(...a)}return n}function wH(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function DH(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function kH(e,t,n){const r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function CH(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===MR(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const a=t.shape,o=a[a.length-1];let i=1;for(let d=0;d<a.length-1;++d)i*=a[d];const s=e.shape,u=a.slice();u.pop();let l=1;for(let d=o;d<n;++d)l*=s[d],u.push(s[d]);const c=[...e_(e.shape).map(e=>e/l),1].slice(0,o);return[u,i,l,c]}function EH(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(o+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != ".concat(a+e.length-r));for(let i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(let i=0;i<n.rank-a;++i)if(n.shape[i+a]!==e[i+r])throw new Error(o+" updates.shape[".concat(i+a,"] (").concat(n.shape[i+a],") != shape[").concat(i+a,"] (").concat(e[i+a],")"))}function SH(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}EH(n,t,e)}function AH(e,t,n){const r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length;let i=1;for(let u=a;u<o;++u)i*=n[u];const s=a<1?1:a;return{sliceRank:a,numUpdates:MR(t.shape)/s,sliceSize:i,strides:[...e_(n.slice(0,a)),1],outputSize:MR(n)}}const FH=1.7580993408473768,IH=1.0507009873554805,NH=.3275911,TH=.254829592,OH=-.284496736,RH=1.421413741,_H=-1.453152027,PH=1.061405429;function MH(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function BH(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function LH(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function jH(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function zH(e,t){return{real:e[2*t],imag:e[2*t+1]}}function WH(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function UH(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){const o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function VH(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const HH="->",GH=/->/g,KH=",",qH="...";function XH(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(GH,"").length)/HH.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(HH,'").'));const[r,a]=e.split(HH);RR(-1===r.indexOf(qH),()=>'The ellipsis notation ("'.concat(qH,'") is not supported yet.'));const o=r.split(KH),i=o.length;if(t!==i)throw new Error("Expected ".concat(i," input tensors, received ").concat(t));if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let d=0;d<a.length;++d){const e=a[d];if(!o.some(t=>-1!==t.indexOf(e)))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===s.indexOf(e)&&s.push(e)}for(let d=0;d<r.length;++d){const e=r[d];-1===s.indexOf(e)&&e!==KH&&s.push(e)}const u=new Array(o.length);for(let d=0;d<i;++d){if(new Set(o[d].split("")).size!==o[d].length)throw new Error("Found duplicate axes in input component ".concat(o[d],". ")+"Support for duplicate axes in input is not implemented yet.");u[d]=[];for(let e=0;e<o[d].length;++e)u[d].push(s.indexOf(o[d][e]))}const l=s.length,c=[];for(let d=a.length;d<l;++d)c.push(d);return{allDims:s,summedDims:c,idDims:u}}function YH(e,t){let n=new Array(e);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;const r=[];for(let a=0;a<e;++a)-1===n[a]&&r.push(a);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function QH(e,t,n){const r=new Array(e);for(let a=0;a<n.length;++a){const e=n[a].shape;for(let n=0;n<t[a].length;++n)void 0===r[t[a][n]]?r[t[a][n]]=e[n]:RR(r[t[a][n]]===e[n],()=>"Expected dimension ".concat(r[t[a][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n]))}}function ZH(e,t){const n=e,r=[];let a=0;0===e.length&&n.push(-1),a=e.length+1;for(let i=0;i<a;++i)r.push([]);const o=[];for(let i=0;i<n.length;++i){const e=$H(t,n[i]);for(const t of e)-1===o.indexOf(t)&&(r[i].push(t),o.push(t))}return{path:n,steps:r}}function JH(e){return e.every((e,t)=>e===t)}function $H(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function eG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)RR(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const a=t.reduce((e,t)=>(-1===t&&(e+=1),e),0);RR(a<=1,()=>"There should be only one negative value in split array.");const o=t.indexOf(-1);if(-1!==o){const r=t.reduce((e,t)=>t>0?e+t:e);t[o]=e.shape[n]-r}RR(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function tG(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function nG(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function rG(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function aG(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function oG(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function iG(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function sG(e,t){const n=MR(e),r=MR(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function uG(e,t){const n=MR(e),r=MR(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function lG(){return"segment ids must be >= 0"}function cG(){return"segment ids are not increasing"}function dG(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function hG(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function pG(e,t){let n,r=!1;for(e<=mH?(n=e,r=!0):n=$R(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=$R(e,n+1);return n}function fG(e,t,n){const r=[],a=e.length;for(let o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function gG(e,t,n,r){const a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error("x.shape[".concat(d,"]: ").concat(e.shape[d]," should be equal to indices.shape[").concat(d,"]: ").concat(t.shape[d],"."));const i=e.shape[n],s=[];let u=1,l=1,c=1;for(let d=0;d<r;++d)s.push(e.shape[d]),u*=e.shape[d];for(let d=r;d<n;d++)s.push(e.shape[d]),l*=e.shape[d];for(let d=r;d<a;d++)s.push(t.shape[d]);for(let d=n+1;d<o;d++)s.push(e.shape[d]),c*=e.shape[d];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:i,outputShape:s}}function mG(e){try{return e.map(e=>aL(e))}catch(sde){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(sde))}}function yG(e){return e.map(e=>rL(e))}function vG(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const r=Gj(e,"int32"),a=Gj([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const t=r.indexToLoc(n[o]),i=o*e.length;a.values.set(t,i)}return a.toTensor()}!function(){for(const e of Ez)uz(e)}();const bG={kernelName:v_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(e,dV(Kj(n,"float32"),-1))}}},xG={kernelName:b_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=ez(Kj(n,"float32")),r=$j(fz(rz(1),t));return xU(Zj(e,r))}}}},wG={kernelName:x_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=$j(fz(ez(Kj(n,"float32")),1));return Zj(e,t)}}}},DG={kernelName:w_,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=bz(n.shape,r.shape);return{a:()=>{let t=e;const r=vz(n.shape,a);return r.length>0&&(t=tU(t,r)),yW(t,n.shape)},b:()=>{let t=e;const n=vz(r.shape,a);return n.length>0&&(t=tU(t,n)),yW(t,r.shape)}}}},kG={kernelName:D_,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}},CG={kernelName:E_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tz(n)}}},EG={kernelName:S_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tz(n)}}},SG={kernelName:A_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Zj(e,$j(fz(rz(1),ez(Kj(n,"float32")))))}}},AG={kernelName:F_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=$j(Yj(rz(1),ez(Kj(n,"float32"))));return Zj(e,t)}}}},FG={kernelName:T_,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=bz(n.shape,r.shape);return{a:()=>{const t=Yj(ez(n),ez(r));let o=Jj(e,Zj(r,t));const i=vz(n.shape,a);return i.length>0&&(o=tU(o,i)),yW(o,n.shape)},b:()=>{const t=Yj(ez(n),ez(r));let o=xU(Jj(e,Zj(n,t)));const i=vz(r.shape,a);return i.length>0&&(o=tU(o,i)),yW(o,r.shape)}}}},IG={kernelName:I_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Zj(e,Yj(ez(Kj(n,"float32")),1))}}},NG={kernelName:N_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Zj(e,fz(rz(1),ez(Kj(n,"float32"))))}}};const TG=ZL({avgPool3dGrad_:function(e,t,n,r,a,o){const i=YL(e,"dy","avgPool3dGrad"),s=YL(t,"input","avgPool3dGrad");let u=i,l=s,c=!1;4===s.rank&&(c=!0,u=yW(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),l=yW(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),RR(5===u.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")),RR(5===l.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,".")),mW("avgPool3dGrad",a,o);const d={dy:u,input:l},h={filterSize:n,strides:r,pad:a,dimRoundingMode:o},p=zL.runKernel(P_,d,h);return c?yW(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),OG={kernelName:__,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:o,pad:i,dimRoundingMode:s}=n;return{x:()=>TG(e,r,a,o,i,s)}}};const RG=ZL({avgPoolGrad_:function(e,t,n,r,a){const o=YL(e,"dy","avgPoolGrad"),i=YL(t,"input","avgPoolGrad");RR(i.rank===o.rank,()=>"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(o.rank,")"));let s=i,u=o,l=!1;3===i.rank&&(l=!0,s=yW(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=yW(o,[1,o.shape[0],o.shape[1],o.shape[2]])),RR(4===u.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")),RR(4===s.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,"."));const c={dy:u,input:s},d={filterSize:n,strides:r,pad:a},h=zL.runKernel(R_,c,d);return l?yW(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),_G={kernelName:O_,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:o,pad:i}=n;return{x:()=>RG(e,r,a,o,i)}}},PG={kernelName:M_,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,a]=t,{transposeA:o,transposeB:i}=n;return o||i?!o&&i?{a:()=>pU(e,a,!1,!1),b:()=>pU(e,r,!0,!1)}:o&&!i?{a:()=>pU(a,e,!1,!0),b:()=>pU(r,e,!1,!1)}:{a:()=>pU(a,e,!0,!0),b:()=>pU(e,r,!0,!0)}:{a:()=>pU(e,a,!1,!0),b:()=>pU(r,e,!0,!1)}}};const MG=ZL({spaceToBatchND_:function(e,t,n){const r=YL(e,"x","spaceToBatchND");RR(r.rank>=1+t.length,()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)),RR(n.length===t.length,()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)),RR(r.shape.reduce((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e,!0),()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString()));const a={x:r},o={blockShape:t,paddings:n};return zL.runKernel(ZM,a,o)}}),BG={kernelName:B_,gradFunc:(e,t,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>MG(e,r,a)}}},LG={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,a=r.inputShape,o=r.shape,i=Array.from(o);for(let u=a.length-1;u>=0;u--)if(a[u]===o[u])i[u]=1;else if(1!==a[u])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(o,"]."));const s=[];for(let u=0;u<i.length;u++)i[u]>1&&s.push(u);return{x:()=>tU(e,s,!0)}}},jG={kernelName:W_,gradFunc:e=>({x:()=>e.clone()})},zG={kernelName:U_,gradFunc:e=>({x:()=>tz(e)})},WG={kernelName:V_,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:a,clipValueMax:o}=n;return{x:()=>eV(hU(QW(r,a),GV(r,o)),e,tz(e))}}},UG={kernelName:G_,inputsToSave:["x"],gradFunc:bG.gradFunc},VG={kernelName:K_,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(e=>e.shape),{axis:a}=n,o=VR(a,t[0].shape)[0],i=r.map(e=>e[o]);return KU(e,i,o).map(e=>()=>e)}},HG={kernelName:q_,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{dilations:o,strides:i,pad:s,dataFormat:u}=n;return RR(hW(o),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")),{x:()=>RW(r.shape,e,a,i,s,u),filter:()=>lV(r,e,a.shape,i,s,u)}}},GG={kernelName:Y_,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{strides:o,pad:i,dataFormat:s,dimRoundingMode:u}=n;return{dy:()=>TW(e,a,o,i,s,1,u),filter:()=>lV(e,r,a.shape,o,i,s,u)}}};const KG=ZL({conv3DBackpropFilter_:function(e,t,n,r,a){let o=e;4===e.rank&&(o=yW(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;4===i.rank&&(i=yW(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),RR(5===o.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(o.shape,".")),RR(5===i.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,".")),RR(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")),RR(o.shape[4]===n[3],()=>"Error in conv3dDerFilter: depth of input ".concat(o.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")),RR(i.shape[4]===n[4],()=>"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],")."));const s={x:o,dy:i},u={strides:r,pad:a,filterShape:n};return zL.runKernel(Z_,s,u)}}),qG={kernelName:Q_,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:o}=n;RR(hW(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'"));const[i,s]=t;return{x:()=>MW(i.shape,e,s,a,o),filter:()=>KG(i,e,s.shape,a,o)}}};const XG=ZL({sin_:function(e){const t={x:YL(e,"x","sin","float32")};return zL.runKernel(HM,t)}}),YG={kernelName:$_,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(xU(XG(Kj(n,"float32"))),e)}}};const QG=ZL({sinh_:function(e){const t={x:YL(e,"x","sinh")};return zL.runKernel(GM,t)}}),ZG={kernelName:eP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(QG(Kj(n,"float32")),e)}}};const JG=ZL({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={x:YL(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return zL.runKernel(nP,a,o)}}),$G={kernelName:nP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a,exclusive:o,reverse:i}=n;return{x:()=>{const t=uU([a],r.rank);let n=JG(e,a,o,!i);return null!=t&&(n=rV(n,t)),n}}}},eK={kernelName:iP,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:o,dimRoundingMode:i}=n,s=null==r?[1,1]:r;RR(hW(s),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'"));const[u,l]=t;return RR(4===u.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(u.rank,".")),RR(4===l.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")),RR(u.shape[3]===l.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(u.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")),RR(pW(a,s),()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")),mW("depthwiseConv2d",o,i),{x:()=>vV(u.shape,e,l,a,o,s,i),filter:()=>yV(u,e,l.shape,a,o,s,i)}}},tK={kernelName:cP,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,o={x:r,filter:a,dy:e},i={x:r,filter:a,dy:e};return{x:()=>zL.runKernel(dP,o,n),filter:()=>zL.runKernel(hP,i,n)}}},nK={kernelName:mP,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>zL.runKernel(yP,r)}}},rK={kernelName:vP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Jj(VW(xU(ez(n))),2/Math.sqrt(Math.PI));return{x:()=>Jj(e,r)}}},aK={kernelName:xP,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(e,n)}}},oK={kernelName:wP,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>yW(e,n.shape)}}},iK={kernelName:DP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(e,VW(n))}}},sK={kernelName:SP,gradFunc:e=>({x:()=>tz(e)})},uK={kernelName:AP,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=bz(n.shape,r.shape);return{a:()=>{const t=Zj(e,Kj(r,"float32")),o=vz(n.shape,a);return o.length>0?yW(tU(t,o),n.shape):t},b:()=>{let t=Jj(e,Kj(n,"float32"));const o=vz(r.shape,a);o.length>0&&(t=yW(tU(t,o),r.shape));const i=ez(r);return xU(Zj(t,Kj(i,"float32")))}}}};const lK=ZL({rsqrt_:function(e){const t={x:YL(e,"x","rsqrt","float32")};return zL.runKernel(BM,t)}}),cK={kernelName:FP,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[a,o,i,s]=t,u=null==s?rz(1):s,l=vz(o.shape,a.shape),c=[];if(1===o.rank){for(let e=0;e<a.shape.length-1;++e)c.push(a.shape[e]);c.push(1)}const d=fz(a,o),h=Jj(e,u),p=lK(Yj(i,rz(r))),f=Jj(Jj(Jj(p,p),p),rz(-.5));return{x:()=>1===o.rank?yW(Jj(Jj(e,GW(yW(p,[1,1,1,o.shape[0]]),c)),u),a.shape):yW(Jj(Jj(e,p),u),a.shape),mean:()=>{let e=Jj(Jj(p,rz(-1)),h);return 1===o.rank&&(e=tU(e,l)),yW(e,o.shape)},variance:()=>{let e=Jj(Jj(f,d),h);return 1===o.rank&&(e=tU(e,l)),yW(e,o.shape)},scale:()=>{const t=Jj(d,p);let n=Jj(e,t);return 1===o.rank&&(n=tU(n,l)),yW(n,o.shape)},offset:()=>{let t=e;return 1===o.rank&&(t=tU(t,l)),yW(t,o.shape)}}}};const dK=ZL({unsortedSegmentSum_:function(e,t,n){const r=YL(e,"x","unsortedSegmentSum"),a=YL(t,"segmentIds","unsortedSegmentSum","int32");RR(LR(n),()=>"numSegments must be of dtype int");const o={x:r,segmentIds:a},i={numSegments:n};return zL.runKernel(wB,o,i)}}),hK={kernelName:IP,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,a]=t,{axis:o,batchDims:i}=n,s=VR(o,r.shape)[0],u=(e,t,n)=>()=>{const r=e.shape,a=t.size,i=r.slice(0,s),u=i.length,l=r.slice(o,r.length).slice(1),c=l.length,d=pK(0,u),h=pK(u+1,u+1+c),p=fK([i,[a],l]),f=yW(n,p),g=yW(t,[a]),m=fK([[u],d,h]),y=rV(f,m);let v=dK(y,g,e.shape[s]);const b=lU(m);return v=rV(v,b),v};if(1===i){const t=r.shape[0],n=r.split(t,0);return{x:()=>{const t=XU(n.map((t,n)=>u(t,a.slice(n,1),e.slice(n,1))()));return t.reshape(r.shape)},indices:()=>a}}return{x:u(r,a,e),indices:()=>a}}};function pK(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function fK(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const gK={kernelName:OP,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>tz(n),b:()=>tz(r)}}},mK={kernelName:RP,gradFunc:e=>({x:()=>Kj(e,"float32")})},yK={kernelName:MP,gradFunc:e=>({x:()=>tz(e)})},vK={kernelName:BP,gradFunc:e=>({x:()=>tz(e)})},bK={kernelName:LP,gradFunc:e=>({x:()=>tz(e)})},xK={kernelName:jP,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:a}=n,o=YW(r,0);return{x:()=>eV(o,e,Jj(e,a))}}},wK={kernelName:HP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Zj(e,Yj(n,1))}}},DK={kernelName:VP,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Zj(e,Kj(n,"float32"))}}},kK={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;return{logits:()=>{const t=VW(r);return fz(e,Jj(tU(e,a,!0),t))}}}};const CK=ZL({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},a={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return zL.runKernel(YP,r,a)}}),EK={kernelName:XP,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{depthRadius:o,bias:i,alpha:s,beta:u}=n;return{x:()=>CK(r,a,e,o,i,s,u)}}};function SK(e,t,n,r){return t.rank<n.rank&&(t=yW(t,iU(t.shape,r))),e.rank<n.rank&&(e=yW(e,iU(e.shape,r))),{x:()=>Jj(e,Kj(WW(n,t),e.dtype))}}const AK={kernelName:QP,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:a}=r,o=t[0],i=SK(e,t[1],o,VR(a,o.shape));return{x:()=>i.x()}}},FK={kernelName:ZP,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Jj(e,Kj(QW(n,r),"float32")),b:()=>Jj(e,Kj(YV(n,r),"float32"))}}};const IK=ZL({maxPool3dGrad_:function(e,t,n,r,a,o,i){const s=YL(e,"dy","maxPool3dGrad"),u=YL(t,"input","maxPool3dGrad"),l=YL(n,"output","maxPool3dGrad");let c=s,d=u,h=l,p=!1;4===u.rank&&(p=!0,c=yW(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=yW(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=yW(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),RR(5===c.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")),RR(5===d.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")),RR(5===h.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")),mW("maxPool3dGrad",o,i);const f={dy:c,input:d,output:h},g={filterSize:r,strides:a,pad:o,dimRoundingMode:i},m=zL.runKernel(tM,f,g);return p?yW(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),NK={kernelName:eM,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:u}=n;return{x:()=>IK(e,r,a,o,i,s,u)}}};const TK=ZL({maxPoolGrad_:function(e,t,n,r,a,o,i){const s=YL(e,"dy","maxPoolGrad"),u=YL(t,"input","maxPoolGrad"),l=YL(n,"output","maxPoolGrad");RR(u.rank===s.rank,()=>"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")),RR(4===s.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")),RR(4===u.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")),mW("maxPoolGrad",o,i);const c={dy:s,input:u,output:l},d={filterSize:r,strides:a,pad:o,dimRoundingMode:i};return zL.runKernel($P,c,d)}}),OK={kernelName:JP,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:o,strides:i,pad:s}=n;return{x:()=>TK(e,r,a,o,i,s)}}},RK={kernelName:rM,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n,o=VR(a,r.shape),i=MR(oU(r.shape,o)[1]);return{x:()=>{const t=r.shape.slice();o.forEach(e=>{t[e]=1});const n=yW(e,t);return Zj(Jj(n,CU(r.shape,"float32")),i)}}}},_K={kernelName:aM,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:a}=r,[o,i]=t,s=SK(e,i,o,VR(a,o.shape));return{x:()=>s.x()}}},PK={kernelName:oM,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Jj(e,Kj(GV(n,r),"float32")),b:()=>Jj(e,Kj(YW(n,r),"float32"))}}},MK={kernelName:iM,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,o=a.map(e=>e[0]);return{x:()=>jU(e,o,r.shape)}}},BK={kernelName:sM,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=bz(n.shape,r.shape);return{a:()=>{const t=vz(n.shape,a);return t.length>0?yW(tU(e,t),n.shape):e},b:()=>{const t=Jj(e,xU(qW(Zj(n,r)))),o=vz(r.shape,a);return o.length>0?yW(tU(t,o),r.shape):t}}}},LK={kernelName:lM,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=bz(n.shape,r.shape);return{a:()=>{const t=Jj(e,Kj(r,"float32")),o=vz(n.shape,a);return o.length>0?yW(tU(t,o),n.shape):t},b:()=>{const t=Jj(e,Kj(n,"float32")),o=vz(r.shape,a);return o.length>0?yW(tU(t,o),r.shape):t}}}},jK={kernelName:cM,gradFunc:e=>({x:()=>xU(e)})},zK={kernelName:mM,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>kU(n.shape,"float32")}}},WK={kernelName:gM,gradFunc:e=>({x:()=>tz(e)})},UK={kernelName:yM,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return $U(e,r).map(e=>()=>e)}},VK={kernelName:vM,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,o=a.map(e=>e[0]);return{x:()=>jU(e,o,r.shape)}}},HK={kernelName:bM,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,a]=t,o=n,i=r,s=bz(o.shape,i.shape);return{a:()=>{const t=Kj(i,"float32");let n=Jj(e,Jj(t,pz(o,fz(t,rz(1)))));const r=vz(o.shape,s);return r.length>0&&(n=tU(n,r)),yW(n,o.shape)},b:()=>{const t=YW(o,0),n=eV(t,JW(o),tz(o));let r=Jj(e,Jj(a,n));const u=vz(i.shape,s);return u.length>0&&(r=tU(r,u)),yW(r,i.shape)}}}},GK={kernelName:xM,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,a=YW(n,0);return{x:()=>eV(a,e,Jj(e,r)),alpha:()=>{let t=eV(a,tz(e),Jj(e,n));const o=vz(r.shape,e.shape);return o.length>0&&(t=tU(t,o)),yW(t,r.shape)}}}};const KK=ZL({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={x:YL(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:r};return zL.runKernel(tP,a,o)}});function qK(e,t,n){const r=e.shape.length,a=r-n.length,o=uU(n,r);let i=e;null!=o&&(i=rV(e,o));const s=i.shape.slice(),u=s.splice(r-n.length,n.length).reduce((e,t)=>e*t,1);s.push(u);let l=function(e,t,n){const r=e.shape.slice();r[n]=1;const a=yW(t,r),o=KK(e,n,!0,!1),i=KK(e,n,!0,!0),s=Jj(o,i);return Jj(a,s)}(i.reshape(s),t,a);if(l=l.reshape(i.shape),null!=o){const e=lU(o);l=rV(l,e)}return l}const XK={kernelName:wM,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;let o=[];return o=void 0===a||null===a?r.shape.map((e,t)=>t):"number"===typeof a?[a]:a,{x:()=>qK(r,e,o)}}},YK={kernelName:fP,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=bz(n.shape,r.shape);return{a:()=>{const t=Zj(e,Kj(r,"float32")),o=vz(n.shape,a);return o.length>0?yW(tU(t,o),n.shape):t},b:()=>{let t=Jj(e,Kj(n,"float32"));const o=vz(r.shape,a);o.length>0&&(t=yW(tU(t,o),r.shape));const i=ez(r);return xU(Zj(t,Kj(i,"float32")))}}}},QK={kernelName:AM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Zj(e,xU(ez(n)))}}},ZK={kernelName:_M,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Jj(GV(n,6),dV(n));return{x:()=>Jj(e,Kj(r,"float32"))}}},JK={kernelName:FM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(e,Kj(dV(n),"float32"))}}},$K={kernelName:IM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yW(e,n.shape)}}},eq={kernelName:OM,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>zL.runKernel(RM,a,n)}}},tq={kernelName:NM,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>zL.runKernel(TM,a,n)}}},nq={kernelName:PM,gradFunc:(e,t,n)=>{const{dims:r}=n,a=VR(r,e.shape);return{x:()=>PU(e,a)}}},rq={kernelName:MM,gradFunc:e=>({x:()=>tz(e)})},aq={kernelName:BM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>xU(Zj(e,Jj(pz(n,1.5),2)))}}};const oq=ZL({logicalNot_:function(e){const t={x:YL(e,"x","logicalNot","bool")};return zL.runKernel(KP,t)}}),iq={kernelName:WM,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>Kj(tz(n),"float32"),t:()=>Jj(e,Kj(n,e.dtype)),e:()=>Jj(e,Kj(oq(n),e.dtype))}}},sq={kernelName:UM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=YW(n,rz(0)),r=rz(FH),a=rz(IH),o=Jj(e,a),i=Jj(Jj(e,r),VW(Kj(n,"float32")));return eV(t,o,i)}}}},uq={kernelName:qM,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(e,Jj(n,fz(rz(1),n)))}}},lq={kernelName:KM,gradFunc:e=>({x:()=>tz(e)})};const cq=ZL({cos_:function(e){const t={x:YL(e,"x","cos","float32")};return zL.runKernel($_,t)}}),dq={kernelName:HM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(cq(Kj(n,"float32")),e)}}};const hq=ZL({cosh_:function(e){const t={x:YL(e,"x","cosh","float32")};return zL.runKernel(eP,t)}}),pq={kernelName:GM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(hq(Kj(n,"float32")),e)}}},fq={kernelName:VM,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:a,size:o}=n,i=r.shape,[s,u]=Qz(r,a,o),l=[];for(let c=0;c<e.rank;c++)l.push([s[c],i[c]-s[c]-u[c]]);return{x:()=>SU(e,l)}}},gq={kernelName:$M,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:a}=n,o=Jj(e,r);return{logits:()=>fz(o,Jj(tU(o,[a],true),r))}}},mq={kernelName:XM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(e,LU(n))}}};const yq=ZL({batchToSpaceND_:function(e,t,n){const r=YL(e,"x","batchToSpaceND"),a=t.reduce((e,t)=>e*t);RR(r.rank>=1+t.length,()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)),RR(n.length===t.length,()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)),RR(r.shape[0]%a===0,()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a));const o={x:r},i={blockShape:t,crops:n};return zL.runKernel(B_,o,i)}}),vq={kernelName:ZM,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>yq(e,r,a)}}},bq={kernelName:JM,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>SW(e,r)}}},xq={kernelName:YM,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Zj(e,Jj($j(Kj(n,"float32")),2))}}},wq={kernelName:iB,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(e,Jj(Kj(n,"float32"),2))}}},Dq={kernelName:oB,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=rz(2);return{a:()=>Jj(e,Jj(a,fz(n,r))),b:()=>Jj(e,Jj(a,fz(r,n)))}}},kq={kernelName:hB,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=bz(n.shape,r.shape);return{a:()=>{let t=e;const r=vz(n.shape,a);return r.length>0&&(t=tU(t,r)),yW(t,n.shape)},b:()=>{let t=e;const n=vz(r.shape,a);return n.length>0&&(t=tU(t,n)),yW(xU(t),r.shape)}}}},Cq={kernelName:QM,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,a=r.shape.slice(),{axis:o}=n;VR(o,r.shape).forEach(e=>{a[e]=1});const i=yW(e,a),s=Jj(i,CU(r.shape,"float32"));return{x:()=>s}}},Eq={kernelName:pB,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Zj(e,ez(cq(n)))}}},Sq={kernelName:fB,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Jj(fz(rz(1),ez(n)),e)}}},Aq={kernelName:gB,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:a}=n;return{x:()=>{let t=tz(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=Yj(t,jU(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let o=0;o<a[1];++o)t=Yj(t,jU(e,[n*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let o=0;o<a[1];++o)for(let i=0;i<a[2];++i)t=Yj(t,jU(e,[n*r.shape[0],o*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(let n=0;n<a[0];++n)for(let o=0;o<a[1];++o)for(let i=0;i<a[2];++i)for(let s=0;s<a[3];++s)t=Yj(t,jU(e,[n*r.shape[0],o*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},Fq={kernelName:wB,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=xz(t,tz(t)),r=XW(e,n);let a=QW(t,rz(0,"int32"));const o=r.rank-a.rank;for(let s=0;s<o;++s)a=HW(a,s+1);a=hU(a,CU(r.shape,"bool"));const i=tz(r);return eV(a,r,i)}(e,n)}}};const Iq=[bG,xG,wG,DG,kG,CG,EG,SG,AG,FG,IG,NG,OG,_G,PG,BG,LG,jG,zG,WG,UG,VG,GG,HG,qG,YG,ZG,$G,eK,tK,YK,nK,rK,aK,oK,iK,uK,sK,cK,hK,gK,mK,yK,vK,bK,xK,wK,DK,kK,EK,AK,AK,FK,NK,OK,RK,_K,PK,MK,BK,LK,jK,zK,WK,UK,VK,VK,HK,GK,XK,QK,ZK,JK,$K,eq,tq,nq,rq,aq,iq,sq,uq,lq,dq,pq,fq,gq,mq,vq,vq,bq,bq,xq,Dq,wq,{kernelName:kB,gradFunc:e=>({x:()=>tz(e)})},kq,Cq,Eq,Sq,Aq,{kernelName:vB,gradFunc:(e,t,n)=>{const r=n,{perm:a}=r,o=lU(a);return{x:()=>rV(e,o)}}},{kernelName:xB,gradFunc:(e,t,n)=>{const r=n,{axis:a}=r;return{value:()=>XU(e,a)}}},Fq,{kernelName:DB,gradFunc:e=>({x:()=>tz(e)})}];for(const n of Iq)BB(n);xL().prototype.abs=function(){return this.throwIfDisposed(),mz(this)};const Nq=ZL({acos_:function(e){const t={x:YL(e,"x","acos")};return zL.runKernel(b_,t)}});xL().prototype.acos=function(){return this.throwIfDisposed(),Nq(this)};const Tq=ZL({acosh_:function(e){const t={x:YL(e,"x","acosh")};return zL.runKernel(x_,t)}});xL().prototype.acosh=function(){return this.throwIfDisposed(),Tq(this)},xL().prototype.add=function(e){return this.throwIfDisposed(),Yj(this,e)},xL().prototype.all=function(e,t){return this.throwIfDisposed(),$z(this,e,t)},xL().prototype.any=function(e,t){return this.throwIfDisposed(),eW(this,e,t)},xL().prototype.argMax=function(e){return this.throwIfDisposed(),tW(this,e)};const Oq=ZL({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:YL(e,"x","argMin")},r={axis:t};return zL.runKernel(S_,n,r)}});xL().prototype.argMin=function(e){return this.throwIfDisposed(),Oq(this,e)},xL().prototype.asScalar=function(){return this.throwIfDisposed(),RR(1===this.size,()=>"The array must have only 1 element."),yW(this,[])},xL().prototype.asType=function(e){return this.throwIfDisposed(),Kj(this,e)},xL().prototype.as1D=function(){return this.throwIfDisposed(),yW(this,[this.size])},xL().prototype.as2D=function(e,t){return this.throwIfDisposed(),yW(this,[e,t])},xL().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),yW(this,[e,t,n])},xL().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),yW(this,[e,t,n,r])},xL().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),yW(this,[e,t,n,r,a])};const Rq=ZL({asin_:function(e){const t={x:YL(e,"x","asin")};return zL.runKernel(A_,t)}});xL().prototype.asin=function(){return this.throwIfDisposed(),Rq(this)};const _q=ZL({asinh_:function(e){const t={x:YL(e,"x","asinh")};return zL.runKernel(F_,t)}});xL().prototype.asinh=function(){return this.throwIfDisposed(),_q(this)};const Pq=ZL({atan_:function(e){const t={x:YL(e,"x","atan")};return zL.runKernel(I_,t)}});xL().prototype.atan=function(){return this.throwIfDisposed(),Pq(this)};const Mq=ZL({atan2_:function(e,t){let n=YL(e,"a","atan2"),r=YL(t,"b","atan2");[n,r]=OL(n,r);const a={a:n,b:r};return zL.runKernel(T_,a)}});xL().prototype.atan2=function(e){return this.throwIfDisposed(),Mq(this,e)};const Bq=ZL({atanh_:function(e){const t={x:YL(e,"x","atanh")};return zL.runKernel(N_,t)}});xL().prototype.atanh=function(){return this.throwIfDisposed(),Bq(this)},xL().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),vW(this,e,t,n,r)},xL().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),yq(this,e,t)},xL().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),xW(this,e,t,n,r,a)},xL().prototype.broadcastTo=function(e){return this.throwIfDisposed(),CW(this,e)},xL().prototype.cast=function(e){return this.throwIfDisposed(),Kj(this,e)};const Lq=ZL({ceil_:function(e){const t={x:YL(e,"x","ceil","float32")};return zL.runKernel(U_,t)}});xL().prototype.ceil=function(){return this.throwIfDisposed(),Lq(this)},xL().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),EW(this,e,t)},xL().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof bL&&(e=[e]),SW([this,...e],t)},xL().prototype.conv1d=function(e,t,n,r,a,o){return this.throwIfDisposed(),OW(this,e,t,n,r,a,o)},xL().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),_W(this,e,t,n,r,a)},xL().prototype.conv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),TW(this,e,t,n,r,a,o)},xL().prototype.cos=function(){return this.throwIfDisposed(),cq(this)},xL().prototype.cosh=function(){return this.throwIfDisposed(),hq(this)},xL().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),KK(this,e,t,n)},xL().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),JG(this,e,t,n)};const jq=ZL({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=YL(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];RR(t>1,()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t)),RR(a*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)),RR(o*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)),RR(i%(t*t)===0,()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(r.shape));const s={x:r},u={blockSize:t,dataFormat:n};return zL.runKernel(oP,s,u)}});xL().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),jq(this,e,t)},xL().prototype.depthwiseConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),jW(this,e,t,n,r,a,o)};const zq=ZL({dilation2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const i=YL(e,"x","dilation2d"),s=YL(t,"filter","dilation2d");RR(3===i.rank||4===i.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,".")),RR(3===s.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")),RR("NHWC"===o,()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(o));let u=i,l=!1;3===i.rank&&(u=yW(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=!0),RR(u.shape[3]===s.shape[2],()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(u.shape[3]," vs ").concat(s.shape[2]));const c={x:u,filter:s},d={strides:n,pad:r,dilations:a},h=zL.runKernel(cP,c,d);return l?yW(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});xL().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),zq(this,e,t,n,r,a)};const Wq=ZL({divNoNan_:function(e,t){let n=YL(e,"a","div"),r=YL(t,"b","div");[n,r]=OL(n,r);const a=Zj(n,r),o=tz(a),i=WW(r,o);return eV(i,o,a)}});xL().prototype.divNoNan=function(e){return this.throwIfDisposed(),Wq(this,e)},xL().prototype.div=function(e){return this.throwIfDisposed(),Zj(this,e)};const Uq=ZL({dot_:function(e,t){const n=YL(e,"t1","dot"),r=YL(t,"t2","dot");RR((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,"."));const a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(RR(a===o,()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(o,".")),1===n.rank&&1===r.rank){const e=yW(n,[1,-1]),t=yW(r,[-1,1]),a=pU(e,t);return yW(a,[])}if(1===n.rank&&2===r.rank){const e=yW(n,[1,-1]),t=yW(r,[r.shape[0],r.shape[1]]),a=pU(e,t);return yW(a,[a.size])}if(2===n.rank&&1===r.rank){const e=yW(r,[-1,1]),t=pU(n,e);return yW(t,[t.size])}{const e=yW(r,[r.shape[0],r.shape[1]]);return pU(n,e)}}});xL().prototype.dot=function(e){return this.throwIfDisposed(),Uq(this,e)},xL().prototype.elu=function(){return this.throwIfDisposed(),zW(this)},xL().prototype.equal=function(e){return this.throwIfDisposed(),WW(this,e)},xL().prototype.erf=function(){return this.throwIfDisposed(),UW(this)};const Vq=ZL({euclideanNorm_:function(e){return JV(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});xL().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Vq(this,e,t)},xL().prototype.exp=function(){return this.throwIfDisposed(),VW(this)},xL().prototype.expandDims=function(e){return this.throwIfDisposed(),HW(this,e)};const Hq=ZL({expm1_:function(e){const t={x:YL(e,"x","expm1")};return zL.runKernel(DP,t)}});xL().prototype.expm1=function(){return this.throwIfDisposed(),Hq(this)},xL().prototype.fft=function(){return this.throwIfDisposed(),oV(this)},xL().prototype.flatten=function(){return this.throwIfDisposed(),yW(this,[this.size])},xL().prototype.floor=function(){return this.throwIfDisposed(),qW(this)},xL().prototype.floorDiv=function(e){return this.throwIfDisposed(),Qj(this,e)},xL().prototype.gather=function(e,t,n){return this.throwIfDisposed(),XW(this,e,t,n)},xL().prototype.greaterEqual=function(e){return this.throwIfDisposed(),QW(this,e)},xL().prototype.greater=function(e){return this.throwIfDisposed(),YW(this,e)},xL().prototype.ifft=function(){return this.throwIfDisposed(),sV(this)},xL().prototype.irfft=function(){return this.throwIfDisposed(),uV(this)};const Gq=ZL({isFinite_:function(e){const t={x:YL(e,"x","isFinite")};return zL.runKernel(MP,t)}});xL().prototype.isFinite=function(){return this.throwIfDisposed(),Gq(this)};const Kq=ZL({isInf_:function(e){const t={x:YL(e,"x","isInf")};return zL.runKernel(BP,t)}});xL().prototype.isInf=function(){return this.throwIfDisposed(),Kq(this)};const qq=ZL({isNaN_:function(e){const t={x:YL(e,"x","isNaN")};return zL.runKernel(LP,t)}});xL().prototype.isNaN=function(){return this.throwIfDisposed(),qq(this)},xL().prototype.leakyRelu=function(e){return this.throwIfDisposed(),ZW(this,e)},xL().prototype.lessEqual=function(e){return this.throwIfDisposed(),GV(this,e)},xL().prototype.less=function(e){return this.throwIfDisposed(),YV(this,e)};const Xq=ZL({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const o=YL(e,"x","localResponseNormalization");RR(4===o.rank||3===o.rank,()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,".")),RR(LR(t),()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,"."));let i=o,s=!1;3===o.rank&&(s=!0,i=yW(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const u={x:i},l={depthRadius:t,bias:n,alpha:r,beta:a},c=zL.runKernel(XP,u,l);return s?yW(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});xL().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Xq(this,e,t,n,r)};const Yq=ZL({logSigmoid_:function(e){const t=YL(e,"x","logSigmoid"),n=nz(e=>({value:xU(GU(xU(e))),gradFunc:t=>Jj(t,LU(xU(e)))}));return n(t)}});xL().prototype.logSigmoid=function(){return this.throwIfDisposed(),Yq(this)},xL().prototype.logSoftmax=function(e){return this.throwIfDisposed(),nU(this,e)},xL().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),dU(this,e,t)},xL().prototype.log=function(){return this.throwIfDisposed(),JW(this)},xL().prototype.log1p=function(){return this.throwIfDisposed(),$W(this)},xL().prototype.logicalAnd=function(e){return this.throwIfDisposed(),hU(this,e)},xL().prototype.logicalNot=function(){return this.throwIfDisposed(),oq(this)};const Qq=ZL({logicalOr_:function(e,t){const n=YL(e,"a","logicalOr","bool"),r=YL(t,"b","logicalOr","bool");bz(n.shape,r.shape);const a={a:n,b:r};return zL.runKernel(qP,a)}});xL().prototype.logicalOr=function(e){return this.throwIfDisposed(),Qq(this,e)};const Zq=ZL({logicalXor_:function(e,t){const n=YL(e,"a","logicalXor","bool"),r=YL(t,"b","logicalXor","bool");return bz(n.shape,r.shape),hU(Qq(e,t),oq(hU(e,t)))}});xL().prototype.logicalXor=function(e){return this.throwIfDisposed(),Zq(this,e)},xL().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),pU(this,e,t,n)},xL().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),fU(this,e,t,n,r)},xL().prototype.max=function(e,t){return this.throwIfDisposed(),eU(this,e,t)},xL().prototype.maximum=function(e){return this.throwIfDisposed(),xz(this,e)},xL().prototype.mean=function(e,t){return this.throwIfDisposed(),mU(this,e,t)},xL().prototype.min=function(e,t){return this.throwIfDisposed(),yU(this,e,t)},xL().prototype.minimum=function(e){return this.throwIfDisposed(),vU(this,e)};const Jq=ZL({mirrorPad_:function(e,t,n){RR("reflect"===n||"symmetric"===n,()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,"."));const r=YL(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");RR(t.length===r.rank,()=>"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,"."));const a="reflect"===n?1:0;for(let s=0;s<r.rank;s++)RR(2===t[s].length,()=>"Invalid number of paddings. Must be length of 2 each."),RR(t[s][0]>=0&&t[s][0]<=r.shape[s]-a&&t[s][1]>=0&&t[s][1]<=r.shape[s]-a,()=>"Padding in dimension ".concat(s," cannot be greater than or equal ")+"to ".concat(r.shape[s]-a," or less than 0 for input of ")+"shape ".concat(r.shape));const o={paddings:t,mode:n},i={x:r};return zL.runKernel(iM,i,o)}});xL().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Jq(this,e,t)};const $q=ZL({mod_:function(e,t){let n=YL(e,"a","mod"),r=YL(t,"b","mod");[n,r]=OL(n,r);const a={a:n,b:r};return zL.runKernel(sM,a)}});xL().prototype.mod=function(e){return this.throwIfDisposed(),$q(this,e)},xL().prototype.mul=function(e){return this.throwIfDisposed(),Jj(this,e)},xL().prototype.neg=function(){return this.throwIfDisposed(),xU(this)},xL().prototype.norm=function(e,t,n){return this.throwIfDisposed(),JV(this,e,t,n)},xL().prototype.notEqual=function(e){return this.throwIfDisposed(),wU(this,e)},xL().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),DU(this,e,t,n)},xL().prototype.onesLike=function(){return this.throwIfDisposed(),EU(this)},xL().prototype.pad=function(e,t){return this.throwIfDisposed(),SU(this,e,t)};const eX=ZL({pool_:function(e,t,n,r,a,o,i){null==a&&(a=[1,1]),null==o&&(o=1),0===r&&(r="valid");const s=YL(e,"x","maxPool");let u=s,l=!1;3===s.rank&&(l=!0,u=yW(s,[1,s.shape[0],s.shape[1],s.shape[2]])),RR(pW(o,a),()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(a,"'"));const c=rW(u.shape,t,o,a,r),d=[c.dilationHeight,c.dilationWidth];let h;h="same"===r?function(e,t){const n=e.map((e,n)=>e+(e-1)*(t[n]-1)),r=n.map(e=>e-1),a=r.map(e=>Math.floor(e/2)),o=r.map((e,t)=>e-a[t]);return r.map((e,t)=>[a[t],o[t]])}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];const p=1===d[0]&&1===d[1],[f,g]=function(e,t,n){const r=n.map(e=>e[0]),a=n.map(e=>e[1]),o=e.concat(r,a),i=t.map((e,t)=>(e-o[t]%e)%e),s=a.map((e,t)=>e+i[t]),u=t.map((e,t)=>[r[t],s[t]]),l=t.map((e,t)=>[0,i[t]]);return[u,l]}([c.inHeight,c.inWidth],d,h),m=p?r:"valid",y=p?u:MG(u,d,f),v=("avg"===n?()=>vW(y,t,o,m,i):()=>fU(y,t,o,m,i))(),b=p?v:yq(v,d,g);return l?yW(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});xL().prototype.pool=function(e,t,n,r,a,o){return this.throwIfDisposed(),eX(this,e,t,n,r,a,o)},xL().prototype.pow=function(e){return this.throwIfDisposed(),pz(this,e)},xL().prototype.prelu=function(e){return this.throwIfDisposed(),AU(this,e)};const tX=ZL({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=YL(e,"x","prod");"bool"===r.dtype&&(r=Kj(r,"int32"));const a={x:r},o={axis:t,keepDims:n};return zL.runKernel(wM,a,o)}});xL().prototype.prod=function(e,t){return this.throwIfDisposed(),tX(this,e,t)};const nX=ZL({reciprocal_:function(e){const t={x:YL(e,"x","reciprocal")};return zL.runKernel(AM,t)}});xL().prototype.reciprocal=function(){return this.throwIfDisposed(),nX(this)},xL().prototype.relu=function(){return this.throwIfDisposed(),_U(this)},xL().prototype.relu6=function(){return this.throwIfDisposed(),cV(this)},xL().prototype.reshapeAs=function(e){return this.throwIfDisposed(),yW(this,e.shape)},xL().prototype.reshape=function(e){return this.throwIfDisposed(),yW(this,e)},xL().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),UV(this,e,t,n)},xL().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),VV(this,e,t,n)},xL().prototype.reverse=function(e){return this.throwIfDisposed(),PU(this,e)},xL().prototype.rfft=function(){return this.throwIfDisposed(),iV(this)},xL().prototype.round=function(){return this.throwIfDisposed(),KV(this)},xL().prototype.rsqrt=function(){return this.throwIfDisposed(),lK(this)},xL().prototype.selu=function(){return this.throwIfDisposed(),MU(this)},xL().prototype.separableConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),BU(this,e,t,n,r,a,o)},xL().prototype.sigmoid=function(){return this.throwIfDisposed(),LU(this)};const rX=ZL({sign_:function(e){const t={x:YL(e,"x","sign")};return zL.runKernel(KM,t)}});xL().prototype.sign=function(){return this.throwIfDisposed(),rX(this)},xL().prototype.sin=function(){return this.throwIfDisposed(),XG(this)},xL().prototype.sinh=function(){return this.throwIfDisposed(),QG(this)},xL().prototype.slice=function(e,t){return this.throwIfDisposed(),jU(this,e,t)},xL().prototype.softmax=function(e){return this.throwIfDisposed(),HU(this,e)},xL().prototype.softplus=function(){return this.throwIfDisposed(),GU(this)},xL().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),MG(this,e,t)},xL().prototype.split=function(e,t){return this.throwIfDisposed(),KU(this,e,t)},xL().prototype.sqrt=function(){return this.throwIfDisposed(),$j(this)},xL().prototype.square=function(){return this.throwIfDisposed(),ez(this)},xL().prototype.squaredDifference=function(e){return this.throwIfDisposed(),rH(this,e)},xL().prototype.squeeze=function(e){return this.throwIfDisposed(),qU(this,e)},xL().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof bL?[this,e]:[this,...e];return XU(n,t)},xL().prototype.step=function(e){return this.throwIfDisposed(),dV(this,e)};const aX=ZL({stridedSlice_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const l={x:YL(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u};return zL.runKernel(uB,l,c)}});xL().prototype.stridedSlice=function(e,t,n,r,a,o,i,s){return this.throwIfDisposed(),aX(this,e,t,n,r,a,o,i,s)},xL().prototype.sub=function(e){return this.throwIfDisposed(),fz(this,e)},xL().prototype.sum=function(e,t){return this.throwIfDisposed(),tU(this,e,t)};const oX=ZL({tan_:function(e){const t={x:YL(e,"x","tan","float32")};return zL.runKernel(pB,t)}});xL().prototype.tan=function(){return this.throwIfDisposed(),oX(this)},xL().prototype.tanh=function(){return this.throwIfDisposed(),YU(this)},xL().prototype.tile=function(e){return this.throwIfDisposed(),GW(this,e)},xL().prototype.toBool=function(){return this.throwIfDisposed(),Kj(this,"bool")},xL().prototype.toFloat=function(){return this.throwIfDisposed(),Kj(this,"float32")},xL().prototype.toInt=function(){return this.throwIfDisposed(),Kj(this,"int32")};const iX=ZL({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=YL(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));const o={x:r},i={k:t,sorted:n},[s,u]=zL.runKernel(mB,o,i);return{values:s,indices:u}}});xL().prototype.topk=function(e,t){return this.throwIfDisposed(),iX(this,e,t)},xL().prototype.transpose=function(e){return this.throwIfDisposed(),rV(this,e)};const sX=ZL({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=YL(e,"x","unique","string_or_numeric");RR(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:t},[o,i]=zL.runKernel(bB,r,a);return{values:o,indices:i}}});xL().prototype.unique=function(e){return this.throwIfDisposed(),sX(this,e)},xL().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),dK(this,e,t)},xL().prototype.unstack=function(e){return this.throwIfDisposed(),$U(this,e)},xL().prototype.where=function(e,t){return this.throwIfDisposed(),eV(e,this,t)},xL().prototype.zerosLike=function(){return this.throwIfDisposed(),tz(this)};class uX extends Error{constructor(e){super(e),Object.setPrototypeOf(this,uX.prototype)}}class lX extends Error{constructor(e){super(e),Object.setPrototypeOf(this,lX.prototype)}}class cX extends Error{constructor(e){super(e),Object.setPrototypeOf(this,cX.prototype)}}class dX extends Error{constructor(e){super(e),Object.setPrototypeOf(this,dX.prototype)}}class hX extends Error{constructor(e){super(e),Object.setPrototypeOf(this,hX.prototype)}}Error;class pX{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function fX(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function gX(e,t){if(!e)throw new hX(t)}function mX(e,t){let n=0;for(const r of e)r===t&&n++;return n}function yX(e){return 1===e.length?e[0]:e}function vX(e){return Array.isArray(e)?e:[e]}function bX(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function xX(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let wX={};function DX(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function kX(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach(e=>kX(e));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?kX(t):e[n]=t.value)}}}function CX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const a=e;let o;if(a in n)o=n[a];else if(a in wX)o=wX[a];else if(o=t[a],null==o)throw new cX("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return o}{const o=e;if(null==o.className||null==o.config)throw new cX("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(o),".\n")+"'className' and 'config' must set.");const i=o.className;let s,u;if(i in n?[s,u]=n[i]:i in wX?[s,u]=wX.className:i in t&&([s,u]=t[i]),null==s)throw new cX("Unknown ".concat(r,": ").concat(i,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=u){const e={};for(const n of Object.keys(wX))e[n]=wX[n];for(const a of Object.keys(n))e[a]=n[a];o.config.customObjects=e;const t=Object.assign({},wX);for(const a of Object.keys(n))wX[a]=n[a];kX(o.config);const r=u(s,o.config,n,a);return wX=Object.assign({},t),r}{const e=Object.assign({},wX);for(const r of Object.keys(n))wX[r]=n[r];const t=new s(o.config);return wX=Object.assign({},e),t}}}function EX(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function SX(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function AX(e){if(null==e)throw new cX("Invalid value in obj: ".concat(JSON.stringify(e)));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function FX(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new cX("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function IX(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return gX(n>=0),gX(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function NX(e,t){Array.isArray(e)?(RR(e.length>0,()=>"".concat(t," is unexpectedly an empty array.")),e.forEach((e,n)=>NX(e,"element ".concat(n+1," of ").concat(t)))):RR(Number.isInteger(e)&&e>0,()=>"Expected ".concat(t," to be a positive integer, but got ")+"".concat(TX(e),"."))}function TX(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>TX(e)).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function OX(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let RX=0;function _X(){return RX++}const PX={};function MX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in PX||(PX[e]=0),PX[e]+=1,e+PX[e].toString()}const BX=["channelsFirst","channelsLast"],LX=["nearest","bilinear"],jX=["valid","same","causal"],zX=["max","avg"],WX=["sum","mul","concat","ave"],UX=new Map;function VX(e){FX(BX,"DataFormat",e)}function HX(e){FX(jX,"PaddingMode",e)}function GX(e){FX(zX,"PoolMode",e)}const KX=[];function qX(e,t){KX.push(e);try{const e=t();return KX.pop(),e}catch(Ut){throw KX.pop(),Ut}}function XX(e){if(!ZX(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===KX.length?"":KX.join("/")+"/")+e}function YX(e){if(!ZX(e))throw new Error("Not a valid tensor name: '"+e+"'");UX.has(e)||UX.set(e,0);const t=UX.get(e);if(UX.set(e,UX.get(e)+1),t>0){const n="".concat(e,"_").concat(t);return UX.set(n,1),n}return e}const QX=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function ZX(e){return!!e.match(QX)}function JX(e){return e===parseInt(e.toString(),10)}function $X(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function eY(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function tY(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function nY(e,t){if(t<e)throw new cX("end (".concat(t,") < begin (").concat(e,") is forbidden."));const n=[];for(let r=e;r<t;++r)n.push(r);return n}let rY;function aY(){return null==rY&&(rY=uj().epsilon()),rY}function oY(e,t){return Kj(e,t)}function iY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),yW(e,n)}function sY(e,t,n){return aj(()=>{switch(e.rank){case 1:return zU(e,t,n);case 2:return WU(e,[t,0],[n,e.shape[1]]);case 3:return UU(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return VU(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return jU(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return jU(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new cX("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function uY(e,t,n){return aj(()=>{switch(e.rank){case 1:return zU(e,t,n);case 2:return WU(e,[0,t],[e.shape[0],n]);case 3:return UU(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return VU(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new cX("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function lY(e,t,n,r){return aj(()=>{switch(e.rank){case 1:return zU(e,t,n);case 2:switch(r){case 1:return sY(e,t,n);case 2:return uY(e,t,n);default:throw new cX("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return sY(e,t,n);case 2:return UU(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return uY(e,t,n);default:throw new cX("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return sY(e,t,n);case 2:return VU(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return VU(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return uY(e,t,n);default:throw new cX("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new cX("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function cY(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),SW(e,n)}function dY(e,t){switch(e.rank){case 1:return AW([e,t]);case 2:return FW([e,t],0);case 3:return IW([e,t],0);case 4:return NW([e,t],0);default:throw new cX("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function hY(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new cX("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return GW(e,t)}function pY(e){return TU(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function fY(e,t,n,r){if(e.rank<2||t.rank<2)throw new dX("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new dX("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(2===e.rank&&2===t.rank){return bV({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?yY(e.rank,r,"channelsLast"):null,activation:n})}{const a=e.shape.slice(),o=a.pop();e=yW(e,[-1,o]);const i=t.shape.slice(),s=i.pop(),u=i.pop(),l=[...i,s],c=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=yW(rV(t,c),[u,-1]);const d=[...a,...l];return yW(bV({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?yY(e.rank,r,"channelsLast"):null,activation:n}),d)}}function gY(e,t,n){return aj(()=>(t=Array.isArray(t)?QU(t,"int32"):Kj(t,"int32"),XW(e,t,n)))}function mY(e){return Jj(e,e)}function yY(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new cX("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?yW(t,[1,r[0],1,1,1]):yW(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?yW(t,[1,1,1,1,r[0]]):yW(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?yW(t,[1,r[0],1,1]):yW(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?yW(t,[1,1,1,r[0]]):yW(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?yW(t,[1,r[0],1]):yW(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?yW(t,[1,1,r[0]]):yW(t,[1].concat(r))}else if(e<3)return t;throw new cX("Unsupported input rank by biasAdd: ".concat(t.rank))}function vY(e,t,n){return aj(()=>(null==n&&(n="channelsLast"),VX(n),Yj(e,yY(e.rank,t,n))))}function bY(e,t,n,r){return aj(()=>aV(e,t,n,r))}function xY(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const wY=["fanIn","fanOut","fanAvg"],DY=["normal","uniform","truncatedNormal"];class kY extends iz{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class CY extends kY{apply(e,t){return kU(e,t)}}CY.className="Zeros",uz(CY);class EY extends kY{apply(e,t){return CU(e,t)}}EY.className="Ones",uz(EY);class SY extends kY{constructor(e){if(super(),"object"!==typeof e)throw new cX("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new cX("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return aj(()=>Jj(rz(this.value),CU(e,t)))}getConfig(){return{value:this.value}}}SY.className="Constant",uz(SY);class AY extends kY{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return OU(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}AY.className="RandomUniform",uz(AY);class FY extends kY{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new dX("randomNormal does not support dType ".concat(t,"."));return pY(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}FY.className="RandomNormal",uz(FY);class IY extends kY{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new dX("truncatedNormal does not support dType ".concat(t,"."));return JU(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}IY.className="TruncatedNormal",uz(IY);class NY extends kY{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return aj(()=>{if(2!==e.length||e[0]!==e[1])throw new cX("Identity matrix initializer can only be used for 2D square matrices.");return Jj(this.gain,KW(e[0]))})}getConfig(){return{gain:this.gain}}}NY.className="Identity",uz(NY);class TY extends kY{constructor(e){if(super(),e.scale<0)throw new cX("scale must be a positive float. Got: ".concat(e.scale));this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){FX(wY,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){FX(DY,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(VX(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=$X(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=$X(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=$X(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],a=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,a):o/=Math.max(1,(r+a)/2),"normal"===this.distribution){const n=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new dX("".concat(this.getClassName()," does not support dType ").concat(t,"."));return JU(e,0,n,t,this.seed)}{const n=Math.sqrt(3*o);return OU(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}TY.className="VarianceScaling",uz(TY);class OY extends TY{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return TY.className}}OY.className="GlorotUniform",uz(OY);class RY extends TY{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return TY.className}}RY.className="GlorotNormal",uz(RY);class _Y extends TY{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return TY.className}}_Y.className="HeNormal",uz(_Y);class PY extends TY{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return TY.className}}PY.className="HeUniform",uz(PY);class MY extends TY{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return TY.className}}MY.className="LeCunNormal",uz(MY);class BY extends TY{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return TY.className}}BY.className="LeCunUniform",uz(BY);class LY extends kY{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return aj(()=>{if(e.length<2)throw new dX("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));const n=MR(e.slice(0,-1)),r=e[e.length-1],a=n*r;a>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(a,") elements: ")+"Slowness may result.");const o=pY([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),i=oH.qr(o,!1);let s=i[0];const u=i[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=Jj(s,u.sign()),n<r&&(s=s.transpose()),Jj(rz(this.gain),s.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}LY.className="Orthogonal",uz(LY);const jY={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function zY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return CX(e,sz.getMap().classNameMap,t,"initializer")}function WY(e){return DX(e)}function UY(e){if("string"===typeof e){const t=e in jY?jY[e]:e;if("GlorotNormal"===t)return new RY;if("GlorotUniform"===t)return new OY;if("HeNormal"===t)return new _Y;if("HeUniform"===t)return new PY;if("LeCunNormal"===t)return new MY;if("LeCunUniform"===t)return new BY;{const e={};return e.className=t,e.config={},zY(e)}}return e instanceof kY?e:zY(e)}function VY(e){return Array.isArray(e)&&Array.isArray(e[0])}function HY(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function GY(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new cX("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function KY(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new cX("Expected exactly 1 Shape; got ".concat(e.length))}return e}function qY(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}const XY="Variable";class YY{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:XY,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=_X(),n=null==n?XY:n,this.originalName=XX(n),this.name=YX(this.originalName),this.trainable_=r,this.constraint=a,this.val=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return zL.makeVariable(e,t,n,r)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function QY(e){return e.map(e=>e.read())}function ZY(e){e.forEach(e=>{e[0].write(e[1])})}class JY{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class $Y{constructor(e,t,n,r,a,o,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=i,this.id=_X(),null!=o&&(this.originalName=XX(o),this.name=YX(this.originalName)),this.rank=t.length}}let eQ=0;class tQ{constructor(e,t){this.callArgs=t,this.id=eQ++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let nQ=0;class rQ extends iz{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=nQ++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=bX(e)+"_"+MX(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new lX("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new cX("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return yX(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return yX(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new uX("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new uX("Layer ".concat(this.name)+" is not connected, no input to return.");return yX(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new uX("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new uX("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return yX(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=vX(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=vX(this.inputSpec);if(t.length!==n.length)throw new cX("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(let r=0;r<t.length;r++){const e=t[r],a=n[r];if(null==a)continue;const o=e.rank;if(null!=a.ndim&&o!==a.ndim)throw new cX("Input ".concat(r," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(o));if(null!=a.maxNDim&&o>a.maxNDim)throw new cX("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(o));if(null!=a.minNDim&&o<a.minNDim)throw new cX("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(o,"."));if(null!=a.dtype&&e.dtype!==a.dtype)throw new cX("Input ".concat(r," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(e.dtype,"."));if(a.axes){const t=e.shape;for(const e in a.axes){const n=Number(e),o=a.axes[e],i=n>=0?t[n]:t[t.length+n];if(null!=o&&-1===[o,null].indexOf(i))throw new cX("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(n," of input shape to ")+"have value ".concat(o," but got shape ").concat(t,"."))}}if(null!=a.shape)for(let t=0;t<a.shape.length;++t){const n=a.shape[t],o=e.shape[t];if(null!=n&&null!=o&&n!==o)throw new cX("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=vX(e),r=function(e){let t=!0;for(const n of vX(e))if(!(n instanceof $Y)){t=!1;break}return t}(e),a=function(e){let t=!0;for(const n of vX(e))if(n instanceof $Y){t=!1;break}return t}(e);if(r===a)throw new cX("Arguments to apply() must be all SymbolicTensors or all Tensors");return qX(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of vX(e))t.push(n.shape);this.build(yX(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const a=vX(r),o=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),o.push(e);if(r=yX(o),null!=this.activityRegularizer)throw new dX("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=vX(e);const t=[];for(const n of e)t.push(n.shape);return yX(t)}(e),r=this.computeOutputShape(n);let a;const o="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),a=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new $Y(o,n,this,vX(e),t,this.name,r)):new $Y(o,r,this,vX(e),t,this.name),this.addInboundNode(e,a,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new dX("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new uX("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new uX("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new lX("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return qY(this.weights)}build(e){this.built=!0}getWeights(){return QY(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){aj(()=>{const t=this.weights;if(t.length!==e.length)throw new cX('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(t.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0===t.length)return;const n=[],r=QY(t);for(let a=0;a<r.length;++a){const o=r[a],i=t[a],s=e[a];if(!BR(o.shape,s.shape))throw new cX("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(s.shape));n.push([i,s])}ZY(n)})}addWeight(e,t,n,r,a,o,i,s){if(-1!==this._addedWeightNames.indexOf(e))throw new cX("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():UY("zeros"));const u=r.apply(t,n),l=new YY(u,n,e,o,i);return u.dispose(),null!=a&&this.addLoss(()=>a.apply(l.read())),null==o&&(o=!0),o?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=vX(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach(e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")})}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),a=vX(t),o=vX(r);if(a.length!==o.length)throw new Error("".concat(this.name," outputs ").concat(a.length," tensors ")+"but ".concat(a.length," masks for those tensors"));for(let i=0;i<a.length;i++)a[i].kerasMask=o[i]}addInboundNode(e,t,n,r,a,o){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const s=vX(e);t=vX(t),n=vX(n),r=vX(r),a=HY(a),o=HY(o);const u=[],l=[],c=[];for(const d of s)u.push(d.sourceLayer),l.push(d.nodeIndex),c.push(d.tensorIndex);new tQ({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:o},i);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function aQ(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=aQ(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class oQ extends rQ{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:MX("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new cX("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new cX("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new cX("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new $Y(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new tQ({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new cX("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function iQ(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new cX("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;null==n&&(n="float32");return new oQ({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}oQ.className="InputLayer",uz(oQ);class sQ{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof sQ)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new cX("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Kj(t,e.dtype)}catch(sde){throw new cX("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof $Y){if(null==this.id2Value[e.id])throw new cX("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new cX("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof $Y){if(null==this.id2Value[e.id])throw new cX("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new cX("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&oj(this.id2Mask)}}const uQ=new pX,lQ=new pX;function cQ(e,t,n,r){const a=null!=n&&n.training,o=Array.isArray(e),i=o?e:[e],s=i.map(e=>e.name),u=[],l=t.names();for(const f of s)-1!==l.indexOf(f)?u.push(t.getValue(f)):u.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=s.join(",")+"|"+t.names().sort().join(",");let d,h=uQ.get(c);if(null==h){const e=function(e,t){RR(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===e.length){const a=hQ(e[0],t);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const o of e){const{sorted:e,recipientMap:i}=hQ(o,t);for(const t of e)a.has(t.name)||(n.push(t),a.add(t.name));for(const t in i)null==r[t]&&(r[t]=new Set),i[t].forEach(e=>r[t].add(e))}}return{sorted:n,recipientCounts:dQ(r)}}(i,t);h=e.sorted,d=e.recipientCounts,uQ.put(c,h),lQ.put(c,d)}d={},a||Object.assign(d,lQ.get(c));const p=new sQ(t);for(let f=0;f<h.length;++f){if(null!=r){const e=rj().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=h[f],o=e.sourceLayer;if(o instanceof oQ)continue;const i=[],l=[],c=[];let g=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);i.push(e),l.push(r),null!=r&&(g=!0),a||(d[n.name]--,0!==d[n.name]||t.hasKey(n)||-1!==s.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||c.push(e))}g&&((n=n||{}).mask=l[0]);const m=vX(o.apply(i,n));let y=null;o.supportsMasking&&(y=o.computeMask(i,l));const v=pQ(e),b=Array.isArray(v)?v:[v];for(let t=0;t<b.length;++t){p.hasKey(b[t])||p.add(b[t],m[t],Array.isArray(y)?y[0]:y);const e=s.indexOf(b[t].name);-1!==e&&(u[e]=m[t])}a||oj(c)}return p.disposeMasks(),o?u:u[0]}function dQ(e){const t={};for(const n in e)t[n]=e[n].size;return t}function hQ(e,t){const n=new Set,r=[],a={};for(const s of t.names())n.add(s);const o=[],i=[];for(o.push(e);o.length>0;){const e=o[o.length-1];if(n.has(e.name)){o.pop();continue}const t=i[i.length-1]===o.length-1;if(0===e.inputs.length||t)o.pop(),r.push(e),n.add(e.name),t&&i.pop();else{i.push(o.length-1);for(const t of e.inputs)null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),n.has(t.name)||o.push(t)}}return{sorted:r,recipientMap:a}}function pQ(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function fQ(e,t){return aj(()=>$j(tU(Jj(e,e),t,!0)))}p_().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,function(e){null!=uQ&&uQ.setMaxEntries(e),null!=lQ&&lQ.setMaxEntries(e)});class gQ extends iz{getConfig(){return{}}}class mQ extends gQ{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return aj(()=>{const t=fQ(e,this.axis),n=EW(t,0,this.maxValue);return Jj(e,Zj(n,Yj(aY(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}mQ.className="MaxNorm",uz(mQ);class yQ extends gQ{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return aj(()=>Zj(e,Yj(aY(),fQ(e,this.axis))))}getConfig(){return{axis:this.axis}}}yQ.className="UnitNorm",uz(yQ);class vQ extends gQ{apply(e){return _U(e)}}vQ.className="NonNeg",uz(vQ);class bQ extends gQ{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return aj(()=>{const t=fQ(e,this.axis),n=Yj(Jj(this.rate,EW(t,this.minValue,this.maxValue)),Jj(1-this.rate,t));return Jj(e,Zj(n,Yj(aY(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}bQ.className="MinMaxNorm",uz(bQ);const xQ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function wQ(e){return DX(e)}function DQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return CX(e,sz.getMap().classNameMap,t,"constraint")}function kQ(e){if(null==e)return null;if("string"===typeof e){return DQ({className:e in xQ?xQ[e]:e,config:{}})}return e instanceof gQ?e:DQ(e)}async function CQ(e){if(null==e)return;const t=[],n=[],r=[];for(const a in e){const o=e[a];if("number"!==typeof o){const e=o;t.push(e.data()),n.push(a),r.push(e)}}if(t.length>0){const a=await Promise.all(t);for(let t=0;t<a.length;++t)e[n[t]]=a[t][0];oj(r)}}function EQ(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var SQ;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(SQ||(SQ={}));class AQ{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class FQ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class IQ extends AQ{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const a=aj(()=>Yj(this.totals[r],Jj(e,n)));this.totals[r]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:aj(()=>{const e=Jj(Zj(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),ij(t[n])}))}}class NQ extends AQ{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const a in this.history){const r=this.history[a];for(let o=0;o<r.length;++o)if("number"!==typeof r[o]){const i=r[o];e.push(i.data()),t.push(a),n.push(o)}}const r=await Promise.all(e);for(let a=0;a<r.length;++a){this.history[t[a]][n[a]].dispose(),this.history[t[a]][n[a]]=r[a][0]}}}class TQ extends AQ{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||uH,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");QR(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,a=null!=n?n():nL();return function(){const o=null!=n?n():nL();return o-a<t||(a=o,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await CQ(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await CQ(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await CQ(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await CQ(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await CQ(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):QR(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await CQ(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await CQ(e),await this.trainEnd(e))}}function OQ(e,t){if(null==e&&(e={}),e instanceof AQ)return[e];if(Array.isArray(e)&&e[0]instanceof AQ)return e;return vX(e).map(e=>new TQ(e,t))}class RQ{constructor(){}static registerCallbackConstructor(e,t){RR(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e)),RQ.checkForDuplicate(t),null==RQ.constructors[e]&&(RQ.constructors[e]=[]),RQ.constructors[e].push(t)}static checkForDuplicate(e){for(const t in RQ.constructors){RQ.constructors[+t].forEach(t=>{if(t===e)throw new cX("Duplicate callback constructor.")})}}static clear(){RQ.constructors={}}static createCallbacks(e){const t=[];for(const n in RQ.constructors){const r=+n;e>=r&&t.push(...RQ.constructors[r])}return t.map(e=>new e)}}function _Q(e,t,n,r,a,o,i,s,u){const l=new NQ,c=[new IQ,...RQ.createCallbacks(t)];null!=e&&c.push(...e),c.push(l);const d=new FQ(c);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:o,batchSize:i,verbose:t,doValidation:s,metrics:u}),{callbackList:d,history:l}}function PQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return CX(e,sz.getMap().classNameMap,t,"layer",n)}function MQ(e,t){return aj(()=>{"float32"!==e.dtype&&(e=Kj(e,"float32"));const n=tU(mY(e),t,!0),r=dz(n.shape,aY()),a=$j(xz(n,r));return Zj(e,a)})}function BQ(e,t){return aj(()=>mU(mY(fz(t,e)),-1))}function LQ(e,t){return aj(()=>mU(mz(fz(t,e)),-1))}function jQ(e,t){return aj(()=>{const n=fz(e,t),r=EW(mz(e),aY(),Number.MAX_VALUE),a=mz(Zj(n,r));return Jj(100,mU(a,-1))})}function zQ(e,t){return aj(()=>{const n=EW(t,aY(),Number.MAX_VALUE),r=JW(Yj(1,n)),a=EW(e,aY(),Number.MAX_VALUE),o=JW(Yj(1,a));return mU(mY(fz(r,o)),-1)})}function WQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return aj(()=>{if(n)t=HU(t);else{const e=tU(t,t.shape.length-1,!0);t=Zj(t,e)}return t=EW(t,aY(),1-aY()),xU(tU(Jj(Kj(e,"float32"),JW(t)),t.shape.length-1))})}function UQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return aj(()=>{const r=Kj(qW(function(e){const t=[$X(e.shape)];return yW(e,t)}(e)),"int32"),a=(t=EW(t,aY(),1-aY())).shape;return WQ(yW(DU(r,a[a.length-1]),a),t,n)})}function VQ(e,t){return aj(()=>{let n;return n=EW(t,aY(),1-aY()),n=JW(Zj(n,fz(1,n))),mU(function(e,t){if(!BR(e.shape,t.shape))throw new cX("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return aj(()=>{const n=_U(t),r=xU(mz(t));return Yj(fz(n,Jj(t,e)),$W(VW(r)))})}(e,n),-1)})}function HQ(e,t){return aj(()=>{const n=EW(e,aY(),1),r=EW(t,aY(),1);return tU(Jj(e,JW(Zj(n,r))),-1)})}function GQ(e,t){return aj(()=>{const n=MQ(e,-1),r=MQ(t,-1),a=Jj(n,r);return xU(tU(a,-1))})}RQ.constructors={};const KQ={meanSquaredError:BQ,meanAbsoluteError:LQ,meanAbsolutePercentageError:jQ,meanSquaredLogarithmicError:zQ,squaredHinge:function(e,t){return aj(()=>{const n=xz(0,fz(1,Jj(e,t)));return mU(mY(n),-1)})},hinge:function(e,t){return aj(()=>{const n=xz(0,fz(1,Jj(e,t)));return mU(n,-1)})},categoricalHinge:function(e,t){return aj(()=>{const n=tU(Jj(e,t),-1),r=eU(Jj(fz(1,e),t),-1);return xz(0,Yj(1,fz(r,n)))})},logcosh:function(e,t){return aj(()=>{const n=Math.log(2),r=fz(t,e),a=fz(Yj(r,GU(Jj(-2,r))),n);return mU(a,-1)})},categoricalCrossentropy:WQ,sparseCategoricalCrossentropy:UQ,binaryCrossentropy:VQ,kullbackLeiblerDivergence:HQ,poisson:function(e,t){return aj(()=>{const n=JW(Yj(aY(),t));return mU(fz(t,Jj(e,n)),-1)})},cosineProximity:GQ};function qQ(e){if("string"===typeof e){if(e in KQ)return KQ[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new cX(t)}return e}function XQ(e,t){return aj(()=>{const n=Jj(.5,EU(t)),r=oY(YW(t,n),e.dtype);return mU(WW(e,r),-1)})}function YQ(e,t){return aj(()=>oY(WW(tW(e,-1),tW(t,-1)),"float32"))}function QQ(e,t){return aj(()=>Kj(tU(hU(WW(e,1),WW(t,1))),"float32"))}function ZQ(e,t){return VQ(e,t)}function JQ(e,t){return e.rank===t.rank&&(e=qU(e,[e.rank-1])),(t=tW(t,-1)).dtype!==e.dtype&&(t=Kj(t,e.dtype)),Kj(WW(e,t),"float32")}const $Q=WQ,eZ=UQ,tZ={binaryAccuracy:XQ,categoricalAccuracy:YQ,precision:function(e,t){return aj(()=>{const n=QQ(e,t),r=function(e,t){return aj(()=>Kj(tU(hU(WW(e,0),WW(t,1))),"float32"))}(e,t),a=Yj(n,r);return Kj(eV(YW(a,0),Zj(n,a),0),"float32")})},categoricalCrossentropy:$Q,sparseCategoricalCrossentropy:eZ,mse:BQ,MSE:BQ,mae:LQ,MAE:LQ,mape:jQ,MAPE:jQ,cosine:GQ};function nZ(e){if("string"===typeof e&&e in tZ)return tZ[e];if("string"!==typeof e&&null!=e)return e;throw new cX("Unknown metric ".concat(e))}function rZ(e){if(gX(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;{let t;for(const n of Object.keys(KQ))if(KQ[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(tZ))if(tZ[n]===e){t=n;break}return void 0!==t?t:e.name}}const aZ=1048576;function oZ(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!iZ(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>aZ&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(n.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(aZ,"."))}}function iZ(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!iZ(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!iZ(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function sZ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const a=function(e){let t=!0;const n=[],r=[];for(const a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(const a of n){if(a.length>1||1===a.length&&a[0].inboundLayers.length>1){t=!1;break}r.push(...a)}if(t)for(const a of e.layers){let e=!1;for(const n of a.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),o=["Layer (type)","Input Shape","Output shape","Param #"];let i;if(a?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!a){o.push("Receives inputs"),i=[];for(const t in e.nodesByDepth)i.push(...e.nodesByDepth[t])}r("_".repeat(t)),uZ(o,n,r),r("=".repeat(t));const s=e.layers;for(let c=0;c<s.length;++c)a?lZ(s[c],n,r):cZ(s[c],n,i,r),r((c===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const u=function(e){let t;t=null!=e.collectedTrainableWeights?qY(e.collectedTrainableWeights):qY(e.trainableWeights);return t}(e),l=qY(e.nonTrainableWeights);r("Total params: ".concat(u+l)),r("Trainable params: ".concat(u)),r("Non-trainable params: ".concat(l)),r("_".repeat(t))}function uZ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function lZ(e,t,n){let r,a;try{a=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(sde){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(sde){r="multiple"}const o=e.name,i=e.getClassName();uZ(["".concat(o," (").concat(i,")"),a,r,e.countParams().toString()],t,n)}function cZ(e,t,n,r){let a,o;try{o=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(sde){o="multiple"}try{a=JSON.stringify(e.outputShape)}catch(sde){a="multiple"}const i=[];for(const c of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(let e=0;e<c.inboundLayers.length;++e){const t=c.inboundLayers[e].name,n=c.nodeIndices[e],r=c.tensorIndices[e];i.push("".concat(t,"[").concat(n,"][").concat(r,"]"))}const s=e.name,u=e.getClassName(),l=0===i.length?"":i[0];uZ(["".concat(s," (").concat(u,")"),o,a,e.countParams().toString(),l],t,r);for(let c=1;c<i.length;++c)uZ(["","","","",i[c]],t,r)}function dZ(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function hZ(e,t){if(null===e)return null;if("string"===typeof e)return xX(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];dZ(t,a,r)?n.push(r):n.push(hZ(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=xX(n);t[e]=hZ(r,e)}}return t}}function pZ(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return bX(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];dZ(t,a,r)?n.push(r):n.push(pZ(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],a=bX(n);t[a]="name"!==n&&"className"!==n||"string"!==typeof r?pZ(r,n):r}return t}}const fZ="4.22.0";class gZ extends rQ{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=MX(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],SX(this.inputs).length!==this.inputs.length)throw new cX("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map(e=>e.name)));SX(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map(e=>e.name))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;gX(0===t,"input layer has >1 nodes"),gX(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof oQ))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(y," (0-based) originates ")+"from layer type ".concat(t.getClassName(),"."));this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);const t={},n={},r={},a={},o={},i=[],s=(e,t,n,r,a,u)=>{null!=r&&null!=a&&null!=u||(r=e.sourceLayer,a=e.nodeIndex,u=e.tensorIndex);const l=r.inboundNodes[a];if(-1!==n.indexOf(l))throw new lX("The tensor ".concat(e.name,' at layer "').concat(r.name,'" ')+"is part of a cycle.");if(-1!==t.indexOf(l))return;this.containerNodes.add(gZ.nodeKey(r,a)),r.id in o||(o[r.id]=Object.keys(o).length),-1===n.indexOf(l)&&n.push(l);const c=l.inboundLayers.length;for(let o=0;o<c;o++){const e=l.inputTensors[o],r=l.inboundLayers[o],a=l.nodeIndices[o],i=l.tensorIndices[o];s(e,t,n,r,a,i)}for(t.push(l);n.indexOf(l)>=0;)n.splice(n.indexOf(l),1);i.push(l)},u=[],l=[];for(const y of this.outputs)s(y,u,l);const c=i.slice().reverse();for(const y of c){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];const o=null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id];e=Math.max(e,o),r[y.outboundLayer.id]=e,a[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){const a=y.inboundLayers[r],o=y.nodeIndices[r],i=a.inboundNodes[o],s=null==t[i.id]?0:t[i.id];t[i.id]=Math.max(e+1,s),n[i.id]=i}}const d={};for(const y in t){const e=t[y];e in d||(d[e]=[]),d[e].push(n[y])}const h={};for(const y in r){const e=r[y];e in h||(h[e]=[]),h[e].push(a[y])}let p=Object.keys(h).map(e=>parseInt(e,10)).sort(EX);this.layers=[];for(const y of p){const e=h[y];e.sort((e,t)=>{const n=o[e.id],r=o[t.id];return n<r?-1:n>r?1:0});for(const t of e)t instanceof gZ&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=h,p=Object.keys(d).map(e=>parseInt(e,10)).sort(EX);const f=this.inputs.slice(),g=[];for(const y of p)for(const e of d[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new lX("Graph disconnected: cannot obtain value for tensor ".concat(n)+' at layer "'.concat(t.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(g));for(const t of e.outputTensors)f.push(t);g.push(t.name)}}this.nodesByDepth=d;const m=this.layers.map(e=>e.name);for(const y of m){const e=m.filter(e=>e===y).length;if(1!==e)throw new lX('The name "'.concat(y,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(m))}this.outboundNodes=[],this.inboundNodes=[],new tQ({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new cX("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const a=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);a&&this.parseWeights(e);for(const i of this.layers)for(const[e,t]of i.weights.entries()){const o=a?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[o])throw new cX("Duplicate weight name: ".concat(o));n[o]=t,r++}const o=[];for(const i in e){let r=i;if(null==n[i]){const e=i.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])o.push([n[r],e[i]]);else if(t)throw new cX("Provided weight data has no target variable: ".concat(i));delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new cX("".concat(e.length," of ").concat(r," weights are not set: ")+"".concat(e))}ZY(o)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],a=n.map(e=>e.startsWith("_")?e.slice(1):e).filter(e=>!r.includes(e)).join("/");a!==t&&(e[a]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(fZ),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=pZ(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return aj(()=>{e=vX(e);const n=new sQ;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return cQ(this.outputs,n,t)})}computeMask(e,t){return aj(()=>{let n;return e=vX(e),n=null==t?fX(null,e.length):vX(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){const t=HY(e);if(t.length!==this.inputLayers.length)throw new cX("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const n={};for(let i=0;i<t.length;i++){const e=this.inputLayers[i],r=t[i];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(EX);if(r.length>1)for(const i of r){const e=this.nodesByDepth[i];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(e.id))continue;const r=[];for(let i=0;i<t.inboundLayers.length;i++){const e=t.inboundLayers[i],a=t.nodeIndices[i],o=t.tensorIndices[i],s=n["".concat(e.name,"_").concat(a,"_").concat(o)];r.push(s)}const a=HY(e.computeOutputShape(yX(r))),o=e.inboundNodes.indexOf(t);for(let t=0;t<a.length;t++){n["".concat(e.name,"_").concat(o,"_").concat(t)]=a[t]}}}const a=[],o=[];for(let i=0;i<this.outputLayers.length;i++){const e=this.outputLayers[i],t=this.outputLayersNodeIndices[i],n=this.outputLayersTensorIndices[i],r="".concat(e.name,"_").concat(t,"_").concat(n);o.push(r)}for(let i=0;i<o.length;i++){const e=o[i];gX(e in n),a.push(n[e])}return yX(a)}runInternalGraph(e,t){null==t&&(t=fX(null,e.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],a=e[s],o=t[s];n[r.id]=[a,o]}const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(EX);for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,a=t.outputTensors,o=new Array;for(const t of r)t.id in n&&o.push(n[t.id]);if(o.length===r.length){let r,i,s,u,l={};if(null!=t.callArgs&&(l=t.callArgs),1===o.length){const[t,n]=o[0];null==l.mask&&(l.mask=n),s=vX(e.call(t,l)),u=vX(e.computeMask(t,n)),r=[t],i=[n]}else r=o.map(e=>e[0]),i=o.map(e=>e[1]),null==l.mask&&(l.mask=i),s=vX(e.call(r,l)),u=vX(e.computeMask(r,i));if(e.activityRegularizer)throw new dX("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<a.length;++e){const t=a[e],r=s[e],o=u[e];n[t.id]=[r,o]}}}}const a=[],o=[],i=[];for(const s of this.outputs){gX(s.id in n,"Could not compute output ".concat(s.name," : ").concat(s.id));const[e,t]=n[s.id];i.push(e.shape),a.push(e),o.push(t)}return[a,o,i]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof gZ?1:0;for(let e=0;e<r.inboundNodes.length;e++){const a=gZ.nodeKey(r,e);this.containerNodes.has(a)&&(t[a]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new cX("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new cX("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new cX("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return aj(()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=gZ.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const o of this.layers){const e=o.getClassName(),r=o.getConfig(),a=[];for(let n=0;n<o.inboundNodes.length;n++){const e=o.inboundNodes[n],r=gZ.nodeKey(o,n);let i={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),i=e.callArgs}catch(sde){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(e.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),i={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const a=e.inboundLayers[r],o=e.nodeIndices[r],s=e.tensorIndices[r];let u=t[gZ.nodeKey(a,o)];null==u&&(u=0),n.push([a.name,u,s,i])}a.push(n)}}}const i={};i.name=o.name,i.className=e,i.config=r,i.inboundNodes=a,n.push(i)}e.layers=n;const r=[];for(let o=0;o<this.inputLayers.length;o++){const e=this.inputLayers[o],n=this.inputLayersNodeIndices[o],a=gZ.nodeKey(e,n);if(!this.containerNodes.has(a))continue;let i=t[a];null!==i&&void 0!==i||(i=0);const s=this.inputLayersTensorIndices[o];r.push([e.name,i,s])}e.inputLayers=r;const a=[];for(let o=0;o<this.outputLayers.length;o++){const e=this.outputLayers[o],n=this.outputLayersNodeIndices[o],r=gZ.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let i=t[r];null!==i&&void 0!==i||(i=0);const s=this.outputLayersTensorIndices[o];a.push([e.name,i,s])}return e.outputLayers=a,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},a={};function o(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function i(e,t){const n=[];let a;for(const i of t){const s=i[0],u=i[1],l=i[2];if(a=null==i[3]?{}:i[3],!(s in r))return void o(e,t);const c=r[s];if(c.inboundNodes.length<=u)return void o(e,t);const d=c.inboundNodes[u];n.push(d.outputTensors[l])}n.length>0&&e.apply(yX(n),a)}function s(e){const a=e.name,i=PQ(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[a]=i;e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new cX("Corrupted configuration, expected array for nodeData: ".concat(e));o(i,e)})}const u=t.name,l=t.layers;for(const f of l)s(f);for(;!AX(a);)for(const e of l){const t=r[e.name];if(t.name in a){const e=a[t.name];delete a[t.name];for(const n of e)i(t,n)}}const c=[],d=[],h=t.inputLayers;for(const f of h){const e=f[0],t=f[1],n=f[2];gX(e in r);const a=r[e].inboundNodes[t].outputTensors;c.push(a[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];gX(e in r);const a=r[e].inboundNodes[t].outputTensors;d.push(a[n])}return new e({inputs:c,outputs:d,name:u})}get stateful(){if(this._stateful)throw new cX("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){aj(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}function mZ(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function yZ(e,t){return mZ(e,t,"classWeight")}async function vZ(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=aj(()=>{if(1===e.shape.length)return qj(e);if(2===e.shape.length){if(e.shape[1]>1){return tW(e,1)}if(1===e.shape[1])return yW(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")}),r=Array.from(await t.data());oj(t);const a=[];return r.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");a.push(n[e])}),QU(a,"float32")}return null}function bZ(e,t){return Jj(e,t)}function xZ(e,t){let n,r;const a=t;n=a.xs,r=a.ys,RR(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t));const o=wZ("input",e.inputNames,n),i=wZ("output",e.outputNames,r),s=o[0].shape[0];RR(o.length===e.inputs.length,()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")),RR(i.length===e.outputs.length,()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")"));for(let u=0;u<o.length;u++)RR(o[u].shape[0]===s,()=>"Batch size mismatch: input "+"".concat(e.inputNames[u]," has ").concat(o[u].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],"."));for(let u=0;u<i.length;u++)RR(i[u].shape[0]===s,()=>"Batch size mismatch: output "+"".concat(e.outputNames[u]," has ").concat(i[u].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],"."));return{xs:o,ys:i}}function wZ(e,t,n){if(n instanceof bL)return[n];if(Array.isArray(n))return RR(n.length===t.length,()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")),n;{const r=[];for(const a of t){if(null==n[a])throw new cX("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(a,"'."));r.push(n[a])}return r}}async function DZ(e,t,n){const r=null!=n.batchesPerEpoch;if(RR(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),RR(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),RR(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs)),RR(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch)),RR(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const a=null!=n.validationData;let o,i;if(a)if(kZ(n.validationData))RR(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches));else{const e=function(e){if(3===e.length)throw new dX("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);o=e.xs,i=e.ys}const s=e.makeTrainFunction(),u=e.getDedupedMetricsNames();let l;l=a?u.slice().concat(u.map(e=>"val_"+e)):u.slice();const c=OQ(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:h,history:p}=_Q(c,d,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,a,l);h.setModel(e),e.history=p,await h.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,g=await t.iterator();for(;f<n.epochs;){const l={};await h.onEpochBegin(f);let c=0,d=0;for(r||(g=await t.iterator());!r||c<n.batchesPerEpoch;){const t=await g.next();if(r&&t.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(c," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:a}=xZ(e,t.value),o={};o.batch=d,o.size=r[0].shape[0],await h.onBatchBegin(d,o);const i=[];if(null!=n.classWeight){const t=yZ(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)i.push(await vZ(a[e],null,t[e]))}const l=r.concat(a).concat(i),p=s(l);oj(l);for(let e=0;e<u.length;++e){const t=u[e],n=p[e];o[t]=n,ij(n)}await h.onBatchEnd(d,o),EQ(o),d++,c++}if(r?c>=n.batchesPerEpoch:t.done){if(a){let t;t=kZ(n.validationData)?vX(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):vX(e.evaluate(o,i,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)l["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await h.onEpochEnd(f,l),f++,e.stopTraining_)break}return await h.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function kZ(e){return"function"===typeof e.iterator}function CZ(e){RR(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got ".concat(e))}function EZ(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>sY(e,t,n-t)):sY(e,t,n-t)}function SZ(e,t){return aj(()=>null==e?null:Array.isArray(e)?e.map(e=>SZ(e,t)):gY(e,"int32"===t.dtype?t:Kj(t,"int32")))}function AZ(e,t){const n=[];let r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function FZ(e){const t=[];e instanceof bL&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(iY(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function IZ(e,t){if(null==e)return;const n=[];if(t instanceof bL)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(const a in t){const e=t[a];n.push(e.id)}const r=[];if(e instanceof bL)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&r.push(e)});else if(null!=e)for(const a in e){const t=e[a];-1===n.indexOf(t.id)&&r.push(t)}r.forEach(e=>{e.isDisposed||e.dispose()})}function NZ(e){return Array.isArray(e)}function TZ(e){return!function(e){return e instanceof bL}(e)&&!NZ(e)}function OZ(e,t,n){let r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(NZ(e)&&e.length>0)t=!0;else if(TZ(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new cX("Error when checking model ".concat(o," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map(e=>null);if(TZ(e)){r=[];for(const n of t){if(null==e[n])throw new cX('No data provided for "'.concat(n,'". Need data for each key in: ')+"".concat(t));r.push(e[n])}}else if(NZ(e)){if(e.length!==t.length)throw new cX("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new cX("The model ".concat(o," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=FZ(r),null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new cX("Error when checking ".concat(o,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s). but got array with ")+"shape ".concat(e.shape));for(let t=0;t<n[i].length;++t){if(0===t&&!a)continue;const r=e.shape[t],s=n[i][t];if(null!=s&&s>=0&&r!==s)throw new cX("".concat(o," expected a batch of elements where each ")+"example has shape [".concat(n[i].slice(1,n[i].length),"] ")+"(i.e.,tensor shape [*,".concat(n[i].slice(1,n[i].length),"])")+" but the ".concat(o," received an input with ").concat(e.shape[0])+" examples, each with shape [".concat(e.shape.slice(1,e.shape.length),"]")+" (tensor shape [".concat(e.shape,"])"))}}return r}function RZ(e,t,n){let r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new cX("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new cX("The model expects ".concat(t.length," ").concat(o," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new cX("Error when checking ".concat(o,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(e.shape)));for(let r=0;r<n[i].length;++r){if(0===r&&!a)continue;const s=e.shape[r],u=n[i][r];if(null!=u&&u!==s)throw new cX("Error when checking ".concat(o,": expected ")+"".concat(t[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(e.shape),"."))}}}class _Z extends gZ{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new cX("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");sZ(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>iH.adagrad(.01),Adadelta:()=>iH.adadelta(1,.95,aY()),Adam:()=>iH.adam(.001,.9,.999,aY()),Adamax:()=>iH.adamax(.002,.9,.999,aY(),0),RMSProp:()=>iH.rmsprop(.001,.9,0,aY()),SGD:()=>iH.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new cX("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof lz))throw new cX("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new cX("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));const n=e.loss;t=n.map(e=>qQ(e))}else{const n=qQ(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new cX('Unknown entry in loss dictionary: "'.concat(t,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(n," during training")),t.push(qQ(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const e=this.internalOutputShapes[o],t=this.outputNames[o];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[o])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],qX("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map(e=>n);{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),a=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};qX("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,o;for(const i of t){if("string"===typeof i&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(i)){const t=this.internalOutputShapes[e];let a;1===t[t.length-1]||this.lossFunctions[e]===VQ?-1!==["accuracy","acc"].indexOf(i)?r=XQ:-1!==["crossentropy","ce"].indexOf(i)&&(r=ZQ):this.lossFunctions[e]===UQ?-1!==["accuracy","acc"].indexOf(i)?r=JQ:-1!==["crossentropy","ce"].indexOf(i)&&(r=eZ):-1!==["accuracy","acc"].indexOf(i)?r=YQ:-1!==["crossentropy","ce"].indexOf(i)&&(r=$Q),-1!==["accuracy","acc"].indexOf(i)?a="acc":-1!==["crossentropy","ce"].indexOf(i)&&(a="ce"),o=r,n=""+a}else{const e=nZ(i);o=e,n=""+rZ(i)}let t;qX(n,()=>{t=o}),a(e,n,t)}})(r[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;CZ(r);const a=this.standardizeUserDataXY(e,t,!0,r);try{const e=a[0].concat(a[1]);this.makeTestFunction();const t=this.testFunction;return yX(this.testLoop(t,e,r,n.verbose,n.steps))}finally{IZ(a[0],e),IZ(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,a=e.testFunction;let o=[];if(n.verbose>0)throw new dX("Verbose mode is not implemented yet.");RR(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches)));const i="function"===typeof t.next?t:await t.iterator();let s=0,u=0;for(;!r||u<n.batches;){const t=await i.next();if(o=aj(()=>{if(t.value){const{xs:n,ys:r}=xZ(e,t.value),i=n.concat(r),l=aj(()=>a(i));if(oj(i),0===u)for(let e=0;e<l.length;++e)o.push(rz(0));const c=i[0].shape[0];for(let e=0;e<l.length;++e){const t=l[e],n=o[e];o[e]=aj(()=>Yj(o[e],Jj(c,t))),u>0&&oj(n)}oj(l),s+=c,++u}return o}),t.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let l=0;l<o.length;++l){const e=o[l];o[l]=Zj(o[l],s),oj(e)}return yX(o)}(this,e,t)}checkNumSamples(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new cX("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new cX("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new cX("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),o=new sQ;if(e instanceof bL&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new cX("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)o.add(this.inputs[t],e[t])}else for(const s of this.inputs){const t=e[s.name];if(null==t)throw new cX("No value is provided for the model's input ".concat(s.name));o.add(s,t)}const i=cQ(a,o);return n?i:i[0]}retrieveSymbolicTensors(e){const t=fX(null,e.length);let n=e.length;for(const r of this.layers){const a=Array.isArray(r.output)?r.output:[r.output],o=a.map(e=>e.name);for(let r=0;r<e.length;++r){const i=o.indexOf(e[r]);if(-1!==i&&(t[r]=a[i],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach((t,r)=>{null==t&&n.push(e[r])}),new cX("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return aj(()=>{const r=this.checkNumSamples(e);if(n)throw new dX("Verbose predictLoop() is not implemented yet.");const a=AZ(r,t),o=this.outputs.map(e=>[]);for(let t=0;t<a.length;++t){aj(()=>{const n=a[t][0],r=a[t][1],o=EZ(e,n,r),i=[];if(Array.isArray(o))for(let e=0;e<o.length;++e)i.push({key:this.inputs[e],value:o[e]});else i.push({key:this.inputs[0],value:o});const s=new sQ(i);return cQ(this.outputs,s)}).forEach((e,t)=>o[t].push(e))}return yX(o.map(e=>SW(e,0)))})}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=FZ(e);RZ(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return CZ(e),this.predictLoop(n,e)}finally{IZ(n,e)}}predictOnBatch(e){RZ(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new lX("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let a=0;a<this.feedOutputShapes.length;++a){const e=this.feedOutputShapes[a];this.feedLossFns[a]===UQ?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t){const n=SX(e.map(e=>e.shape[0]));n.sort();const r=SX(t.map(e=>e.shape[0]));if(r.sort(),n.length>1)throw new cX("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map(e=>e.shape))));if(r.length>1)throw new cX("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map(e=>e.shape))));if(n.length>0&&r.length>0&&!BR(n,r))throw new cX("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(n[0]," input sample(s) and ").concat(r[0]," target ")+"sample(s).")}(e=OZ(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=OZ(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[BQ,VQ,WQ];for(let a=0;a<e.length;++a){const o=e[a],i=t[a],s=n[a];if(null!=i){if(i===WQ&&1===o.shape[o.shape.length-1])throw new cX("You are passing a target array of shape ".concat(o.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(i)){const e=o.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],a=t[n];if(null!=a&&r!==a)throw new cX("A target Tensor with shape ".concat(o.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new cX("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0;const[i,s]=this.standardizeUserDataXY(e,t,a,o);if(null!=n)throw new Error("sample weight is not supported yet.");let u=null;if(null!=r){const e=yZ(r,this.outputNames);u=[];for(let t=0;t<e.length;++t)u.push(await vZ(s[t],null,e[t]))}return[i,s,u]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0;return aj(()=>{const o=this.checkNumSamples(t,n,a,"steps"),i=[];if(r>0)throw new dX("Verbose mode is not implemented yet.");if(null!=a)throw new dX("steps mode in testLoop() is not implemented yet");{const r=AZ(o,n),a=QU(nY(0,o));for(let n=0;n<r.length;++n){const o=r[n][0],s=r[n][1],u=sY(a,o,s-o),l=SZ(t,u),c=e(l);if(0===n)for(let e=0;e<c.length;++e)i.push(rz(0));for(let e=0;e<c.length;++e){const t=c[e];i[e]=Yj(i[e],Jj(s-o,t))}}for(let e=0;e<i.length;++e)i[e]=Zj(i[e],o)}return i})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let a=r;if(mX(e,r)>1){const t=mX(e.slice(0,n),r);a+="_".concat(t)}t.push(a)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],i=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const i=new sQ(e),s=cQ(this.outputs,i,{training:!0});let u;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],s[n]);null!=a[n]&&(e=bZ(e,a[n]));const o=mU(e);t.push(o),u=0===n?e:Yj(u,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],a=this.metricsTensors[n][1];e=mU(t(r[a],s[a]))}ij(e),o.push(e)}return u=mU(u),this.calculateLosses().forEach(e=>{u=Yj(u,e)}),u},!0,i)].concat(o)}}makeTestFunction(){this.testFunction=e=>aj(()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:r[e]});const i=new sQ(o),s=cQ(this.outputs,i);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],o=mU(r(a[e],s[e]));n=0===e?o:Yj(n,o),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],o=mU(n(a[r],s[r]));t.push(o)}return t})}async fit(e,t){let n,r,a,o,i,s,u,l,c,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const h=null==d.batchSize?32:d.batchSize;CZ(h);const p=!1,f=await this.standardizeUserData(e,t,d.sampleWeight,d.classWeight,p,h);n=f[0],r=f[1],c=f[2];let g,m=!1;if(null!=d.validationData&&d.validationData.length>0){if(m=!0,2!==d.validationData.length)throw 3===d.validationData.length?new dX("validationData including sample weights is not supported yet."):new cX("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(d.validationData," is invalid."));i=d.validationData[0],s=d.validationData[1];const e=!0,t=await this.standardizeUserData(i,s,null,null,e,h);u=t[0],l=t[1],g=u.concat(l)}else if(null!=d.validationSplit&&d.validationSplit>0&&d.validationSplit<1){m=!0;const e=Math.floor(n[0].shape[0]*(1-d.validationSplit)),t=n[0].shape[0];u=EZ(n,e,t),a=n,n=EZ(n,0,e),l=EZ(r,e,t),o=r,r=EZ(r,0,e),g=u.concat(l)}else null!=d.validationSteps&&(m=!0);const y=n.concat(r).concat(c);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let x,w;m?(this.makeTestFunction(),x=this.testFunction,w=b.slice().concat(b.map(e=>"val_"+e))):(x=null,g=[],w=b.slice());const D=OQ(d.callbacks,d.yieldEvery);return await this.fitLoop(v,y,b,h,d.epochs,d.verbose,D,x,g,d.shuffle,w,d.initialEpoch,null,null)}finally{this.isTraining=!1,IZ(n,e),IZ(r,t),IZ(a,e),IZ(o,t),IZ(u,i),IZ(l,s),null!=c&&oj(c)}}async fitLoop(e,t,n,r,a,o,i,s,u,l,c,d,h,p){null==r&&(r=32),null==a&&(a=1),null==l&&(l=!0),null==d&&(d=0);let f=!1;if(null!=s&&null!=u&&(f=!0),null!=p&&(f=!0,null==h))throw new cX("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(t,r,h,"steps_per_epoch");let m;null!=g&&(m=nY(0,g)),null==o&&(o=1);const{callbackList:y,history:v}=_Q(i,o,a,d,g,h,r,f,c);y.setModel(this),this.history=v,await y.onTrainBegin(),this.stopTraining_=!1;for(let b=d;b<a;++b){await y.onEpochBegin(b);const a={};if(null!=h)throw new dX("stepsPerEpoch mode is not implemented yet.");{if("batch"===l)throw new dX("batch shuffling is not implemneted yet");l&&IR(m);const o=QU(m),i=AZ(g,r);for(let l=0;l<i.length;++l){const c={};if(await y.onBatchBegin(l,c),aj(()=>{const d=i[l][0],h=i[l][1],p=sY(o,d,h-d);c.batch=l,c.size=h-d;const g=SZ(t,p),m=e(g);for(let e=0;e<n.length;++e){const t=n[e],r=m[e];c[t]=r,ij(r)}if(l===i.length-1&&f){const e=this.testLoop(s,u,r);for(let t=0;t<n.length;++t){const r=n[t],o=e[t];ij(o),a["val_"+r]=o}}}),await y.onBatchEnd(l,c),EQ(c),this.stopTraining_)break}o.dispose()}if(await y.onEpochEnd(b,a),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return DZ(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],a=n[1],o=this.makeTrainFunction()(r.concat(a)),i=[];for(const s of o){const e=await s.data();i.push(e[0])}return oj(o),IZ(n[0],e),IZ(n[1],t),yX(i)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:a[o]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=rj().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-rj().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=bX(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>bX(e))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=bX(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[bX(rZ(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>bX(rZ(e)));{const e={};for(const t in this.metrics)e[t]=bX(rZ(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=PQ(hZ(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=xX(e.loss);else if(Array.isArray(e.loss))n=e.loss.map(e=>xX(e));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=xX(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map(e=>xX(e));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=xX(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=(n=e,yj.getSaveHandlers(n));if(0===t.length)throw new cX("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new cX("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}var n;if(null==e.save)throw new cX("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await lj(this.getNamedWeights(t)),a={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(fZ),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){a.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:n}=await lj(await this.optimizer.getWeights(),e);r.specs.push(...n),r.data=(o=[r.data,t],tj.join(o))}var o;if(null!=this.userDefinedMetadata){const e=!0;oZ(this.userDefinedMetadata,this.name,e),a.userDefinedMetadata=this.userDefinedMetadata}return a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){oZ(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}_Z.className="Model",uz(_Z);class PZ extends _Z{}PZ.className="Functional",uz(PZ);class MZ extends _Z{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:MX("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new cX("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const t=e instanceof MZ||e instanceof _Z;let n;if(t){if(n=e,1!==n.outputs.length)throw new cX("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new cX("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new cX("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=iQ({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new cX("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new cX("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=aQ(this.outputs[0])}this.inboundNodes=[],new tQ({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:fX(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(KY(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new _Z({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new lX("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new lX("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new lX("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new lX("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new cX("Legacy serialization format not supported yet.");n=t}else RR(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),n=t.layers,delete t.layers,a=t;const o=new e(a);if(!(o instanceof MZ))throw new dX("Sequential.fromConfig called on non-Sequential input: ".concat(o));for(const i of n){const e=PQ(i,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),o.add(e)}return o}set stopTraining(e){if(null==this.model)throw new cX("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new cX("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}MZ.className="Sequential",uz(MZ);class BZ extends iz{getConfig(){return{}}}class LZ extends BZ{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new dX("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return zW(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}LZ.className="elu",uz(LZ);class jZ extends BZ{apply(e){return MU(e)}}jZ.className="selu",uz(jZ);class zZ extends BZ{apply(e){return _U(e)}}zZ.className="relu",uz(zZ);class WZ extends BZ{apply(e){return aj(()=>vU(6,_U(e)))}}WZ.className="relu6",uz(WZ);class UZ extends BZ{apply(e){return e}}UZ.className="linear",uz(UZ);class VZ extends BZ{apply(e){return LU(e)}}VZ.className="sigmoid",uz(VZ);class HZ extends BZ{apply(e){return function(e){return aj(()=>{const t=Yj(.5,Jj(.2,e));return EW(t,0,1)})}(e)}}HZ.className="hardSigmoid",uz(HZ);class GZ extends BZ{apply(e){return GU(e)}}GZ.className="softplus",uz(GZ);class KZ extends BZ{apply(e){return function(e){return aj(()=>Zj(e,Yj(mz(e),1)))}(e)}}KZ.className="softsign",uz(KZ);class qZ extends BZ{apply(e){return YU(e)}}qZ.className="tanh",uz(qZ);class XZ extends BZ{apply(e){return HU(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}XZ.className="softmax",uz(XZ);class YZ extends BZ{apply(e){return nU(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}YZ.className="logSoftmax",uz(YZ);class QZ extends BZ{apply(e){return aj(()=>aj(()=>{const t=Math.sqrt(2),n=Jj(.5,Yj(1,UW(Zj(e,t))));return Jj(e,n)}))}}QZ.className="gelu",uz(QZ);class ZZ extends BZ{apply(e){return aj(()=>Jj(.5,Jj(e,Yj(1,YU(Jj($j(Zj(2,Math.PI)),Yj(e,Jj(.044715,pz(e,3)))))))))}}ZZ.className="gelu_new",uz(ZZ);class JZ extends BZ{apply(e){return aj(()=>Jj(e,YU(GU(e))))}}JZ.className="mish",uz(JZ);class $Z extends BZ{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return aj(()=>Jj(LU(Jj(e,t)),e))}}function eJ(e){return e.getClassName()}function tJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return CX(e,sz.getMap().classNameMap,t,"activation")}function nJ(e){if(null==e){const e={className:"linear",config:{}};return tJ(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},tJ(t)}return e instanceof BZ?e:tJ(e)}function rJ(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}$Z.className="swish",uz($Z);class aJ extends iz{}class oJ extends aJ{constructor(e){super(),rJ(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return aj(()=>{let t=kU([1]);return this.hasL1&&(t=Yj(t,tU(Jj(this.l1,mz(e))))),this.hasL2&&(t=Yj(t,tU(Jj(this.l2,mY(e))))),yW(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}oJ.className="L1L2",uz(oJ);const iJ={l1l2:"L1L2"};function sJ(e){return DX(e)}function uJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return CX(e,sz.getMap().classNameMap,t,"regularizer")}function lJ(e){if(null==e)return null;if("string"===typeof e){return uJ({className:e in iJ?iJ[e]:e,config:{}})}return e instanceof aJ?e:uJ(e)}class cJ extends rQ{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=GY(e);let n=_U(e);return null!=this.maxValue&&(n=EW(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}cJ.className="ReLU",uz(cJ);class dJ extends rQ{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=GY(e);return ZW(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}dJ.className="LeakyReLU",uz(dJ);class hJ extends rQ{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=UY(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=lJ(e.alphaRegularizer),this.alphaConstraint=kQ(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new cX("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=KY(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new JY({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=GY(e),AU(e,this.alpha.read())}getConfig(){const e={alphaInitializer:WY(this.alphaInitializer),alphaRegularizer:sJ(this.alphaRegularizer),alphaConstraint:wQ(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}hJ.className="PReLU",uz(hJ);class pJ extends rQ{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new dX("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=GY(e);return zW(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}pJ.className="ELU",uz(pJ);class fJ extends rQ{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=GY(e);return Jj(n,Kj(YW(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}fJ.className="ThresholdedReLU",uz(fJ);class gJ extends rQ{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new XZ).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return aj(()=>{let n=GY(e);const r=t.mask;if(null!=r){const e=Jj(fz(CU(n.shape),Kj(r,n.dtype)),rz(-1e9));n=Yj(n,e)}return this.axis instanceof Array?this.axis.length>1?VW(fz(n,dU(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function mJ(e,t,n){if("number"===typeof e)return fX(e,t);if(e.length!==t)throw new cX("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(let r=0;r<t;++r){const a=e[r];if(!JX(a))throw new cX("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function yJ(e,t,n,r){if(null==e)return e;let a;return a="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r)}function vJ(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+tY([n-t,0]);else{if("same"!==r)throw new cX("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function bJ(e,t){return aj(()=>(VX(t),"channelsFirst"===t?rV(e,[0,2,3,1]):e))}function xJ(e,t){return aj(()=>(VX(t),"channelsFirst"===t?rV(e,[0,2,3,4,1]):e))}function wJ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return aj(()=>{if(null==o&&(o="channelsLast"),VX(o),3!==e.shape.length)throw new cX("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new cX("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new cX("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(n.shape.length," instead"));if("channelsFirst"===o&&(e=rV(e,[0,2,1])),"causal"===a)throw new dX("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=OW(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(s=vY(s,n)),s})}function DJ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return aj(()=>{if(null==o&&(o="channelsLast"),VX(o),3!==e.rank&&4!==e.rank)throw new cX("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new cX("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));let u=bJ(e,o);if("causal"===a)throw new dX("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=mV({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(u=rV(u,[0,3,1,2])),u})}function kJ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return aj(()=>{if(null==o&&(o="channelsLast"),VX(o),4!==e.rank&&5!==e.rank)throw new cX("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new cX("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));let s=xJ(e,o);if("causal"===a)throw new dX("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=PW(s,t,r,"same"===a?"same":"valid","NDHWC",i),null!=n&&(s=vY(s,n)),"channelsFirst"===o&&(s=rV(s,[0,4,1,2,3])),s})}gJ.className="Softmax",uz(gJ);class CJ extends rQ{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",CJ.verifyArgs(t),this.rank=e,NX(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new dX("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=mJ(t.kernelSize,e,"kernelSize"),this.strides=mJ(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,HX(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,VX(this.dataFormat),this.activation=nJ(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=UY(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=kQ(t.biasConstraint),this.biasRegularizer=lJ(t.biasRegularizer),this.activityRegularizer=lJ(t.activityRegularizer),this.dilationRate=mJ(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new cX("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new cX("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new cX("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if(gX("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!IX(e.kernelSize,"number",1,3))throw new cX("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:eJ(this.activation),useBias:this.useBias,biasInitializer:WY(this.biasInitializer),biasRegularizer:sJ(this.biasRegularizer),activityRegularizer:sJ(this.activityRegularizer),biasConstraint:wQ(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class EJ extends CJ{constructor(e,t){super(e,t),this.kernel=null,EJ.verifyArgs(t),this.filters=t.filters,NX(this.filters,"filters"),this.kernelInitializer=UY(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=kQ(t.kernelConstraint),this.kernelRegularizer=lJ(t.kernelRegularizer)}build(e){e=KY(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new cX("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return aj(()=>{let t;e=GY(e);const n=null==this.bias?null:this.bias.read(),r=OX(this.activation.getClassName());if(null!=r&&2===this.rank)t=DJ(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=wJ(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=DJ(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new dX("convolutions greater than 3D are not implemented yet.");t=kJ(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=KY(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<n.length;++a){const e=yJ(n[a],this.kernelSize[a],this.padding,this.strides[a],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[a]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:WY(this.kernelInitializer),kernelRegularizer:sJ(this.kernelRegularizer),kernelConstraint:wQ(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new cX("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class SJ extends EJ{constructor(e){super(2,e),SJ.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!IX(e.kernelSize,"number",1,2))throw new cX("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}SJ.className="Conv2D",uz(SJ);class AJ extends EJ{constructor(e){super(3,e),AJ.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new cX("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}AJ.className="Conv3D",uz(AJ);class FJ extends SJ{constructor(e){if(super(e),this.inputSpec=[new JY({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new cX("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=KY(e)).length)throw new cX("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new cX("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new JY({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return aj(()=>{let t=GY(e);if(4!==t.shape.length)throw new cX("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let a,o;"channelsFirst"===this.dataFormat?(a=2,o=3):(a=1,o=2);const i=n[a],s=n[o],u=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],d=this.strides[1],h=[r,vJ(i,c,u,this.padding),vJ(s,d,l,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=rV(t,[0,2,3,1]));let p=_W(t,this.kernel.read(),h,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=rV(p,[0,3,1,2])),null!=this.bias&&(p=vY(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p})}computeOutputShape(e){const t=(e=KY(e)).slice();let n,r,a;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3):(n=3,r=1,a=2);const o=this.kernelSize[0],i=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return t[n]=this.filters,t[r]=vJ(t[r],s,o,this.padding),t[a]=vJ(t[a],u,i,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}FJ.className="Conv2DTranspose",uz(FJ);class IJ extends AJ{constructor(e){if(super(e),this.inputSpec=[new JY({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new cX("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=KY(e)).length)throw new cX("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new cX("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new JY({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return aj(()=>{let t=GY(e);if(5!==t.shape.length)throw new cX("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let a,o,i;"channelsFirst"===this.dataFormat?(i=2,a=3,o=4):(i=1,a=2,o=3);const s=n[i],u=n[a],l=n[o],c=this.kernelSize[0],d=this.kernelSize[1],h=this.kernelSize[2],p=this.strides[0],f=this.strides[1],g=this.strides[2],m=[r,vJ(s,p,c,this.padding),vJ(u,f,d,this.padding),vJ(l,g,h,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=rV(t,[0,2,3,4,1]));let y=BW(t,this.kernel.read(),m,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(y=rV(y,[0,4,1,2,3])),null!==this.bias&&(y=vY(y,this.bias.read(),this.dataFormat)),null!==this.activation&&(y=this.activation.apply(y)),y})}computeOutputShape(e){const t=(e=KY(e)).slice();let n,r,a,o;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3,o=4):(n=4,r=1,a=2,o=3);const i=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],l=this.strides[0],c=this.strides[1],d=this.strides[2];return t[n]=this.filters,t[r]=vJ(t[r],l,i,this.padding),t[a]=vJ(t[a],c,s,this.padding),t[o]=vJ(t[o],d,u,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}IJ.className="Conv3DTranspose",uz(IJ);class NJ extends EJ{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new cX("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new cX("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new cX("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=UY(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=lJ(t.depthwiseRegularizer),this.depthwiseConstraint=kQ(t.depthwiseConstraint),this.pointwiseInitializer=UY(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=lJ(t.pointwiseRegularizer),this.pointwiseConstraint=kQ(t.pointwiseConstraint)}build(e){if((e=KY(e)).length<this.rank+2)throw new cX("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new cX("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new JY({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return aj(()=>{let t;if(e=GY(e),1===this.rank)throw new dX("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=rV(e,[0,2,3,1])),t=BU(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=vY(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=rV(t,[0,3,1,2])),t})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=WY(this.depthwiseInitializer),e.pointwiseInitializer=WY(this.pointwiseInitializer),e.depthwiseRegularizer=sJ(this.depthwiseRegularizer),e.pointwiseRegularizer=sJ(this.pointwiseRegularizer),e.depthwiseConstraint=wQ(this.depthwiseConstraint),e.pointwiseConstraint=wQ(this.pointwiseConstraint),e}}NJ.className="SeparableConv";class TJ extends NJ{constructor(e){super(2,e)}}TJ.className="SeparableConv2D",uz(TJ);class OJ extends EJ{constructor(e){super(1,e),OJ.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!IX(e.kernelSize,"number",1,1))throw new cX("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}OJ.className="Conv1D",uz(OJ);class RJ extends rQ{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return aj(()=>{if(e=GY(e),"channelsLast"===this.dataFormat){const t=lY(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return lY(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=lY(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return lY(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}RJ.className="Cropping2D",uz(RJ);class _J extends rQ{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,VX(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){FX(LX,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return aj(()=>{let t=GY(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=rV(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],a="nearest"===this.interpolation?aH.resizeNearestNeighbor(t,[e,r]):aH.resizeBilinear(t,[e,r]);return rV(a,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?aH.resizeNearestNeighbor(t,[e,r]):aH.resizeBilinear(t,[e,r])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}_J.className="UpSampling2D",uz(_J);class PJ extends CJ{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=UY(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=kQ(e.depthwiseConstraint),this.depthwiseRegularizer=lJ(e.depthwiseRegularizer)}build(e){if((e=KY(e)).length<4)throw new cX("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new cX("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return aj(()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return aj(()=>{null==a&&(a="channelsLast"),VX(a);let i=bJ(e,a);if(4!==e.rank)throw new cX("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new cX("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return i=jW(i,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===a&&(i=rV(i,[0,3,1,2])),i})}(e=GY(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=vY(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=KY(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=yJ(t,this.kernelSize[0],this.padding,this.strides[0]),o=yJ(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,o]:[e[0],a,o,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=WY(this.depthwiseInitializer),e.depthwiseRegularizer=sJ(this.depthwiseRegularizer),e.depthwiseConstraint=wQ(this.depthwiseRegularizer),e}}function MJ(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new cX("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function BJ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return aj(()=>{const u=t.shape.length;if(u<3)throw new cX("Input should be at least 3D, but is ".concat(u,"D."));const l=[1,0].concat(nY(2,u));if(t=rV(t,l),null!=o)throw new dX("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&(a=Kj(Kj(a,"bool"),"float32"),a.rank===u-1&&(a=HW(a,-1)),a=rV(a,l)),r&&(t=PU(t,0),null!=a&&(a=PU(a,0)));const c=[];let d,h=n;const p=t.shape[0],f=$U(t);let g,m;null!=a&&(g=$U(a));for(let t=0;t<p;++t){const n=f[t],r=aj(()=>e(n,h));if(null==a)d=r[0],h=r[1];else{const e=aj(()=>{const e=g[t],n=fz(EU(e),e);return{output:Yj(Jj(r[0],e),Jj(h[0],n)),newStates:h.map((t,a)=>Yj(Jj(r[1][a],e),Jj(t,n)))}});d=e.output,h=e.newStates}s&&c.push(d)}if(s){m=XU(c,1)}return[d,m,h]})}PJ.className="DepthwiseConv2D",uz(PJ);class LJ extends rQ{constructor(e){let t;if(super(e),null==e.cell)throw new cX("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new KJ({cells:e.cell}):e.cell,null==t.stateSize)throw new cX("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new JY({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return nY(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null)}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){VY(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return aj(()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new dX("Constants support is not implemented in RNN yet.");VY(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new JY({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let a;if(this.cell.build(r),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!BR(this.stateSpec.map(e=>e.shape[e.shape.length-1]),a))throw new cX("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=a.map(e=>new JY({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];aj(()=>{if(!this.stateful)throw new uX("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new cX("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>kU([n,e])):this.states_=[kU([n,this.cell.stateSize])];else if(null==e)oj(this.states_),null!=this.keptStates&&(oj(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>kU([n,e])):this.states_[0]=kU([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new cX("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===t?this.keptStates.push(this.states_.slice()):oj(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,o=[n,a];if(!BR(r.shape,o))throw new cX("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(o,", received shape=").concat(r.shape));this.states_[t]=r}}this.states_=this.states_.map(e=>ij(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=MJ(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let o=[],i=[];if(null!=n){t.initialState=n,o=o.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new JY({shape:e.shape}));i=i.concat(this.stateSpec)}null!=r&&(t.constants=r,o=o.concat(r),this.numConstants=r.length);if(o[0]instanceof $Y){const n=[e].concat(o),r=this.inputSpec.concat(i),a=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=a,s}return super.apply(e,t)}call(e,t){return aj(()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let a=null==t?null:t.initialState;e=GY(e),null==a&&(a=this.stateful?this.states_:this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==o)throw new cX("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(a.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const i={training:r},s=BJ((e,t)=>{const n=this.cell.call([e].concat(t),i);return[n[0],n.slice(1)]},e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),u=s[0],l=s[1],c=s[2];this.stateful&&this.resetStates(c,r);const d=this.returnSequences?l:u;return this.returnState?[d].concat(c):d})}getInitialState(e){return aj(()=>{let t=kU(e.shape);return t=tU(t,[1,2]),t=iY(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?hY(t,[1,e]):t):this.cell.stateSize>1?[hY(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===LJ.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=PQ(t.cell,n);return new e(Object.assign(t,{cell:r}))}}LJ.className="RNN",uz(LJ);class jJ extends rQ{}class zJ extends jJ{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,NX(this.units,"units"),this.activation=nJ(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=UY(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=UY(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=UY(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=lJ(e.kernelRegularizer),this.recurrentRegularizer=lJ(e.recurrentRegularizer),this.biasRegularizer=lJ(e.biasRegularizer),this.kernelConstraint=kQ(e.kernelConstraint),this.recurrentConstraint=kQ(e.recurrentConstraint),this.biasConstraint=kQ(e.biasConstraint),this.dropout=eY([1,tY([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=eY([1,tY([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=KY(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return aj(()=>{if(2!==e.length)throw new cX("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];const r=null!=t.training&&t.training;let a;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=qJ({ones:()=>EU(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=qJ({ones:()=>EU(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,i=this.recurrentDropoutMask;a=fY(null!=o?Jj(e,o):e,this.kernel.read()),null!=this.bias&&(a=vY(a,this.bias.read())),null!=i&&(n=Jj(n,i));let s=Yj(a,fY(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:eJ(this.activation),useBias:this.useBias,kernelInitializer:WY(this.kernelInitializer),recurrentInitializer:WY(this.recurrentInitializer),biasInitializer:WY(this.biasInitializer),kernelRegularizer:sJ(this.kernelRegularizer),recurrentRegularizer:sJ(this.recurrentRegularizer),biasRegularizer:sJ(this.biasRegularizer),activityRegularizer:sJ(this.activityRegularizer),kernelConstraint:wQ(this.kernelConstraint),recurrentConstraint:wQ(this.recurrentConstraint),biasConstraint:wQ(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}zJ.className="SimpleRNNCell",uz(zJ);class WJ extends LJ{constructor(e){e.cell=new zJ(e),super(e)}call(e,t){return aj(()=>{null!=this.cell.dropoutMask&&(oj(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(oj(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return new e(t)}}WJ.className="SimpleRNN",uz(WJ);class UJ extends jJ{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new cX("GRUCell does not support reset_after parameter set to true.");this.units=e.units,NX(this.units,"units"),this.activation=nJ(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=nJ(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=UY(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=UY(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=UY(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=lJ(e.kernelRegularizer),this.recurrentRegularizer=lJ(e.recurrentRegularizer),this.biasRegularizer=lJ(e.biasRegularizer),this.kernelConstraint=kQ(e.kernelConstraint),this.recurrentConstraint=kQ(e.recurrentConstraint),this.biasConstraint=kQ(e.biasConstraint),this.dropout=eY([1,tY([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=eY([1,tY([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=KY(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return aj(()=>{if(2!==e.length)throw new cX("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=qJ({ones:()=>EU(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=qJ({ones:()=>EU(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let i,s,u;0<this.dropout&&this.dropout<1&&(e=Jj(e,a[0]));let l=fY(e,this.kernel.read());this.useBias&&(l=vY(l,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Jj(r,o[0]));const c=this.recurrentKernel.read(),[d,h]=KU(c,[2*this.units,this.units],c.rank-1),p=fY(r,d),[f,g,m]=KU(l,3,l.rank-1),[y,v]=KU(p,2,p.rank-1);i=this.recurrentActivation.apply(Yj(f,y)),s=this.recurrentActivation.apply(Yj(g,v));const b=fY(Jj(s,r),h);u=this.activation.apply(Yj(m,b));const x=Yj(Jj(i,r),Jj(Yj(1,xU(i)),u));return[x,x]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:eJ(this.activation),recurrentActivation:eJ(this.recurrentActivation),useBias:this.useBias,kernelInitializer:WY(this.kernelInitializer),recurrentInitializer:WY(this.recurrentInitializer),biasInitializer:WY(this.biasInitializer),kernelRegularizer:sJ(this.kernelRegularizer),recurrentRegularizer:sJ(this.recurrentRegularizer),biasRegularizer:sJ(this.biasRegularizer),activityRegularizer:sJ(this.activityRegularizer),kernelConstraint:wQ(this.kernelConstraint),recurrentConstraint:wQ(this.recurrentConstraint),biasConstraint:wQ(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}UJ.className="GRUCell",uz(UJ);class VJ extends LJ{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new UJ(e),super(e)}call(e,t){return aj(()=>{null!=this.cell.dropoutMask&&(oj(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(oj(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}VJ.className="GRU",uz(VJ);class HJ extends jJ{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,NX(this.units,"units"),this.activation=nJ(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=nJ(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=UY(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=UY(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=UY(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=lJ(e.kernelRegularizer),this.recurrentRegularizer=lJ(e.recurrentRegularizer),this.biasRegularizer=lJ(e.biasRegularizer),this.kernelConstraint=kQ(e.kernelConstraint),this.recurrentConstraint=kQ(e.recurrentConstraint),this.biasConstraint=kQ(e.biasConstraint),this.dropout=eY([1,tY([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=eY([1,tY([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=KY(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends kY{apply(t,r){const a=e.apply([n]),o=(new EY).apply([n]),i=e.apply([2*n]);return dY(dY(a,o),i)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return aj(()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new cX("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let r=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=qJ({ones:()=>EU(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=qJ({ones:()=>EU(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,i=this.recurrentDropoutMask;let s,u,l,c;0<this.dropout&&this.dropout<1&&(e=Jj(e,o[0]));let d=fY(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Jj(r,i[0])),d=Yj(d,fY(r,this.recurrentKernel.read())),this.useBias&&(d=vY(d,this.bias.read()));const[h,p,f,g]=KU(d,4,d.rank-1);s=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),l=Yj(Jj(u,a),Jj(s,this.activation.apply(f))),c=this.recurrentActivation.apply(g);const m=Jj(c,this.activation.apply(l));return[m,m,l]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:eJ(this.activation),recurrentActivation:eJ(this.recurrentActivation),useBias:this.useBias,kernelInitializer:WY(this.kernelInitializer),recurrentInitializer:WY(this.recurrentInitializer),biasInitializer:WY(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:sJ(this.kernelRegularizer),recurrentRegularizer:sJ(this.recurrentRegularizer),biasRegularizer:sJ(this.biasRegularizer),activityRegularizer:sJ(this.activityRegularizer),kernelConstraint:wQ(this.kernelConstraint),recurrentConstraint:wQ(this.recurrentConstraint),biasConstraint:wQ(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}HJ.className="LSTMCell",uz(HJ);class GJ extends LJ{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new HJ(e),super(e)}call(e,t){return aj(()=>{null!=this.cell.dropoutMask&&(oj(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(oj(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}GJ.className="LSTM",uz(GJ);class KJ extends jJ{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return aj(()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const a=[];let o;for(let i=0;i<this.cells.length;++i){const s=this.cells[i];n=r[i],o=0===i?[e[0]].concat(n):[o[0]].concat(n),o=s.call(o,t),a.push(o.slice(1))}n=[];for(const e of a.slice().reverse())n.push(...e);return[o[0]].concat(n)})}build(e){let t;VY(e)&&(e=e[0]),this.cells.forEach((n,r)=>{qX("RNNCell_".concat(r),()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const a of t.cells)r.push(PQ(a,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return QY(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,a=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],a[e]])}ZY(t)}}function qJ(e){const{ones:t,rate:n,training:r=!1,count:a=1,dropoutFunc:o}=e,i=()=>null!=o?o(t(),n):bY(t(),n),s=()=>xY(i,t,r);if(!a||a<=1)return ij(s().clone());return Array(a).fill(void 0).map(s).map(e=>ij(e.clone()))}KJ.className="StackedRNNCells",uz(KJ);var XJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};class YJ extends LJ{constructor(e){if(e.unroll)throw new dX("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new dX("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new JY({ndim:5})]}call(e,t){return aj(()=>{if(null!=this.cell.dropoutMask&&(oj(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(oj(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new cX("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return aj(()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),a=kU([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(a):[a]})}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];aj(()=>{if(!this.stateful)throw new uX("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(null==n[0])throw new cX("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>kU(a)):this.states_=[kU(a)];else if(null==e)oj(this.states_),null!=this.keptStates&&(oj(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>kU(a)):this.states_[0]=kU(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new cX("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));t?this.keptStates.push(this.states_.slice()):oj(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=a;if(!BR(n.shape,r))throw new cX("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(r,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map(e=>ij(e.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:o,dilationRate:i}=this.cell,s="channelsFirst"===t,u=e[s?3:2],l=e[s?4:3],c=yJ(u,r[0],a,o[0],i[0]),d=yJ(l,r[1],a,o[1],i[1]);return[...e.slice(0,2),...s?[n,c,d]:[c,d,n]]}}YJ.className="ConvRNN2D";class QJ extends HJ{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:o,dilationRate:i}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,NX(this.filters,"filters"),this.kernelSize=mJ(n,2,"kernelSize"),this.kernelSize.forEach(e=>NX(e,"kernelSize")),this.strides=mJ(r||1,2,"strides"),this.strides.forEach(e=>NX(e,"strides")),this.padding=a||"valid",HX(this.padding),this.dataFormat=o||"channelsLast",VX(this.dataFormat),this.dilationRate=mJ(i||1,2,"dilationRate"),this.dilationRate.forEach(e=>NX(e,"dilationRate"))}build(e){var t;e=KY(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new cX("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends kY{apply(e,t){return cY([n.apply([r]),CU([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return aj(()=>{if(3!==e.length)throw new cX("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=t.training||!1,r=e[0],a=e[1],o=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=qJ({ones:()=>EU(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=(e,t,n)=>t&&t[n]?Jj(t[n],e):e;let u=s(r,i,0),l=s(r,i,1),c=s(r,i,2),d=s(r,i,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=qJ({ones:()=>EU(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let p=s(a,h,0),f=s(a,h,1),g=s(a,h,2),m=s(a,h,3);const[y,v,b,x]=KU(this.kernel.read(),4,3),[w,D,k,C]=this.useBias?KU(this.bias.read(),4):[null,null,null,null];u=this.inputConv(u,y,w,this.padding),l=this.inputConv(l,v,D,this.padding),c=this.inputConv(c,b,k,this.padding),d=this.inputConv(d,x,C,this.padding);const[E,S,A,F]=KU(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,E),f=this.recurrentConv(f,S),g=this.recurrentConv(g,A),m=this.recurrentConv(m,F);const I=this.recurrentActivation.apply(Yj(u,p)),N=this.recurrentActivation.apply(Yj(l,f)),T=Yj(Jj(N,o),Jj(I,this.activation.apply(Yj(c,g)))),O=Jj(this.recurrentActivation.apply(Yj(d,m)),this.activation.apply(T));return[O,O,T]})}getConfig(){const e=super.getConfig(),{units:t}=e,n=XJ(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const a=TW(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?vY(a,n,this.dataFormat):a}recurrentConv(e,t){return TW(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}QJ.className="ConvLSTM2DCell",uz(QJ);class ZJ extends YJ{constructor(e){const t=new QJ(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}ZJ.className="ConvLSTM2D",uz(ZJ);class JJ extends rQ{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return aj(()=>{this.invokeCallHook(e,t);const n=GY(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return xY(()=>bY(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}JJ.className="Dropout",uz(JJ);class $J extends JJ{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}$J.className="SpatialDropout1D",uz($J);class e$ extends rQ{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,NX(this.units,"units"),this.activation=nJ(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=UY(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=UY(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=kQ(e.kernelConstraint),this.biasConstraint=kQ(e.biasConstraint),this.kernelRegularizer=lJ(e.kernelRegularizer),this.biasRegularizer=lJ(e.biasRegularizer),this.activityRegularizer=lJ(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=KY(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=KY(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return aj(()=>{this.invokeCallHook(e,t);const n=GY(e),r=OX(this.activation.getClassName());let a;return null!=r?a=fY(n,this.kernel.read(),r,this.bias?this.bias.read():null):(a=fY(n,this.kernel.read()),null!=this.bias&&(a=vY(a,this.bias.read())),null!=this.activation&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:eJ(this.activation),useBias:this.useBias,kernelInitializer:WY(this.kernelInitializer),biasInitializer:WY(this.biasInitializer),kernelRegularizer:sJ(this.kernelRegularizer),biasRegularizer:sJ(this.biasRegularizer),activityRegularizer:sJ(this.activityRegularizer),kernelConstraint:wQ(this.kernelConstraint),biasConstraint:wQ(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}e$.className="Dense",uz(e$);class t$ extends rQ{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=KY(e);for(const t of e.slice(1))if(null==t)throw new cX('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],$X(e,1)]}call(e,t){return aj(()=>{this.invokeCallHook(e,t);let n=GY(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=rV(n,e)}return function(e){if(e.rank<=1)throw new cX("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));const t=[e.shape[0],$X(e.shape,1)];return yW(e,t)}(n)})}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}t$.className="Flatten",uz(t$);class n$ extends rQ{constructor(e){super(e),this.supportsMasking=!0,this.activation=nJ(e.activation)}call(e,t){return aj(()=>{this.invokeCallHook(e,t);const n=GY(e);return this.activation.apply(n)})}getConfig(){const e={activation:eJ(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}n$.className="Activation",uz(n$);class r$ extends rQ{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return aj(()=>function(e,t){return aj(()=>{if(2!==e.shape.length)throw new cX("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return hY(iY(e,1),[1,t,1])})}(e=GY(e),this.n))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}r$.className="RepeatVector",uz(r$);class a$ extends rQ{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let a=1,o=null;for(let s=0;s<r.length;++s){const e=r[s];if(this.isUnknown(e)){if(null!==o)throw new cX("Can only specifiy one unknown dimension.");o=s}else a*=e}const i=$X(e);if(null!==o){if(0===a||i%a!==0)throw new cX(n);r[o]=i/a}else if(i!==a)throw new cX(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return aj(()=>{this.invokeCallHook(e,t);const n=GY(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return yW(n,a)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}a$.className="Reshape",uz(a$);class o$ extends rQ{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const t=nY(1,e.dims.length+1);if(!BR(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new JY({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=KY(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return rV(GY(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}o$.className="Permute",uz(o$);class i$ extends rQ{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=GY(e);return eW(wU(n,this.maskValue),-1)}call(e,t){return aj(()=>{this.invokeCallHook(e,t);const n=GY(e),r=eW(wU(n,this.maskValue),-1,!0);return Jj(n,Kj(r,n.dtype))})}}i$.className="Masking",uz(i$);class s$ extends rQ{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(vX(e.inputLength))}this.inputDim=e.inputDim,NX(this.inputDim,"inputDim"),this.outputDim=e.outputDim,NX(this.outputDim,"outputDim"),this.embeddingsInitializer=UY(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=lJ(e.embeddingsRegularizer),this.activityRegularizer=lJ(e.activityRegularizer),this.embeddingsConstraint=kQ(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return aj(()=>this.maskZero?(e=GY(e),wU(e,tz(e))):null)}computeOutputShape(e){if(e=KY(e),null==this.inputLength)return[...e,this.outputDim];const t=vX(this.inputLength);if(t.length!==e.length-1)throw new cX('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let n=0;for(let r=0;r<t.length;++r){const a=t[r],o=e[r+1];if(null!=a&&null!=o&&a!==o)throw new cX('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=o),n++}}return[e[0],...t,this.outputDim]}call(e,t){return aj(()=>{this.invokeCallHook(e,t);let n=GY(e);"int32"!==n.dtype&&(n=oY(n,"int32"));const r=gY(this.embeddings.read(),yW(n,[n.size]));return yW(r,KY(this.computeOutputShape(n.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:WY(this.embeddingsInitializer),embeddingsRegularizer:sJ(this.embeddingsRegularizer),activityRegularizer:sJ(this.activityRegularizer),embeddingsConstraint:wQ(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}s$.className="Embedding",uz(s$);class u$ extends rQ{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new dX}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const a=e[e.length-t.length+r],o=t[r];if(null==a||null==o||a<0||o<0)n.push(null);else if(1===a)n.push(o);else if(1===o)n.push(a);else{if(a!==o)throw new cX("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[KY(e)]),e.length<2)throw new cX("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let t=[];for(const a of e)null!=a&&null!==a[0]&&t.push(a[0]);if(t=SX(t),t.length>1)throw new cX("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let a=1;a<e.length;++a){const t=null==e[a]?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map(e=>e.length);-1===e.indexOf(null)&&1===SX(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return aj(()=>{if(this.reshapeRequired){const t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){const r=tY(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=iY(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const o of e){const e=o.rank;if(null==e){const e=o.shape,r=e[0],a=e.slice(1).concat([r]);let i=yW(o,[r].concat($X(e.slice(1))));i=rV(i,[1,0]),i=yW(i,a),t.push(i),n=!0}else if(e>1){const r=nY(1,e).concat([0]);t.push(rV(o,r)),n=!0}else t.push(o)}let r=this.mergeFunction(t);const a=r.rank;if(n)if(null==a){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=yW(rV(yW(r,[-1,t]),[1,0]),n)}else if(a>1){const e=[a-1].concat(nY(0,a-1));r=rV(r,e)}return r}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=SX(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return aj(()=>{if(null==t)return null;if(!Array.isArray(t))throw new cX("`mask` should be an Array");if(!Array.isArray(e))throw new cX("`inputs` should be an Array");if(t.length!==e.length)throw new cX("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every(e=>null==e))return null;t=t.map(e=>null==e?e:HW(e,0));let n=t[0];for(let e=1;e<t.length-1;++e)n=hU(n,t[e]);return n})}}class l$ extends u${constructor(e){super(e)}mergeFunction(e){return aj(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Yj(t,e[n]);return t})}}l$.className="Add",uz(l$);class c$ extends u${constructor(e){super(e)}mergeFunction(e){return aj(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Jj(t,e[n]);return t})}}c$.className="Multiply",uz(c$);class d$ extends u${constructor(e){super(e)}mergeFunction(e){return aj(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Yj(t,e[n]);return Jj(1/e.length,t)})}}d$.className="Average",uz(d$);class h$ extends u${constructor(e){super(e)}mergeFunction(e){return aj(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=xz(t,e[n]);return t})}}h$.className="Maximum",uz(h$);class p$ extends u${constructor(e){super(e)}mergeFunction(e){return aj(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=vU(t,e[n]);return t})}}p$.className="Minimum",uz(p$);class f$ extends u${constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new cX("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let a=!1;for(const e of n)if(BR(e,t)){a=!0;break}a||n.push(t)}if(n.length>1)throw new cX("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return aj(()=>cY(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new cX("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const a of t.slice(1)){if(null==n[r]||null==a[r]){n[r]=null;break}n[r]+=a[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new cX("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new cX("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new cX("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return aj(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;const r=[];for(let o=0;o<e.length;++o)null==t[o]?r.push(Kj(EU(e[o]),"bool")):t[o].rank<e[o].rank?r.push(HW(t[o],-1)):r.push(t[o]);const a=SW(r,this.axis);return $z(a,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function g$(e,t){for(;e<0;)e+=t;return e}f$.className="Concatenate",uz(f$);class m$ extends u${constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){RR(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new dX("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new cX("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(2!==e.length)throw new cX("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>g$(t,e[n].shape.length)):[g$(this.axes,n.shape.length),g$(this.axes,r.shape.length)],this.normalize&&(n=MQ(n,t[0]),r=MQ(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new dX("batchDot is not implemented for tensors of 4D or higher rank yet");if(RR(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)),RR(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new dX("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);const o=n;return aj(()=>{let n,i;if(r>a){n=r-a;const e=[];for(let t=0;t<n;++t)e.push(1);t=yW(t,t.shape.concat(e))}else if(a>r){n=a-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=yW(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=o[0]===o[1]?tU(Jj(e,t),o[0]):tU(Jj(rV(e,[1,0]),t),o[1]);else{const n=o[0]!==e.shape.length-1,r=o[1]===t.shape.length-1;i=pU(e,t,n,r)}if(n>0){let e;e=r>a?r+a-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);i=qU(i,t)}return 1===i.shape.length&&(i=HW(i,1)),i})}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[g$(this.axes,e.length),g$(this.axes,t.length)],n}computeOutputShape(e){RR(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new dX("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}m$.className="Dot",uz(m$);class y$ extends rQ{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return aj(()=>{this.invokeCallHook(e,t);const n=GY(e);return xY(()=>Yj(pY(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}}y$.className="GaussianNoise",uz(y$);class v$ extends rQ{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return aj(()=>{this.invokeCallHook(e,t);const n=GY(e);if(this.rate>0&&this.rate<1){return xY(()=>{const e=Math.sqrt(this.rate/(1-this.rate));return Jj(n,pY(n.shape,1,e))},()=>n,t.training||!1)}return n})}}v$.className="GaussianDropout",uz(v$);class b$ extends rQ{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||GY(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return aj(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=GY(e),r=-1.7580993408473766;let a=QW(OU(n),this.rate);a=oY(a,"float32");const o=((1-this.rate)*(1+this.rate*r**2))**-.5,i=-o*r*this.rate,s=Yj(Jj(t,a),Jj(Yj(a,-1),r));return Yj(Jj(s,o),i)};return xY(r,()=>GY(e),t.training||!1)}return e})}}function x$(e,t,n,r,a){let o,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=wW(e,t,n,r,a,i);else if(3===e.rank)o=DW(e,t,n,r,a,i);else{if(4!==e.rank)throw new dX("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=kW(e,t,n,r,a,i)}return o}function w$(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return BR(r.slice().sort(),nY(0,e.rank-1))?function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return aj(()=>{const o=bU(e,r),i=o.mean,s=o.variance;return[x$(e,i,s,n,t,a),i,s]})}(e,t,n,r,a):function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return aj(()=>{const o=bU(e,r),i=o.mean,s=o.variance,u=[];for(const t of nY(0,e.rank))-1!==r.indexOf(t)?u.push(1):u.push(e.shape[t]);const l=yW(i,u),c=yW(s,u),d=null==t?null:yW(t,u),h=null==n?null:yW(n,u);return[x$(e,l,c,h,d,a),i,s]})}(e,t,n,r,a)}b$.className="AlphaDropout",uz(b$);class D$ extends rQ{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=UY(e.betaInitializer||"zeros"),this.gammaInitializer=UY(e.gammaInitializer||"ones"),this.movingMeanInitializer=UY(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=UY(e.movingVarianceInitializer||"ones"),this.betaConstraint=kQ(e.betaConstraint),this.gammaConstraint=kQ(e.gammaConstraint),this.betaRegularizer=lJ(e.betaRegularizer),this.gammaRegularizer=lJ(e.gammaRegularizer)}build(e){e=KY(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new cX("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new JY({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return aj(()=>{const n=null!=t.training&&t.training,r=GY(e),a=r.shape,o=a.length,i=nY(0,o),s=this.axis>=0?this.axis:this.axis+o;i.splice(s,1);const u=fX(1,o);u[s]=a[s];const l=i.slice();l.sort();const c=!BR(l,nY(0,o).slice(0,o-1));if(!n)return(()=>{if(c){const e=yW(this.movingMean.read(),u),t=yW(this.movingVariance.read(),u),n=this.center?yW(this.beta.read(),u):null,a=this.scale?yW(this.gamma.read(),u):null;return x$(r,e,t,n,a,this.epsilon)}return x$(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,h,p]=w$(r,this.gamma.read(),this.beta.read(),i,this.epsilon),f=(e,t,n)=>{aj(()=>{const r=1-n,a=e.read(),o=Jj(fz(a,t),r);e.write(fz(a,o))})};return(()=>{f(this.movingMean,h,this.momentum),f(this.movingVariance,p,this.momentum)})(),d})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:WY(this.betaInitializer),gammaInitializer:WY(this.gammaInitializer),movingMeanInitializer:WY(this.movingMeanInitializer),movingVarianceInitializer:WY(this.movingVarianceInitializer),betaRegularizer:sJ(this.betaRegularizer),gammaRegularizer:sJ(this.gammaRegularizer),betaConstraint:wQ(this.betaConstraint),gammaConstraint:wQ(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}D$.className="BatchNormalization",uz(D$);class k$ extends rQ{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=UY(e.betaInitializer||"zeros"),this.gammaInitializer=UY(e.gammaInitializer||"ones"),this.betaRegularizer=lJ(e.betaRegularizer),this.gammaRegularizer=lJ(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=KY(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=t);for(const a of this.axis)if(a<0||a>=t)throw new Error("Invalid axis: ".concat(a));if(this.axis.length!==SX(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const n=this.axis.map(t=>e[t]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=GY(e),r=n.shape,a=r.length;return aj(()=>{let{mean:e,variance:t}=bU(n,this.axis,!0);const o=fX(1,a);for(const n of this.axis)o[n]=r[n];const i=e=>null!=e&&e.shape.length!==a?yW(e,o):e;let s=this.scale?i(this.gamma.read()):null,u=this.center?i(this.beta.read()):null;const l=[],c=[];for(let n=0;n<a;++n)-1!==this.axis.indexOf(n)?(l.push(r[n]),c.push(1)):(l.push(1),c.push(r[n]));return e=GW(e,l),t=GW(t,l),null!=s&&(s=GW(s,c)),null!=u&&(u=GW(u,c)),x$(n,e,t,u,s,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:WY(this.betaInitializer),gammaInitializer:WY(this.gammaInitializer),betaRegularizer:sJ(this.betaRegularizer),gammaRegularizer:sJ(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}k$.className="LayerNormalization",uz(k$);class C$ extends rQ{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new cX("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new cX("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new cX("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new JY({ndim:4})]}computeOutputShape(e){let t,n;return e=KY(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return aj(()=>function(e,t,n){return aj(()=>{if(4!==e.rank)throw new cX("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new cX("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new cX("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],SU(e,r)})}(GY(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function E$(e,t,n,r,a,o){return aj(()=>{let i;VX(a),GX(o),HX(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=bJ(e,a);const s="same"===r?"same":"valid";return i="max"===o?fU(e,t,n,s):vW(e,t,n,s),"channelsFirst"===a&&(i=rV(i,[0,3,1,2])),i})}function S$(e,t,n,r,a,o){return aj(()=>{let i;VX(a),GX(o),HX(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=xJ(e,a);const s="same"===r?"same":"valid";return i="max"===o?gU(e,t,n,s):bW(e,t,n,s),"channelsFirst"===a&&(i=rV(i,[0,4,1,2,3])),i})}C$.className="ZeroPadding2D",uz(C$);class A$ extends rQ{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new cX("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(NX(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new cX("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));this.strides=e.strides}NX(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,HX(this.padding),this.inputSpec=[new JY({ndim:3})]}computeOutputShape(e){const t=yJ((e=KY(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return aj(()=>{this.invokeCallHook(e,t),e=iY(GY(e),2);const n=this.poolingFunction(GY(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return qU(n,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class F$ extends A${constructor(e){super(e)}poolingFunction(e,t,n,r,a){return VX(a),HX(r),E$(e,t,n,r,a,"max")}}F$.className="MaxPooling1D",uz(F$);class I$ extends A${constructor(e){super(e)}poolingFunction(e,t,n,r,a){return VX(a),HX(r),E$(e,t,n,r,a,"avg")}}I$.className="AveragePooling1D",uz(I$);class N$ extends rQ{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new cX("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];NX(this.poolSize,"poolSize"),NX(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,VX(this.dataFormat),HX(this.padding),this.inputSpec=[new JY({ndim:4})]}computeOutputShape(e){e=KY(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=yJ(t,this.poolSize[0],this.padding,this.strides[0]),n=yJ(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return aj(()=>(this.invokeCallHook(e,t),this.poolingFunction(GY(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class T$ extends N${constructor(e){super(e)}poolingFunction(e,t,n,r,a){return VX(a),HX(r),E$(e,t,n,r,a,"max")}}T$.className="MaxPooling2D",uz(T$);class O$ extends N${constructor(e){super(e)}poolingFunction(e,t,n,r,a){return VX(a),HX(r),E$(e,t,n,r,a,"avg")}}O$.className="AveragePooling2D",uz(O$);class R$ extends rQ{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new cX("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];NX(this.poolSize,"poolSize"),NX(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,VX(this.dataFormat),HX(this.padding),this.inputSpec=[new JY({ndim:5})]}computeOutputShape(e){e=KY(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=yJ(t,this.poolSize[0],this.padding,this.strides[0]),n=yJ(n,this.poolSize[1],this.padding,this.strides[1]),r=yJ(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return aj(()=>(this.invokeCallHook(e,t),this.poolingFunction(GY(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class _$ extends R${constructor(e){super(e)}poolingFunction(e,t,n,r,a){return VX(a),HX(r),S$(e,t,n,r,a,"max")}}_$.className="MaxPooling3D",uz(_$);class P$ extends R${constructor(e){super(e)}poolingFunction(e,t,n,r,a){return VX(a),HX(r),S$(e,t,n,r,a,"avg")}}P$.className="AveragePooling3D",uz(P$);class M$ extends rQ{constructor(e){super(e),this.inputSpec=[new JY({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new dX}}class B$ extends M${constructor(e){super(e||{})}call(e,t){return aj(()=>{const t=GY(e);return mU(t,1)})}}B$.className="GlobalAveragePooling1D",uz(B$);class L$ extends M${constructor(e){super(e||{})}call(e,t){return aj(()=>{const t=GY(e);return eU(t,1)})}}L$.className="GlobalMaxPooling1D",uz(L$);class j$ extends rQ{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,VX(this.dataFormat),this.inputSpec=[new JY({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new dX}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class z$ extends j${call(e,t){return aj(()=>{const t=GY(e);return"channelsLast"===this.dataFormat?mU(t,[1,2]):mU(t,[2,3])})}}z$.className="GlobalAveragePooling2D",uz(z$);class W$ extends j${call(e,t){return aj(()=>{const t=GY(e);return"channelsLast"===this.dataFormat?eU(t,[1,2]):eU(t,[2,3])})}}W$.className="GlobalMaxPooling2D",uz(W$);class U$ extends rQ{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=PQ(t.layer,n);delete t.layer;const a={layer:r};return Object.assign(a,t),new e(a)}}class V$ extends U${constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=KY(e)).length<3)throw new cX("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=KY(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return aj(()=>BJ((e,n)=>[GY(this.layer.call(e,t)),[]],e=GY(e),[],!1,null,null,!1,!0)[1])}}V$.className="TimeDistributed",uz(V$);class H$ extends U${constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=PQ(n),t.goBackwards=!0!==t.goBackwards;const r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=PQ(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){FX(WX,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new dX("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):yX(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=MJ(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const o=[],i=[];if(null!=n){const e=n.length;if(e%2>0)throw new cX("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,o.push(...n);const r=n.map(e=>new JY({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),i.push(...r)}if(null!=r)throw new dX("Support for constants in Bidirectional layers is not implemented yet.");const s=o[0]instanceof $Y;for(const u of o)if(u instanceof $Y!==s)throw new cX("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(o),r=this.inputSpec.concat(i),a=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=a,s}return super.apply(e,t)}call(e,t){return aj(()=>{const n=t.initialState;let r,a,o,i;if(null==n)r=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{const o=n.slice(0,n.length/2),i=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return this.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),this.returnSequences&&(a=PU(a,1)),"concat"===this.mergeMode?i=cY([r,a]):"sum"===this.mergeMode?i=Yj(r,a):"ave"===this.mergeMode?i=Jj(.5,Yj(r,a)):"mul"===this.mergeMode?i=Jj(r,a):null==this.mergeMode&&(i=[r,a]),this.returnState?null==this.mergeMode?i.concat(o):[i].concat(o):i})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){qX(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),qX(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=PQ(t.layer);if(delete t.layer,null!=t.numConstants)throw new dX("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}H$.className="Bidirectional",uz(H$);class G$ extends rQ{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return aj(()=>("float32"!==(e=GY(e)).dtype&&(e=oY(e,"float32")),Yj(Jj(e,this.scale),this.offset)))}}G$.className="Rescaling",uz(G$);const{resizeBilinear:K$,cropAndResize:q$}=aH;class X$ extends rQ{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,a,o,i,s){return aj(()=>{let u,l=!1;const c=[t/o,n/i,(r+t)/o,(a+n)/i],d=[];3===e.rank?(l=!0,u=XU([e])):u=e;for(let e=0;e<u.shape[0];e++)d.push(c);const h=ej(d,[d.length,4]),p=RU(0,d.length,1,"int32"),f=q$(u,h,p,[r,a],"nearest");return oY(l?GY($U(f)):f,s)})}upsize(e,t,n,r){return aj(()=>oY(K$(e,[t,n]),r))}call(e,t){return aj(()=>{const t=GY(e),n=t.dtype,r=t.shape,a=r[r.length-3],o=r[r.length-2];let i=0;a!==this.height&&(i=Math.floor((a-this.height)/2));let s=0;return o!==this.width&&(s=Math.floor((o-this.width)/2),0===s&&(s=1)),i>=0&&s>=0?this.centerCrop(t,i,s,this.height,this.width,a,o,n):this.upsize(e,this.height,this.width,n)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=KY(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}X$.className="CenterCrop",uz(X$);class Y$ extends rQ{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=KY(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return aj(()=>{let n;if("int32"!==(e=GY(e)).dtype&&(e=oY(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new cX("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=GY(t.countWeights)}const r=eU(e),a=yU(e),o=YW(this.numTokens,r).bufferSync().get(0),i=QW(a,0).bufferSync().get(0);if(!o||!i)throw new cX("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,r){let a=GY(e);if("int32"!==a.dtype&&(a=oY(a,"int32")),"int"===t)return a;const o=a.shape;if(0===a.rank&&(a=HW(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=HW(a,-1)),a.rank>2)throw new cX("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(o)+" which would result in output rank ".concat(a.rank,"."));const i=["multiHot","oneHot"].includes(t),s=a;let u;if(u=LW(s,"undefined"!==typeof r&&"count"===t?r:[],n,i),"tfIdf"!==t)return u;if(r)return Jj(u,r);throw new cX("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)})}}Y$.className="CategoryEncoding",uz(Y$);const Q$=new Set(["bilinear","nearest"]);class Z$ extends rQ{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!Q$.has(e.interpolation))throw new cX("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=KY(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return aj(()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return aH.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return aH.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...Q$]," are supported"))})}}Z$.className="Resizing",uz(Z$);class J${constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}J$.className="RandomSeed";class $$ extends rQ{constructor(e){super(e),this.randomGenerator=new J$(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}$$.className="BaseRandomLayer";const e0=new Set(["bilinear","nearest"]);class t0 extends $${constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new cX("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new cX("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new cX("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!e0.has(n))throw new cX("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=KY(e))[2];return[this.imgHeight,-1,t]}call(e,t){return aj(()=>{const t=GY(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=OU([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const a=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return aH.resizeBilinear(e,a);case"nearest":return aH.resizeNearestNeighbor(e,a);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...e0]," are supported"))}})}}t0.className="RandomWidth",uz(t0);var n0,r0;p_().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(n0||(n0={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(r0||(r0={}));Error;new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function a0(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(u0(e)){const a=Array.isArray(e)?[]:{};r.add(e);for(const o in e){const i=a0(e[o],t,n,r);a[o]=i}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function o0(e){return i0(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:s0)}function i0(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(u0(r)){const a=Array.isArray(r)?[]:{};n.add(r);for(const o in r){const r=e.map(e=>e[o]),i=i0(r,t,n);a[o]=i}return n.delete(r),a}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function s0(e){return null===e?null:u0(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function u0(e){let t=!1;if(p_().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(551);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof bL)&&!(e instanceof Promise)&&!t)}function l0(e){return function(e,t){return a0(e,t)}(e,c0)}function c0(e){return e instanceof bL?{value:e.clone(),recurse:!1}:u0(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class d0{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class h0 extends d0{constructor(){super(h0.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function p0(e){return new y0(e)}function f0(e,t){return new F0(e,t)}h0.INITIAL_CAPACITY=32;class g0{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new C0(this,e)}filter(e){return new D0(this,e)}map(e){return new k0(this,e)}mapAsync(e){return new E0(this,e)}serialMapAsync(e){return new E0(this,e).serial()}flatmap(e){return new A0(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e){return new w0(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s0;return this.rowMajorBatch(e,t).map(e=>o0(e,n))}concatenate(e,t){return new F0(new m0([this,e]),t)}take(e){return e<0||null==e?this:new x0(this,e)}skip(e){return e<0||null==e?this:new b0(this,e)}prefetch(e){return new N0(this,e)}shuffle(e,t){return new T0(this,e,t)}serial(){return new v0(this)}}class m0 extends g0{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:l0(e),done:!1}}}class y0 extends g0{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(Ut){throw Ut.message="Error thrown while iterating through a dataset: ".concat(Ut.message),Ut}}}class v0 extends g0{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class b0 extends g0{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;oj(e.value)}return this.upstream.next()}}class x0 extends g0{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class w0 extends g0{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class D0 extends g0{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;oj(e.value)}}}class k0 extends g0{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=_L(e.value),n=this.transform(e.value),r=_L(n);for(const a of t)RL(a,r)||a.dispose();return{value:n,done:!1}}}class C0 extends g0{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(Ut){if(!this.handler(Ut))return{value:null,done:!0}}}}class E0 extends g0{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=_L(e.value),n=await this.transform(e.value),r=_L(n);for(const a of t)RL(a,r)||a.dispose();return{value:n,done:!1}}}class S0 extends g0{constructor(){super(),this.outputQueue=new h0,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class A0 extends S0{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=_L(e.value),n=this.transform(e.value),r=_L(n);this.outputQueue.pushAll(n);for(const a of t)RL(a,r)||a.dispose();return!0}}class F0 extends g0{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var I0;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(I0||(I0={}));class N0 extends g0{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new d0(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class T0 extends N0{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=FU.alea(n||nL().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class O0{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return RR(e>0,()=>"batchSize needs to be positive, but it is\n      ".concat(e)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),R0(async()=>(await n.iterator()).columnMajorBatch(e,t,_0),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,R0(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,R0(async()=>(await t.iterator()).filter(t=>aj(()=>e(t))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return R0(async()=>(await t.iterator()).map(t=>aj(()=>e(t))),this.size)}mapAsync(e){const t=this;return R0(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return R0(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,R0(async()=>f0(p0(async()=>({value:await t.iterator(),done:!1})).take(e)),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,R0(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));const r=this,a=FU.alea(t||nL().toString());return R0(async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,R0(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function R0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends O0{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function _0(e){if(null===e)return null;const t=e[0];if(null==(n=t)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(n)||Array.isArray(n)||"object"===typeof n&&n instanceof bL||oL(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof bL?XU(e):ej(e)}(e),recurse:!1}}var n;return{value:null,recurse:!0}}O0.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function P0(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&RR("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors in the CPU backend."))})}const M0=vG;class B0 extends AR{nextDataId(){return B0.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new SR(this,nj())}write(e,t,n){this.firstUse&&(this.firstUse=!1,p_().get("IS_NODE")&&IB("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&YR(n[0])){const a=n.map(e=>rL(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return MH(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>aL(e));return Gj(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Gj(e.shape,e.dtype,t)}makeOutput(e,t,n){return nj().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=nL();e();return{kernelMs:nL()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){P0([e],"where");const t=this.readSync(e.dataId);return M0(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}B0.nextDataId=0;function L0(e){return(t,n,r)=>{const a=KR(n,t.length);for(let o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}function j0(e,t,n){return z0(e,L0(t),n)}function z0(e,t,n){return r=>{let{inputs:a,attrs:o,backend:i}=r;const{x:s}=a;P0(s,e);const u=i,l=u.data.get(s.dataId).values;let c;if("string"===s.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=mG(l)}else c=l;const d=n||s.dtype,h=t(c,d,o);return u.makeTensorInfo(s.shape,d,h)}}sj("cpu",()=>new B0,1);const W0=j0(mP,e=>e>=0?e:Math.exp(e)-1),U0={kernelName:mP,backendName:"cpu",kernelFunc:W0};function V0(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const H0={kernelName:RP,backendName:"cpu",kernelFunc:V0};function G0(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:o}=r;P0([a],"leakyRelu");const i=MR(a.shape),s=n.data.get(a.dataId).values,u=GR("float32",i);for(let l=0;l<s.length;l++)u[l]=s[l]<0?o*s[l]:s[l];return n.makeTensorInfo(a.shape,"float32",u)}const K0={kernelName:jP,backendName:"cpu",kernelFunc:G0};function q0(e){return(t,n,r,a,o)=>{const i=bz(t,n),s=i.length,u=e_(i),l=GR(o,MR(i)),c=t.length,d=n.length,h=e_(t),p=e_(n),f=yz(t,i),g=yz(n,i);if(f.length+g.length===0)for(let m=0;m<l.length;++m)l[m]=e(r[m%r.length],a[m%a.length]);else for(let m=0;m<l.length;++m){const t=u_(m,s,u),n=t.slice(-c);f.forEach(e=>n[e]=0);const o=s_(n,c,h),i=t.slice(-d);g.forEach(e=>i[e]=0);const y=s_(i,d,p);l[m]=e(r[o],a[y])}return[l,i]}}const X0=q0((e,t)=>e<0?t*e:e);function Y0(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t;P0([r,a],"prelu");const o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,[s,u]=X0(r.shape,a.shape,o,i,"float32");return n.makeTensorInfo(u,"float32",s)}const Q0={kernelName:xM,backendName:"cpu",kernelFunc:Y0},Z0=j0(FM,e=>Math.max(0,e)),J0={kernelName:FM,backendName:"cpu",kernelFunc:Z0},$0=j0(_M,e=>Math.min(Math.max(0,e),6)),e1={kernelName:_M,backendName:"cpu",kernelFunc:$0},t1=L0(e=>1/(1+Math.exp(-e))),n1=j0(qM,e=>1/(1+Math.exp(-e))),r1={kernelName:qM,backendName:"cpu",kernelFunc:n1};function a1(e,t,n,r,a){if("linear"===n)return V0({inputs:{x:t},backend:e});if("relu"===n)return Z0({inputs:{x:t},backend:e});if("elu"===n)return W0({inputs:{x:t},backend:e});if("relu6"===n)return $0({inputs:{x:t},backend:e});if("prelu"===n)return Y0({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return G0({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return n1({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function o1(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}const i1={kernelName:H_,backendName:"cpu",kernelFunc:o1};function s1(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return o1({inputs:{real:s1(e,t,"float32"),imag:s1(e,t,"float32")},backend:e})}const r=a_(MR(t),n);return e.makeTensorInfo(t,n,r)}function u1(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}const l1={kernelName:SM,backendName:"cpu",kernelFunc:u1};function c1(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=tL([0],n),[a,o]=q0((e,t)=>e!==t?1:0)(t,[],e,r,"bool");return[o,"bool",a]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function d1(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:o}=r;if("complex64"===o){if("complex64"===a.dtype)return V0({inputs:{x:a},backend:n});const e=s1(n,a.shape,a.dtype),t=d1({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=o1({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){const e=u1({inputs:{input:a},backend:n}),t=d1({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!qR(a.dtype,o)){const e=V0({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}const i=n.data.get(a.dataId).values,[s,u,l]=c1(i,a.shape,a.dtype,o);return n.makeTensorInfo(s,u,l)}const h1={kernelName:W_,backendName:"cpu",kernelFunc:d1};function p1(e,t,n,r){return null==n?n=>{let{inputs:a,backend:o}=n;const{a:i,b:s}=a,u=o;P0([i,s],e);const l=u.data.get(i.dataId).values,c=u.data.get(s.dataId).values,d="string"===i.dtype?mG(l):l,h="string"===i.dtype?mG(c):c,p=r||i.dtype,[f,g]=t(i.shape,s.shape,d,h,p);return u.makeTensorInfo(g,p,f)}:e=>{let{inputs:a,backend:o}=e;const{a:i,b:s}=a,u=o;if("complex64"===i.dtype||"complex64"===s.dtype){const e=d1({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),t=u.data.get(e.dataId),r=t.complexTensorInfos.real,a=t.complexTensorInfos.imag,o=u.data.get(r.dataId).values,l=u.data.get(a.dataId).values,c=d1({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),d=u.data.get(c.dataId),h=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,f=u.data.get(h.dataId).values,g=u.data.get(p.dataId).values,[m,y,v]=n(i.shape,s.shape,o,l,f,g),b=u.makeTensorInfo(v,"float32",m),x=u.makeTensorInfo(v,"float32",y),w=o1({inputs:{real:b,imag:x},backend:u});return u.disposeIntermediateTensorInfo(e),u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(b),u.disposeIntermediateTensorInfo(x),w}{const e=u.data.get(i.dataId).values,n=u.data.get(s.dataId).values,a=r||i.dtype,[o,l]=t(i.shape,s.shape,e,n,a);return u.makeTensorInfo(l,a,o)}}}function f1(e){return(t,n,r,a,o,i)=>{const s=bz(t,n),u=MR(s),l=s.length,c=e_(s),d=GR("float32",u),h=GR("float32",u),p=yz(t,s),f=yz(n,s),g=MH(r,a),m=MH(o,i),y=t.length,v=e_(t),b=n.length,x=e_(n);if(p.length+f.length===0)for(let w=0;w<d.length;w++){const t=w%g.length,n=w%m.length,r=e(g[2*t],g[2*t+1],m[2*n],m[2*n+1]);d[w]=r.real,h[w]=r.imag}else for(let w=0;w<d.length;w++){const t=u_(w,l,c),n=t.slice(-y);p.forEach(e=>n[e]=0);const r=s_(n,y,v),a=t.slice(-b);f.forEach(e=>a[e]=0);const o=s_(a,b,x),i=e(g[2*r],g[2*r+1],m[2*o],m[2*o+1]);d[w]=i.real,h[w]=i.imag}return[d,h,s]}}const g1=q0((e,t)=>e+t),m1=f1((e,t,n,r)=>({real:e+n,imag:t+r})),y1=p1(w_,g1,m1),v1={kernelName:w_,backendName:"cpu",kernelFunc:y1};function b1(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:o}=r,i=MR(a.shape),s=UR(o,i),u=MR(s);RR(i===u,()=>"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."),n.incRef(a.dataId);const l=n.data.get(a.dataId);if(null!=l.complexTensorInfos){const e=l.complexTensorInfos.real,t=l.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}const x1={kernelName:IM,backendName:"cpu",kernelFunc:b1};function w1(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:o}=t,{transposeA:i,transposeB:s}=r;P0([a,o],"matMul");const u=a.shape.length,l=o.shape.length,c=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[l-1]:o.shape[l-2],h=i?a.shape[u-1]:a.shape[u-2],p=s?o.shape[l-2]:o.shape[l-1],f=a.shape.slice(0,-2),g=o.shape.slice(0,-2),m=MR(f),y=MR(g),v=bz(a.shape.slice(0,-2),o.shape.slice(0,-2)).concat([h,p]);RR(c===d,()=>"Error in matMul: inner shapes (".concat(c,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(o.shape," and transposeA=").concat(i)+" and transposeB=".concat(s," must match."));const b=s?[y,p,d]:[y,d,p],x=b1({inputs:{x:a},backend:n,attrs:{shape:i?[m,c,h]:[m,h,c]}}),w=b1({inputs:{x:o},backend:n,attrs:{shape:b}}),D=i?x.shape[1]:x.shape[2],k=i?x.shape[2]:x.shape[1],C=s?w.shape[1]:w.shape[2],E=Math.max(m,y),S=n.data.get(x.dataId).values,A=n.data.get(w.dataId).values,F=e_(x.shape),I=e_(w.shape),[N,T,O]=i?[F[0],1,F[1]]:[F[0],F[1],1],[R,_,P]=s?[1,I[1],I[0]]:[I[1],1,I[0]],M=k*C,B=Gj([E,k,C],x.dtype),L=B.values,j=n.blockSize;for(let z=0;z<E;z++){const e=z%m,t=z%y;for(let n=0;n<k;n+=j){const r=Math.min(n+j,k);for(let a=0;a<C;a+=j){const o=Math.min(a+j,C);for(let i=0;i<D;i+=j){const s=Math.min(i+j,D);for(let u=n;u<r;u++)for(let n=a;n<o;n++){let r=0;for(let a=i;a<s;a++){r+=S[e*N+u*T+a*O]*A[a*R+n*_+t*P]}L[z*M+(u*C+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,B.dtype,B.values)}const D1={kernelName:M_,backendName:"cpu",kernelFunc:w1};const k1={kernelName:SB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:o,bias:i,preluActivationWeights:s}=t,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:d}=r;let h,p,f;const g=[];h=w1({inputs:{a:a,b:o},attrs:{transposeA:u,transposeB:l},backend:n}),i&&(p=y1({inputs:{a:h,b:i},backend:n}),g.push(h),h=p),c&&(f=a1(n,h,c,s,d),g.push(h),h=f);for(const m of g)n.disposeIntermediateTensorInfo(m);return h}};function C1(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const E1={kernelName:v_,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;P0(t,"abs");let r=new Float32Array(MR(t.shape));return r=C1(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},S1=j0(b_,e=>Math.acos(e)),A1={kernelName:b_,backendName:"cpu",kernelFunc:S1},F1=j0(x_,e=>Math.acosh(e)),I1={kernelName:x_,backendName:"cpu",kernelFunc:F1};const N1={kernelName:D_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;P0(t,"addN");const a=r.map(e=>n.data.get(e.dataId).values),o=Gj(r[0].shape,r[0].dtype),i=o.values;for(let s=0;s<r.length;s++){const e=a[s];for(let t=0;t<i.length;t++)i[t]+=e[t]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function T1(e,t,n,r,a){const o=t.length,i=MR(t),s=e_(t),u=e_(a),l=GR(n,MR(a));for(let c=0;c<i;++c){const t=u_(c,o,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];l[s_(n,o,u)]=e[c]}return l}function O1(e){const{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:o}=n;P0(a,"transpose");const i=a.shape.length,s=new Array(i);for(let l=0;l<s.length;l++)s[l]=a.shape[o[l]];const u=T1(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}const R1={kernelName:vB,backendName:"cpu",kernelFunc:O1};const _1={kernelName:k_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r;P0(a,"all");const s=VR(o,a.shape);let u=s;const l=uU(u,a.shape.length);let c=a;null!=l&&(c=O1({inputs:{x:a},backend:n,attrs:{perm:l}}),u=cU(u.length,a.shape.length)),sU("all",u,c.shape.length);const[d,h]=oU(c.shape,u),p=MR(h),f=a_(MR(d),c.dtype),g=n.data.get(c.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=g[e];for(let n=0;n<p;++n){const r=g[e+n];t=t&&r}f[y]=t}null!=l&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(d,c.dtype,f);if(i){const e=b1({inputs:{x:m},backend:n,attrs:{shape:iU(d,s)}});return n.disposeIntermediateTensorInfo(m),e}return m}};const P1={kernelName:C_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r;P0(a,"any");const s=VR(o,a.shape);let u=s;const l=uU(u,a.shape.length);let c=a;null!=l&&(c=O1({inputs:{x:a},backend:n,attrs:{perm:l}}),u=cU(u.length,a.shape.length)),sU("any",u,c.shape.length);const[d,h]=oU(c.shape,u),p=MR(h),f=a_(MR(d),c.dtype),g=n.data.get(c.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=g[e];for(let n=0;n<p;++n){const r=g[e+n];t=t||r}f[y]=t}null!=l&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(d,c.dtype,f);if(i){const e=b1({inputs:{x:m},backend:n,attrs:{shape:iU(d,s)}});return n.disposeIntermediateTensorInfo(m),e}return m}};const M1={kernelName:E_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o}=r;P0(a,"argMax");let i=VR(o,a.shape);const s=uU(i,a.shape.length);let u=a;const l=[];null!=s&&(u=O1({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),i=cU(i.length,u.shape.length)),i=[i[0]],sU("argMax",i,u.shape.length);const[c,d]=oU(u.shape,i),h=a_(MR(c),"int32"),p=MR(d),f=n.data.get(u.dataId).values;for(let g=0;g<h.length;++g){const e=g*p;let t=f[e],n=0;for(let r=0;r<p;++r){const a=f[e+r];a>t&&(t=a,n=r)}h[g]=n}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c,"int32",h)}};const B1={kernelName:S_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o}=r;P0(a,"argMin");let i=VR(o,a.shape);const s=uU(i,a.shape.length);let u=a;const l=[];null!=s&&(u=O1({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),i=cU(i.length,u.shape.length)),i=[i[0]],sU("argMin",i,u.shape.length);const[c,d]=oU(u.shape,i),h=a_(MR(c),"int32"),p=MR(d),f=n.data.get(u.dataId).values;for(let g=0;g<h.length;++g){const e=g*p;let t=f[e],n=0;for(let r=0;r<p;++r){const a=f[e+r];a<t&&(t=a,n=r)}h[g]=n}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c,"int32",h)}},L1=j0(A_,e=>Math.asin(e)),j1={kernelName:A_,backendName:"cpu",kernelFunc:L1},z1=j0(F_,e=>Math.asinh(e)),W1={kernelName:F_,backendName:"cpu",kernelFunc:z1},U1=j0(I_,e=>Math.atan(e)),V1={kernelName:I_,backendName:"cpu",kernelFunc:U1},H1=q0((e,t)=>Math.atan2(e,t)),G1=p1(T_,H1),K1={kernelName:T_,backendName:"cpu",kernelFunc:G1},q1=j0(N_,e=>Math.atanh(e)),X1={kernelName:N_,backendName:"cpu",kernelFunc:q1};function Y1(e,t,n,r,a,o){const i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=a.padInfo.top,p=a.padInfo.left,f="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Gj(a.outShape,n),m=g.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],v=a.outShape[2]*a.outShape[3],b=a.outShape[3];for(let x=0;x<a.batchSize;++x){const t=x*y,n=x*r[0];for(let g=0;g<a.inChannels;++g)for(let y=0;y<a.outHeight;++y){const x=y*i-h,w=Math.max(0,x),D=Math.min(a.inHeight,c+x),k=t+y*v;for(let t=0;t<a.outWidth;++t){const i=t*s-p,c=Math.max(0,i),h=Math.min(a.inWidth,d+i);let y=f,v=0,x=0;for(let t=w;t<D;t+=u){const a=n+t*r[1];for(let t=c;t<h;t+=l){const n=e[a+t*r[2]+g];"max"===o&&n>y?y=n:"avg"===o&&(v+=n,x++)}if(isNaN(y))break}m[k+t*b+g]="avg"===o?v/x:y}}}return g}function Q1(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=Gj(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,g=Gj(t,n,e);for(let m=0;m<r.batchSize;++m)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*s-p;let y=n;for(;y<0;)y+=l;const v=Math.min(r.inHeight,d+n);for(let s=0;s<r.outWidth;++s){const d=s*u-f;let p=d;for(;p<0;)p+=c;const b=Math.min(r.inWidth,h+d);let x=Number.NEGATIVE_INFINITY,w=-1;for(let t=y;t<v;t+=l){const i=t-n;for(let n=p;n<b;n+=c){const s=n-d,u=g.get(m,t,n,e);u>x&&(x=u,w=a?o?((m*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:i*h+s)}}i.set(w,m,t,s,e)}}return i}function Z1(e,t,n,r,a,o){const i=a.strideDepth,s=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,f=a.effectiveFilterWidth,g=a.padInfo.front,m=a.padInfo.top,y=a.padInfo.left,v="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Gj(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],D=a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[3]*a.outShape[4],C=a.outShape[4];for(let E=0;E<a.batchSize;++E){const t=E*w,n=E*r[0];for(let b=0;b<a.inChannels;++b)for(let w=0;w<a.outDepth;++w){const E=w*i-g;let S=E;for(;S<0;)S+=l;const A=Math.min(a.inDepth,h+E),F=t+w*D;for(let t=0;t<a.outHeight;++t){const i=t*s-m;let h=i;for(;h<0;)h+=c;const g=Math.min(a.inHeight,p+i),w=F+t*k;for(let t=0;t<a.outWidth;++t){const i=t*u-y;let s=i;for(;s<0;)s+=d;const p=Math.min(a.inWidth,f+i),m=w+t*C;let D=v,k=0,E=0;for(let t=S;t<A;t+=l){const a=n+t*r[1];for(let t=h;t<g;t+=c){const n=a+t*r[2];for(let t=s;t<p;t+=d){const a=e[n+t*r[3]+b];if("max"===o&&a>D?D=a:"avg"===o&&(k+=a,E++),isNaN(D))break}if(isNaN(D))break}if(isNaN(D))break}x[m+b]="avg"===o?k/Math.max(E,1):D}}}}return b}const J1={kernelName:O_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;P0(a,"avgPool");const{filterSize:o,strides:i,pad:s,dimRoundingMode:u}=r;RR(pW(i,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'"));const l=rW(a.shape,o,i,1,s,u);let c;if(1===l.filterWidth&&1===l.filterHeight&&BR(l.inShape,l.outShape))c=V0({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=e_(a.shape),r=Y1(e,a.shape,a.dtype,t,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,r.values)}return c}};const $1={kernelName:__,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:u,dataFormat:l}=r;P0(a,"avgPool3d");const c=aW(a.shape,o,i,1,s,u,l),d=Z1(n.data.get(a.dataId).values,a.shape,a.dtype,e_(a.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};const e2={kernelName:P_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:o}=t,{filterSize:i,strides:s,pad:u,dimRoundingMode:l}=r;P0([a,o],"avgPool3DGrad");const c=aW(o.shape,i,s,1,u,l),d=c.strideDepth,h=c.strideHeight,p=c.strideWidth,f=c.filterDepth,g=c.filterHeight,m=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,D=c.effectiveFilterWidth,k=x-1-c.padInfo.front,C=D-1-c.padInfo.left,E=w-1-c.padInfo.top,S=Gj(o.shape,"float32"),A=1/(f*g*m),F=n.bufferSync(a);for(let I=0;I<c.batchSize;++I)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const a=t-k,o=n-E,i=r-C;let s=0;for(let t=0;t<x;t+=y){const n=(a+t)/d;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=v){const r=(o+t)/h;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let t=0;t<D;t+=b){const a=(i+t)/p;if(a<0||a>=c.outWidth||Math.floor(a)!==a)continue;s+=F.get(I,n,r,a,e)}}}S.set(s*A,I,t,n,r,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const t2={kernelName:R_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:o}=t,i=o;P0([a,o],"avgPoolGrad");const{filterSize:s,strides:u,pad:l}=r,c=rW(i.shape,s,u,1,l),d=c.strideHeight,h=c.strideWidth,p=c.filterHeight,f=c.filterWidth,g=c.dilationHeight,m=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,b=v-1-c.padInfo.left,x=y-1-c.padInfo.top,w=Gj(i.shape,"float32"),D=1/(p*f),k=n.data.get(a.dataId).values,C=Gj(a.shape,"float32",k);for(let E=0;E<c.batchSize;++E)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inHeight;++t)for(let n=0;n<c.inWidth;++n){const r=t-x,a=n-b;let o=0;for(let t=0;t<y;t+=g){const n=(r+t)/d;if(!(n<0||n>=c.outHeight||Math.floor(n)!==n))for(let t=0;t<v;t+=m){const r=(a+t)/h;if(r<0||r>=c.outWidth||Math.floor(r)!==r)continue;o+=C.get(E,n,r,e)}}w.set(o*D,E,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const n2={kernelName:FP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,scale:o,offset:i,mean:s,variance:u}=t;RR(s.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),RR(null==i||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),RR(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),P0([a,s,u,o,i],"batchNorm");let{varianceEpsilon:l}=r;null==l&&(l=.001);const c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(u.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),f=i?n.data.get(i.dataId).values:new Float32Array([0]),g=new Float32Array(c.length),m=f.length,y=p.length,v=h.length,b=d.length;let x=0,w=0,D=0,k=0;for(let C=0;C<c.length;++C)g[C]=f[x++]+(c[C]-d[w++])*p[D++]/Math.sqrt(h[k++]+l),x>=m&&(x=0),w>=b&&(w=0),D>=y&&(D=0),k>=v&&(k=0);return n.makeTensorInfo(a.shape,a.dtype,g)}};function r2(e,t,n,r,a){const o=Xz(r,t,n),i=MR(n),s=e_(r);if(o){const n=Yz(t,s);return"string"===a?e.slice(n,n+i):e.subarray(n,n+i)}const u=Gj(r,a,"string"===a?mG(e):e),l=Gj(n,a);for(let c=0;c<l.size;++c){const e=l.indexToLoc(c),n=e.map((e,n)=>e+t[n]);l.set(u.get(...n),...e)}return"string"===a?yG(l.values):l.values}function a2(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:o,size:i}=r;P0(a,"slice");const[s,u]=Qz(a,o,i);Mz(a,s,u);const l=r2(n.data.get(a.dataId).values,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,l)}const o2={kernelName:VM,backendName:"cpu",kernelFunc:a2};const i2={kernelName:B_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:o,crops:i}=r;P0([a],"batchToSpaceND");const s=o.reduce((e,t)=>e*t),u=bH(a.shape,o,s),l=xH(u.length,o.length),c=wH(a.shape,o,s),d=DH(i,o.length),h=kH(c,i,o.length),p=b1({inputs:{x:a},backend:n,attrs:{shape:u}}),f=O1({inputs:{x:p},backend:n,attrs:{perm:l}}),g=b1({inputs:{x:f},backend:n,attrs:{shape:c}}),m=a2({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),m}};function s2(e,t,n,r,a){const o=MR(r),i=a_(a,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=a||(i[n]+=o>0?t[s]:1)}return i}function u2(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=e.shape[0],o=e.shape[1],i=Gj([a,n],t.dtype);for(let s=0;s<a;s++)for(let a=0;a<o;a++){const o=e.get(s,a);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(r?i.set(1,s,o):t.size>0?i.set(i.get(s,o)+t.get(s,a),s,o):i.set(i.get(s,o)+1,s,o))}return i}const l2={kernelName:L_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:o}=t,{size:i}=r,s=s2(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}},c2=q0((e,t)=>e&t),d2={kernelName:j_,backendName:"cpu",kernelFunc:p1(j_,c2)};const h2={kernelName:z_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=bz(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},p2=L0(e=>Math.ceil(e)),f2=z0(U_,p2),g2={kernelName:U_,backendName:"cpu",kernelFunc:f2},m2=j0(V_,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),y2={kernelName:V_,backendName:"cpu",kernelFunc:m2},v2={kernelName:G_,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(MR(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values;for(let l=0;l<s.length;l++){const e=s[l],t=u[l];r[l]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function b2(e,t,n,r){const a=KR(n,MR(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{const n=MR(e.shape);a.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{const o="string"===n?mG(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[s+t]=o[i++]}r+=e.shape[1]})}return a}function x2(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}const w2={kernelName:PP,backendName:"cpu",kernelFunc:x2};function D2(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,o=VR(a,t[0].shape)[0],i=t.map(e=>e.shape);lH(i,o);let s=cH(t.map(e=>e.shape),o);if(0===MR(s))return n.makeTensorInfo(s,t[0].dtype,[]);const u=t.filter(e=>MR(e.shape)>0);if(1===u.length)return V0({inputs:{x:u[0]},backend:n});if("complex64"===u[0].dtype){const e=u.map(e=>u1({inputs:{input:e},backend:n})),t=u.map(e=>x2({inputs:{input:e},backend:n})),r=D2({inputs:e,backend:n,attrs:{axis:o}}),a=D2({inputs:t,backend:n,attrs:{axis:o}}),i=o1({inputs:{real:r,imag:a},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),i}const l=u.map(e=>{const t=MR(e.shape.slice(o));return b1({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),c=l.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));s=cH(l.map(e=>e.shape),1);const d=1===l[0].shape[0],h=b2(c,s,t[0].dtype,d),p=cH(u.map(e=>e.shape),o),f=n.makeTensorInfo(p,t[0].dtype,h);return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}const k2={kernelName:K_,backendName:"cpu",kernelFunc:D2};function C2(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o}=t,{strides:i,pad:s,dataFormat:u,dilations:l,dimRoundingMode:c}=r;P0([a,o],"conv2d");const d=gW(u),h=oW(a.shape,o.shape,i,l,s,c,!1,d),p=h.filterHeight,f=h.filterWidth,g=h.dilationHeight,m=h.dilationWidth,y=h.padInfo.left,v=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new gL(h.outShape,a.dtype),w=e_(a.shape),D=e_(o.shape),k=w[0],C=b?w[1]:w[2],E=b?w[2]:1,S=b?1:w[1],A=x.strides[0],F=b?x.strides[1]:x.strides[2],I=b?x.strides[2]:1,N=b?1:x.strides[1],T=n.data.get(a.dataId).values,O=n.data.get(o.dataId).values,R=x.values;for(let _=0;_<h.batchSize;++_){const e=_*k,t=_*A;for(let n=0;n<h.outHeight;++n){const r=t+n*F,a=n*h.strideHeight-v;for(let t=0;t<p;++t){const n=a+t*g;if(n<0||n>=h.inHeight)continue;const o=t*D[0],i=e+n*C;for(let e=0;e<h.outWidth;++e){const t=r+e*I,n=e*h.strideWidth-y;for(let e=0;e<f;++e){const r=n+e*m;if(r<0||r>=h.inWidth)continue;const a=i+r*E;let s=o+e*D[1];for(let e=0;e<h.inChannels;++e){const n=T[a+e*S];for(let e=0;e<h.outChannels;++e)R[t+e*N]+=n*O[s+e];s+=h.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,R)}const E2={kernelName:q_,backendName:"cpu",kernelFunc:C2};const S2={kernelName:X_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:o}=t,{strides:i,pad:s,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;P0([a,o],"conv2dBackpropFilter");const d=gW(u),h=oW(a.shape,c,i,1,s,l,!1,d),{strideHeight:p,strideWidth:f,filterHeight:g,filterWidth:m}=h,y="channelsLast"===h.dataFormat,v=new gL(h.filterShape,"float32"),b=h.padInfo.left,x=h.padInfo.top,w=n.data.get(a.dataId).values,D=n.data.get(o.dataId).values,k=new gL(a.shape,a.dtype,w),C=new gL(o.shape,o.dtype,D);for(let E=0;E<g;++E){const e=Math.max(0,Math.ceil((x-E)/p)),t=Math.min(h.outHeight,(h.inHeight+x-E)/p);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((b-n)/f)),a=Math.min(h.outWidth,(h.inWidth+b-n)/f);for(let o=0;o<h.inChannels;++o)for(let i=0;i<h.outChannels;++i){let s=0;for(let u=0;u<h.batchSize;++u)for(let l=e;l<t;++l){const e=E+l*p-x;for(let t=r;t<a;++t){const r=n+t*f-b;s+=y?k.get(u,e,r,o)*C.get(u,l,t,i):k.get(u,o,e,r)*C.get(u,i,l,t)}}v.set(s,E,n,o,i)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const A2={kernelName:Y_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:o}=t,{inputShape:i,strides:s,pad:u,dataFormat:l,dimRoundingMode:c}=r;P0([a,o],"conv2dBackpropInput");const d=e_(o.shape),h=e_(a.shape);let p=gW(l);const f=oW(i,o.shape,s,1,u,c,!1,p),g=new gL(f.inShape,"float32"),m=g.values,y=n.data.get(a.dataId).values,v=n.data.get(o.dataId).values,[b,x,w]=d,{batchSize:D,filterHeight:k,filterWidth:C,inChannels:E,inHeight:S,inWidth:A,outChannels:F,outHeight:I,outWidth:N,strideHeight:T,strideWidth:O}=f;p=f.dataFormat;const R=k-1-f.padInfo.top,_=C-1-f.padInfo.left,P="channelsLast"===p,M=g.strides[0],B=P?g.strides[1]:g.strides[2],L=P?g.strides[2]:1,j=P?1:g.strides[1],z=h[0],W=P?h[1]:h[2],U=P?h[2]:1,V=P?1:h[1];for(let H=0;H<D;++H)for(let e=0;e<E;++e)for(let t=0;t<S;++t){const n=t-R,r=Math.max(0,Math.ceil(n/T)),a=Math.min(I,(k+n)/T);for(let o=0;o<A;++o){const i=o-_,s=Math.max(0,Math.ceil(i/O)),u=Math.min(N,(C+i)/O);let l=0;for(let t=r;t<a;++t){const r=t*T-n;for(let n=s;n<u;++n){const a=z*H+W*t+U*n,o=b*(k-1-r)+x*(C-1-(n*O-i))+w*e;for(let e=0;e<F;++e){l+=y[a+V*e]*v[o+e]}}}m[M*H+B*t+L*o+j*e]=l}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const F2={kernelName:Q_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o}=t,{strides:i,pad:s,dilations:u}=r;P0([a,o],"conv3d");const l=iW(a.shape,o.shape,i,u,s),{filterDepth:c,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:f,dilationWidth:g,padInfo:m}=l,y=m.front,v=m.left,b=m.top,x=new gL(l.outShape,a.dtype),w=n.data.get(a.dataId).values,D=n.data.get(o.dataId).values,k=x.values,C=e_(a.shape),E=e_(o.shape);for(let S=0;S<l.batchSize;++S){const e=S*C[0],t=S*x.strides[0];for(let n=0;n<l.outDepth;++n){const r=t+n*x.strides[1],a=n*l.strideDepth-y;for(let t=0;t<c;++t){const n=a+t*p;if(n<0||n>=l.inDepth)continue;const o=t*E[0],i=e+n*C[1];for(let e=0;e<l.outHeight;++e){const t=r+e*x.strides[2],n=e*l.strideHeight-b;for(let e=0;e<d;++e){const r=n+e*f;if(r<0||r>=l.inHeight)continue;const a=o+e*E[1],s=i+r*C[2];for(let e=0;e<l.outWidth;++e){const n=t+e*l.outChannels,r=e*l.strideWidth-v;for(let e=0;e<h;++e){const t=r+e*g;if(t<0||t>=l.inWidth)continue;const o=a+e*E[2],i=s+t*l.inChannels;let u=o;for(let e=0;e<l.inChannels;++e){const t=w[i+e];for(let e=0;e<l.outChannels;++e)k[n+e]+=t*D[u+e];u+=l.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const I2={kernelName:Z_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:o}=t,{strides:i,pad:s,filterShape:u}=r;P0([a,o],"conv3dBackpropFilterV2");const l=e_(a.shape),c=e_(o.shape),d=iW(a.shape,u,i,1,s),h=d.strideDepth,p=d.strideHeight,f=d.strideWidth,g=d.filterDepth,m=d.filterHeight,y=d.filterWidth,v=new gL(d.filterShape,"float32"),b=v.values,[x,w,D,k]=v.strides,C=n.data.get(o.dataId).values,[E,S,A,F]=c,I=n.data.get(a.dataId).values,[N,T,O,R]=l,_=d.padInfo.front,P=d.padInfo.left,M=d.padInfo.top;for(let B=0;B<g;++B){const e=Math.max(0,Math.ceil((_-B)/h)),t=Math.min(d.outDepth,(d.inDepth+_-B)/h),n=B*x;for(let r=0;r<m;++r){const a=Math.max(0,Math.ceil((M-r)/p)),o=Math.min(d.outHeight,(d.inHeight+M-r)/p),i=r*w+n;for(let n=0;n<y;++n){const s=Math.max(0,Math.ceil((P-n)/f)),u=Math.min(d.outWidth,(d.inWidth+P-n)/f),l=n*D+i;for(let i=0;i<d.inChannels;++i){const c=i*k+l;for(let l=0;l<d.outChannels;++l){let g=0;for(let c=0;c<d.batchSize;++c){const d=c*N,m=c*E;for(let c=e;c<t;++c){const e=(B+c*h-_)*T+d,t=c*S+m;for(let c=a;c<o;++c){const a=(r+c*p-M)*O+e,o=c*A+t;for(let e=s;e<u;++e){const t=e*F+o;g+=I[(n+e*f-P)*R+a+i]*C[t+l]}}}}b[c+l]=g}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const N2={kernelName:J_,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:o}=t,{pad:i,strides:s,inputShape:u}=r;P0([a],"conv3dBackpropInputV2");const l=e_(a.shape),c=e_(o.shape),d=iW(u,o.shape,s,1,i),h=new gL(d.inShape,"float32"),p=h.values,[f,g,m,y]=h.strides,v=n.data.get(a.dataId).values,[b,x,w,D]=l,k=n.data.get(o.dataId).values,[C,E,S,A]=c,{batchSize:F,filterDepth:I,filterHeight:N,filterWidth:T,inChannels:O,inDepth:R,inHeight:_,inWidth:P,outChannels:M,outDepth:B,outHeight:L,outWidth:j,strideDepth:z,strideHeight:W,strideWidth:U}=d,V=I-1-d.padInfo.front,H=N-1-d.padInfo.top,G=T-1-d.padInfo.left;for(let K=0;K<F;++K)for(let e=0;e<O;++e)for(let t=0;t<R;++t){const n=t-V,r=Math.max(0,Math.ceil(n/z)),a=Math.min(B,(I+n)/z);for(let o=0;o<_;++o){const i=o-H,s=Math.max(0,Math.ceil(i/W)),u=Math.min(L,(N+i)/W);for(let l=0;l<P;++l){const c=l-G,d=Math.max(0,Math.ceil(c/U)),h=Math.min(j,(T+c)/U);let F=0;for(let t=r;t<a;++t){const r=t*z-n;for(let n=s;n<u;++n){const a=n*W-i;for(let o=d;o<h;++o){const i=b*K+x*t+w*n+D*o,s=C*(I-1-r)+E*(N-1-a)+S*(T-1-(o*U-c))+A*e;for(let e=0;e<M;++e){F+=v[i+e]*k[s+e]}}}}p[f*K+g*t+m*o+y*l+e]=F}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},T2=j0($_,e=>Math.cos(e)),O2={kernelName:$_,backendName:"cpu",kernelFunc:T2},R2=j0(eP,e=>Math.cosh(e)),_2={kernelName:eP,backendName:"cpu",kernelFunc:R2};const P2={kernelName:rP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:o,boxInd:i}=t,{cropSize:s,method:u,extrapolationValue:l}=r,[c,d,h,p]=a.shape,f=o.shape[0],[g,m]=s,y=Gj([f,g,m,p],"float32"),v=n.data.get(o.dataId).values,b=n.data.get(i.dataId).values,x=n.data.get(a.dataId).values,w=e_(a.shape),D=e_(y.shape);for(let k=0;k<f;k++){const e=4*k,t=v[e],n=v[e+1],r=v[e+2],a=v[e+3],o=b[k];if(o>=c)continue;const i=g>1?(r-t)*(d-1)/(g-1):0,s=m>1?(a-n)*(h-1)/(m-1):0;for(let c=0;c<g;c++){const e=g>1?t*(d-1)+c*i:.5*(t+r)*(d-1);if(e<0||e>d-1)for(let t=0;t<m;t++)for(let e=0;e<p;e++){const n=e+t*D[2]+c*D[1]+k*D[0];y.values[n]=l}else if("bilinear"===u){const t=Math.floor(e),r=Math.ceil(e),i=e-t;for(let e=0;e<m;e++){const u=m>1?n*(h-1)+e*s:.5*(n+a)*(h-1);if(u<0||u>h-1){for(let t=0;t<p;t++){const n=t+e*D[2]+c*D[1]+k*D[0];y.values[n]=l}continue}const d=Math.floor(u),f=Math.ceil(u),g=u-d;for(let n=0;n<p;n++){let a=n+d*w[2]+t*w[1]+o*w[0];const s=x[a];a=n+f*w[2]+t*w[1]+o*w[0];const u=x[a];a=n+d*w[2]+r*w[1]+o*w[0];const l=x[a];a=n+f*w[2]+r*w[1]+o*w[0];const h=s+(u-s)*g,p=l+(x[a]-l)*g;a=n+e*D[2]+c*D[1]+k*D[0],y.values[a]=h+(p-h)*i}}}else for(let t=0;t<m;++t){const r=m>1?n*(h-1)+t*s:.5*(n+a)*(h-1);if(r<0||r>h-1){for(let e=0;e<p;e++){const n=e+t*D[2]+c*D[1]+k*D[0];y.values[n]=l}continue}const i=Math.round(r),u=Math.round(e);for(let e=0;e<p;e++){const n=e+i*w[2]+u*w[1]+o*w[0],r=e+t*D[2]+c*D[1]+k*D[0];y.values[r]=x[n]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const M2={kernelName:tP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,exclusive:i,reverse:s}=r;P0(a,"cumprod");const u=uU([o],a.shape.length);let l=a;null!=u&&(l=O1({inputs:{x:a},backend:n,attrs:{perm:u}}));const c=cU(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(c));const d=FL(l.dtype,"int32"),h=r_(MR(l.shape),d),p=n.data.get(l.dataId).values,f=l.shape[l.shape.length-1],g=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=g(y,e);if(0===e)h[t]=i?1:p[t];else{const n=g(y,e-1);h[t]=i?p[n]*h[n]:p[t]*h[n]}}const m=n.makeTensorInfo(l.shape,d,h);if(null!=u){const e=O1({inputs:{x:m},backend:n,attrs:{perm:lU(u)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(l),e}return m}};const B2={kernelName:nP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,exclusive:i,reverse:s}=r;P0(a,"cumsum");const u=uU([o],a.shape.length);let l=a;null!=u&&(l=O1({inputs:{x:a},backend:n,attrs:{perm:u}}));const c=cU(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(c));const d=FL(l.dtype,"int32"),h=a_(MR(l.shape),d),p=n.data.get(l.dataId).values,f=l.shape[l.shape.length-1],g=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=g(y,e);if(0===e)h[t]=i?0:p[t];else{const n=g(y,e-1);h[t]=i?p[n]+h[n]:p[t]+h[n]}}const m=n.makeTensorInfo(l.shape,d,h);if(null!=u){const e=O1({inputs:{x:m},backend:n,attrs:{perm:lU(u)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(l),e}return m}};const L2={kernelName:aP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:o}=t,{size:i,binaryOutput:s}=r;if(1===a.shape.length){const e=s2(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,e)}if(2===a.shape.length){const e=u2(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(e.shape,o.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};const j2={kernelName:oP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:o,dataFormat:i}=r;RR("NHWC"===i,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i));const s=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],d=u*o,h=l*o,p=c/(o*o),f=n.data.get(a.dataId).values,g=new Float32Array(s*d*h*p);let m=0;for(let y=0;y<s;++y)for(let e=0;e<d;++e){const t=Math.floor(e/o),n=e%o;for(let e=0;e<h;++e){const r=Math.floor(e/o),a=(n*o+e%o)*p;for(let e=0;e<p;++e){const n=e+a+c*(r+l*(t+u*y));g[m++]=f[n]}}}return n.makeTensorInfo([s,d,h,p],a.dtype,g)}};function z2(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o}=t,{strides:i,pad:s,dilations:u,dimRoundingMode:l}=r;P0([a,o],"depthwiseConv2DNative");const c=e_(a.shape),d=e_(o.shape);let h=u;null==h&&(h=[1,1]),RR(pW(i,h),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(h,"'"));const p=oW(a.shape,o.shape,i,h,s,l,!0),{filterHeight:f,filterWidth:g,dilationHeight:m,dilationWidth:y,padInfo:v}=p,b=v.left,x=v.top,w=p.outChannels/p.inChannels,D=new gL(p.outShape,a.dtype),k=n.data.get(a.dataId).values,C=n.data.get(o.dataId).values,E=D.values;for(let S=0;S<p.batchSize;++S){const e=S*c[0],t=S*D.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*D.strides[1],a=n*p.strideHeight-x;for(let t=0;t<f;++t){const n=a+t*m;if(n<0||n>=p.inHeight)continue;const o=t*d[0],i=e+n*c[1];for(let e=0;e<p.outWidth;++e){const t=r+e*D.strides[2],n=e*p.strideWidth-b;for(let e=0;e<g;++e){const r=n+e*y;if(r<0||r>=p.inWidth)continue;const a=o+e*d[1],s=i+r*p.inChannels;let u=t,l=a;for(let e=0;e<p.inChannels;++e){const t=k[s+e];for(let e=0;e<w;++e)E[u+e]+=t*C[l+e];u+=w,l+=w}}}}}}return n.makeTensorInfo(D.shape,D.dtype,D.values)}const W2={kernelName:iP,backendName:"cpu",kernelFunc:z2};const U2={kernelName:sP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:o}=t,{strides:i,dilations:s,pad:u,dimRoundingMode:l,filterShape:c}=r;P0([a,o],"depthwiseConv2dNativeBackpropFilter");const d=oW(a.shape,c,i,s,u,l,!0),{strideHeight:h,strideWidth:p,filterHeight:f,filterWidth:g}=d,m=new gL(d.filterShape,"float32"),y=d.padInfo.left,v=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,w=new gL(a.shape,a.dtype,x),D=n.data.get(o.dataId).values,k=new gL(o.shape,o.dtype,D);for(let C=0;C<f;++C){const e=Math.max(0,Math.ceil((v-C)/h)),t=Math.min(d.outHeight,(d.inHeight+v-C)/h);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((y-n)/p)),a=Math.min(d.outWidth,(d.inWidth+y-n)/p);for(let o=0;o<d.outChannels;++o){const i=Math.trunc(o/b),s=o%b;let u=0;for(let l=0;l<d.batchSize;++l)for(let s=e;s<t;++s){const e=C+s*h-v;for(let t=r;t<a;++t){const r=n+t*p-y;u+=w.get(l,e,r,i)*k.get(l,s,t,o)}}m.set(u,C,n,i,s)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const V2={kernelName:uP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:o}=t,{strides:i,dilations:s,pad:u,dimRoundingMode:l,inputShape:c}=r;P0([a,o],"depthwiseConv2DNativeBackpropInput");const d=e_(a.shape),h=e_(o.shape),p=oW(c,o.shape,i,s,u,l,!0),f=new gL(p.inShape,"float32"),g=f.values,[m,y,v]=f.strides,b=n.data.get(a.dataId).values,[x,w,D]=d,k=n.data.get(o.dataId).values,[C,E,S]=h,{batchSize:A,filterHeight:F,filterWidth:I,inChannels:N,inHeight:T,inWidth:O,outChannels:R,outHeight:_,outWidth:P,strideHeight:M,strideWidth:B}=p,L=F-1-p.padInfo.top,j=I-1-p.padInfo.left,z=R/N;for(let W=0;W<A;++W)for(let e=0;e<N;++e)for(let t=0;t<T;++t){const n=t-L,r=Math.max(0,Math.ceil(n/M)),a=Math.min(_,(F+n)/M);for(let o=0;o<O;++o){const i=o-j,s=Math.max(0,Math.ceil(i/B)),u=Math.min(P,(I+i)/B);let l=0;for(let t=r;t<a;++t){const r=t*M-n;for(let n=s;n<u;++n){const a=x*W+w*t+D*n,o=C*(F-1-r)+E*(I-1-(n*B-i))+S*e;for(let t=0;t<z;++t){l+=b[a+(e*z+t)]*k[o+t]}}}g[m*W+y*t+v*o+e]=l}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const H2={kernelName:lP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=MR(r.shape),o=n.data.get(r.dataId).values,i=Gj([a,a],r.dtype),s=i.values;for(let l=0;l<o.length;l++)s[l*a+l]=o[l];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,i.dtype,i.values)}},G2={kernelName:cP,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,filter:o}=t,{strides:i,pad:s,dilations:u}=r,l=n,c=l.data.get(a.dataId).values,d=a.shape.length,h=l.data.get(o.dataId).values,p=o.shape.length,{batchSize:f,inHeight:g,inWidth:m,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:D,filterHeight:k,filterWidth:C,dilationHeight:E,dilationWidth:S,outShape:A}=nW(a.shape,o.shape,i,s,"NHWC",u),F=MR(A),I=A.length,N=KR(a.dtype,F);for(let T=0;T<f;++T)for(let e=0;e<v;++e){const t=e*w-x.top;for(let n=0;n<b;++n){const r=n*D-x.left;for(let i=0;i<y;++i){let s=Number.MIN_SAFE_INTEGER;for(let e=0;e<k;++e){const n=t+e*E;if(n>=0&&n<g)for(let t=0;t<C;++t){const u=r+t*S;if(u>=0&&u<m){const r=s_([T,n,u,i],d,e_(a.shape)),l=s_([e,t,i],p,e_(o.shape)),f=c[r]+h[l];f>s&&(s=f)}}}N[s_([T,e,n,i],I,e_(A))]=s}}}return{dataId:l.write(tL(N,a.dtype),A,a.dtype),shape:A,dtype:a.dtype}}},K2={kernelName:hP,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,filter:o,dy:i}=t,{strides:s,pad:u,dilations:l}=r,c=n,d=n_(a.shape,c.data.get(a.dataId).values),h=n_(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:m,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:D,filterWidth:k,dilationHeight:C,dilationWidth:E,outShape:S}=nW(a.shape,o.shape,s,u,"NHWC",l);RR(i.rank===S.length,()=>"Error in ".concat(hP,", dy ")+"must have the same rank as output ".concat(S.length,", but got ")+"".concat(i.rank));const A=n_(S,c.data.get(i.dataId).values),F=o_(o.shape,o.dtype);for(let I=0;I<p;++I)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let a=0;a<m;++a){let o=Number.MIN_SAFE_INTEGER,i=0,s=0;for(let e=0;e<D;++e){const n=t+e*C;if(n>=0&&n<f)for(let t=0;t<k;++t){const u=r+t*E;if(u>=0&&u<g){const r=d[I][n][u][a]+h[e][t][a];r>o&&(o=r,i=e,s=t)}}}F[i][s][a]+=A[I][e][n][a]}}}return{dataId:c.write(tL(F,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},q2={kernelName:dP,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,filter:o,dy:i}=t,{strides:s,pad:u,dilations:l}=r,c=n,d=n_(a.shape,c.data.get(a.dataId).values),h=n_(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:m,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:D,filterWidth:k,dilationHeight:C,dilationWidth:E,outShape:S}=nW(a.shape,o.shape,s,u,"NHWC",l);RR(i.rank===S.length,()=>"Error in ".concat(dP,", dy ")+"must have the same rank as output ".concat(S.length,", but got ")+"".concat(i.rank));const A=n_(S,c.data.get(i.dataId).values),F=o_(a.shape,a.dtype);for(let I=0;I<p;++I)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let a=0;a<m;++a){let o=Number.MIN_SAFE_INTEGER,i=t<0?0:t,s=r<0?0:r;for(let e=0;e<D;++e){const n=t+e*C;if(n>=0&&n<f)for(let t=0;t<k;++t){const u=r+t*E;if(u>=0&&u<g){const r=d[I][n][u][a]+h[e][t][a];r>o&&(o=r,i=n,s=u)}}}F[I][i][s][a]+=A[I][e][n][a]}}}return{dataId:c.write(tL(F,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};const X2={kernelName:pP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{canvas:o,options:i}=r,{contextOptions:s,imageOptions:u}=i||{},l=(null===u||void 0===u?void 0:u.alpha)||1,c=(null===s||void 0===s?void 0:s.contextType)||"2d";if("2d"!==c)throw new Error("Context type ".concat(s.contextType," is not supported by the CPU backend."));const d=o.getContext(c,(null===s||void 0===s?void 0:s.contextAttributes)||{});if(null==d)throw new Error("Could not get the context with ".concat(c," type."));const[h,p]=a.shape.slice(0,2),f=2===a.shape.length?1:a.shape[2],g=n.data.get(a.dataId).values,m="float32"===a.dtype?255:1,y=new Uint8ClampedArray(p*h*4);for(let b=0;b<h*p;++b){const e=[0,0,0,255*l];for(let n=0;n<f;n++){const t=g[b*f+n];if("float32"===a.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===a.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===f?(e[0]=t*m,e[1]=t*m,e[2]=t*m):e[n]=t*m}const t=4*b;y[t+0]=Math.round(e[0]),y[t+1]=Math.round(e[1]),y[t+2]=Math.round(e[2]),y[t+3]=Math.round(e[3])}o.width=p,o.height=h;const v=new ImageData(y,p,h);return d.putImageData(v,0,0),a}},Y2=q0((e,t)=>e*t),Q2=f1((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),Z2=p1(lM,Y2,Q2),J2={kernelName:lM,backendName:"cpu",kernelFunc:Z2};function $2(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r;let s;P0(a,"sum"),s="bool"===a.dtype?d1({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):V0({inputs:{x:a},backend:n});const u=s.shape.length,l=VR(o,s.shape),c=uU(l,u);let d=l,h=s;null!=c&&(h=O1({inputs:{x:s},backend:n,attrs:{perm:c}}),d=cU(d.length,u)),sU("sum",d,h.shape.length);const[p,f]=oU(h.shape,d);let g=s1(n,p,FL(h.dtype,"int32"));const m=MR(f),y=n.data.get(g.dataId).values,v=n.data.get(h.dataId).values;for(let b=0;b<y.length;++b){const e=b*m;let t=0;for(let n=0;n<m;++n)t+=v[e+n];y[b]=t}if(i){const e=g;g=b1({inputs:{x:g},backend:n,attrs:{shape:iU(g.shape,l)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=c&&n.disposeIntermediateTensorInfo(h),g}const e3={kernelName:QM,backendName:"cpu",kernelFunc:$2};const t3={kernelName:gP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,o=t,{allDims:i,summedDims:s,idDims:u}=XH(a,o.length);QH(i.length,u,o);const{path:l,steps:c}=ZH(s,u),d=c.length;let h=null,p=i.length;const f=[];for(let g=0;g<d;++g){for(const e of c[g]){const{permutationIndices:t,expandDims:r}=YH(p,u[e]);let a;JH(t)?a=o[e]:(a=O1({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(a));const i=a.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);BR(a.shape,i)||(a=b1({inputs:{x:a},backend:n,attrs:{shape:i}}),f.push(a)),null===h?h=a:(h=Z2({inputs:{a:a,b:h},backend:n}),f.push(h))}g<d-1&&(l[g]>=0&&(h=$2({inputs:{x:h},backend:n,attrs:{axis:l[g]-(i.length-p),keepDims:!1}}),f.push(h)),p--)}for(const g of f)g!==h&&n.disposeIntermediateTensorInfo(g);return h}};const n3={kernelName:yP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:a}=t;P0([r,a],"eluGrad");const o=new Float32Array(MR(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values;for(let u=0;u<i.length;++u){const e=i[u];o[u]=e>=0?s[u]:s[u]*(e+1)}return n.makeTensorInfo(a.shape,"float32",o)}},r3=q0((e,t)=>e===t?1:0),a3=p1(bP,r3,null,"bool"),o3={kernelName:bP,backendName:"cpu",kernelFunc:a3},i3=NH,s3=TH,u3=OH,l3=RH,c3=_H,d3=PH,h3=j0(vP,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+i3*n);return t*(1-((((d3*r+c3)*r+l3)*r+u3)*r+s3)*r*Math.exp(-n*n))}),p3={kernelName:vP,backendName:"cpu",kernelFunc:h3},f3=L0(e=>Math.exp(e)),g3=z0(xP,f3,"float32"),m3={kernelName:xP,backendName:"cpu",kernelFunc:g3};function y3(e){const{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:o}=r,i=a.shape.length,s=a.shape.slice();let u=o;return o<0&&(RR(-(i+1)<=o,()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")),u=i+o+1),s.splice(u,0,1),b1({inputs:{x:a},backend:n,attrs:{shape:s}})}const v3={kernelName:wP,backendName:"cpu",kernelFunc:y3},b3=L0(e=>Math.expm1(e)),x3=z0(DP,b3),w3={kernelName:DP,backendName:"cpu",kernelFunc:x3},D3=q0((e,t)=>e/t),k3=p1(fP,D3),C3={kernelName:fP,backendName:"cpu",kernelFunc:k3},E3=q0((e,t)=>e-t),S3=f1((e,t,n,r)=>({real:e-n,imag:t-r})),A3=p1(hB,E3,S3),F3={kernelName:hB,backendName:"cpu",kernelFunc:A3};function I3(e,t,n){const r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,l=[a,o],c=MR(l),d=GR("float32",c),h=GR("float32",c);for(let m=0;m<a;m++){const e=a2({inputs:{x:s},backend:n,attrs:{begin:[m,0],size:[1,o]}}),r=a2({inputs:{x:u},backend:n,attrs:{begin:[m,0],size:[1,o]}}),a=o1({inputs:{real:e,imag:r},backend:n}),{real:i,imag:l}=N3(a,t,n),c=MH(i,l);for(let t=0;t<o;t++){const e=zH(c,t);d[m*o+t]=e.real,h[m*o+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a)}const p=n.makeTensorInfo(l,"float32",d),f=n.makeTensorInfo(l,"float32",h),g=o1({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}function N3(e,t,n){const r=MR(e.shape),a=n.data.get(e.dataId),o=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){const a=T3(o,i,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",a.real),t=n.makeTensorInfo(s,"float32",a.imag),o=n.makeTensorInfo([],"float32",eL(r,"float32")),i=V0({inputs:{x:o},backend:n}),u=C3.kernelFunc({inputs:{a:e,b:o},backend:n}),l=C3.kernelFunc({inputs:{a:t,b:i},backend:n}),c=n.data.get(u.dataId).values,d=n.data.get(l.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),{real:c,imag:d}}return a}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let a=0;a<t;a++){let o=0,i=0;for(let r=0;r<t;r++){const s=VH(a*r,t,n),u=zH(e,r);o+=u.real*s.real-u.imag*s.imag,i+=u.real*s.imag+u.imag*s.real}n&&(o/=t,i/=t),WH(r,o,i,a)}return r}(MH(o,i),r,t);return BH(e)}}function T3(e,t,n,r,a){if(1===n)return{real:e,imag:t};const o=MH(e,t),i=n/2,s=LH(o),u=s.real,l=s.imag,c=[u.length],d=a.makeTensorInfo(c,"float32",u),h=a.makeTensorInfo(c,"float32",l),p=o1({inputs:{real:d,imag:h},backend:a}),f=jH(o),g=f.real,m=f.imag,y=[g.length],v=a.makeTensorInfo(y,"float32",g),b=a.makeTensorInfo(y,"float32",m),x=o1({inputs:{real:v,imag:b},backend:a}),w=T3(u,l,i,r,a),D=w.real,k=w.imag,C=[D.length],E=a.makeTensorInfo(C,"float32",D),S=a.makeTensorInfo(C,"float32",k),A=o1({inputs:{real:E,imag:S},backend:a}),F=T3(g,m,i,r,a),I=F.real,N=F.imag,T=[I.length],O=a.makeTensorInfo(T,"float32",I),R=a.makeTensorInfo(T,"float32",N),_=o1({inputs:{real:O,imag:R},backend:a}),P=UH(n,r),M=[P.real.length],B=a.makeTensorInfo(M,"float32",P.real),L=a.makeTensorInfo(M,"float32",P.imag),j=o1({inputs:{real:B,imag:L},backend:a}),z=Z2({inputs:{a:j,b:_},backend:a}),W=y1({inputs:{a:A,b:z},backend:a}),U=A3({inputs:{a:A,b:z},backend:a}),V=u1({inputs:{input:W},backend:a}),H=u1({inputs:{input:U},backend:a}),G=x2({inputs:{input:W},backend:a}),K=x2({inputs:{input:U},backend:a}),q=D2({inputs:[V,H],backend:a,attrs:{axis:0}}),X=D2({inputs:[G,K],backend:a,attrs:{axis:0}}),Y=a.data.get(q.dataId).values,Q=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:Y,imag:Q}}const O3={kernelName:kP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=MR(r.shape),o=r.shape[r.shape.length-1],i=b1({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=I3(i,!1,n),u=b1({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}};function R3(e){const{backend:t,attrs:n}=e,{shape:r,value:a,dtype:o}=n,i=o||ZR(a),s=KR(i,MR(r));return function(e,t){e.fill(t)}(s,a),t.makeTensorInfo(r,i,s)}const _3={kernelName:CP,backendName:"cpu",kernelFunc:R3};const P3={kernelName:EP,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:a}=t,o=r,i=GR(a.dtype,MR(a.shape)),[s,u,l,c]=a.shape,d=o.data.get(a.dataId).values;for(let h=0;h<s;h++){const e=h*l*u*c;for(let t=0;t<u;t++){const n=t*(l*c);for(let t=0;t<l;t++){const r=t*c;for(let a=0;a<c;a++){const o=Math.round(l-t-1),s=e+n+r+a;let u=d[s];if(o>=0&&o<l){u=d[e+n+o*c+a]}i[s]=u}}}}return{dataId:o.write(i,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},M3=L0(e=>Math.floor(e)),B3=z0(SP,M3),L3={kernelName:SP,backendName:"cpu",kernelFunc:B3},j3=q0((e,t)=>Math.floor(e/t)),z3=p1(AP,j3,null,"int32"),W3={kernelName:AP,backendName:"cpu",kernelFunc:z3};const U3={kernelName:AB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o,bias:i,preluActivationWeights:s}=t,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let g=C2({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const e=g;if("NCHW"===c&&1===i.shape.length&&1!==i.shape[0]){const e=b1({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});g=y1({inputs:{a:g,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else g=y1({inputs:{a:g,b:i},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=g;if("NCHW"===c&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){const e=b1({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});g=a1(n,g,p,e,f),n.disposeIntermediateTensorInfo(e)}else g=a1(n,g,p,s,f);n.disposeIntermediateTensorInfo(e)}return g}};const V3={kernelName:FB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o,bias:i,preluActivationWeights:s}=t,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r;let g=z2({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const e=g;g=y1({inputs:{a:g,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=g;g=a1(n,g,p,s,f),n.disposeIntermediateTensorInfo(e)}return g}};function H3(e,t,n,r,a,o,i,s,u){const l=Gj([r,o],n);for(let c=0;c<r;c++){const n=[];let r=0;for(let t=0;t<a;t++){const o=e[c*a+t];r+=o*i[t],n.push(o)}if(r<0||r>=u/o)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(s));for(let e=0;e<o;e++)l.values[c*o+e]=t.get(...t.indexToLoc(r*o+e))}return l}const G3={kernelName:NP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,o=MR(r.shape),i=a.shape,s=i[i.length-1],[u,l,c,d]=CH(r,a);if(0===l)return n.makeTensorInfo(u,r.dtype,[]);const h=H3(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,l,s,c,d,r.shape,o);return n.makeTensorInfo(u,r.dtype,h.values)}};function K3(e,t,n){const r=Gj(n,e.dtype);for(let a=0;a<r.size;++a){const n=r.indexToLoc(a).slice(),o=n[0],i=n[2],s=t.locToIndex([o,i]);n[2]=t.values[s];const u=e.locToIndex(n);0<=u&&u<e.values.length&&(r.values[a]=e.values[u])}return r}const q3={kernelName:IP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:o}=t,{axis:i,batchDims:s}=r;P0([a,o],"gatherV2");const u=VR(i,a.shape)[0],l=n.data.get(o.dataId).values,c=a.shape[u];for(let b=0;b<l.length;++b){const e=l[b];RR(e<=c-1&&e>=0,()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(c-1,"]"))}let d=s;null==s&&(d=0);const h=MR(o.shape),p=gG(a,o,u,d),f=b1({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),g=b1({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}}),m=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],y=n.bufferSync(g),v=K3(n.bufferSync(f),y,m);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}},X3=q0((e,t)=>e>t?1:0),Y3=p1(TP,X3,null,"bool"),Q3={kernelName:TP,backendName:"cpu",kernelFunc:Y3},Z3=q0((e,t)=>e>=t?1:0),J3=p1(OP,Z3,null,"bool"),$3={kernelName:OP,backendName:"cpu",kernelFunc:J3};const e4={kernelName:_P,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=MR(r.shape),o=r.shape[r.shape.length-1],i=b1({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=I3(i,!0,n),u=b1({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}},t4=j0(MP,e=>Number.isFinite(e)?1:0,"bool"),n4={kernelName:MP,backendName:"cpu",kernelFunc:t4},r4=j0(BP,e=>Math.abs(e)===1/0?1:0,"bool"),a4={kernelName:BP,backendName:"cpu",kernelFunc:r4},o4=j0(LP,e=>Number.isNaN(e)?1:0,"bool"),i4={kernelName:LP,backendName:"cpu",kernelFunc:o4},s4=q0((e,t)=>e<t?1:0),u4=p1(zP,s4,null,"bool"),l4={kernelName:zP,backendName:"cpu",kernelFunc:u4},c4=q0((e,t)=>e<=t?1:0),d4=p1(WP,c4,null,"bool"),h4={kernelName:WP,backendName:"cpu",kernelFunc:d4};function p4(e,t,n){const r=(t-e)/(n-1),a=a_(n,"float32");a[0]=e;for(let o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}const f4={kernelName:UP,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:o}=n,i=p4(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},g4=L0(e=>Math.log(e)),m4=z0(VP,g4),y4={kernelName:VP,backendName:"cpu",kernelFunc:m4},v4=j0(HP,e=>Math.log1p(e)),b4={kernelName:HP,backendName:"cpu",kernelFunc:v4},x4=q0((e,t)=>e&&t),w4=p1(GP,x4,null,"bool"),D4={kernelName:GP,backendName:"cpu",kernelFunc:w4},k4=j0(KP,e=>e?0:1,"bool"),C4={kernelName:KP,backendName:"cpu",kernelFunc:k4},E4=q0((e,t)=>e||t),S4=p1(qP,E4,null,"bool"),A4={kernelName:qP,backendName:"cpu",kernelFunc:S4};const F4={kernelName:XP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:o,bias:i,alpha:s,beta:u}=r;P0(a,"LRN");const l=a.shape[3],c=l-1,d=n.data.get(a.dataId).values,h=MR(a.shape),p=new Float32Array(h);function f(e){const t=e%l;let n=e-t+Math.max(0,t-o);const r=e-t+Math.min(t+o,c);let a=0;for(;n<=r;n++){const e=d[n];a+=e*e}return a}for(let g=0;g<h;g++){const e=f(g),t=d[g]*Math.pow(i+s*e,-u);p[g]=t}return n.makeTensorInfo(a.shape,a.dtype,p)}};const I4={kernelName:YP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,y:o,dy:i}=t,{depthRadius:s,bias:u,alpha:l,beta:c}=r;P0(i,"LRNGrad");const d=MR(i.shape),h=i.shape[3],p=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,g=n.data.get(o.dataId).values,m=new Float32Array(d),y=d;for(let v=0;v<y;v++){const e=v%h,t=v-e+Math.max(0,e-s),n=v-e+Math.min(h,e+s+1);let r=0;for(let a=t;a<n;a++)r+=Math.pow(f[a],2);r=l*r+u;for(let a=t;a<n;a++){let e=-2*l*c*f[a]*g[v]/r;v===a&&(e+=Math.pow(r,-c)),e*=p[v],m[a]+=e}}return n.makeTensorInfo(i.shape,a.dtype,m)}};function N4(e,t,n,r){const a=GR(r,MR(n));for(let o=0;o<a.length;++o){const n=o*t;let r=e[n];for(let a=0;a<t;++a){const t=e[n+a];(Number.isNaN(t)||t>r)&&(r=t)}a[o]=r}return a}function T4(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:o,keepDims:i}=r,s=n;let u=a.shape;const l=u.length,c=VR(o,u);let d=c;const h=uU(d,l);let p=s.data.get(a.dataId).values;if(null!=h){const e=new Array(l);for(let t=0;t<e.length;t++)e[t]=u[h[t]];p=T1(p,u,a.dtype,h,e),d=cU(d.length,l),u=e}P0(a,"max"),sU("max",d,l);const[f,g]=oU(u,d),m=N4(p,MR(g),f,a.dtype),y=s.write(m,f,a.dtype);let v=f;if(i){v=iU(f,c)}return{dataId:y,shape:v,dtype:a.dtype}}const O4={kernelName:QP,backendName:"cpu",kernelFunc:T4},R4=q0((e,t)=>Math.max(e,t)),_4=p1(ZP,R4),P4={kernelName:ZP,backendName:"cpu",kernelFunc:_4};const M4={kernelName:JP,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;P0(a,"maxPool");const{filterSize:o,strides:i,pad:s,dimRoundingMode:u}=r;RR(pW(i,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'"));const l=rW(a.shape,o,i,1,s,u);let c;if(1===l.filterWidth&&1===l.filterHeight&&BR(l.inShape,l.outShape))c=V0({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=e_(a.shape),r=Y1(e,a.shape,a.dtype,t,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,r.values)}return c}};const B4={kernelName:eM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:u,dataFormat:l}=r;P0(a,"maxPool3d");const c=aW(a.shape,o,i,1,s,u,l),d=Z1(n.data.get(a.dataId).values,a.shape,a.dtype,e_(a.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};const L4={kernelName:tM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:o}=t,{filterSize:i,strides:s,pad:u,dimRoundingMode:l}=r;P0([a,o],"maxPool3DGrad");const c=aW(o.shape,i,s,1,u,l),d=function(e,t){const n=Gj(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let g=0;g<t.batchSize;++g)for(let m=0;m<t.inChannels;++m)for(let y=0;y<t.outDepth;++y){const v=y*r-h;let b=v;for(;b<0;)b+=i;const x=Math.min(t.inDepth,l+v);for(let r=0;r<t.outHeight;++r){const l=r*a-p;let h=l;for(;h<0;)h+=s;const w=Math.min(t.inHeight,c+l);for(let a=0;a<t.outWidth;++a){const p=a*o-f;let D=p;for(;D<0;)D+=u;const k=Math.min(t.inWidth,d+p);let C=Number.NEGATIVE_INFINITY,E=-1;for(let t=b;t<x;t+=i){const n=t-v;for(let r=h;r<w;r+=s){const a=r-l;for(let o=D;o<k;o+=u){const i=o-p,s=e.get(g,t,r,o,m);s>=C&&(C=s,E=n*c*d+a*c+i)}}}n.set(E,g,y,r,a,m)}}}return n}(n.bufferSync(o),c),h=c.strideDepth,p=c.strideHeight,f=c.strideWidth,g=c.dilationDepth,m=c.dilationHeight,y=c.dilationWidth,v=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=v-1-c.padInfo.front,D=x-1-c.padInfo.left,k=b-1-c.padInfo.top,C=Gj(o.shape,"float32"),E=n.bufferSync(a);for(let S=0;S<c.batchSize;++S)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const a=t-w,o=n-k,i=r-D;let s=0;for(let t=0;t<v;t+=g){const n=(a+t)/h;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let r=0;r<b;r+=m){const a=(o+r)/p;if(!(a<0||a>=c.outHeight||Math.floor(a)!==a))for(let o=0;o<x;o+=y){const u=(i+o)/f;if(u<0||u>=c.outWidth||Math.floor(u)!==u)continue;const l=v*b*x-1-d.get(S,n,a,u,e)===t*b*x+r*x+o?1:0;if(0===l)continue;s+=E.get(S,n,a,u,e)*l}}}C.set(s,S,t,n,r,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const j4={kernelName:$P,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:o,output:i}=t,s=o;P0([o,i],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:d}=r,h=rW(s.shape,u,l,1,c,d),p=n.data.get(s.dataId).values,f=Gj(h.outShape,s.dtype,Q1(p,s.shape,s.dtype,h).values),g=h.strideHeight,m=h.strideWidth,y=h.dilationHeight,v=h.dilationWidth,b=h.effectiveFilterHeight,x=h.effectiveFilterWidth,w=x-1-h.padInfo.left,D=b-1-h.padInfo.top,k=Gj(s.shape,"float32"),C=n.data.get(a.dataId).values,E=Gj(a.shape,"float32",C);for(let S=0;S<h.batchSize;++S)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inHeight;++t)for(let n=0;n<h.inWidth;++n){const r=t-D,a=n-w;let o=0;for(let t=0;t<b;t+=y){const n=(r+t)/g;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let r=0;r<x;r+=v){const i=(a+r)/m;if(i<0||i>=h.outWidth||Math.floor(i)!==i)continue;const s=b*x-1-f.get(S,n,i,e)===t*x+r?1:0;if(0===s)continue;o+=E.get(S,n,i,e)*s}}k.set(o,S,t,n,e)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};const z4={kernelName:nM,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:u}=n,l=r;P0(a,"MaxPoolWithArgmax");const c=l.data.get(a.dataId).values,d=rW(a.shape,o,i,[1,1],s),[h,p]=function(e,t,n,r,a){const o=Y1(e,0,n,e_(t),a,"max"),i=Q1(e,t,n,a,!0,r);return[o.values,i.values]}(c,a.shape,a.dtype,u,d),f=l.write(h,d.outShape,a.dtype),g=l.write(p,d.outShape,a.dtype);return[{dataId:f,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}};const W4={kernelName:rM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r,s=VR(o,a.shape),u=MR(oU(a.shape,s)[1]),l=[],c=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(c);const d=d1({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(d);const h=k3({inputs:{a:d,b:c},backend:n});l.push(h);const p=$2({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:i}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}};const U4={kernelName:aM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r;P0(a,"min");const s=VR(o,a.shape);let u=s;const l=uU(u,a.shape.length);let c=a;null!=l&&(c=O1({inputs:{x:a},backend:n,attrs:{perm:l}}),u=cU(u.length,a.shape.length)),sU("min",u,c.shape.length);const[d,h]=oU(c.shape,u),p=MR(h),f=a_(MR(d),c.dtype),g=n.data.get(c.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=g[e];for(let n=0;n<p;++n){const r=g[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[y]=t}null!=l&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(d,c.dtype,f);if(i){const e=b1({inputs:{x:m},backend:n,attrs:{shape:iU(d,s)}});return n.disposeIntermediateTensorInfo(m),e}return m}},V4=q0((e,t)=>Math.min(e,t)),H4=p1(oM,V4),G4={kernelName:oM,backendName:"cpu",kernelFunc:H4};const K4={kernelName:iM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:o,mode:i}=r;P0(a,"mirrorPad");const s=o.map((e,t)=>e[0]+a.shape[t]+e[1]),u=o.map(e=>e[0]),l=o.map((e,t)=>e[0]+a.shape[t]),c="reflect"===i?0:1,d=n.data.get(a.dataId).values,h=a.shape.length,p=e_(a.shape),f=MR(s),g=s.length,m=e_(s),y=GR(a.dtype,f);for(let v=0;v<f;v++){let e=u_(v,g,m);for(let n=0;n<g;n++)e[n]<u[n]?e[n]=2*u[n]-e[n]-c:e[n]>=l[n]&&(e[n]=2*(l[n]-1)-e[n]+c);e=e.map((e,t)=>e-u[t]);const t=s_(e,h,p);y[v]=d[t]}return{dataId:n.write(y,s,a.dtype),shape:s,dtype:a.dtype}}},q4=q0((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),X4=p1(sM,q4),Y4={kernelName:sM,backendName:"cpu",kernelFunc:X4};function Q4(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:o}=r,i=a.shape.length;let s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(s));const u=VR([s],a.shape),l=T4({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=iU(l.shape,u),d=b1({inputs:{x:l},backend:n,attrs:{shape:c}}),h=A3({inputs:{a:a,b:d},backend:n}),p=g3({inputs:{x:h},backend:n}),f=$2({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),g=b1({inputs:{x:f},backend:n,attrs:{shape:c}}),m=k3({inputs:{a:p,b:g},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),m}const Z4={kernelName:$M,backendName:"cpu",kernelFunc:Q4};const J4={kernelName:uM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:o,seed:i,normalized:s}=r;P0(a,"multinomial");const u=s?a:Q4({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],d=n.data.get(u.dataId).values,h=[l,o],p=a_(MR(h),"int32");for(let f=0;f<l;++f){const e=f*c,t=new Float32Array(c-1);t[0]=d[e];for(let a=1;a<t.length;++a)t[a]=t[a-1]+d[e+a];const n=FU.alea(i.toString()),r=f*o;for(let a=0;a<o;++a){const e=n();p[r+a]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+a]=n;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(h,"int32",p)}};function $4(e,t,n){const r=eL(-1,n);return Y2([],t,r,e,n)}const e5={kernelName:cM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;P0(r,"neg");const a=n.data.get(r.dataId).values,[o,i]=$4(a,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,o)}},t5=NV;const n5={kernelName:hM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:u}=r;P0(a,"NonMaxSuppression");const l=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,{selectedIndices:d}=t5(l,c,i,s,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},r5=TV;const a5={kernelName:pM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:u,padToMaxOutputSize:l}=r;P0(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,{selectedIndices:h,validOutputs:p}=r5(c,d,i,s,u,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},o5=OV;const i5={kernelName:fM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:u,softNmsSigma:l}=r;P0(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,h=i,p=s,f=u,g=l,{selectedIndices:m,selectedScores:y}=o5(c,d,h,p,f,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},s5=q0((e,t)=>e!==t?1:0),u5=p1(dM,s5,null,"bool"),l5={kernelName:dM,backendName:"cpu",kernelFunc:u5};const c5={kernelName:mM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:o,depth:i,onValue:s,offValue:u}=r;P0(a,"oneHot");const l=MR(a.shape),c=new Float32Array(l*i);c.fill(u);const d=n.data.get(a.dataId).values;for(let h=0;h<l;++h)d[h]>=0&&d[h]<i&&(c[h*i+d[h]]=s);return n.makeTensorInfo([...a.shape,i],o,c)}};function d5(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=u1({inputs:{input:r},backend:n}),t=d5({inputs:{x:e},backend:n}),a=x2({inputs:{input:r},backend:n}),o=d5({inputs:{x:a},backend:n}),i=o1({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),i}return R3({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const h5={kernelName:DB,backendName:"cpu",kernelFunc:d5};const p5={kernelName:gM,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){const t=u1({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),o=x2({inputs:{input:a},backend:r}),i=d5({inputs:{x:o},backend:r}),s=o1({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}return R3({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function f5(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return y3({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const o=t[0].shape,i=t[0].dtype;t.forEach(e=>{_R(o,e.shape,"All tensors passed to stack must have matching shapes"),RR(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],u=t.map(e=>{const t=y3({inputs:{input:e},backend:n,attrs:{dim:a}});return s.push(t),t}),l=D2({inputs:u,backend:n,attrs:{axis:a}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}const g5={kernelName:yM,backendName:"cpu",kernelFunc:f5};const m5={kernelName:vM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:o,constantValue:i}=r;P0(a,"pad");const s=o.map((e,t)=>e[0]+a.shape[t]+e[1]),u=o.map(e=>e[0]),l=n.data.get(a.dataId).values,c=MR(a.shape),d=a.shape.length,h=e_(a.shape),p=MR(s),f=s.length,g=e_(s),m=GR(a.dtype,p);0!==i&&m.fill(i);for(let y=0;y<c;y++){const e=u_(y,d,h).map((e,t)=>e+u[t]);m[s_(e,f,g)]=l[y]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},y5=q0((e,t)=>Math.pow(e,t)),v5=p1(bM,y5),b5={kernelName:bM,backendName:"cpu",kernelFunc:v5};function x5(e,t,n,r){const[a,o]=oU(e,r),i=FL(t,"int32"),s=a_(MR(a),i),u=MR(o);for(let l=0;l<s.length;++l){const e=l*u;let t=1;for(let r=0;r<u;++r)t*=n[e+r];s[l]=t}return{outVals:s,outShape:a,outDtype:i}}const w5={kernelName:wM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r;P0(a,"prod");const s=a.shape.length,u=VR(o,a.shape),l=uU(u,s);let c=u,d=a;const h=[];null!=l&&(d=O1({inputs:{x:a},backend:n,attrs:{perm:l}}),h.push(d),c=cU(c.length,s));const p=n.data.get(d.dataId).values,{outVals:f,outShape:g,outDtype:m}=x5(d.shape,d.dtype,p,c);let y=g;return i&&(y=iU(g,u)),h.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(y,m,f)}};function D5(e,t,n,r){const a=[];let o=0;const i=t.length-1+n.length,s=new Array(i).fill(null).map(()=>[0]);!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let u=1;for(let l=0;l<t.length-1;++l){u*=t[l];const e=t[l+1];for(let t=1;t<u+1;++t)s[l].push(t*e)}for(let l=0;l<e.length;++l){let r=e[l],i=e[l]+1;for(let e=0;e<n.length;++e){const a=n[e],o=e+t.length-1;if(o>=0){const e=s[o],t=e[e.length-1]-a[r];for(let n=r;n<i;++n)s[o].push(a[n+1]+t)}r=a[r],i=a[i]}i!==r&&(a.push([r,i]),o+=i-r)}return{outSplits:s,valueSlices:a,numValues:o}}function k5(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function C5(e,t,n,r,a){const o=t.slice();o[0]=a;const i=KR(n,MR(o)),s=e.length;return function(e,t,n,r,a,o){const i=k5(t,2)[1],s=k5(o,2)[1];let u=0;for(const l of n)for(let t=l[0];t<l[1];++t){for(let n=0;n<r;++n)a[u*s+n]=e[t*i+n];++u}}(e,t,r,0===s?0:s/t[0],i,o),[i,o]}function E5(e,t,n,r,a,o,i,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((e,r)=>{if(e<0||e>=n){const a=u_(r,t.length,e_(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}})}(o,i,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:l,valueSlices:c,numValues:d}=D5(o,i,e,u),h=function(e){const t=[];for(let n=0;n<e.length;++n){const r=KR("int32",e[n].length);t.push(r),e[n].forEach((e,t)=>r[t]=e)}return t}(l),p=C5(n,r,a,c,d);return[h,p[0],p[1]]}const S5={kernelName:DM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:o,indices:i}=t,{outputRaggedRank:s}=r,u=a.map(e=>n.data.get(e.dataId).values),l=a.map(e=>e.shape),c=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,[h,p,f]=E5(u,l,c,o.shape,o.dtype,d,i.shape),g=h.map(e=>n.makeTensorInfo([e.length],"int32",e)),m=n.makeTensorInfo(f,o.dtype,p);return g.concat([m])}},A5=2147483647;function F5(e,t,n,r,a,o,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,u=0===a.length,l=0===i.length,c=[];s||c.push(t[0]),u||c.push(a[0]),l||c.push(i[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===c.length?1:c[0],h=KR("int32",d+1);h[0]=0;for(let g=0;g<d;++g){const t=s?e[0]:e[g],n=u?r[0]:r[g],a=l?o[0]:o[g];if(0===a)throw new Error("Requires delta != 0");let i;if(a>0&&n<t||a<0&&n>t)i=0;else if(i=Math.ceil(Math.abs((n-t)/a)),i>A5)throw new Error("Requires ((limit - start) / delta) <= ".concat(A5));h[g+1]=h[g]+i}const p=KR(n,h[d]);let f=0;for(let g=0;g<d;++g){const t=h[g+1]-h[g];let n=s?e[0]:e[g];const r=l?o[0]:o[g];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[h,p]}const I5={kernelName:kM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:o}=t,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,[l,c]=F5(i,r.shape,r.dtype,s,a.shape,u,o.shape);return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([c.length],r.dtype,c)]}};var N5=dH;class T5{constructor(e,t,n,r,a,o,i,s,u,l){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=a,this.defaultValue=o,this.defaultValueShape=i,this.rowPartitionValues=s,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=pH(l),this.raggedRank=fH(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===N5.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===N5.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case N5.VALUE_ROWIDS:return T5.getMaxWidthValueRowID(t);case N5.ROW_SPLITS:return T5.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(N5[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],a=0;for(let o=1;o<t;++o){const t=e[o];t!==r&&(r=t,a=Math.max(o-n,a),n=o)}return Math.max(t-n,a)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return R5(e,n)}calculateOutputSize(e){const t=this.valuesShape;gH(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=hH(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let a=1;a<=this.raggedRank;++a)r[a]<0&&(r[a]=this.getMaxWidth(a));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),a=[];let o=0;for(let i=0;i<r;++i,o+=t)a.push(o);for(let i=r;i<e;++i)a.push(-1);return RR(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,n,r){const a=e.length,o=[];for(let i=0;i<a-1;++i){const a=e[i+1]-e[i];let s=Math.min(r,a),u=t[i];-1===u&&(s=0);for(let e=0;e<s;++e)o.push(u),u+=n;for(let e=0;e<a-s;++e)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,r){const a=e.length,o=[];if(0===a)return[];let i=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));let u=t[s];o.push(u);for(let l=1;l<a;++l){const a=e[l];if(a===s)u>=0&&(++i,i<r?u+=n:u=-1);else{if(i=0,s=a,a>=t.length)throw new Error("Got nextValueRowId=".concat(a," which is not less than ").concat(t.length));u=t[a]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,r){const a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case N5.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case N5.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(N5[o]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case N5.FIRST_DIM_SIZE:return e[0];case N5.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case N5.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(N5[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let o=n.length-2;o>=0;--o)n[o]=n[o+1]*t[o+1];const r=R5(t,!1),a=KR(this.valuesDType,MR(r));if(n[0]*t[0]>0){let o=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){o=this.calculateOutputIndex(e-1,o,n[e],t[e])}this.setOutput(this.raggedRank,o,a,r)}return[r,a]}setOutput(e,t,n,r){if(0===n.length)return;const a=this.values,o=n;let i=r.slice();i=i.slice(e+1);const s=MR(i),u=t.length;let l=this.defaultValue;if(l.length!==s&&1!==l.length){const e=this.defaultValueShape;aj(()=>{const t=yW(l,e),n=CW(t,i);l=n.dataSync()})}let c=0,d=0,h=0;for(let p=0;p<=u;++p){let e=p<u?t[p]:-1;if(e!==h){if(d<h){const e=a.subarray(c*s);O5(o.subarray(d*s),e,(h-d)*s)}if(p>=u){const t=n.length;e=Math.floor(t/s)}if(e>h)if(1===this.defaultValue.length)o.subarray(h*s,e*s).fill(this.defaultValue[0]),h=e;else for(;e>h;){O5(o.slice(h*s),l,s),++h}e<0?(c=p+1,d=h):(c=p,d=h,h=d+1)}else++h}}}function O5(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function R5(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function _5(e,t,n,r,a,o,i,s,u,l){return new T5(e,t,n,r,a,o,i,s,u,l).compute()}const P5={kernelName:CM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:a,values:o,defaultValue:i,rowPartitionTensors:s}=t,{rowPartitionTypes:u}=r,l=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,h=s.map(e=>n.data.get(e.dataId).values),p=s.map(e=>e.shape),[f,g]=_5(l,a.shape,c,o.shape,o.dtype,d,i.shape,h,p,u);return n.makeTensorInfo(f,o.dtype,g)}};function M5(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return a_(0,r);const a=a_(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(let o=1;o<a.length;o++)a[o]=a[o-1]+n;return a}const B5={kernelName:EM,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,dtype:o,step:i}=n,s=M5(r,a,i,o);return t.makeTensorInfo([s.length],o,s)}},L5=j0(AM,e=>1/e),j5={kernelName:AM,backendName:"cpu",kernelFunc:L5};const z5={kernelName:OM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:o,halfPixelCenters:i,size:s}=r;P0(a,"resizeBilinear");const u=e_(a.shape),[l,c]=s,[d,h,p,f]=a.shape,g=n.data.get(a.dataId).values,m=new Float32Array(MR([d,l,c,f])),y=[o&&l>1?h-1:h,o&&c>1?p-1:p],v=[o&&l>1?l-1:l,o&&c>1?c-1:c];let b=0;const x=y[0]/v[0],w=y[1]/v[1];for(let D=0;D<d;D++)for(let e=0;e<l;e++){let t;t=i?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),r=t-n,a=Math.min(h-1,Math.ceil(t)),o=D*u[0]+n*u[1],s=D*u[0]+a*u[1];for(let e=0;e<c;e++){let t;t=i?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),a=t-n,l=Math.min(p-1,Math.ceil(t)),c=o+n*u[2],d=s+n*u[2],h=o+l*u[2],y=s+l*u[2];for(let e=0;e<f;e++){const t=g[c+e],n=g[d+e],o=t+(g[h+e]-t)*a,i=o+(n+(g[y+e]-n)*a-o)*r;m[b++]=i}}}return n.makeTensorInfo([d,l,c,f],"float32",m)}};const W5={kernelName:RM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:o}=t,{alignCorners:i}=r;P0([o,a],"resizeBilinearGrad");const s=e_(a.shape),[u,l,c,d]=a.shape,[,h,p]=o.shape,f=new Float32Array(u*l*c*d),g=[i&&h>1?l-1:l,i&&p>1?c-1:c],m=[i&&h>1?h-1:h,i&&p>1?p-1:p],y=g[0]/m[0],v=g[1]/m[1],b=n.data.get(o.dataId).values;let x=0;for(let w=0;w<u;w++){const e=w*s[0];for(let t=0;t<h;t++){const n=t*y,r=Math.floor(n),a=Math.min(Math.ceil(n),l-1),o=e+r*s[1],i=e+a*s[1],u=n-r,h=1-u;for(let e=0;e<p;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),c-1),a=t-n,l=1-a,p=o+n*s[2],g=o+r*s[2],m=i+n*s[2],y=i+r*s[2],w=h*l,D=h*a,k=u*l,C=u*a;for(let e=0;e<d;e++){const t=b[x++];f[p+e]+=t*w,f[g+e]+=t*D,f[m+e]+=t*k,f[y+e]+=t*C}}}}return n.makeTensorInfo([u,c,l,d],"float32",f)}};const U5={kernelName:NM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:o,halfPixelCenters:i,size:s}=r;P0(a,"resizeNearestNeighbor");const u=e_(a.shape),[l,c]=s,[d,h,p,f]=a.shape,g=n.data.get(a.dataId).values,m=new Float32Array(d*l*c*f),y=[o&&l>1?h-1:h,o&&c>1?p-1:p],v=[o&&l>1?l-1:l,o&&c>1?c-1:c],b=y[0]/v[0],x=y[1]/v[1];let w=0;for(let D=0;D<d;D++){const e=D*u[0];for(let t=0;t<l;t++){const n=i?b*(t+.5):b*t;let r=Math.min(h-1,o?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));const a=e+r*u[1];for(let e=0;e<c;e++){const t=i?x*(e+.5):x*e;let n=Math.min(p-1,o?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));const r=a+n*u[2];for(let e=0;e<f;e++){const t=g[r+e];m[w++]=t}}}}return n.makeTensorInfo([d,l,c,f],a.dtype,m)}};const V5={kernelName:TM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:o}=t,{alignCorners:i}=r;P0([o,a],"resizeNearestNeighborGrad");const s=e_(a.shape),u=e_(o.shape),[l,c,d,h]=a.shape,[,p,f]=o.shape,g=new Float32Array(l*c*d*h),m=n.data.get(o.dataId).values,y=[i&&p>1?c-1:c,i&&f>1?d-1:d],v=[i&&p>1?p-1:p,i&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=1/b,D=1/x,k=2*Math.ceil(w)+2,C=2*Math.ceil(D)+2;for(let E=0;E<l;E++){const e=E*s[0];for(let t=0;t<c;t++){const n=e+t*s[1],r=Math.floor(t*w),a=Math.floor(r-k/2);for(let o=0;o<d;o++){const r=n+o*s[2],l=Math.floor(o*D),y=Math.floor(l-C/2);for(let n=0;n<h;n++){let s=0;for(let r=0;r<k;r++){const l=r+a;if(l<0||l>=p)continue;const h=e+l*u[1],g=l*b;if(t===Math.min(c-1,i?Math.round(g):Math.floor(g)))for(let e=0;e<C;e++){const t=e+y;if(t<0||t>=f)continue;const r=h+t*u[2],a=t*x;o===Math.min(d-1,i?Math.round(a):Math.floor(a))&&(s+=m[r+n])}}g[r+n]=s}}}}return n.makeTensorInfo(a.shape,a.dtype,g)}};const H5={kernelName:PM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:o}=r;P0(a,"reverse");const i=a.shape.length,s=VR(o,a.shape);if(0===i)return V0({inputs:{x:a},backend:n});const u=new gL(a.shape,a.dtype),l=n.bufferSync(a);for(let c=0;c<u.size;c++){const e=u.indexToLoc(c),t=e.slice();s.forEach(e=>t[e]=a.shape[e]-1-t[e]),u.set(l.get(...t),...e)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}},G5={kernelName:EB,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:a}=t,{radians:o,fillValue:i,center:s}=n,u=r,l=GR(a.dtype,MR(a.shape)),[c,d,h,p]=a.shape,[f,g]=vH(s,d,h),m=Math.sin(o),y=Math.cos(o),v=u.data.get(a.dataId).values;for(let b=0;b<c;b++){const e=b*h*d*p;for(let t=0;t<d;t++){const n=t*(h*p);for(let r=0;r<h;r++){const a=r*p;for(let o=0;o<p;o++){const s=[c,t,r,o],u=s[2],b=s[1];let x=(u-f)*y-(b-g)*m,w=(u-f)*m+(b-g)*y;x=Math.round(x+f),w=Math.round(w+g);let D=i;if("number"!==typeof i&&(D=3===o?255:i[o]),x>=0&&x<h&&w>=0&&w<d){D=v[e+w*(h*p)+x*p+o]}l[e+n+a+o]=D}}}}return{dataId:u.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},K5=j0(MM,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),q5={kernelName:MM,backendName:"cpu",kernelFunc:K5},X5=L0(e=>1/Math.sqrt(e)),Y5=z0(BM,X5),Q5={kernelName:BM,backendName:"cpu",kernelFunc:Y5};function Z5(e,t,n,r,a,o,i,s,u,l){const c=[r/a,a],d=e.values,h=t.values;if(0===r)return Gj(n,t.dtype);const p=u instanceof gL?u:Gj(c,t.dtype);"string"===typeof u||"number"===typeof u?p.values.fill(u):"boolean"===typeof u&&p.values.fill(+u);for(let f=0;f<o;f++){const e=[];let o=0;for(let t=0;t<i;t++){const n=d[f*i+t];e.push(n),o+=n*s[t]}if(o<0||o>=r/a)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<a;n++)l?p.values[o*a+n]+=h[f*a+n]:p.values[o*a+n]=0===t.rank?h[0]:h[f*a+n]}return p}const J5={kernelName:LM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:o}=t,{shape:i}=r,{sliceRank:s,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=AH(0,a,i),h=Z5(n.bufferSync(a),n.bufferSync(o),i,d,l,u,s,c,0,!0);return n.makeTensorInfo(i,h.dtype,h.values)}};function $5(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<t?n=a+1:r=a;return r}function e6(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<=t?n=a+1:r=a;return r}const t6={kernelName:zM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:o}=t,{side:i}=r,s=function(e,t,n,r,a,o){const i=KR("int32",n*a);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),u=s*a;for(let e=0;e<a;++e)i[u+e]="left"===o?$5(n,t[e+u]):e6(n,t[e+u])}return i}(n.data.get(a.dataId).values,n.data.get(o.dataId).values,a.shape[0],a.shape[1],o.shape[1],i);return n.makeTensorInfo(o.shape,"int32",s)}};const n6={kernelName:WM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:o}=t;P0([r,a,o],"select");const i=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,c=FL(a.dtype,o.dtype),d=a_(MR(a.shape),c);let h=0;const p=0===i||i>1||1===a.shape.length?1:MR(a.shape.slice(1));for(let f=0;f<s.length;f++)for(let e=0;e<p;e++)1===s[f]?d[h++]=u[f]:d[h++]=l[f];return n.makeTensorInfo(a.shape,c,d)}},r6=FH,a6=IH,o6=j0(UM,e=>e>=0?a6*e:r6*(Math.exp(e)-1)),i6={kernelName:UM,backendName:"cpu",kernelFunc:o6},s6=j0(KM,e=>e<0?-1:e>0?1:0),u6={kernelName:KM,backendName:"cpu",kernelFunc:s6},l6=j0(HM,e=>Math.sin(e)),c6={kernelName:HM,backendName:"cpu",kernelFunc:l6},d6=j0(GM,e=>Math.sinh(e)),h6={kernelName:GM,backendName:"cpu",kernelFunc:d6},p6=Math.log(1.1920928955078125e-7)+2,f6=j0(XM,e=>{const t=e>-p6,n=e<p6,r=Math.exp(e);let a;return a=n?r:t?e:Math.log(1+r),a}),g6={kernelName:XM,backendName:"cpu",kernelFunc:f6};const m6={kernelName:ZM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:o,paddings:i}=r;P0([a],"spaceToBatchND");const s=MR(o),u=[[0,0]];u.push(...i);for(let m=1+o.length;m<a.shape.length;++m)u.push([0,0]);const l=m5.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),c=bH(l.shape,o,s,!1),d=xH(c.length,o.length,!1),h=wH(l.shape,o,s,!1),p=b1({inputs:{x:l},backend:n,attrs:{shape:c}}),f=O1({inputs:{x:p},backend:n,attrs:{perm:d}}),g=b1({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}};function y6(e,t,n,r,a,o,i){const s=t[0],u=o[0],l=new Array(u),c=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error(tG(s));return[KR(n,0),[0,d],KR(a,0),l,c]}let h=!0,p=0;const f=new Array(u).fill(0);for(let m=0;m<s;++m){const t=e[m*d];if(t<0)throw new Error(nG(m,t));if(t>=u)throw new Error(rG(m,t,u));++f[t],h=h&&t>=p,p=t}let g=!0;for(let m=0;m<u;++m){const e=0===f[m];l[m]=e,g=g&&!e,f[m]=Math.max(f[m],1),m>0&&(f[m]+=f[m-1])}if(g&&h){const t=e,n=r;for(let e=0;e<s;++e)c[e]=e;return[t,[s,d],n,l,c]}{const t=f[u-1],o=KR(n,t*d),h=KR(a,t),p=new Array(u).fill(0);for(let n=0;n<s;++n){const t=e[n*d],a=p[t],i=(0===t?0:f[t-1])+a;p[t]++;for(let r=0;r<d;++r)o[i*d+r]=e[n*d+r];h[i]=r[n],c[n]=i}for(let e=0;e<u;++e){if(0===p[e]){const t=0===e?0:f[e-1];o[t*d+0]=e;for(let e=1;e<d;++e)o[t*d+e]=0;h[t]=i}}return[o,[t,d],h,l,c]}}const v6={kernelName:eB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:o,defaultValue:i}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values[0],[d,h,p,f,g]=y6(s,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};function b6(e,t,n,r,a){const o=MR(r),i=t[0],s=a.length,u=[];let l=1,c=-1;for(let g=0;g<s;++g){const e=a[g];if(-1===e){if(-1!==c)throw new Error(aG(c,g));c=g,u.push(1)}else{if(e<0)throw new Error(oG(g,e));l*=e,u.push(e)}}if(-1!==c){if(l<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(o/l);if(l*e!==o)throw new Error(sG(r,u));u[c]=e}if(MR(u)!==o)throw new Error(uG(r,u));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let e=d-2;e>=0;--e)h[e]=h[e+1]*r[e+1]}const p=[];if(s>0){p[s-1]=1;for(let e=s-2;e>=0;--e)p[e]=p[e+1]*u[e+1]}const f=KR(n,i*s);for(let g=0;g<i;++g){let t=0;for(let n=0;n<d;++n)t+=e[g*d+n]*h[n];for(let e=0;e<s;++e)f[g*s+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[i,s],u]}const x6={kernelName:tB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:o}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const i=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(o.dataId).values),[l,c,d]=b6(s,r.shape,r.dtype,i,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}};function w6(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=r.length,u=[t[0],e.length/t[0]],l=u[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error("segment ids must be >= 0");const d=t.slice();d[0]=c;const h=d.reduce((e,t)=>e*t,1),p=KR(n,h);if(0===s)return c>0&&p.fill(i),[p,d];if(c<=0)throw new Error("segment ids must be >= 0");let f=0,g=1,m=0,y=a[f];for(;;){let t=0;if(g<s){if(t=a[g],y===t){++g;continue}if(y>=t)throw new Error(cG())}if(y<0||y>=c)throw new Error(dG(y,c));y>m&&p.fill(i,m*l,y*l);for(let n=f;n<g;++n){const t=r[n];if(t<0||t>=u[0])throw new Error(hG(n,r[n],u[0]));for(let n=0;n<l;n++)p[y*l+n]+=e[t*l+n]}if(o)for(let e=0;e<l;e++)p[y*l+e]/=g-f;if(f=g,++g,m=y+1,y=t,g>s)break}return m<c&&p.fill(i,m*l,c*l),[p,d]}const D6={kernelName:nB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,[l,c]=w6(i,r.shape,r.dtype,s,u,!0);return n.makeTensorInfo(c,r.dtype,l)}};const k6={kernelName:rB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,[l,c]=w6(i,r.shape,r.dtype,s,u);return n.makeTensorInfo(c,r.dtype,l)}};const C6={kernelName:aB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:o,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:d,outputSize:h}=AH(0,a,s),p=!1,f=n.bufferSync(a);let g;switch(o.dtype){case"bool":g=Z5(f,n.bufferSync(o),s,h,c,l,u,d,Boolean(n.data.get(i.dataId).values[0]),p);break;case"float32":g=Z5(f,n.bufferSync(o),s,h,c,l,u,d,n.data.get(i.dataId).values[0],p);break;case"int32":g=Z5(f,n.bufferSync(o),s,h,c,l,u,d,n.data.get(i.dataId).values[0],p);break;case"string":g=Z5(f,n.bufferSync(o),s,h,c,l,u,d,aL(n.data.get(i.dataId).values[0]),p);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return n.makeTensorInfo(s,g.dtype,g.values)}};const E6={kernelName:JM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:o,axis:i}=r,s=VR(i,a.shape)[0],u=eG(a,o,s),l=new Array(a.shape.length).fill(0),c=a.shape.slice();return u.map(e=>{const t=[...c];t[s]=e;const r=a2({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r})}},S6=L0(e=>Math.sqrt(e)),A6=j0(YM,e=>Math.sqrt(e)),F6={kernelName:YM,backendName:"cpu",kernelFunc:A6},I6={kernelName:iB,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,a=n;P0(r,"square");const o=a.data.get(r.dataId).values,i=new Float32Array(o.length);for(let s=0;s<o.length;++s){const e=o[s];i[s]=e*e}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},N6=q0((e,t)=>{const n=e-t;return n*n}),T6=p1(oB,N6),O6={kernelName:oB,backendName:"cpu",kernelFunc:T6},R6=L0((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:a}=t;return e.replace(new RegExp(n,r?"g":""),a)}),_6=z0(sB,R6),P6={kernelName:sB,backendName:"cpu",kernelFunc:_6},M6=j0(kB,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),B6={kernelName:kB,backendName:"cpu",kernelFunc:M6};function L6(e,t,n,r){const a=Gj(e,t.dtype);for(let o=0;o<a.size;o++){const e=a.indexToLoc(o),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+r[t];a.set(t.get(...i),...e)}return a}const j6={kernelName:uB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:o,end:i,strides:s,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r;P0(a,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:g,sliceDim0:m,isSimpleSlice:y,begin:v,end:b,strides:x}=Zz(a.shape,o,i,s,u,l,c,d,h);let w;if(g)w=b1({inputs:{x:a},backend:n,attrs:{shape:f}});else if(m||y){RR(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));const e=Lz(v,b,x),t=a2({inputs:{x:a},backend:n,attrs:{begin:v,size:e}});w=b1({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=L6(p,n.bufferSync(a),x,v);w=n.makeTensorInfo(f,e.dtype,e.values)}return w}};class z6{constructor(e,t,n,r,a,o){this.separator=rL(e),this.nGramWidths=t,this.leftPad=rL(n),this.rightPad=rL(r),this.padWidth=a,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,o){for(let i=0;i<a;++i){const s=this.getPadWidth(o),u=Math.max(0,s-i),l=Math.max(0,s-(a-(i+1))),c=o-(u+l),d=t+(u>0?0:i-s);let h=0;h+=u*this.leftPad.length;for(let t=0;t<c;++t)h+=e[d+t].length;h+=l*this.rightPad.length;h+=(u+l+c-1)*this.separator.length,n[r+i]=new Uint8Array(h);const p=n[r+i];let f=0;const g=e=>e.forEach(e=>p[f++]=e);for(let e=0;e<u;++e)g(this.leftPad),g(this.separator);for(let t=0;t<c-1;++t)g(e[d+t]),g(this.separator);if(c>0){g(e[d+c-1]);for(let e=0;e<l;++e)g(this.separator),g(this.rightPad)}else{for(let e=0;e<l-1;++e)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error("Invalid split value ".concat(t[a],", must be in [").concat(e,", ").concat(n,"]"));e=t[a]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const a=r-1,o=KR("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=a;++t)o[t]=0;return[e,o]}o[0]=0;for(let s=1;s<=a;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach(t=>{n+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===n&&(n=1),o[s]=o[s-1]+n}const i=new Array(o[a]);for(let s=0;s<a;++s){const n=t[s];let r=o[s];if(this.nGramWidths.forEach(a=>{const o=t[s+1]-t[s],u=this.getNumNGrams(o,a);this.createNGrams(e,n,i,r,u,a),r+=u}),this.preserveShort&&r===o[s]){const a=t[s+1]-t[s];if(0===a)continue;const o=a+2*this.padWidth,u=1;this.createNGrams(e,n,i,r,u,o)}}return[i,o]}}function W6(e,t,n,r,a,o,i,s){return new z6(n,r,a,o,i,s).compute(e,t)}const U6={kernelName:lB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:o,leftPad:i,rightPad:s,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:d}=t,h=n.data.get(c.dataId).values,p=n.data.get(d.dataId).values,[f,g]=W6(h,p,a,o,i,s,u,l);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",g)]}};function V6(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const a=t[0];let o=e.indexOf(a);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||r.push(t),o=(e=e.subarray(o+1)).indexOf(a)}return void(n&&0===e.length||r.push(e))}let a=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(a,o);n&&0===t.length||r.push(t),a=o+1}}function H6(e,t,n){const r=e.length,a=[];let o=0,i=0;const s=new Array(r);for(let h=0;h<r;++h){const r=a.length;V6(e[h],t,n,a);const u=a.length-r;s[h]=u,o+=u,i=Math.max(i,u)}const u=KR("int32",2*o),l=new Array(o),c=[r,i];let d=0;for(let h=0;h<r;++h)for(let e=0;e<s[h];++e)u[2*d]=h,u[2*d+1]=e,l[d]=a[d],++d;return[u,l,c]}const G6={kernelName:cB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:o,delimiter:i}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values[0],[l,c,d]=H6(s,u,a),h=c.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function K6(e,t){const n=KR("int32",e.length);for(let r=0;r<e.length;++r)n[r]=$B(e[r]).modulo(t).getLowBitsUnsigned();return n}const q6={kernelName:dB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const i=K6(n.data.get(o.dataId).values,a);return n.makeTensorInfo(o.shape,"int32",i)}},X6=j0(pB,e=>Math.tan(e)),Y6={kernelName:pB,backendName:"cpu",kernelFunc:X6},Q6=j0(fB,e=>Math.tanh(e));const Z6={kernelName:jM,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:a,updates:o}=t,{sliceRank:i,numUpdates:s,sliceSize:u,strides:l,outputSize:c}=AH(0,a,r.shape),d=n.bufferSync(a),h=n.bufferSync(o),p=n.bufferSync(r),f=Z5(d,h,r.shape,c,u,s,i,l,p,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function J6(e,t){const n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];const r=Gj(n,e.dtype);for(let a=0;a<r.values.length;++a){const t=r.indexToLoc(a),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const o=e.locToIndex(n);r.values[a]=e.values[o]}return r}const $6={kernelName:gB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:o}=r;P0(a,"tile");const i=J6(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},e8=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function t8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const a=r-n+1,o=t-n+1,i=Math.log(a),s=.5*Math.exp(2*i/3),u=.5*Math.sqrt(i*s*(a-s)/a)*Math.sign(o-a/2);t8(e,t,Math.max(n,Math.floor(t-o*s/a+u)),Math.min(r,Math.floor(t+(a-o)*s/a+u)))}const a=e[t];let o=n,i=r;for(OR(e,n,t),e8(e[r],a)>0&&OR(e,n,r);o<i;){for(OR(e,o,i),o++,i--;e8(e[o],a)<0;)o+=1;for(;e8(e[i],a)>0;)i-=1}0===e8(e[n],a)?OR(e,n,i):(i+=1,OR(e,i,r)),i<=t&&(n=i+1),t<=i&&(r=i-1)}}function n8(e,t,n,r,a){const o=t[t.length-1],[i,s]=[e.length/o,o],u=GR(n,i*r),l=GR("int32",i*r);for(let d=0;d<i;d++){const t=d*s,n=e.subarray(t,t+s);let o=new Array(n.length);n.forEach((e,t)=>o[t]={value:e,index:t}),r<o.length&&(t8(o,r),o=o.slice(0,r)),a&&o.sort(e8);const i=d*r,c=u.subarray(i,i+r),h=l.subarray(i,i+r);for(let e=0;e<r;e++)c[e]=o[e].value,h[e]=o[e].index}const c=t.slice();return c[c.length-1]=r,[Gj(c,n,u),Gj(c,"int32",l)]}const r8={kernelName:mB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:o,sorted:i}=r;P0(a,"topk");const s=n.data.get(a.dataId).values,[u,l]=n8(s,a.shape,a.dtype,o,i);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};const a8={kernelName:yB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:o}=t,{interpolation:i,fillMode:s,fillValue:u,outputShape:l}=n,[c,d,h,p]=a.shape,[f,g]=null!=l?l:[d,h],m=[c,f,g,p],y=e_(a.shape),v=y[0],b=y[1],x=y[2],w=e_(m),D=w[0],k=w[1],C=w[2],E=GR(a.dtype,MR(m));E.fill(u);const S=r.data.get(a.dataId).values,A=r.data.get(o.dataId).values;for(let F=0;F<c;++F){const e=1===o.shape[0]?A:A.subarray(8*F,8*F+8);for(let t=0;t<f;++t)for(let n=0;n<g;++n)for(let r=0;r<p;++r){let a;const o=e[6]*n+e[7]*t+1;if(0===o)continue;const l=(e[0]*n+e[1]*t+e[2])/o,c=(e[3]*n+e[4]*t+e[5])/o,p=o8(l,h,s),f=o8(c,d,s);switch(i){case"nearest":a=s8(S,d,h,v,b,x,F,f,p,r,u);break;case"bilinear":a=u8(S,d,h,v,b,x,F,f,p,r,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(i))}E[F*D+t*k+n*C+r]=a}return r.makeTensorInfo(m,a.dtype,E)}return{dataId:r.write(E,m,a.dtype),shape:a.shape,dtype:a.dtype}}};function o8(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return NR(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return NR(0,n,t-1)}(e,t);case"nearest":return function(e,t){return NR(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function i8(e,t,n,r,a,o,i,s,u,l,c){return 0<=s&&s<t&&0<=u&&u<n?e[i*r+s*a+u*o+l]:c}function s8(e,t,n,r,a,o,i,s,u,l,c){return i8(e,t,n,r,a,o,i,Math.round(s),Math.round(u),l,c)}function u8(e,t,n,r,a,o,i,s,u,l,c){const d=Math.floor(s),h=Math.floor(u),p=d+1,f=h+1;return(p-s)*((f-u)*i8(e,t,n,r,a,o,i,d,h,l,c)+(u-h)*i8(e,t,n,r,a,o,i,d,f,l,c))+(s-d)*((f-u)*i8(e,t,n,r,a,o,i,p,h,l,c)+(u-h)*i8(e,t,n,r,a,o,i,p,f,l,c))}function l8(e,t,n,r){const a=VR(t,n)[0],o=[1,n[0],1];for(let f=0;f<a;f++)o[0]*=n[f];o[1]=n[a];for(let f=a+1;f<n.length;f++)o[2]*=n[f];const i=new Map,s=new Int32Array(n[a]),u=new gL(o,r,e),l=[],c=1===o[0]&&1===o[2];for(let f=0;f<n[a];f++){let t;if(c)t=e[f].toString();else{const e=[];for(let t=0;t<o[0];t++)for(let n=0;n<o[2];n++)e.push(u.get(t,f,n));t=e.join(",")}const n=i.get(t);if(null!=n)s[f]=n;else{const e=i.size;i.set(t,e),s[f]=e,l.push(f)}}const d=o.slice();d[1]=i.size;const h=new gL(d,r);l.forEach((e,t)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)h.set(u.get(n,e,r),n,t,r)});const p=n.slice();return p[a]=d[1],{outputValues:h.values,outputShape:p,indices:s}}const c8={kernelName:bB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:o}=t;P0(o,"unique");const i=r.data.get(o.dataId).values,{outputValues:s,outputShape:u,indices:l}=l8(i,a,o.shape,o.dtype);return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};const d8={kernelName:xB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:o}=r;o<0&&(o+=a.shape.length);const i=a.shape.length,s=a.shape[o],u=new Array(i-1);let l=0;for(let p=0;p<i;p++)p!==o&&(u[l++]=a.shape[p]);const c=new Array(i).fill(0),d=a.shape.slice();d[o]=1;const h=new Array(s);for(let p=0;p<h.length;p++){c[o]=p;const e=a2({inputs:{x:a},backend:n,attrs:{begin:c,size:d}});h[p]=b1({inputs:{x:e},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(e)}return h}};const h8={kernelName:wB,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:o}=t,{numSegments:i}=r;P0(a,"unsortedSegmentSum");const s=[],u=[],l=a.shape.length-o.shape.length;let c=o;for(let h=0;h<l;++h){const e=y3({inputs:{input:c},backend:n,attrs:{dim:h+1}});c=e,u.push(e)}for(let h=0;h<i;++h){const e=eL(h,"int32"),t=n.makeTensorInfo([],"int32",e),r=a3({inputs:{a:t,b:c},backend:n}),o=d1({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),i=Z2({inputs:{a:o,b:a},backend:n}),l=$2({inputs:{x:i},backend:n,attrs:{axis:0,keepDims:!1}});s.push(l),u.push(t),u.push(r),u.push(o),u.push(i),u.push(l)}const d=f5({inputs:s,backend:n,attrs:{axis:0}});return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}},p8=[k1,E1,A1,I1,v1,N1,_1,P1,M1,B1,j1,W1,V1,K1,X1,J1,$1,e2,t2,D1,n2,i2,l2,d2,h2,h1,g2,y2,i1,v2,k2,E2,S2,A2,F2,I2,N2,O2,_2,P2,M2,B2,L2,j2,W2,U2,V2,H2,G2,K2,q2,X2,t3,U0,n3,o3,p3,m3,v3,w3,O3,_3,P3,L3,W3,U3,V3,G3,q3,Q3,$3,H0,e4,w2,n4,a4,i4,K0,l4,h4,f4,y4,b4,D4,C4,A4,F4,I4,O4,P4,M4,B4,L4,j4,z4,W4,U4,G4,K4,Y4,J4,J2,e5,n5,a5,i5,l5,c5,p5,g5,m5,b5,Q0,w5,S5,I5,P5,B5,l1,C3,j5,J0,e1,x1,z5,W5,U5,V5,H5,G5,q5,Q5,J5,t6,n6,i6,r1,u6,c6,h6,o2,Z4,g6,m6,v6,x6,D6,k6,C6,E6,F6,I6,O6,P6,B6,j6,U6,G6,q6,F3,e3,Y6,{kernelName:fB,backendName:"cpu",kernelFunc:Q6},Z6,$6,r8,a8,R1,c8,d8,h8,h5];for(const n of p8)MB(n);const f8={},g8={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function m8(e,t){if(!(e in f8)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(p_().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete f8[e]},!1),p_().getBool("SOFTWARE_WEBGL_ENABLED")&&(g8.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",g8)||n.getContext("experimental-webgl",g8);return n.getContext("webgl2",g8)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;f8[e]=n}const n=f8[e];return null==n||n.isContextLost()?(delete f8[e],m8(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),f8[e])}var y8,v8,b8;function x8(e,t){return[t,e]}function w8(e){const t=MR(e);return jR(Math.ceil(t/4))}function D8(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function k8(e,t){const n=e;let r,a,o,i,s,u,l,c,d,h;return 2===p_().getNumber("WEBGL_VERSION")?(r=n.R32F,a=n.R16F,o=n.RGBA16F,i=n.RGBA32F,s=n.RED,l=4,c=1,d=n.HALF_FLOAT,h=n.FLOAT,u=n.RGBA8):(r=e.RGBA,a=e.RGBA,o=e.RGBA,i=n.RGBA,s=e.RGBA,l=4,c=4,d=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,u=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:h}}function C8(e,t){const n=t();return p_().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(y8||(y8={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(v8||(v8={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(b8||(b8={}));function E8(e){return!!(p_().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function S8(e,t){return P8(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}const A8=/ERROR: [0-9]+:([0-9]+):/g;function F8(e,t){const n=A8.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((e,t)=>zR((t+1).toString(),o)+e);let s=0;for(let d=0;d<i.length;d++)s=Math.max(i[d].length,s);const u=i.slice(0,r-1),l=i.slice(r-1,r),c=i.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(zR(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}function I8(e,t){if(C8(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function N8(e,t,n,r,a,o,i){const s=e.getAttribLocation(t,n);return-1!==s&&(C8(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),C8(e,()=>e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)),C8(e,()=>e.enableVertexAttribArray(s)),!0)}function T8(e,t,n,r){C8(e,()=>function(e,t,n){M8(e,n),C8(e,()=>e.activeTexture(e.TEXTURE0+n)),C8(e,()=>e.bindTexture(e.TEXTURE_2D,t))}(e,t,r)),C8(e,()=>e.uniform1i(n,r))}function O8(e,t,n){C8(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),C8(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function R8(e,t){C8(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),C8(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function _8(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function P8(e,t,n){const r=C8(e,()=>t());if(null==r)throw new Error(n);return r}function M8(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function B8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return MR(e.slice(0,e.length-t))}function L8(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function j8(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[B8(e),...L8(e)]),t}function z8(e){return e%2===0}function W8(e,t){if(BR(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(z8(n)&&z8(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&z8(e[0])&&z8(t[0])}let U8,V8;function H8(e,t){return null!=e.getExtension(t)}function G8(e){try{if(null!=m8(e))return!0}catch(Ut){return console.log("Error when getting WebGL context: ",Ut),!1}return!1}function K8(e){if(0===e)return!1;const t=m8(e);if(1!==e){if(H8(t,"EXT_color_buffer_float"))return q8(t);const e="EXT_color_buffer_half_float";if(H8(t,e)){const n=t.getExtension(e);return function(e,t){const n=k8(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const a=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,n)}return!1}if(!H8(t,"OES_texture_float"))return!1;if(!H8(t,"WEBGL_color_buffer_float"))return!1;return q8(t)}function q8(e){const t=k8(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function X8(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&RR("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend.")})}const Y8=p_();function Q8(){let e,t,n,r,a,o,i,s,u,l;return 2===p_().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s=p_().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Z8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=e_(t);return r.map((t,a)=>{const o="int ".concat(e[a]," = ").concat(n," / ").concat(t),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(o,"; ").concat(i,";")}).join("")}function J8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=e_(t);return r.map((t,a)=>{const o="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(o,"; ").concat(i,";")}).join("")}function $8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=function(e,t){const n=e.length,r=e.map(e=>"".concat(t,"[").concat(e,"]")),a=new Array(n-1);a[n-2]=r[n-1];for(let o=n-3;o>=0;--o)a[o]="(".concat(a[o+1]," * ").concat(r[o+1],")");return a}(e.map((e,t)=>t),t);return r.map((t,a)=>{const o="int ".concat(e[a]," = ").concat(n," / ").concat(r[a]),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(r[a]):"index -= ".concat(e[a]," * ").concat(r[a]);return"".concat(o,"; ").concat(i,";")}).join("")}function e7(e){const t=e_(e).map(e=>e.toString());return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Y8.registerFlag("HAS_WEBGL",()=>Y8.getNumber("WEBGL_VERSION")>0),Y8.registerFlag("WEBGL_VERSION",()=>G8(2)?2:G8(1)?1:0),Y8.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Y8.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===Y8.get("WEBGL_VERSION")),Y8.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Y8.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Y8.registerFlag("WEBGL_PACK",()=>Y8.getBool("HAS_WEBGL")),Y8.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_PACK_CLIP",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_PACK_REDUCE",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_LAZILY_UNPACK",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_CONV_IM2COL",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Y8.getBool("WEBGL_PACK")),Y8.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(e){if(null==U8){const t=m8(e);U8=t.getParameter(t.MAX_TEXTURE_SIZE)}return U8}(Y8.getNumber("WEBGL_VERSION"))),Y8.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(e){if(null==V8){const t=m8(e);V8=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,V8)}(Y8.getNumber("WEBGL_VERSION"))),Y8.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=Y8.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=m8(e);return t=H8(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:H8(n,"EXT_disjoint_timer_query")?1:0,t}(e)}),Y8.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Y8.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!VL()),Y8.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(e){if(0===e)return!1;const t=m8(e);if(1===e){if(!H8(t,"OES_texture_float"))return!1}else if(!H8(t,"EXT_color_buffer_float"))return!1;return q8(t)}(Y8.getNumber("WEBGL_VERSION"))),Y8.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!Y8.getBool("WEBGL_FORCE_F16_TEXTURES")&&Y8.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Y8.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>K8(Y8.getNumber("WEBGL_VERSION"))),Y8.registerFlag("WEBGL_FENCE_API_ENABLED",()=>{return 2===(e=Y8.getNumber("WEBGL_VERSION"))&&null!=m8(e).fenceSync;var e}),Y8.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Y8.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),Y8.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))}),Y8.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>VL()?1:-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))}),Y8.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),Y8.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),Y8.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),Y8.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),Y8.registerFlag("WEBGL_EXP_CONV",()=>!1),Y8.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Y8.getBool("IS_TEST")),Y8.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),Y8.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),Y8.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),Y8.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);const t7="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:n7}=i;function r7(e,t,n){const r=[];if(e.forEach(e=>{const t=MR(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=p7(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(e=>{r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))});const a=r.join("\n"),o=e.map(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?o7(e,r):a7(e,r);const o=e.shapeInfo.logicalShape,i=t.logicalShape;o.length<=i.length&&(a+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,s=n7(e.shapeInfo.logicalShape,t.logicalShape),u=h7(i),l=i-o;let c;const d=["x","y","z","w","u","v"];c=0===o?"":i<2&&s.length>=1?"coords = 0;":s.map(e=>"coords.".concat(d[e+l]," = 0;")).join("\n");let h="";h=i<2&&o>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(d[t+l])).join(", ");let p="return outputValue;";const f=1===MR(e.shapeInfo.logicalShape),g=MR(t.logicalShape),m=1===g;if(1!==o||f||m){if(f&&!m)p=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=o-2,t=o-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?p="return vec4(outputValue.x);":s.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(a,"() {\n      ").concat(u," coords = getOutputCoords();\n      ").concat(c,"\n      vec4 outputValue = get").concat(r,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&BR(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const l=h7(u),c=n7(e.shapeInfo.logicalShape,t.logicalShape),d=u-s;let h;const p=["x","y","z","w","u","v"];h=0===s?"":u<2&&c.length>=1?"coords = 0;":c.map(e=>"coords.".concat(p[e+d]," = 0;")).join("\n");let f="";f=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(p[t+d])).join(", ");return"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(h,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)).join("\n"),i=t.texShape,s=Q8(),u=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(s);let l,c,d=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(i7,"\n    ").concat(s7,"\n    ").concat(u7,"\n  ");return t}(s);t.isPacked?(l=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(BR(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");const a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),o=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),o=a*Math.ceil(e[e.length-2]/2);let i=o,s="",u="b, r, c";for(let l=2;l<e.length-1;l++)i*=e[e.length-l-1],s="\n      int b".concat(l," = index / ").concat(i,";\n      index -= b").concat(l," * ").concat(i,";\n    ")+s,u="b".concat(l,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),c=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(s)):(l=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(BR(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=J8(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const r=Z8(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=J8(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const r=Z8(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=Z8(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=Z8(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,i,n.enableShapeUniforms),c=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(s)),n.packedInputs&&(d+=l7);return[d,u,c,a,l,o,n.userCode].join("\n")}function a7(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");const[a,o]=e.shapeInfo.texShape;if(1===a&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const i=c7(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[s,u]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(u,", ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(d7(e),"\n      }\n    ");const a=e.shapeInfo.texShape,o=a[0],i=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=c7(n);if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===o)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&BR(n,o)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const e=o[0],n=o[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}const{newShape:i,keptDims:s}=HR(n),u=i;if(u.length<n.length){const n=f7(e,u),r=["row","col"];return"\n      ".concat(a7(n,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(g7(r,s),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(d7(e),"\n      }\n    ");const l=o[0],c=o[1],d=c7(r);if(1===c)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(l,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===l)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(c,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(l,", ").concat(c,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],{newShape:s,keptDims:u}=HR(n),l=s;if(l.length<n.length){const n=f7(e,l),r=["row","col","depth"];return"\n        ".concat(a7(n,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(g7(r,u),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(d7(e),"\n      }\n    ");const c=e.shapeInfo.texShape,d=c[0],h=c[1],p=e.shapeInfo.flatOffset;if(h===o&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(d,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===i&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");const f=c7(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,s=n[1]*i,{newShape:u,keptDims:l}=HR(n);if(u.length<n.length){const n=f7(e,u),r=["row","col","depth","depth2"];return"\n      ".concat(a7(n,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(g7(r,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(d7(e),"\n      }\n    ");const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1],f="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),m="int stride0 = ".concat(r,"Shape[1] * stride1;");if(p===s&&null==c)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(p===o&&null==c)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const y=c7(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(g,"\n      ").concat(m,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,{newShape:u,keptDims:l}=HR(t);if(u.length<t.length){const t=f7(e,u),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(a7(t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(g7(n,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(d7(e),"\n      }\n    ");const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];if(p===s&&null==c)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===a&&null==c)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=c7(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:o}=HR(t);if(a.length<t.length){const t=f7(e,a),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(a7(t),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(g7(n,o),");\n      }\n    ")}const i=t[5],s=t[4]*i,u=t[3]*s,l=t[2]*u,c=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(c,", ").concat(l,", ").concat(u,", ").concat(s,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(i,", 1)));\n        ").concat(d7(e),"\n      }\n    ");const d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],f=h[1];if(f===c&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(l,", ").concat(u,", ").concat(s,", ").concat(i,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===i&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const g=c7(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(c," + col * ").concat(l," + depth * ").concat(u," +\n          depth2 * ").concat(s," + depth3 * ").concat(i," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function o7(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Q8();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=Q8();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");const i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],s=o[1],u=Q8();if(null!=o&&BR(n,o))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");const l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(c,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const r=[1,2],o=f7(e,n.slice(1)),i=["b","row","col"];return"\n        ".concat(o7(o,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(g7(i,r),");\n        }\n      ")}const s=Q8();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ");const u=i[0],l=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(u,", ").concat(l,", ").concat(d,", ").concat(c,", b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Q8();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");const o=e.shapeInfo.logicalShape,i=o.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=u[0],c=u[1],d=Math.ceil(o[i-1]/2);let h=d*Math.ceil(o[i-2]/2),p="int b, int row, int col",f="b * ".concat(h," + (row / 2) * ").concat(d," + (col / 2)");for(let g=2;g<i-1;g++)p="int b".concat(g,", ")+p,h*=o[i-g-1],f="b".concat(g," * ").concat(h," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(c,";\n      int texC = index - texR * ").concat(c,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(c,", ").concat(l,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const i7="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",s7="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",u7="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",l7="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function c7(e){return"offset".concat(e)}function d7(e){const t=e.name,n=MR(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function h7(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function p7(e,t,n){const{newShape:r,keptDims:a}=HR(t),o=t.length,i=e&&3===o&&1===t[0],s=i?t.slice(1):r,u=!e&&o>1&&!BR(t,n)&&r.length<o||i;return{useSqueezeShape:u,uniformShape:u?s:t,keptDims:a}}function f7(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function g7(e,t){return t.map(t=>e[t]).join(", ")}function m7(e,t,n,r){const a=n.map((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),o=a.map(e=>e.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=r7(a,i,t),u=function(e,t){const n=P8(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(C8(e,()=>e.shaderSource(n,t)),C8(e,()=>e.compileShader(n)),p_().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw F8(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),l=e.createProgram(u);return p_().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:o,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(l),Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:o,outShapeInfo:i},y7(e,t,l)))}function y7(e,t,n){const r=[],a=[];let o,i,s,u=null,l=null;l=e.getUniformLocation(n,"NAN",!1),1===p_().getNumber("WEBGL_VERSION")&&(u=e.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of t.variableNames){const a={name:d,uniform:e.getUniformLocation(n,d,c),offset:e.getUniformLocation(n,"offset".concat(d),c)};t.enableShapeUniforms&&(a.shape=e.getUniformLocation(n,"".concat(d,"Shape"),c),a.texShape=e.getUniformLocation(n,"".concat(d,"TexShape"),c)),r.push(a)}if(t.enableShapeUniforms&&(o=e.getUniformLocation(n,"outShape",c),s=e.getUniformLocation(n,"outShapeStrides",c),i=e.getUniformLocation(n,"outTexShape",c)),t.customUniforms)for(const d of t.customUniforms)a.push(e.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:a,infLoc:u,nanLoc:l,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:i}}function v7(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((e,n)=>{const r=e.logicalShape,a=t[n],o=a.shape;if(!BR(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(e.isUniform&&a.isUniform)return;const i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!BR(i,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(s," must match"))})}function b7(e){return p_().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class x7{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=y8.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Q8();this.outputShape=e,this.enableShapeUniforms=b7(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?J8(["r","c","d"],e):Z8(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class w7{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=y8.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=Q8();this.outputShape=e,this.enableShapeUniforms=b7(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?J8(["r","c","d"],e):Z8(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class D7{constructor(e){this.variableNames=["A"],this.outTexUsage=v8.DOWNLOAD;const t=Q8();this.outputShape=e,this.userCode="\n      ".concat(t7,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class k7{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=v8.DOWNLOAD;const t=Q8();this.outputShape=e,this.userCode="\n      ".concat(t7,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const C7={R:0,G:1,B:2,A:3};class E7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Q8();this.outputShape=e,this.enableShapeUniforms=b7(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let o="";for(let i=0;i<n.length;i++){const e=n[i];o+="\n          if(offset == ".concat(i,") {\n            result = values[").concat(C7[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":e7(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")}}class S7{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Q8();this.outputShape=e,this.enableShapeUniforms=b7(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let t=0;t<=1;t++){const a=2*o+t;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(a,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(a,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(a,"] = values[2];\n            } else {\n              result[").concat(a,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":e7(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(a,";\n        }\n    ")}}function A7(e){const t=Q8();return function(e,t){const n=P8(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(C8(e,()=>e.shaderSource(n,t)),C8(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function F7(e){return function(e,t){const n=P8(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return C8(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),C8(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function I7(e){return function(e,t){const n=P8(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return C8(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),C8(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Uint16Array([0,1,2,2,1,3]))}function N7(e,t,n,r,a,o){!function(e,t){const n=p_().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const r="[".concat(e,"x").concat(t,"]"),a="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}(t,n);const i=function(e){return P8(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return C8(e,()=>e.bindTexture(s,i)),C8(e,()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),C8(e,()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),C8(e,()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)),C8(e,()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===p_().getNumber("WEBGL_VERSION")?C8(e,()=>e.texImage2D(s,0,r,t,n,0,a,o,null)):C8(e,()=>e.texStorage2D(s,1,r,t,n)),C8(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:i,texShape:[n,t]}}function T7(e){return e.internalFormatFloat}function O7(e){return e.internalFormatHalfFloat}function R7(e){return e.downloadTextureFormat}function _7(e){return e.internalFormatPackedFloat}function P7(e){return e.internalFormatPackedHalfFloat}function M7(e,t,n,r,a,o,i,s){const u=e,l=new Float32Array(function(e,t){const[n,r]=D8(e,t);return n*r*4}(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}class B7{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=p_().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){f8[e]=t}(t,e)):this.gl=m8(t),e=this.gl,2===p_().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>C8(t,()=>t.createVertexArray()),this.bindVertexArray=e=>C8(t,()=>t.bindVertexArray(e)),this.deleteVertexArray=e=>C8(t,()=>t.deleteVertexArray(e)),this.getVertexArray=()=>C8(t,()=>t.getParameter(t.VERTEX_ARRAY_BINDING))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>C8(e,()=>t.createVertexArrayOES()),this.bindVertexArray=n=>C8(e,()=>t.bindVertexArrayOES(n)),this.deleteVertexArray=n=>C8(e,()=>t.deleteVertexArrayOES(n)),this.getVertexArray=()=>C8(e,()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===p_().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=S8(this.gl,e),H8(this.gl,t))this.textureHalfFloatExtension=S8(this.gl,t);else if(p_().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),H8(this.gl,r))this.colorBufferHalfFloatExtension=S8(this.gl,r);else if(p_().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",H8(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!H8(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=F7(this.gl),this.indexBuffer=I7(this.gl),this.framebuffer=function(e){return P8(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=k8(this.gl,this.textureHalfFloatExtension)}get debug(){return p_().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;C8(e,()=>e.finish()),C8(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),C8(e,()=>e.deleteFramebuffer(this.framebuffer)),C8(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),C8(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),C8(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,o]=x8(t,n);return N7(e,a,o,T7(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,o]=x8(t,n);return N7(e,a,o,O7(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,o]=x8(t,n);return N7(e,a,o,R7(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){C8(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?2===p_().getNumber("WEBGL_VERSION")?C8(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):C8(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):2===p_().getNumber("WEBGL_VERSION")?C8(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):C8(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),C8(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){let i,s,u;C8(e,()=>e.bindTexture(e.TEXTURE_2D,t)),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),2===p_().getNumber("WEBGL_VERSION")?C8(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,i)):C8(e,()=>e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,i)),C8(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,o]=D8(t,n);return N7(e,a,o,P7(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,o]=D8(t,n);return N7(e,a,o,_7(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(R8(this.gl,this.framebuffer),this.outputTexture=null),C8(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n,r){const[a,o]=x8(t,n),i=new Uint8Array(t*n*4);return C8(e,()=>e.readPixels(0,0,a,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,i)),new Float32Array(i.buffer)}(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,o){return M7(this.gl,e,0,0,0,a,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();C8(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r));const a=16*t*n;return C8(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),C8(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),C8(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(p_().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n){const r=new Float32Array(t*n*4);return C8(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}(this.gl,t,n))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=A7(t));const n=function(e){return P8(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}(t);C8(t,()=>t.attachShader(n,this.vertexShader)),C8(t,()=>t.attachShader(n,e)),function(e,t){if(C8(e,()=>e.linkProgram(t)),!p_().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&I8(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;C8(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),function(e,t,n){C8(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),N8(e,t,"clipSpacePos",n,3,20,0)&&N8(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(C8(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&I8(this.gl,this.program),C8(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return P8(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),C8(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),T8(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,a]=D8(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&I8(this.gl,this.program),_8(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}C8(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),C8(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=S8(this.gl,2===p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await WR(()=>this.disposed||this.isQueryAvailable(e,p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in p_().platform&&(n=p_().platform.setTimeoutCustom.bind(p_().platform)),WR(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),O8(this.gl,e,this.framebuffer),this.debug&&_8(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(O8(this.gl,this.outputTexture,this.framebuffer),this.debug&&_8(this.gl)):R8(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;O8(r,e,this.framebuffer),this.debug&&_8(r),this.outputTexture=e,C8(r,()=>r.viewport(0,0,t,n)),C8(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),C8(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:L7,XI:j7,Nk:z7,f6:W7,ct:U7,YG:V7,hH:H7,z3:G7,sG:K7,uM:q7,vS:X7,qB:Y7,GG:Q7,rq:Z7,lg:J7,WR:$7,cu:e9,GE:t9,px:n9,jC:r9,He:a9,hE:o9,BF:i9,Dk:s9,cl:u9,_B:l9,ub:c9,_f:d9,Ku:h9,qy:p9,Zy:f9,bu:g9,zv:m9,dH:y9,HS:v9,yH:b9,l3:x9,z9:w9,x6:D9,_m:k9,eW:C9,GK:E9,SP:S9,yr:A9,dl:F9,Dw:I9,xT:N9,_X:T9,wz:O9}=s;function R9(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>"".concat(e,".").concat(t))}function _9(e,t){return 1===t?[e]:R9(e,t)}class P9{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=b7(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=_9("rc",this.rank),t=h7(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),a=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(a,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1");for(let t=2;t<this.rank;t++)a="".concat(e[e.length-1-t],",")+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class M9{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=b7(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?$8(["r","c","d"],"inputShape"):Z8(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":e7(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class B9{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=j9(t,n),a=z9(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const o=L9(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[a].pop();return this.usedTextures[a].push(e),e}let i;return r===b8.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===b8.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===b8.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===b8.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===b8.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const a=j9(n,r),o=z9(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);const i=L9(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=p_().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const u=this.usedTextures[o],l=u&&u.indexOf(e);if(null==l||l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[l]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function L9(e,t,n,r,a){const o=function(e,t){switch(e){case b8.PACKED_2X2_FLOAT32:return _7(t);case b8.PACKED_2X2_FLOAT16:return P7(t);case b8.UNPACKED_FLOAT32:return T7(t);case b8.UNPACKED_FLOAT16:return O7(t);case b8.PACKED_4X1_UNSIGNED_BYTE:return R7(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);let i;if(a){const[t,n]=D8(e[0],e[1]);i=t*n}else{const[t,n]=x8(e[0],e[1]);i=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*s}function j9(e,t){if(e===v8.UPLOAD)return b8.PACKED_2X2_FLOAT32;if(e===v8.RENDER||null==e)return function(e){return p_().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?b8.PACKED_2X2_FLOAT32:b8.UNPACKED_FLOAT32:e?b8.PACKED_2X2_FLOAT16:b8.UNPACKED_FLOAT16}(t);if(e===v8.DOWNLOAD||e===v8.PIXELS)return b8.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function z9(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class W9{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=b7(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const U9="if (isnan(x)) return x;",V9="return abs(x);";const H9=U9+"\n  return (x < 0.0) ? 0.0 : x;\n",G9=U9+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",K9="return x;";class q9{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=b7(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class X9{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=b7(this.outputShape.length);const t=e.length,n=_9("rc",t),r=h7(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),i=t<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(a,");\n\n        setOutput(getChannel(packedInput, ").concat(i,"));\n      }\n    ")}}const Y9=vG,Q9={};const Z9=p_().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class J9 extends AR{nextDataId(){return J9.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!p_().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof B7)t=e;else{const n=m8(p_().getNumber("WEBGL_VERSION"),e);t=new B7(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=m8(p_().getNumber("WEBGL_VERSION"));t=new B7(e),this.binaryCache=((n=p_().getNumber("WEBGL_VERSION"))in Q9||(Q9[n]={}),Q9[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new B9(this.gpgpu),this.numMBBeforeWarning=null==p_().global.screen?1024:p_().global.screen.height*p_().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new SR(this,nj())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,a,o){const i=this.makeTensorInfo(t,n),s=this.texData.get(i.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,a]},s.texShape=[r,a];const u=j8(t),l=new E7(u,!1,o),c=this.runWebGLProgram(l,[i],n,[[r,a]]);return c.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(i),c.dataId}write(e,t,n){if((p_().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||p_().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:v8.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,a){if(p_().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:v8.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:o,shape:i,isPacked:s}=t;if(null!=o){let t;t=s?new q9(i,K9):new W9(i,K9);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const u=null!=this.activeTimers;let l,c;if(u&&(l=nL()),"complex64"===r){c=MH(this.readSync(a.real.dataId),this.readSync(a.imag.dataId))}else c=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=nL()-l),this.convertAndCacheOnCPU(e,c)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}const t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:o,complexTensorInfos:i,isPacked:s}=t;if(null!=a){let t;t=s?new q9(r,K9):new W9(r,K9);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:o}],o),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(p_().getBool("DEBUG")&&!p_().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===p_().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,l,c=null;if("complex64"!==o&&p_().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const t=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(t.texture.texture,...w8(r))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);l=MH(e[0],e[1])}else if(null==c)l=this.getValuesFromTexture(e);else{const e=MR(r);l=this.gpgpu.downloadFloat32MatrixFromBuffer(c,e)}if(null!=u&&this.disposeIntermediateTensorInfo(u),null!=c){const e=this.gpgpu.gl;C8(e,()=>e.deleteBuffer(c))}const d=this.convertAndCacheOnCPU(e,l),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(e=>e(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&nj().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:a,slice:o,dtype:i,isPacked:s,texture:u}=n;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=s?new q9(a,K9):new W9(a,K9);const r=this.runWebGLProgram(n,[{dataId:e,shape:a,dtype:i}],i),o=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),o}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const l=this.decode(e,t.customTexShape),c=nj().makeTensorFromTensorInfo(l),d=this.texData.get(l.dataId);return Object.assign({tensorRef:c},d.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>aL(e));return Gj(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Gj(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!E8(n)){if(p_().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=MR(t);if(p_().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...w8(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(n),o}const o=p_().getBool("WEBGL_PACK")&&!0===r,i=o?j8(t):t,s=o?new k7(i):new D7(i),u=this.runWebGLProgram(s,[{shape:i,dtype:n,dataId:e}],"float32"),l=this.texData.get(u.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture.texture,l.texShape[0],l.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(u),c}timerAvailable(){return p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const a=iL(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),o=iL(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(a);i.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),i.getExtraProfileInfo=()=>e.map((e,t)=>({name:o[t],ms:e})).map(e=>"".concat(e.name,": ").concat(e.ms)).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:nL(),endMs:null}}endTimer(e){return p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=nL(),e)}async getQueryTime(e){if(p_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:o,slice:i}=this.texData.get(e),s=i&&i.origDataId||e,u=this.dataRefCount.get(s);u>1?this.dataRefCount.set(s,u-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,o)));const l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z9;return p_().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&MR(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){IB("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return Y9(e.shape,t)}packedUnaryOp(e,t,n){const r=new q9(e.shape,t),a=this.compileAndRun(r,[e],n);return nj().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=y9(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(p_().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,V9,e.dtype);const t=new W9(e.shape,V9),n=this.compileAndRun(t,[e]);return nj().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&YR(n[0])){const a=n.map(e=>rL(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return nj().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new X9(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new P9(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[B8(e.shape),...L8(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[B8(t),...L8(t)],o=new M9(a,n),i=[n],s=this.runWebGLProgram(o,[r],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:a,dtype:o}=n;if(null!=t){RR(MR(a)<=t[0]*t[1]*4,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const i=j8(a);let s;s=r?new w7(i):new x7(i);const u=[null!=t?t:w8(i)];return{dtype:o,shape:a,dataId:this.runWebGLProgram(s,[{shape:i,dtype:o,dataId:e}],o,u,!0,t).dataId}}runWebGLProgram(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===y8.DENSE){const t=null!=o?o:w8(e.outputShape);s.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===MR(i.shape))return s.values=GR(i.dtype,0),i;const u=[],l=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&MR(t.shape)<=p_().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),u.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!W8(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),u.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(i.dataId);const c={shape:i.shape,texData:s,isUniform:!1},d=function(e,t,n){let r="";t.concat(n).forEach(t=>{const a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:i,uniformShape:s,keptDims:u}=p7(e.packedInputs,t.shape,o);let l="",c="",d="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];l="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=e_(s);d="".concat(e[0]===o[1],"_").concat(e[e.length-1]===o[1])}}else c="".concat(s[0]>1,"_").concat(s[1]>1);const h=t.shape.length,p=2===s.length&&BR(t.shape,o),f=1===MR(t.shape),g=yz(t.shape,n.shape),m=!e.packedInputs&&h===n.shape.length&&BR(o,n.texData.texShape),y=e.packedInputs||s.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(h,"_").concat(m,"_").concat(i?u:"","_").concat(s.length,"_").concat(f,"_").concat(g,"_").concat(p,"_").concat(l,"_").concat(c,"_").concat(d,"_").concat(y,"_").concat(a)}else{const e=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(e,"_").concat(a)}});const a=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+a+"".concat(p_().getNumber("WEBGL_VERSION")),o}(e,l,c),h=this.getAndSaveBinary(d,()=>m7(this.gpgpu,e,l,c)),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),p_().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(v7(t.inShapeInfos,n),v7([t.outShapeInfo],[r]));const o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):e.setOutputMatrixTexture(o.texture,i[0],i[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===p_().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let u=0;u<n.length;++u){const r=n[u],{uniform:a,offset:o,shape:i,texShape:s}=t.variablesLocations[u];if(i){const{uniformShape:n}=p7(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(i,new Int32Array(n));break;case 2:e.gl.uniform2iv(i,new Int32Array(n));break;case 3:e.gl.uniform3iv(i,new Int32Array(n));break;case 4:e.gl.uniform4iv(i,new Int32Array(n))}}if(s&&e.gl.uniform2i(s,r.texData.texShape[0],r.texData.texShape[1]),null!=a)if(r.isUniform)if(MR(r.shape)<2)e.gl.uniform1f(a,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(a,t)}else null!=r.texData.slice&&null!=o&&e.gl.uniform1i(o,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,a,u)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=e_(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(let u=0;u<t.program.customUniforms.length;++u){const n=t.program.customUniforms[u],r=t.customUniformLocations[u],o=a[u];if("float"===n.type)e.gl.uniform1fv(r,o);else if("vec2"===n.type)e.gl.uniform2fv(r,o);else if("vec3"===n.type)e.gl.uniform3fv(r,o);else if("vec4"===n.type)e.gl.uniform4fv(r,o);else if("int"===n.type)e.gl.uniform1iv(r,o);else if("ivec2"===n.type)e.gl.uniform2iv(r,o);else if("ivec3"===n.type)e.gl.uniform3iv(r,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(r,o)}}e.executeProgram()}(this.gpgpu,h,l,c,r),u.forEach(e=>this.disposeIntermediateTensorInfo(e)),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const g=p_().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const e=nL();e-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!p_().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===a){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!p_().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=aj(()=>{if(!p_().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=p_().getBool("DEBUG");p_().set("DEBUG",!1);const t=this.abs(rz(1e-8)).dataSync()[0];if(p_().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:o,usage:i,isPacked:s}=t;if(null!=o)return;const u=null!=this.activeTimers;let l;u&&(l=nL());let c=t.texShape;if(null==c&&(c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=p_().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=p_().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&p_().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((t,n)=>n>=e.length-2?TR(e[n]):e[n])).length&&(e=[2,e[0]])),2!==e.length){const t=HR(e);e=t.newShape}let a=MR(e),o=null;e.length<=1&&a<=n?o=[1,a]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);const i=null!=o&&Math.max(...o)>r&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(null==o||i)if(t){const t=B8(e);let n=2,r=2;e.length&&([n,r]=L8(e)),a=t*(n/2)*(r/2),o=jR(a).map(e=>2*e)}else o=jR(a);return o}(n,s),t.texShape=c),null!=a){const e=j8(n);let o,i=c[1],d=c[0];const h=a instanceof Uint8Array||a instanceof Uint8ClampedArray;!s&&h||([i,d]=D8(c[0],c[1])),o=s?new S7(e,h):new E7(e,h);const p=h?[d,i]:c,f=this.makeTensorInfo(p,r),g=this.texData.get(f.dataId);g.usage=h?v8.PIXELS:v8.UPLOAD,g.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),i,d,a);const m=[[d,i]],y=!0,v=this.runWebGLProgram(o,[f],r,m,y),b=this.texData.get(v.dataId);t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,p_().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=b.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),u&&(this.uploadWaitMs+=nL()-l)}else{const e=this.acquireTexture(c,i,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*XR(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise(e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}});e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await uH(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw F8(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:a,outShapeLocation:o,outShapeStridesLocation:i,outTexShapeLocation:s}=y7(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=a,e.outShapeLocation=o,e.outShapeStridesLocation=i,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:a,width:o,channels:i}=e,s=nj().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=s.writeTexture(r,t,n,a,o,i);return nj().makeTensorFromDataId(u,t,n,s)}}J9.nextDataId=0;HL()&&sj("webgl",()=>new J9,2);const $9="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class eee{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=bz(t,n),this.enableShapeUniforms=b7(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const tee="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class nee{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=bz(t,n);const a=this.outputShape.length;this.enableShapeUniforms=b7(a);let o="";if(r)if(0===a||1===MR(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=h7(a);if(o="\n          ".concat(e," coords = getOutputCoords();\n        "),1===a)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=_9("coords",a);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(e[a-2]," + 1) >= outShape[").concat(a," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[a-1]," + 1) >= outShape[").concat(a," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(e[a-2]," + 1) >= ").concat(this.outputShape[a-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[a-1]," + 1) >= ").concat(this.outputShape[a-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}}function ree(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const aee={kernelName:RP,backendName:"webgl",kernelFunc:ree};function oee(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=ree({inputs:{x:r},backend:n}),u=ree({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:u},o}const iee={kernelName:H_,backendName:"webgl",kernelFunc:oee},see="return (a < 0.) ? b * a : a;",uee="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const lee={kernelName:jP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:o}=r,i=n.makeTensorInfo([],"float32",eL(o,"float32")),s=p_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new nee(uee,a.shape,i.shape):new eee(see,a.shape,i.shape),u=n.runWebGLProgram(s,[a,i],"float32");return n.disposeIntermediateTensorInfo(i),u}},cee="return (a < 0.) ? b * a : a;",dee="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const hee={kernelName:xM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t,o=p_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new nee(dee,r.shape,a.shape):new eee(cee,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],"float32")}},pee="if (isnan(x)) return x;";function fee(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:a}=e;return e=>{let{inputs:o,backend:i}=e;const{x:s}=o,u=i,l=a||s.dtype;if(u.shouldExecuteOnCPU([s])&&null!=r){const e=u.texData.get(s.dataId),t=r(e.values,l);return u.makeTensorInfo(s.shape,l,t)}let c;return c=p_().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new q9(s.shape,n):new W9(s.shape,t),u.runWebGLProgram(c,[s],l)}}function gee(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:a=!1,cpuKernelImpl:o,dtype:i}=e;return e=>{let{inputs:s,backend:u}=e;const{a:l,b:c}=s,d=u;if(a&&"complex64"===l.dtype){const e=d.texData.get(l.dataId),n=d.texData.get(c.dataId),[r,a]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(e=>{const[n,r]=e,a={dataId:n.dataId,dtype:n.dtype,shape:l.shape},o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},i=new eee(t,l.shape,c.shape);return d.runWebGLProgram(i,[a,o],FL(n.dtype,r.dtype))}),o=oee({inputs:{real:r,imag:a},backend:d});return d.disposeIntermediateTensorInfo(r),d.disposeIntermediateTensorInfo(a),o}const h=i||FL(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||d.shouldExecuteOnCPU([l,c]))&&null!=o){const e=d.texData.get(l.dataId).values,t=d.texData.get(c.dataId).values,n="string"===l.dtype?mG(e):e,r="string"===l.dtype?mG(t):t,[a,i]=o(l.shape,c.shape,n,r,h),s=d.makeTensorInfo(i,h);return d.texData.get(s.dataId).values=a,s}let p;return p=p_().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new nee(n,l.shape,c.shape,r):new eee(t,l.shape,c.shape),d.runWebGLProgram(p,[l,c],h)}}function mee(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":H9;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":G9;if("prelu"===e)return t?dee:cee;if("leakyrelu"===e)return t?uee:see;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class yee{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=b7(this.outputShape.length);const l=r?e[1]:e[2],c=Math.ceil(l/2),d=r?"i * 2, rc.y":"rc.y, i * 2",h=a?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",m="";i&&(g=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(i,"\n        }"):u?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(i,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(i,"\n        }"),m="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";e[0]<t[0]?v="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(b="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(c,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(v,";\n        int batchB = ").concat(b,";\n        for (int i = 0; i < ").concat(c,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(m,"\n\n        setOutput(result);\n      }\n    ")}}const vee="return areal * breal - aimag * bimag;",bee="return areal * bimag + aimag * breal;";class xee{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=bz(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const wee="return a * b;";function Dee(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,o=FL(r.dtype,a.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),o=new xee(vee,r.shape,a.shape),i=new xee(bee,r.shape,a.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:a.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:a.shape}],u=n.runWebGLProgram(o,s,"float32"),l=n.runWebGLProgram(i,s,"float32"),c=oee({inputs:{real:u,imag:l},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),c}if(n.shouldExecuteOnCPU([r,a])){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),[i,s]=i9(r.shape,a.shape,e.values,t.values,o),u=n.makeTensorInfo(s,o);return n.texData.get(u.dataId).values=i,u}let i;return i=p_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new nee(wee,r.shape,a.shape):new eee(wee,r.shape,a.shape),n.runWebGLProgram(i,[r,a],o)}const kee={kernelName:lM,backendName:"webgl",kernelFunc:Dee};function Cee(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:o}=r,i=n,s=MR(a.shape),u=UR(o,s),l=MR(u);RR(s===l,()=>"The new shape (".concat(u,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements.");const c=i.texData.get(a.dataId);return!c.isPacked||W8(a.shape,u)||null!==c.texture&&W8(c.shape,u)?(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){const r=[B8(e.shape),...L8(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[B8(t),...L8(t)],i=new M9(o,r),s=[r],u=n.runWebGLProgram(i,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,i)}const Eee={kernelName:IM,backendName:"webgl",kernelFunc:Cee};class See{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:o}=e;this.outputShape=[r,o];const i=4*Math.floor(n/4),s=n%4;let u="sumValue += dot(values, ones);";if(null!=t){const e=1/t;u="sumValue += dot(values * ".concat(LR(e)?e.toPrecision(2):e,", ones);")}let l="";a%n>0&&(l="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(l,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(i,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(u,"\n        }\n\n        int inIdx = inOffset + ").concat(i,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(u,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class Aee{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:o}=e;this.outputShape=[r,o];let i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");let u="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");const l=4*Math.floor(n/4),c=n%4;let d="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(s,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let p="";a%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(i,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(i,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===c,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===c,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===c,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(u,");\n      }\n    ")}}function Fee(e,t,n,r){const a=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=yH(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let o=e;for(let i=0;i<a.length;i++){const{inSize:s,windowSize:u,outSize:l}=a[i];let c,d;c="mean"===n?0===i?new See({windowSize:u,inSize:s,batchSize:e.shape[0],outSize:l},s):new See({windowSize:u,inSize:s,batchSize:e.shape[0],outSize:l}):new Aee({windowSize:u,inSize:s,batchSize:e.shape[0],outSize:l},n),d=o,o=r.runWebGLProgram(c,[o],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return o}class Iee{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;const r=h7(this.rank),a=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(a,"));\n    }\n    ")}}class Nee{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let l=0;l<n.length;l++)n[l]=e[t[l]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const r=h7(this.rank),a=R9("rc",this.rank),o=new Array(this.rank);for(let l=0;l<t.length;l++)o[t[l]]=a[l];const i="vec2(".concat(o.slice(-2).join(),")"),s="++".concat(a[this.rank-1]," < ").concat(n[this.rank-1]),u="getChannel(getA(".concat(o.join(),"), ").concat(i,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(u,";\n      if(").concat(s,") {\n        result[1] = ").concat(u,";\n      }\n      --").concat(a[this.rank-1],";\n      if(++").concat(a[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(u,";\n        if(").concat(s,") {\n          result[3] = ").concat(u,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function Tee(e,t,n){const r=p_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Nee(e.shape,t):new Iee(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function Oee(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r;return function(e,t,n,r){const a=t,o=e.shape.length,i=VR(a,e.shape);let s=i;const u=uU(s,o),l=null!=u;let c=e;l&&(c=Tee(e,u,r),s=cU(s.length,o)),sU("sum",s,o);const[d,h]=oU(c.shape,s);let p=d;n&&(p=iU(d,i));const f=MR(h),g=Cee({inputs:{x:c},attrs:{shape:[MR(e.shape)/f,f]},backend:r}),m=Fee(g,IL(e.dtype),"sum",r),y=Cee({inputs:{x:m},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(m),l&&r.disposeIntermediateTensorInfo(c),y}(a,o,i,n)}const Ree={kernelName:QM,backendName:"webgl",kernelFunc:Oee};function _ee(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:o}=r,i=n,s=a.shape.length,u=new Array(s);for(let c=0;c<u.length;c++)u[c]=a.shape[o[c]];let l;if(i.shouldExecuteOnCPU([a])){const e=i.texData.get(a.dataId).values,t=T9(e,a.shape,a.dtype,o,u);l=i.makeTensorInfo(u,a.dtype);i.texData.get(l.dataId).values=t}else l=Tee(a,o,i);return l}const Pee={kernelName:vB,backendName:"webgl",kernelFunc:_ee};function Mee(e){let{a:t,b:n,transposeA:r,transposeB:a,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:u=0,activation:l=null}=e;const c=t.shape.length,d=n.shape.length,h=r?t.shape[c-2]:t.shape[c-1],p=a?n.shape[d-1]:n.shape[d-2],f=r?t.shape[c-1]:t.shape[c-2],g=a?n.shape[d-2]:n.shape[d-1],m=t.shape.slice(0,-2),y=n.shape.slice(0,-2),v=MR(m),b=MR(y),x=bz(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,g]);RR(h===p,()=>"Error in matMul: inner shapes (".concat(h,") and (")+"".concat(p,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match."));const w=r?[v,h,f]:[v,f,h],D=a?[b,g,p]:[b,p,g],k=Cee({inputs:{x:t},backend:o,attrs:{shape:w}}),C=Cee({inputs:{x:n},backend:o,attrs:{shape:D}}),E=[k,C],S=Math.max(v,b),A=r?k.shape[1]:k.shape[2],F=null!=i,I=null!=s,N="leakyrelu"===l,T=null!=l?mee(l,!0):null;let O;if((1===f||1===g)&&A>1e3&&!1===(F||I||N||null!=T)){let e=k,t=C;r&&(e=_ee({inputs:{x:k},backend:o,attrs:{perm:[0,2,1]}}),E.push(e)),a&&(t=_ee({inputs:{x:C},backend:o,attrs:{perm:[0,2,1]}}),E.push(t));const n=1===g;let i=e;1!==g&&(i=Cee({inputs:{x:e},backend:o,attrs:{shape:[S,A,1]}}),E.push(i));const s=1===g?2:1;let u=t;n&&(u=Cee({inputs:{x:t},backend:o,attrs:{shape:[S,1,A]}}),E.push(u));const l=Dee({inputs:{a:i,b:u},backend:o});O=Oee({inputs:{x:l},backend:o,attrs:{axis:s,keepDims:!0}}),E.push(l)}else{const e=FL(t.dtype,n.dtype),l=new yee(w,D,[S,f,g],r,a,F,T,I,N),c=[k,C];if(null!=i&&c.push(i),I&&c.push(s),N){const e=o.makeTensorInfo([],"float32",eL(u,"float32"));c.push(e),E.push(e)}O=o.runWebGLProgram(l,c,e)}const R=Cee({inputs:{x:O},backend:o,attrs:{shape:x}});E.push(O);for(const _ of E)o.disposeIntermediateTensorInfo(_);return R}const Bee={kernelName:SB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:o,bias:i,preluActivationWeights:s}=t,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:d}=r;return Mee({a:a,b:o,transposeA:u,transposeB:l,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:d,activation:c})}},Lee="return abs(x);";const jee={kernelName:v_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=y9(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let a;return a=p_().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new q9(r.shape,Lee):new W9(r.shape,Lee),n.runWebGLProgram(a,[r],r.dtype)}},zee=fee({opSnippet:U9+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),Wee={kernelName:b_,backendName:"webgl",kernelFunc:zee},Uee=fee({opSnippet:U9+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Vee={kernelName:x_,backendName:"webgl",kernelFunc:Uee},Hee="return a + b;",Gee=gee({opSnippet:Hee,packedOpSnippet:Hee,supportsComplex:!0,cpuKernelImpl:L7}),Kee={kernelName:w_,backendName:"webgl",kernelFunc:Gee};class qee{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))});const r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}class Xee{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))});const r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}const Yee={kernelName:D_,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,a=n;if(1===a.length)return ree({inputs:{x:a[0]},backend:r});if(a.length>p_().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(a.length/2),n=e({inputs:a.slice(0,t),backend:r}),o=e({inputs:a.slice(t),backend:r});return e({inputs:[n,o],backend:r})}const o=a.map(e=>e.dtype).reduce((e,t)=>FL(e,t)),i=a.map(e=>e.shape),s=p_().getBool("WEBGL_PACK")?new Xee(a[0].shape,i):new qee(a[0].shape,i);return r.runWebGLProgram(s,a,o)}};const Qee={kernelName:k_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r,s=a.shape.length,u=VR(o,a.shape);let l=u;const c=uU(l,s);let d=a;null!=c&&(d=_ee({inputs:{x:a},backend:n,attrs:{perm:c}}),l=cU(l.length,s)),sU("all",l,s);const[h,p]=oU(d.shape,l),f=Cee({inputs:{x:d},backend:n,attrs:{shape:[-1,MR(p)]}}),g=Fee(f,f.dtype,"all",n);let m;if(i){m=Cee({inputs:{x:g},backend:n,attrs:{shape:iU(h,u)}})}else m=Cee({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(d),m}};const Zee={kernelName:C_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r,s=a.shape.length,u=VR(o,a.shape);let l=u;const c=uU(l,s);let d=a;null!=c&&(d=_ee({inputs:{x:a},backend:n,attrs:{perm:c}}),l=cU(l.length,s)),sU("any",l,s);const[h,p]=oU(d.shape,l),f=Cee({inputs:{x:d},backend:n,attrs:{shape:[-1,MR(p)]}}),g=Fee(f,f.dtype,"any",n);let m;if(i){m=Cee({inputs:{x:g},backend:n,attrs:{shape:iU(h,u)}})}else m=Cee({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(d),m}};class Jee{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:a,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];const i="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(i," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class $ee{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,RR(e.length>2,()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2."));const a=e[e.length-1],o=Math.ceil(a/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");const i=this.outputShape,s=i.length,u=h7(s),l=_9("coords",s);let c,d;if(1===o){d=s+1;const e=h7(d);c="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(l.join(),", 0);\n        ++").concat(l[s-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(l.join(),", 0);\n        ++").concat(l[s-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(l.join(),", 0);\n        --").concat(l[s-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(l.join(),", 0);\n        --").concat(l[s-2],";")}else d=s,c="\n        ".concat(u," sourceLocR = coords;\n        ++").concat(l[s-1],";\n        ").concat(u," sourceLocG = coords;\n        ++").concat(l[s-2],";\n        ").concat(u," sourceLocA = coords;\n        --").concat(l[s-1],";\n        ").concat(u," sourceLocB = coords;\n        --").concat(l[s-2],";");const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],f=h.map(e=>"int "+e),g=_9("sourceLocR",d-1).concat("inIdx.r"),m=_9("sourceLocG",d-1).concat("inIdx.g"),y=_9("sourceLocB",d-1).concat("inIdx.b"),v=_9("sourceLocA",d-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(v.join(),")));"),w="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(m.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(v.join(),") : 0.)"),D=r?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(D,"\n      void main() {\n        ").concat(u," coords = getOutputCoords();\n        bool hasNextCol = ").concat(l[s-1]," < ").concat(i[s-1]-1,";\n        bool hasNextRow = ").concat(l[s-2]," < ").concat(i[s-2]-1,";\n        ").concat(c,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(x,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(b,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function ete(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);const i=yH(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new Jee(s,n,null==r),l=[t];null!=r&&l.push(r);const c=e.runWebGLProgram(u,l,"int32");if(1===c.shape[1])return c;const d=ete(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function tte(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const a=null!=r?r.shape:t.shape,o=yH(a[a.length-1]),i=new $ee(a,o,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(i,s,"int32");if(u.shape.length===t.shape.length){const r=tte(e,t,n,u);return e.disposeIntermediateTensorInfo(u),r}return u}function nte(e,t,n,r){const a=[n];if(sU("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!p_().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],o=e.texData.get(t.dataId);let i=t;null!==o&&o.isPacked&&(i=e.unpackTensor(t),n.push(i));const[s,u]=oU(i.shape,a),l=MR(u),c=Cee({inputs:{x:i},backend:e,attrs:{shape:[-1,l]}});n.push(c);const d=ete(e,c,r);n.push(d);const h=Cee({inputs:{x:d},backend:e,attrs:{shape:s}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),h}return tte(e,t,r)}const rte={kernelName:E_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o}=r;let i=VR(o,a.shape);const s=uU(i,a.shape.length);let u=a;const l=[];null!=s&&(u=_ee({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),i=cU(i.length,u.shape.length)),sU("argMax",[i[0]],u.shape.length);const c=nte(n,u,i[0],"max");return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}};const ate={kernelName:S_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o}=r;let i=VR(o,a.shape);const s=uU(i,a.shape.length);let u=a;const l=[];null!=s&&(u=_ee({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),i=cU(i.length,u.shape.length)),sU("argMin",[i[0]],u.shape.length);const c=nte(n,u,i[0],"min");return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}},ote=fee({opSnippet:U9+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),ite={kernelName:A_,backendName:"webgl",kernelFunc:ote},ste=fee({opSnippet:U9+"return log(x + sqrt(x * x + 1.0));"}),ute={kernelName:F_,backendName:"webgl",kernelFunc:ste},lte=fee({opSnippet:U9+"\n  return atan(x);\n"}),cte={kernelName:I_,backendName:"webgl",kernelFunc:lte},dte=gee({opSnippet:$9+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+tee+"\n  return result;\n"}),hte={kernelName:T_,backendName:"webgl",kernelFunc:dte},pte=fee({opSnippet:U9+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),fte={kernelName:N_,backendName:"webgl",kernelFunc:pte};class gte{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,i=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,g="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),m="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(i,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?a?g:m:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let v="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(v="avgValue / max(count, 1.0)");const b=4*Math.floor(o/4),x=o%4,w="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(c,";\n            wR += ").concat(u,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(b,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(w,"\n          }\n\n          int xC = xCCorner + ").concat(b,";\n          if (").concat(1===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(2===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(3===x,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(w,"\n          }\n        }\n        setOutput(").concat(v,");\n      }\n    ")}}class mte{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,i=e.strideDepth,s=e.strideHeight,u=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,g=e.padInfo.front,m=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let b="0.0";if(v||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(i,", ").concat(s,", ").concat(u,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(c,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?a?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let x="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / max(count, 1.0)");const w=4*Math.floor(o/4),D=o%4,k="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(i,", ").concat(s,", ").concat(u,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(k,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===D,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(k,"\n            } else if (").concat(2===D,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(k,"\n            } else if (").concat(3===D,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(k,"\n            }\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}}const yte={kernelName:O_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;X8(a,"avgPool");const{filterSize:o,strides:i,pad:s,dimRoundingMode:u}=r;RR(pW(i,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'"));const l=rW(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&BR(l.inShape,l.outShape))return ree({inputs:{x:a},backend:n});const c=new gte(l,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};const vte={kernelName:__,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:o,strides:i,pad:s,dimRoundingMode:u,dataFormat:l}=r,c=aW(a.shape,o,i,[1,1,1],s,u,l),d=new mte(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}};class bte{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(c,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(u,";\n            wC+= ").concat(i,") {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class xte{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=c-1-e.padInfo.front,f=d-1-e.padInfo.top,g=h-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(g,");\n      const float avgMultiplier = float(").concat(m,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(c,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(a,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(u,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const wte={kernelName:P_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:o}=t,i=o,{filterSize:s,strides:u,pad:l,dimRoundingMode:c}=r,d=aW(i.shape,s,u,[1,1,1],l,c),h=new xte(d);return n.runWebGLProgram(h,[a],i.dtype)}};const Dte={kernelName:R_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:o}=t,i=o;X8([a,o],"avgPoolGrad");const{filterSize:s,strides:u,pad:l}=r,c=rW(i.shape,s,u,1,l),d=new bte(c);return n.runWebGLProgram(d,[a],i.dtype)}};const kte={kernelName:M_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:o}=t,{transposeA:i,transposeB:s}=r;return Mee({a:a,b:o,transposeA:i,transposeB:s,backend:n})}};class Cte{constructor(e,t,n,r,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],bz(e,t),bz(e,n);let i="0.0";null!=r&&(bz(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="1.0";null!=a&&(bz(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(i,";\n        float scale = ").concat(s,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class Ete{constructor(e,t,n,r,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],bz(e,t),bz(e,n);let i="vec4(0.0)";null!=r&&(bz(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=a&&(bz(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(i,";\n        vec4 scale = ").concat(s,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const Ste={kernelName:FP,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a,mean:o,variance:i,offset:s,scale:u}=t;RR(o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),RR(null==s||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),RR(null==u||o.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=r;null==l&&(l=.001);const c=[a,o,i];let d=null;null!=s&&(d=s.shape,c.push(s));let h=null;null!=u&&(h=u.shape,c.push(u));const p=p_().getBool("WEBGL_PACK_NORMALIZATION")?new Ete(a.shape,o.shape,i.shape,d,h,l):new Cte(a.shape,o.shape,i.shape,d,h,l);return n.runWebGLProgram(p,c,c[0].dtype)}};class Ate{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=h7(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return Fte.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let r;const a=e.map((e,t)=>"sourceLoc.".concat(Fte[t]," = start[").concat(t,"] + coords.").concat(Fte[t],";"));r="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(a.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const Fte=["x","y","z","w","u","v"];class Ite{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=h7(this.rank),n=_9("coords",this.rank),r=_9("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),o="getChannel(getSource(".concat(r.join(),"), ").concat(a,")"),i="\n      result.x = ".concat(o,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(r[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),u=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map((e,t)=>"start[".concat(t,"]")).join(),");"):e.map((e,t)=>"".concat(r[t]," = ").concat(n[t]," + start[").concat(t,"];")).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(u,"\n        vec4 result = vec4(0.);\n        ").concat(i,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")}}function Nte(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:o,size:i}=r,[s,u]=Qz(a,o,i);if(Mz(a,s,u),0===MR(u))return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){const e=n.texData.get(a.dataId),t=v9(e.values,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,t)}const{isPacked:l}=n.texData.get(a.dataId),c=Xz(a.shape,s,u);if(l||!c){const e=p_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ite(u):new Ate(u),t=[s];return n.runWebGLProgram(e,[a],a.dtype,t)}return n.uploadToGPU(a.dataId),function(e,t,n,r){const a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;let s=Yz(t,e_(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};const u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(a,s,u,n)}const Tte={kernelName:VM,backendName:"webgl",kernelFunc:Nte},Ote={kernelName:B_,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:o,crops:i}=r;RR(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=o.reduce((e,t)=>e*t),u=bH(a.shape,o,s),l=xH(u.length,o.length),c=wH(a.shape,o,s),d=DH(i,o.length),h=kH(c,i,o.length),p=[],f=Cee({inputs:{x:a},backend:n,attrs:{shape:u}}),g=_ee({inputs:{x:f},backend:n,attrs:{perm:l}}),m=Cee({inputs:{x:g},backend:n,attrs:{shape:c}}),y=Nte({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return p.push(f),p.push(g),p.push(m),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}};const Rte={kernelName:L_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:o}=t,{size:i}=r,s=n.readSync(a.dataId),u=n.readSync(o.dataId),l=j7(s,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}};const _te={kernelName:j_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,o=p_().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=p_().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||1===i){const e=n.texData.get(r.dataId).values,t=n.texData.get(a.dataId).values,[o,i]=W7(r.shape,a.shape,e,t,r.dtype),s=n.makeTensorInfo(i,r.dtype);return n.texData.get(s.dataId).values=o,s}let s;return s=o?new nee("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,a.shape,!1):new eee("\n  return float(int(a.r) & int(b.r));\n",r.shape,a.shape),n.runWebGLProgram(s,[r,a],r.dtype)}};const Pte={kernelName:z_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,o=n.readSync(r.dataId),i=n.readSync(a.dataId),s=bz(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Mte=gee({opSnippet:"return float(a != b);",cpuKernelImpl:u9,dtype:"bool"}),Bte={kernelName:dM,backendName:"webgl",kernelFunc:Mte};function Lte(e){const{inputs:t,backend:n}=e,{input:r}=t;return ree({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const jte={kernelName:SM,backendName:"webgl",kernelFunc:Lte};const zte={kernelName:W_,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:a}=t,{x:o}=n,{dtype:i}=a;if("complex64"===i){if("complex64"===o.dtype)return ree({inputs:{x:o},backend:r});const t=kU(o.shape),n=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),a=oee({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),a}if("complex64"===o.dtype){const t=Lte({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!qR(o.dtype,i)){const e=ree({inputs:{x:o},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(r.shouldExecuteOnCPU([o])){const e=r.texData.get(o.dataId).values,[t,n,a]=U7(e,o.shape,o.dtype,i);return r.makeTensorInfo(t,n,a)}if("int32"===i)return function(e,t){const n=new W9(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){const e=r.makeTensorInfo([],"bool",GR("bool",1)),t=Mte({inputs:{a:o,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},Wte="return ceil(x);",Ute=fee({opSnippet:Wte,packedOpSnippet:Wte,cpuKernelImpl:V7}),Vte={kernelName:U_,backendName:"webgl",kernelFunc:Ute};class Hte{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class Gte{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const Kte={kernelName:V_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:o,clipValueMax:i}=r;let s;s=p_().getBool("WEBGL_PACK_CLIP")?new Gte(a.shape):new Hte(a.shape);const u=[[o],[i]];return n.runWebGLProgram(s,[a],a.dtype,u)}};class qte{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function Xte(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const Yte={kernelName:G_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),o=new qte(r.shape),i=[Xte(r,a.complexTensorInfos.real),Xte(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}};class Qte{constructor(e){this.outputShape=[],this.outputShape=cH(e,1),this.variableNames=e.map((e,t)=>"T".concat(t));const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let o=1;o<t.length;o++){const e=t[o-1];n.push("else if (yC < ".concat(t[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(e,"));"))}const r=t.length,a=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(a,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class Zte{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cH(e,t);const n=this.outputShape,r=n.length,a=h7(r),o=_9("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>"T".concat(t));const s=new Array(e.length-1);s[0]=e[0][t];for(let f=1;f<s.length;f++)s[f]=s[f-1]+e[f][t];const u=i[t],l=i.slice(-2),c=i.join();let d="if (".concat(u," < ").concat(s[0],") {\n        return getChannel(\n            getT0(").concat(c,"), vec2(").concat(l.join(),"));\n        }");for(let f=1;f<s.length;f++){const e=s[f-1];d+="\n        if (".concat(u," < ").concat(s[f],"  && ").concat(u," >= ").concat(s[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(Jte(i,u,e),"),\n            vec2(").concat(Jte(l,u,e),"));\n        }")}const h=s.length,p=s[s.length-1];d+="\n        return getChannel(\n          getT".concat(h,"(").concat(Jte(i,u,p),"),\n          vec2(").concat(Jte(l,u,p),"));"),this.userCode="\n      float getValue(".concat(i.map(e=>"int "+e),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(a," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[r-1]," = ").concat(o[r-1]," + 1;\n        if (").concat(o[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[r-2]," = ").concat(o[r-2]," + 1;\n        if (").concat(o[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[r-1]," = ").concat(o[r-1]," - 1;\n        if (").concat(o[r-2]," < ").concat(n[r-2]," &&\n            ").concat(o[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}}function Jte(e,t,n){const r=e.indexOf(t),a=e.map((e,t)=>t===r?"".concat(e," - ").concat(n):e);return a.join()}function $te(e){const{inputs:t,backend:n}=e,{input:r}=t;return ree({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const ene={kernelName:PP,backendName:"webgl",kernelFunc:$te};function tne(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map(e=>Lte({inputs:{input:e},backend:n})),a=e.map(e=>$te({inputs:{input:e},backend:n})),o=tne(r,t,n),i=tne(a,t,n),s=oee({inputs:{real:o,imag:i},backend:n});return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),a.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),s}let a=n.shouldExecuteOnCPU(e);if("string"===r&&(a=!0),a){const a=e.map(e=>{const r=MR(e.shape.slice(t));return Cee({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})}),o=a.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),i=cH(a.map(e=>e.shape),1),s=1===a[0].shape[0],u=H7(o,i,r,s),l=cH(e.map(e=>e.shape),t),c=n.makeTensorInfo(l,r,u);return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}const o=e.filter(e=>MR(e.shape)>0),i=p_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){const t=i?new W9(e[0].shape,K9):new q9(e[0].shape,K9);return n.runWebGLProgram(t,e,r)}const s=p_().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>s){const e=[];for(let a=0;a<o.length;a+=s){const r=o.slice(a,a+s);e.push(tne(r,t,n))}const r=tne(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(i){const e=new Zte(o.map(e=>e.shape),t);return n.runWebGLProgram(e,o,r)}const{tensors2D:u,outShape:l}=function(e,t,n){const r=cH(e.map(e=>e.shape),t),a=e.map(e=>Cee({inputs:{x:e},attrs:{shape:[-1,MR(e.shape.slice(t))]},backend:n}));return{tensors2D:a,outShape:r}}(o,t,n),c=new Qte(u.map(e=>e.shape)),d=n.runWebGLProgram(c,u,r);u.forEach(e=>n.disposeIntermediateTensorInfo(e));const h=Cee({inputs:{x:d},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(d),h}function nne(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,o=VR(a,t[0].shape)[0],i=t.map(e=>e.shape);lH(i,o);const s=cH(t.map(e=>e.shape),o);if(0===MR(s))return n.makeTensorInfo(s,t[0].dtype,[]);const u=t.filter(e=>MR(e.shape)>0);return 1===u.length?ree({inputs:{x:u[0]},backend:n}):tne(u,o,n)}const rne={kernelName:K_,backendName:"webgl",kernelFunc:nne};class ane{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,i=e.padInfo.left,s=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,g="channelsLast"===e.dataFormat,m=g?1:2,y=g?2:3,v=g?3:1;let b="",x="";n&&(b=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),x="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(v,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(m,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}}class one{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(a,", ").concat(o,", ").concat(i,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(c,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(u,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class ine{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=b7(this.outputShape.length);const o=e.padInfo.left,i=e.strideWidth,s=e.dilationWidth,u=e.filterHeight,l=e.filterWidth,c=l;let d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<l;g++)d+="\n           vec4 xTexelC".concat(2*g,";\n           int xTexelC").concat(2*g,"Ready;\n           vec4 xTexelC").concat(2*g+1,";\n           int xTexelC").concat(2*g+1,"Ready;\n           vec4 xC").concat(g,";");d+="\n     for (int r = 0; r < ".concat(u,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let g=0;g<l;g++)d+="\n           xTexelC".concat(2*g," = vec4(0.0);\n           xTexelC").concat(2*g,"Ready = 0;\n           xTexelC").concat(2*g+1," = vec4(0.0);\n           xTexelC").concat(2*g+1,"Ready = 0;\n           xC").concat(g," = vec4(0.0);");d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let g=0;g<(c+1)/2;g++){const t=2*g;if(d+="\n           xC = xCCorner + ".concat(t*s,";\n           "),1===i){if(t<l&&(o%2===1?(d+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),d+=1===s&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):d+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<l)){const e=o%2===0?TR(s):s;s%2===0&&o%2===1||s%2!==0&&o%2!==1?(d+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),d+=s>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):d+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<l&&(o%2===1?(d+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<l&&(d+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(d+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<l&&(d+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<l&&(d+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<l&&(d+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let h="",p="";n&&(h=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):a?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(h,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(d,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}}class sne{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=b7(this.outputShape.length);const{dataFormat:n}=t,r=Q8(),a="channelsLast"===n,o=a?1:2,i=a?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let u="";for(let l=0;l<=1;l++)for(let e=0;e<=1;e++)u+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(s,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(i,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(a,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(u,"\n\n        ").concat(r.output," = result;\n      }\n    ")}}function une(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function lne(e){let{x:t,filter:n,convInfo:r,backend:a,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:u=null}=e;const l=t.shape,c=a.texData.get(t.dataId),d=r.inChannels,h=l[0]*l[1]*l[2],p=r.outChannels,f="channelsLast"===r.dataFormat,g=!1;let m;const y=[];if(null!=i){const e=une(i.shape,f);null!=e&&(i=Cee({inputs:{x:i},backend:a,attrs:{shape:e}}),y.push(i))}if(null!=o){const e=une(o.shape,f);null!=e&&(o=Cee({inputs:{x:o},backend:a,attrs:{shape:e}}),y.push(o))}if(!((1===h||1===p)&&d>1e3)&&c.isPacked&&f&&null!=c.texture&&l[2]%2!==0&&BR(c.shape.slice(-3),l.slice(-3))){const e=l[0]*l[1]*(l[2]+1),d={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},h=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,RR(W8(c.shape,d.shape),()=>"packed reshape ".concat(c.shape," to ").concat(d.shape," isn't free"));const p=Cee({inputs:{x:n},backend:a,attrs:{shape:[1,r.inChannels,r.outChannels]}});y.push(p);const f=Mee({a:d,b:p,backend:a,transposeA:false,transposeB:g,bias:o,activation:u,preluActivationWeights:i,leakyreluAlpha:s}),v=a.texData.get(f.dataId);RR(v.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=h,v.shape=r.outShape,m=ree({inputs:{x:f},backend:a}),m.shape=r.outShape,y.push(f)}else{const e=r.outHeight*r.outWidth,l=Cee({inputs:{x:t},backend:a,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),c=Cee({inputs:{x:n},backend:a,attrs:{shape:[1,r.inChannels,r.outChannels]}}),d=Mee({a:f?l:c,b:f?c:l,transposeA:!f,transposeB:g,backend:a,bias:o,activation:u,preluActivationWeights:i,leakyreluAlpha:s});m=Cee({inputs:{x:d},backend:a,attrs:{shape:r.outShape}}),y.push(l),y.push(c),y.push(d)}for(const v of y)a.disposeIntermediateTensorInfo(v);return m}function cne(e){let{x:t,filter:n,convInfo:r,backend:a,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:u=null}=e;const{filterWidth:l,filterHeight:c,inChannels:d,outWidth:h,outHeight:p,dataFormat:f}=r,g="channelsLast"===f,m=l*c*d,y=p*h,v=[r.batchSize,m,y],b=[];if(null!=i){const e=une(i.shape,g);null!=e&&(i=Cee({inputs:{x:i},backend:a,attrs:{shape:e}}),b.push(i))}if(null!=o){const e=une(o.shape,g);null!=e&&(o=Cee({inputs:{x:o},backend:a,attrs:{shape:e}}),b.push(o))}const x=Cee({inputs:{x:n},backend:a,attrs:{shape:[1,m,MR(n.shape)/m]}});b.push(x);const w=new sne(v,r),D=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],k=a.runWebGLProgram(w,[t],"float32",D),C=Cee({inputs:{x:k},backend:a,attrs:{shape:v}});b.push(k),b.push(C);const E=null!=o,S=null!=i,A="leakyrelu"===u,F=u?mee(u,!0):null,I=new yee(g?C.shape:x.shape,g?x.shape:C.shape,g?[r.batchSize,y,r.outChannels]:[r.batchSize,r.outChannels,y],!0,!1,E,F,S,A),N=g?[C,x]:[x,C];if(o&&N.push(o),S&&N.push(i),A){const e=a.makeTensorInfo([],"float32",eL(s,"float32"));N.push(e),b.push(e)}const T=a.runWebGLProgram(I,N,"float32"),O=Cee({inputs:{x:T},backend:a,attrs:{shape:r.outShape}});b.push(T);for(const R of b)a.disposeIntermediateTensorInfo(R);return O}const dne={kernelName:q_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o}=t,{strides:i,pad:s,dataFormat:u,dilations:l,dimRoundingMode:c}=r,d=gW(u),h=oW(a.shape,o.shape,i,l,s,c,!1,d);let p;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&p_().getBool("WEBGL_EXP_CONV")){const e=new ine(h),t=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];p=n.runWebGLProgram(e,[a,o],"float32",t)}else if(p_().getBool("WEBGL_CONV_IM2COL"))p=cne({x:a,filter:o,convInfo:h,backend:n});else{const e=new ane(h);p=n.runWebGLProgram(e,[a,o],"float32")}else p=lne({x:a,filter:o,convInfo:h,backend:n});const f=Cee({inputs:{x:p},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class hne{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class pne{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=o?1:2,l=o?2:3,c=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(c,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(u,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class fne{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(a,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class gne{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(a,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const mne={kernelName:X_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:o}=t,{strides:i,pad:s,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,d=gW(u),h=oW(a.shape,c,i,1,s,l,!1,d),p=new hne(h);return n.runWebGLProgram(p,[a,o],"float32")}};class yne{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=b7(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,a=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const vne={kernelName:Y_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:o}=t,{inputShape:i,strides:s,pad:u,dataFormat:l,dimRoundingMode:c}=r,d=gW(l),h=oW(i,o.shape,s,1,u,c,!1,d);if(p_().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const e=[[h.strideHeight,h.strideWidth]],t=new yne(h);return n.runWebGLProgram(t,[a,o],"float32",e)}{const e=new pne(h);return n.runWebGLProgram(e,[a,o],"float32")}}};const bne={kernelName:Q_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o}=t,{strides:i,pad:s,dilations:u}=r,l=iW(a.shape,o.shape,i,u,s),c=new one(l);return n.runWebGLProgram(c,[a,o],"float32")}};const xne={kernelName:Z_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:o}=t,{strides:i,pad:s,filterShape:u}=r,l=iW(a.shape,u,i,1,s),c=new fne(l);return n.runWebGLProgram(c,[a,o],"float32")}};const wne={kernelName:J_,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:o}=t,{pad:i,strides:s,inputShape:u}=r,l=iW(u,o.shape,s,1,i),c=new gne(l);return n.runWebGLProgram(c,[a,o],"float32")}},Dne=fee({opSnippet:pee+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(tee,"\n  return result;\n")}),kne={kernelName:$_,backendName:"webgl",kernelFunc:Dne},Cne=fee({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Ene={kernelName:eP,backendName:"webgl",kernelFunc:Cne};class Sne{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,i,s,u]=e,[l]=t,[c,d]=n;this.outputShape=[l,c,d,u];const h="bilinear"===r?1:0,[p,f]=["".concat(i-1,".0"),"".concat(s-1,".0")],[g,m,y]=c>1?["".concat((i-1)/(c-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[v,b,x]=d>1?["".concat((s-1)/(d-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(g,");\n      const float width_ratio = float(").concat(v,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(o,") {\n          return;\n        }\n\n        float height_scale = ").concat(m,";\n        float width_scale = ").concat(b,";\n\n        float in_y = ").concat(y,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n        float in_x = ").concat(x,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(h," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const Ane={kernelName:rP,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:o,boxInd:i}=t,{cropSize:s,method:u,extrapolationValue:l}=r,c=new Sne(a.shape,o.shape,s,u,l);return n.runWebGLProgram(c,[a,o,i],"float32")}};var Fne;!function(e){e.Prod="*",e.Sum="+"}(Fne||(Fne={}));class Ine{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,o=this.op===Fne.Prod?"1.0":"0.0",i=n?o:"getX(".concat(Nne(a,"coords",this.op),")"),s=this.outputShape[this.outputShape.length-1];let u="",l="";n?(u=r?"end != ".concat(s-1):"end != 0",l=r?"end + 1":"end - 1"):(u=r?"end + pow2 < ".concat(s):"end >= pow2",l=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(h7(a)," coords = getOutputCoords();\n        int end = ").concat(Tne(a,"coords",this.op),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(u,") {\n          int idx = ").concat(l,";\n          ").concat(Tne(a,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(Nne(a,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function Nne(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function Tne(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function One(e,t,n,r,a,o){const i=t.shape.length,s=uU([r],i);let u=t;null!=s&&(u=_ee({inputs:{x:t},backend:n,attrs:{perm:s}}));const l=cU(1,i)[0];if(l!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));const c=u.shape[l];let d=ree({inputs:{x:u},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const t=new Ine(e,u.shape,!1,o),r=[[h]],a=d;d=n.runWebGLProgram(t,[d],d.dtype,r),n.disposeIntermediateTensorInfo(a)}if(a){const t=new Ine(e,u.shape,a,o),r=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=_ee({inputs:{x:d},backend:n,attrs:{perm:lU(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),e}return d}const Rne={kernelName:tP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,exclusive:i,reverse:s}=r;return One(Fne.Prod,a,n,o,i,s)}};const _ne={kernelName:nP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,exclusive:i,reverse:s}=r;return One(Fne.Sum,a,n,o,i,s)}};const Pne={kernelName:aP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:o}=t,{size:i,binaryOutput:s}=r;if(1===a.shape.length){const e=n.readSync(a.dataId),t=n.readSync(o.dataId),r=j7(e,t,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,r)}if(2===a.shape.length){const e=n.bufferSync(a),t=n.bufferSync(o),r=z7(e,t,i,s);return n.makeTensorInfo(r.shape,o.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};class Mne{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const Bne={kernelName:oP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:o,dataFormat:i}=r,s=a.shape[0],u=("NHWC"===i?a.shape[1]:a.shape[2])*o,l=("NHWC"===i?a.shape[2]:a.shape[3])*o,c=("NHWC"===i?a.shape[3]:a.shape[1])/(o*o),d=new Mne("NHWC"===i?[s,u,l,c]:[s,c,u,l],o,i);return n.runWebGLProgram(d,[a],a.dtype)}};class Lne{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=b7(this.outputShape.length);const o=e.filterHeight,i=e.filterWidth,s=e.outChannels/e.inChannels;let u="",l="";n&&(u=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),l="result = activation(result);");const c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(u,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(c,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")}}class jne{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=b7(this.outputShape.length);const o=e.outChannels/e.inChannels,i=e.padInfo.left,s=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,d=c;let h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<c;m++)h+="\n          vec4 xTexelC".concat(2*m,";\n          int xTexelC").concat(2*m,"Ready;\n          vec4 xTexelC").concat(2*m+1,";\n          int xTexelC").concat(2*m+1,"Ready;\n          vec4 xC").concat(m,";");h+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(let m=0;m<c;m++)h+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let m=0;m<(d+1)/2;m++){const e=2*m;if(h+="\n          xC = xCCorner + ".concat(e*u,";\n          "),1===s){if(e<c&&(i%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),h+=1===u&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<c)){const t=i%2===0?TR(u):u;u%2===0&&i%2===1||u%2!==0&&i%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),h+=u>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):h+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<c&&(i%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<c&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<c&&(h+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<c&&(h+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<c&&(h+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";let p="",f="";n&&(p=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");const g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(g,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}const zne={kernelName:iP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o}=t,{strides:i,pad:s,dilations:u,dimRoundingMode:l}=r;let c=u;null==c&&(c=[1,1]),RR(pW(i,c),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(c,"'"));const d=oW(a.shape,o.shape,i,c,s,l,!0);let h;h=p_().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new jne(d):new Lne(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[a,o],"float32",p)}};class Wne{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class Une{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const Vne={kernelName:sP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:o}=t,{strides:i,dilations:s,pad:u,dimRoundingMode:l,filterShape:c}=r,d=oW(a.shape,c,i,s,u,l,!0),h=new Wne(d);return n.runWebGLProgram(h,[a,o],"float32")}};const Hne={kernelName:uP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:o}=t,{strides:i,dilations:s,pad:u,dimRoundingMode:l,inputShape:c}=r,d=oW(c,o.shape,i,s,u,l,!0),h=new Une(d);return n.runWebGLProgram(h,[a,o],"float32")}};class Gne{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const Kne={kernelName:lP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],o=MR(r.shape),i=Cee({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new Gne(o),u=n.runWebGLProgram(s,[i],i.dtype),l=Cee({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),l}};class qne{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:o,filterHeight:i,filterWidth:s,dilationHeight:u,dilationWidth:l}=e,{top:c,left:d}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(a,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(c,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(i,"; h++) {\n          int hIn = hBeg + h * ").concat(u,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const Xne={kernelName:cP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o}=t,{strides:i,pad:s,dilations:u}=r,l=nW(a.shape,o.shape,i,s,"NHWC",u);let c;const d=new qne(l);c=n.runWebGLProgram(d,[a,o],"float32");const h=Cee({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),h}};const Yne={kernelName:gP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,o=t,{allDims:i,summedDims:s,idDims:u}=XH(a,o.length);QH(i.length,u,o);const{path:l,steps:c}=ZH(s,u),d=c.length;let h=null,p=i.length;const f=[];for(let g=0;g<d;++g){for(const e of c[g]){const{permutationIndices:t,expandDims:r}=YH(p,u[e]);let a;JH(t)?a=o[e]:(a=_ee({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(a));const i=a.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);BR(a.shape,i)||(a=Cee({inputs:{x:a},backend:n,attrs:{shape:i}}),f.push(a)),null===h?h=a:(h=Dee({inputs:{a:a,b:h},backend:n}),f.push(h))}g<d-1&&(l[g]>=0&&(h=Oee({inputs:{x:h},backend:n,attrs:{axis:l[g]-(i.length-p),keepDims:!1}}),f.push(h)),p--)}for(const g of f)g!==h&&n.disposeIntermediateTensorInfo(g);return h}},Qne=fee({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Zne={kernelName:mP,backendName:"webgl",kernelFunc:Qne},Jne={kernelName:yP,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:a}=t,o=p_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new nee("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new eee("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},$ne=gee({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:G7}),ere={kernelName:bP,backendName:"webgl",kernelFunc:$ne},tre=fee({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(NH,";\n  float a1 = ").concat(TH,";\n  float a2 = ").concat(OH,";\n  float a3 = ").concat(RH,";\n  float a4 = ").concat(_H,";\n  float a5 = ").concat(PH,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),nre={kernelName:vP,backendName:"webgl",kernelFunc:tre},rre=fee({opSnippet:pee+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:K7,dtype:"float32"}),are={kernelName:xP,backendName:"webgl",kernelFunc:rre};function ore(e){const{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:o}=t,i=o.shape.length,s=o.shape.slice();let u=a;return a<0&&(RR(-(i+1)<=a,()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")),u=i+a+1),s.splice(u,0,1),Cee({inputs:{x:o},backend:r,attrs:{shape:s}})}const ire={kernelName:wP,backendName:"webgl",kernelFunc:ore},sre="return exp(x) - 1.0;",ure=fee({opSnippet:sre,packedOpSnippet:sre,cpuKernelImpl:q7}),lre={kernelName:DP,backendName:"webgl",kernelFunc:ure};class cre{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const a=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),o=n?"".concat(r,".0"):"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(a,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(o,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function dre(e,t,n){const r=n.texData.get(e.dataId),a=MR(e.shape),o=e.shape[e.shape.length-1],i=Cee({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,u=new cre("real",s,t),l=new cre("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,c,"float32"),h=n.runWebGLProgram(l,c,"float32"),p=oee({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const f=Cee({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),f}const hre={kernelName:kP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return dre(r,!1,n)}};class pre{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function fre(e){const{backend:t,attrs:n}=e,{shape:r,value:a}=n;let{dtype:o}=n;if(o=o||ZR(a),"string"===o){const e=KR(o,MR(r));return e.fill(a),t.makeTensorInfo(r,o,e)}{const e=new pre(r,a),n=[[a]];return t.runWebGLProgram(e,[],o,n)}}const gre={kernelName:CP,backendName:"webgl",kernelFunc:fre};class mre{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const yre={kernelName:EP,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,a=n,o=new mre(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},vre="return floor(x);",bre=fee({opSnippet:vre,packedOpSnippet:vre,cpuKernelImpl:X7}),xre={kernelName:SP,backendName:"webgl",kernelFunc:bre},wre=gee({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Dre={kernelName:AP,backendName:"webgl",kernelFunc:wre};class kre{constructor(e){this.variableNames=["A"];const t=Q8(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class Cre{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=Q8(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const Ere={kernelName:CB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:a}=t;const{numChannels:o}=r,i="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,[u,l]=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[l,u],d=[l,u,o];if(s||i){const e=p_().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Sre&&e===Are||(Are=e,Sre=document.createElement("canvas").getContext("2d",{willReadFrequently:Are})),Sre.canvas.width=u,Sre.canvas.height=l,Sre.drawImage(a,0,0,u,l),a=Sre.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=v8.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);const p=p_().getBool("WEBGL_PACK")?new Cre(d):new kre(d),f=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),f}};let Sre,Are=p_().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const Fre={kernelName:AB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o,bias:i,preluActivationWeights:s}=t,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,g=gW(c),m=oW(a.shape,o.shape,u,d,l,h,!1,g);let y;const v=[],b=null!=i,x=null!=s,w="leakyrelu"===p,D=()=>{const e=[a,o],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=Cee({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(b&&e.push(t(i,c)),x&&e.push(t(s,c)),w){const t=n.makeTensorInfo([],"float32",eL(f,"float32"));e.push(t),v.push(t)}return e};if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(m.strideWidth<=2&&"channelsLast"===g&&p_().getBool("WEBGL_EXP_CONV")){const e=p?mee(p,!0):null,t=new ine(m,b,e,x,w),r=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],a=D();y=n.runWebGLProgram(t,a,"float32",r)}else if(p_().getBool("WEBGL_CONV_IM2COL"))y=cne({x:a,filter:o,convInfo:m,backend:n,bias:i,activation:p,preluActivationWeights:s,leakyreluAlpha:f});else{const e=p?mee(p,!1):null,t=new ane(m,b,e,x,w),r=D();y=n.runWebGLProgram(t,r,"float32")}else y=lne({x:a,filter:o,convInfo:m,backend:n,bias:i,activation:p,preluActivationWeights:s,leakyreluAlpha:f});const k=Cee({inputs:{x:y},backend:n,attrs:{shape:m.outShape}});return v.push(y),v.forEach(e=>n.disposeIntermediateTensorInfo(e)),k}};const Ire={kernelName:FB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:o,bias:i,preluActivationWeights:s}=t,{strides:u,pad:l,dilations:c,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,f=[];let g=c;null==g&&(g=[1,1]),RR(pW(u,g),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(g,"'"));const m=oW(a.shape,o.shape,u,g,l,d,!0),y=p_().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,v=h?mee(h,y):null,b=[a,o],x=null!=i,w=null!=s,D="leakyrelu"===h;if(x&&b.push(i),w&&b.push(s),D){const e=n.makeTensorInfo([],"float32",eL(p,"float32"));b.push(e),f.push(e)}let k;k=y?new jne(m,x,v,w,D):new Lne(m,x,v,w,D);const C=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],E=n.runWebGLProgram(k,b,"float32",C);return f.forEach(e=>n.disposeIntermediateTensorInfo(e)),E}};class Nre{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const a=h7(n.length);let o="\n    int index;";for(let i=0;i<this.sliceDim;i++)o+="\n          index = round(getIndices(coords[0], ".concat(i,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[i],";\n          flattenIndex += index * ").concat(this.strides[i],";");this.userCode="\n         void main() {\n          ".concat(a," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const Tre={kernelName:NP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,o=a.shape,i=o[o.length-1],s=MR(r.shape),[u,l,c,d]=CH(r,a),h=Cee({inputs:{x:a},backend:n,attrs:{shape:[l,i]}}),p=Cee({inputs:{x:r},backend:n,attrs:{shape:[MR(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){const e=n.readSync(a.dataId),t=n.bufferSync(r),o=Y7(e,t,r.dtype,l,i,c,d,r.shape,s);return n.makeTensorInfo(u,r.dtype,o.values)}const f=new Nre(i,d,[l,c],r.shape),g=n.runWebGLProgram(f,[p,h],p.dtype),m=Cee({inputs:{x:g},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}};class Ore{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=h7(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push("".concat(t[r]));return n.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}}function Rre(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:o}=t,{axis:i,batchDims:s}=r,u=VR(i,a.shape)[0];if(p_().get("DEBUG")){const e=n.readSync(o.dataId),t=a.shape[u];for(let n=0;n<e.length;++n){const r=e[n];RR(r<=t-1&&r>=0,()=>"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]"))}}const l=gG(a,o,u,s),c=MR(o.shape),d=[],h=Cee({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=Cee({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});d.push(h),d.push(p);const f=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){const e=n.bufferSync(p),t=n.bufferSync(h),r=Q7(t,e,f);return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(l.outputShape,r.dtype,r.values)}const g=new Ore(h.shape,f),m=n.runWebGLProgram(g,[h,p],h.dtype);d.push(m);const y=Cee({inputs:{x:m},backend:n,attrs:{shape:l.outputShape}});return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}const _re={kernelName:IP,backendName:"webgl",kernelFunc:Rre},Pre=gee({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:Z7,dtype:"bool"}),Mre={kernelName:TP,backendName:"webgl",kernelFunc:Pre},Bre=gee({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:J7}),Lre={kernelName:OP,backendName:"webgl",kernelFunc:Bre};const jre={kernelName:_P,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return dre(r,!0,n)}},zre=fee({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Wre={kernelName:MP,backendName:"webgl",kernelFunc:zre},Ure=fee({opSnippet:"return float(isinf(x));",dtype:"bool"}),Vre={kernelName:BP,backendName:"webgl",kernelFunc:Ure},Hre=fee({opSnippet:"return float(isnan(x));",dtype:"bool"}),Gre={kernelName:LP,backendName:"webgl",kernelFunc:Hre},Kre=gee({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:$7,dtype:"bool"}),qre={kernelName:zP,backendName:"webgl",kernelFunc:Kre},Xre=gee({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:e9,dtype:"bool"}),Yre={kernelName:WP,backendName:"webgl",kernelFunc:Xre};const Qre={kernelName:UP,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:o}=n,i=t9(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},Zre=fee({opSnippet:pee+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:n9}),Jre={kernelName:VP,backendName:"webgl",kernelFunc:Zre},$re=fee({opSnippet:pee+"\n  return log(1.0 + x);\n"}),eae={kernelName:HP,backendName:"webgl",kernelFunc:$re},tae=gee({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),nae={kernelName:GP,backendName:"webgl",kernelFunc:tae},rae=fee({opSnippet:"return float(!(x >= 1.0));"}),aae={kernelName:KP,backendName:"webgl",kernelFunc:rae},oae=gee({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),iae={kernelName:qP,backendName:"webgl",kernelFunc:oae};class sae{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];const o=t,i=e[3]-1;let s;this.outputShape=e;const u="float(".concat(n,") + float(").concat(r,") * sum");s=.5===a?"inversesqrt(".concat(u,")"):1===a?"1.0/(".concat(u,")"):"exp(log(".concat(u,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(o,"; j <= ").concat(o,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(i,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(s,";\n        setOutput(val);\n      }\n    ")}}class uae{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,i=e[3]-1;let s;this.outputShape=e;const u="float(".concat(n,") + float(").concat(r,") * sum");s=.5===a?"inversesqrt(".concat(u,")"):1===a?"1.0/(".concat(u,")"):"exp(log(".concat(u,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(o,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(o,"; j <= ").concat(o,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(i,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(s,";\n        setOutput(result);\n      }\n    ")}}const lae={kernelName:XP,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:o,bias:i,alpha:s,beta:u}=r,l=p_().getBool("WEBGL_PACK_NORMALIZATION")?new uae(a.shape,o,i,s,u):new sae(a.shape,o,i,s,u);return n.runWebGLProgram(l,[a],a.dtype)}};class cae{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(a,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(a,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const dae={kernelName:YP,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a,y:o,dy:i}=t,{depthRadius:s,bias:u,alpha:l,beta:c}=r,d=new cae(a.shape,s,u,l,c);return n.runWebGLProgram(d,[a,o,i],a.dtype)}};function hae(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:o,keepDims:i}=r,s=a.shape.length,u=VR(o,a.shape);let l=u;const c=uU(l,s),d=null!=c,h=n.shouldExecuteOnCPU([a]);let p=a;if(d){if(h){const e=n.texData.get(p.dataId).values,t=new Array(s);for(let n=0;n<t.length;n++)t[n]=a.shape[c[n]];const r=T9(e,a.shape,a.dtype,c,t);p=n.makeTensorInfo(t,a.dtype);n.texData.get(p.dataId).values=r}else p=Tee(a,c,n);l=cU(l.length,s)}sU("max",l,s);const[f,g]=oU(p.shape,l);let m,y=f;if(i&&(y=iU(f,u)),h){const e=n.texData.get(p.dataId).values,t=r9(e,MR(g),y,a.dtype);m=n.makeTensorInfo(y,a.dtype);n.texData.get(m.dataId).values=t}else m=function(e,t,n,r){const a=MR(t),o=Cee({inputs:{x:e},attrs:{shape:[MR(e.shape)/a,a]},backend:r}),i=Fee(o,e.dtype,"max",r),s=Cee({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(p,g,y,n);return d&&n.disposeIntermediateTensorInfo(p),m}const pae={kernelName:QP,backendName:"webgl",kernelFunc:hae},fae=gee({opSnippet:$9+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+tee+"\n  return result;\n",cpuKernelImpl:a9}),gae={kernelName:ZP,backendName:"webgl",kernelFunc:fae};const mae={kernelName:JP,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;X8(a,"maxPool");const{filterSize:o,strides:i,pad:s,dimRoundingMode:u}=r;RR(pW(i,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'"));const l=rW(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&BR(l.inShape,l.outShape))return ree({inputs:{x:a},backend:n});const c=new gte(l,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};const yae={kernelName:eM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:o,strides:i,pad:s,dataFormat:u,dimRoundingMode:l}=r,c=aW(a.shape,o,i,[1,1,1],s,l,u),d=new mte(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}};class vae{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,i=a-1-e.padInfo.top,s=o-1-e.padInfo.left,u=a*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(a,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(u," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class bae{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=u-1-e.padInfo.top,h=l-1-e.padInfo.left,p=s*u*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(c,", ").concat(d,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(a,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(i,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(u," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const xae={kernelName:tM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:o}=t,i=o,{filterSize:s,strides:u,pad:l,dimRoundingMode:c}=r,d=aW(i.shape,s,u,[1,1,1],l,c),h=new mte(d,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),f=new bae(d),g=n.runWebGLProgram(f,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),g}};const wae={kernelName:$P,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:o,output:i}=t,s=o;X8([o,i],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:d}=r,h=rW(s.shape,u,l,1,c,d),p=new gte(h,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),g=new vae(h),m=n.runWebGLProgram(g,[a,f],s.dtype);return n.disposeIntermediateTensorInfo(f),m}};const Dae={kernelName:nM,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:u}=n,l=r;RR(4===a.shape.length,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,"."));const c=[1,1];RR(pW(i,c),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(c,"'"));const d=rW(a.shape,o,i,c,s),[h,p]=function(e,t,n,r){let a=new gte(n,"max",!1);const o=r.runWebGLProgram(a,[e],"float32");return a=new gte(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,l);return[h,p]}};const kae={kernelName:rM,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,{keepDims:o,axis:i}=n,s=r,u=a.shape.length,l=VR(i,a.shape);let c=l;const d=uU(c,u),h=null!=d,p=s.shouldExecuteOnCPU([a]),f=[];let g=a;if(h){if(p){const e=s.texData.get(g.dataId).values,t=new Array(u);for(let r=0;r<t.length;r++)t[r]=a.shape[d[r]];const n=T9(e,a.shape,a.dtype,d,t);g=s.makeTensorInfo(t,a.dtype);s.texData.get(g.dataId).values=n}else g=Tee(a,d,s);f.push(g),c=cU(c.length,u)}sU("sum",c,u);const[m,y]=oU(g.shape,c);let v=m;o&&(v=iU(m,l));const b=function(e,t,n,r){const a=MR(t),o=Cee({inputs:{x:e},attrs:{shape:[MR(e.shape)/a,a]},backend:r}),i=Fee(o,"float32","mean",r),s=Cee({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(g,y,v,s);for(const x of f)s.disposeIntermediateTensorInfo(x);return b}};const Cae={kernelName:aM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r,s=a.shape.length,u=VR(o,a.shape);let l=u;const c=uU(l,s);let d=a;null!=c&&(d=_ee({inputs:{x:a},backend:n,attrs:{perm:c}}),l=cU(l.length,a.shape.length)),sU("min",l,s);const[h,p]=oU(d.shape,l),f=Cee({inputs:{x:d},backend:n,attrs:{shape:[-1,MR(p)]}}),g=Fee(f,f.dtype,"min",n);let m;if(i){m=Cee({inputs:{x:g},backend:n,attrs:{shape:iU(h,u)}})}else m=Cee({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(d),m}},Eae=gee({opSnippet:$9+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+tee+"\n  return result;\n",cpuKernelImpl:o9}),Sae={kernelName:oM,backendName:"webgl",kernelFunc:Eae};class Aae{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=h7(r),o=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),u="reflect"===n?0:1;this.userCode=1!==r?"\n      ".concat(a," start = ").concat(a,"(").concat(o,");\n      ").concat(a," end = ").concat(a,"(").concat(i,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(u,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(u,";\n          }\n        }\n        ").concat(a," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(u,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(u,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class Fae{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=h7(r),o=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),s=_9("rc",r),u=_9("source",r),l="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),c=1===r?"source":"vec2(".concat(u.slice(-2).join(),")"),d="reflect"===n?0:1;let h="";if(1===r){const e="\n        ".concat(a," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");h="\n        ".concat(a," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(u.join(),"), ").concat(c,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(l,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(u.join(),"), ").concat(c,");\n        }\n      ")}else{const e="\n        ".concat(a," source = rc;\n        ").concat(a," lt = ").concat(a,"(lessThan(source, start));\n        ").concat(a," gte = ").concat(a,"(greaterThanEqual(source, end));\n        ").concat(a," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");h="\n        ".concat(a," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(u.join(),"), ").concat(c,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(l,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(u.join(),"), ").concat(c,");\n        }\n        rc = outputLoc;\n        ").concat(s[r-2]," += 1;\n        if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(u.join(),"), ").concat(c,");\n          ").concat(s[r-1]," += 1;\n          if(").concat(l,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(u.join(),"), ").concat(c,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(o,");\n      const ").concat(a," end = ").concat(a,"(").concat(i,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}}const Iae={kernelName:iM,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:a}=t,{paddings:o,mode:i}=r,s=p_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Fae(a.shape,o,i):new Aae(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},Nae=gee({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+tee+"\n  return result;\n"}),Tae={kernelName:sM,backendName:"webgl",kernelFunc:Nae};class Oae{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const Rae=gee({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),_ae={kernelName:fP,backendName:"webgl",kernelFunc:Rae},Pae="return a - b;",Mae=gee({opSnippet:Pae,packedOpSnippet:Pae,supportsComplex:!0,cpuKernelImpl:F9}),Bae={kernelName:hB,backendName:"webgl",kernelFunc:Mae};function Lae(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:o}=r,i=VR([o],a.shape),s=hae({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),u=iU(s.shape,i),l=Cee({inputs:{x:s},backend:n,attrs:{shape:u}}),c=Mae({inputs:{a:a,b:l},backend:n}),d=rre({inputs:{x:c},backend:n}),h=Oee({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),p=Cee({inputs:{x:h},backend:n,attrs:{shape:u}}),f=Rae({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}const jae={kernelName:$M,backendName:"webgl",kernelFunc:Lae};const zae={kernelName:uM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:o,seed:i,normalized:s}=r,u=s?a:Lae({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],d=new Oae(l,c,o),h=[[i]],p=n.runWebGLProgram(d,[u],"int32",h);return s||n.disposeIntermediateTensorInfo(u),p}},Wae=U9+"\n  return -x;\n";const Uae={kernelName:cM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,a]=s9(e.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,t)}let a;return a=p_().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new q9(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new W9(r.shape,Wae),n.runWebGLProgram(a,[r],r.dtype)}},Vae=NV;const Hae={kernelName:hM,backendName:"webgl",kernelFunc:function(e){IB("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:u}=r,l=n.readSync(a.dataId),c=n.readSync(o.dataId),{selectedIndices:d}=Vae(l,c,i,s,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Gae=TV;const Kae={kernelName:pM,backendName:"webgl",kernelFunc:function(e){IB("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(a.dataId),d=n.readSync(o.dataId),{selectedIndices:h,validOutputs:p}=Gae(c,d,i,s,u,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},qae=OV;const Xae={kernelName:fM,backendName:"webgl",kernelFunc:function(e){IB("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:o}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(a.dataId),d=n.readSync(o.dataId),h=i,p=s,f=u,g=l,{selectedIndices:m,selectedScores:y}=qae(c,d,h,p,f,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class Yae{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const Qae={kernelName:mM,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:o,depth:i,onValue:s,offValue:u}=r,l=MR(a.shape),c=new Yae(l,i,s,u),d=Cee({inputs:{x:a},backend:n,attrs:{shape:[l]}}),h=n.runWebGLProgram(c,[d],o);n.disposeIntermediateTensorInfo(d);const p=Cee({inputs:{x:h},backend:n,attrs:{shape:[...a.shape,i]}});return n.disposeIntermediateTensorInfo(h),p}};function Zae(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=Lte({inputs:{input:r},backend:n}),t=Zae({inputs:{x:e},backend:n}),a=$te({inputs:{input:r},backend:n}),o=Zae({inputs:{x:a},backend:n}),i=oee({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),i}return fre({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const Jae={kernelName:DB,backendName:"webgl",kernelFunc:Zae};const $ae={kernelName:gM,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){const t=Lte({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),o=$te({inputs:{input:a},backend:r}),i=Zae({inputs:{x:o},backend:r}),s=oee({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}return fre({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};const eoe={kernelName:yM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return ore({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const o=t[0].shape,i=t[0].dtype;t.forEach(e=>{_R(o,e.shape,"All tensors passed to stack must have matching shapes"),RR(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],u=t.map(e=>{const t=ore({inputs:{input:e},backend:n,attrs:{dim:a}});return s.push(t),t}),l=nne({inputs:u,backend:n,attrs:{axis:a}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}};class toe{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=h7(r),o=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(a," start = ").concat(a,"(").concat(o,");\n      ").concat(a," end = ").concat(a,"(").concat(i,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(a," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class noe{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,a=h7(r),o=t.map(e=>e[0]).join(","),i=t.map((t,n)=>t[0]+e[n]).join(","),s=_9("rc",r),u=_9("source",r),l="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),c=1===r?"source":"vec2(".concat(u.slice(-2).join(),")"),d=["".concat(a," rc = outputLoc;"),"".concat(s[r-1]," += 1;\n       if(").concat(l,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(s[r-2]," += 1;\n       if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(s[r-1]," += 1;\n         if(").concat(l,") {")],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,g=1===r?2:4;f<g;f++)p+="\n        ".concat(d[f],"\n        if (").concat(h,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(a," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(u.join(),"), ").concat(c,");\n        }\n      ");p+=1===r?"} ":"}}",this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(o,");\n      const ").concat(a," end = ").concat(a,"(").concat(i,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const roe=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:o,constantValue:i}=r;if(0===MR(a.shape)){return fre({backend:n,attrs:{shape:o.map((e,t)=>e[0]+a.shape[t]+e[1]),value:i,dtype:a.dtype}})}const s=p_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new noe(a.shape,o,i):new toe(a.shape,o,i),u=[[i]];return n.runWebGLProgram(s,[a],a.dtype,u)},aoe={kernelName:vM,backendName:"webgl",kernelFunc:roe},ooe=gee({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+tee+"\n  return result;\n"}),ioe={kernelName:bM,backendName:"webgl",kernelFunc:ooe};const soe={kernelName:wM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:o,keepDims:i}=r,s=a.shape.length,u=[],l=VR(o,a.shape);let c=l;const d=uU(c,s);let h,p=a;if(null!=d&&(p=_ee({inputs:{x:a},backend:n,attrs:{perm:d}}),c=cU(c.length,s),u.push(p)),sU("prod",c,s),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:a}=l9(p.shape,p.dtype,e,c);h=n.makeTensorInfo(r,a,t)}else{const[e,t]=oU(p.shape,c),r=MR(t),o=Cee({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),i=Fee(o,IL(a.dtype),"prod",n);h=Cee({inputs:{x:i},backend:n,attrs:{shape:e}}),u.push(o),u.push(i)}if(i){u.push(h);const e=iU(h.shape,l);h=Cee({inputs:{x:h},backend:n,attrs:{shape:e}})}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}};const uoe={kernelName:DM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:o,indices:i}=t,{outputRaggedRank:s}=r,u=a.map(e=>n.readSync(e.dataId)),l=a.map(e=>e.shape),c=n.readSync(o.dataId),d=n.readSync(i.dataId),[h,p,f]=c9(u,l,c,o.shape,o.dtype,d,i.shape,s),g=h.map(e=>n.makeTensorInfo([e.length],"int32",e)),m=n.makeTensorInfo(f,o.dtype,p);return g.concat([m])}};const loe={kernelName:kM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:o}=t,i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),[l,c]=d9(i,r.shape,r.dtype,s,a.shape,u,o.shape);return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([c.length],r.dtype,c)]}};const coe={kernelName:CM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:a,values:o,defaultValue:i,rowPartitionTensors:s}=t,{rowPartitionTypes:u}=r,l=n.readSync(a.dataId),c=n.readSync(o.dataId),d=n.readSync(i.dataId),h=s.map(e=>n.readSync(e.dataId)),p=s.map(e=>e.shape),[f,g]=h9(l,a.shape,c,o.shape,o.dtype,d,i.shape,h,p,u);return n.makeTensorInfo(f,o.dtype,g)}},doe=e=>{const{backend:t,attrs:n}=e,{start:r,stop:a,step:o,dtype:i}=n,s=p9(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},hoe={kernelName:EM,backendName:"webgl",kernelFunc:doe},poe=fee({opSnippet:"return 1.0 / x;"}),foe={kernelName:AM,backendName:"webgl",kernelFunc:poe},goe=fee({opSnippet:U9+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),moe={kernelName:FM,backendName:"webgl",kernelFunc:goe},yoe=fee({opSnippet:U9+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),voe={kernelName:_M,backendName:"webgl",kernelFunc:yoe};class boe{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[o,i,s,u]=e;this.outputShape=[o,t,n,u];const l=[r&&t>1?i-1:i,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/c[0],",\n          ").concat(l[1]/c[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class xoe{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,i,s,u]=e;this.outputShape=[o,t,n,u];const l=[r&&t>1?i-1:i,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let d;d=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/c[0],",\n          ").concat(l[1]/c[1],",\n          ").concat(l[1]/c[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(u-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const woe={kernelName:OM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:o,halfPixelCenters:i,size:s}=r,[u,l]=s,c=p_().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new xoe(a.shape,u,l,o,i):new boe(a.shape,u,l,o,i);return n.runWebGLProgram(c,[a],"float32")}};class Doe{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,o,i]=e,s=[n&&o>1?r-1:r,n&&i>1?a-1:a],u=[n&&o>1?o-1:o,n&&i>1?i-1:i],l=s[0]/u[0],c=s[1]/u[1],d=1/l,h=1/c,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(c,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(a-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const koe={kernelName:RM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:o}=t,{alignCorners:i}=r,s=new Doe(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}};class Coe{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[o,i,s,u]=e;this.outputShape=[o,t,n,u];const l=[r&&t>1?i-1:i,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/c[0],",\n          ").concat(l[1]/c[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class Eoe{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,i,s,u]=e;this.outputShape=[o,t,n,u];const l=[r&&t>1?i-1:i,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";let h;h=a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/c[0],",\n          ").concat(l[1]/c[1],",\n          ").concat(l[1]/c[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(u-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const Soe={kernelName:NM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:o,halfPixelCenters:i,size:s}=r,[u,l]=s,c=p_().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Eoe(a.shape,u,l,o,i):new Coe(a.shape,u,l,o,i);return n.runWebGLProgram(c,[a],a.dtype)}};class Aoe{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,o,i]=e,s=[n&&o>1?r-1:r,n&&i>1?a-1:a],u=[n&&o>1?o-1:o,n&&i>1?i-1:i],l=s[0]/u[0],c=s[1]/u[1],d=1/l,h=1/c,p=2*Math.ceil(d)+2,f=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(c,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(s[0],") *\n                (float(dyR) / float(").concat(u[0],"));\n\n            float sourceFracCol =\n                float(").concat(s[1],") *\n                  (float(dyC) / float(").concat(u[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const Foe={kernelName:TM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:o}=t,{alignCorners:i}=r,s=new Aoe(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}};class Ioe{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const r=e.map((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(r)).join(","),a=h7(n);this.userCode="\n      void main() {\n        ".concat(a," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}class Noe{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const r=_9("rc",n),a="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),o="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),i=h7(n);function s(n){const r=e.map((r,a)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(r[n]," - 1"):"".concat(r[n])}(a,n)),a=r.join(","),o=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(o,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(a,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(i," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return s(e)}(r.slice()),";\n          if(").concat(a,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            if(").concat(a,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const Toe={kernelName:PM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:o}=r,i=a.shape.length,s=VR(o,a.shape);if(0===i)return ree({inputs:{x:a},backend:n});const u=p_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Noe(a.shape,s):new Ioe(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}};class Ooe{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let a="";a="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(a,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const Roe={kernelName:EB,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:a}=t,{radians:o,fillValue:i,center:s}=n,u=r,l=new Ooe(a.shape,i),[c,d]=vH(s,a.shape[1],a.shape[2]),h=[[c,d,Math.sin(o),Math.cos(o)]];return u.runWebGLProgram(l,[a],a.dtype,h)}},_oe=fee({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Poe={kernelName:MM,backendName:"webgl",kernelFunc:_oe},Moe=fee({opSnippet:"return inversesqrt(x);",cpuKernelImpl:f9}),Boe={kernelName:BM,backendName:"webgl",kernelFunc:Moe};class Loe{constructor(e,t,n,r,a,o){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=h7(a.length),u=h7(o.length);let l="";1===n?l="i":2===n&&(l="i, j");const c="getIndices(".concat(l,")");let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h="getUpdates(".concat(d,")");let p="";i&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),g=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(a,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(c,");\n              flattenedIndex += index * ").concat(g,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class joe{constructor(e,t,n,r,a,o){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const s=h7(a.length),u=h7(o.length);let l="";1===n?l="i":2===n&&(l="i, j");const c="getIndices(".concat(l,")");let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h="getUpdates(".concat(d,")");let p="";i&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),g=t>1?"strides[j]":"strides",m=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(a,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(c,");\n              flattenedIndex += index.xz * ").concat(g,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(m,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(h,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const zoe={kernelName:LM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:o}=t,{shape:i}=r,{sliceRank:s,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=AH(0,a,i),h=[d/l,l];if(0===d)return n.makeTensorInfo(i,a.dtype);const p=Cee({inputs:{x:a},backend:n,attrs:{shape:[u,s]}}),f=Cee({inputs:{x:o},backend:n,attrs:{shape:[u,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;m=p_().getBool("WEBGL_PACK")?new joe(u,s,p.shape.length,f.shape.length,c,h):new Loe(u,s,p.shape.length,f.shape.length,c,h);const y=n.runWebGLProgram(m,[f,p,g],f.dtype),v=Cee({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),v}};class Woe{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const a="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),o=2===p_().getNumber("WEBGL_VERSION")?"while (left < right) {":a,i="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(i," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const Uoe={kernelName:zM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:o}=t,{side:i}=r,s=new Woe(a.shape[0],a.shape[1],o.shape[1],i),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,o],"int32",u)}};class Voe{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)a="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=[];for(let r=0;r<t.length;r++)i.push("".concat(n[r])),r<e&&o.push("".concat(n[r]));r=o.join(),a=i.join()}const o=h7(n);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(a,"));\n        } else {\n          setOutput(getB(").concat(a,"));\n        }\n      }\n    ")}}const Hoe={kernelName:WM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:o}=t,i=new Voe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],FL(a.dtype,o.dtype))}},Goe=fee({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(FH,";\n  float scale = ").concat(IH,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),Koe={kernelName:UM,backendName:"webgl",kernelFunc:Goe},qoe=fee({opSnippet:pee+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:m9}),Xoe={kernelName:qM,backendName:"webgl",kernelFunc:qoe},Yoe=fee({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Qoe={kernelName:KM,backendName:"webgl",kernelFunc:Yoe},Zoe=fee({opSnippet:pee+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(tee,"\n  return result;\n")}),Joe={kernelName:HM,backendName:"webgl",kernelFunc:Zoe},$oe=fee({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),eie={kernelName:GM,backendName:"webgl",kernelFunc:$oe},tie=fee({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),nie={kernelName:XM,backendName:"webgl",kernelFunc:tie},rie={kernelName:ZM,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:o,paddings:i}=r;RR(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=o.reduce((e,t)=>e*t),u=[[0,0]];u.push(...i);for(let y=1+o.length;y<a.shape.length;++y)u.push([0,0]);const l=[],c=roe({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=bH(c.shape,o,s,!1),h=xH(d.length,o.length,!1),p=wH(c.shape,o,s,!1),f=Cee({inputs:{x:c},backend:n,attrs:{shape:d}}),g=_ee({inputs:{x:f},backend:n,attrs:{perm:h}}),m=Cee({inputs:{x:g},backend:n,attrs:{shape:p}});return l.push(c),l.push(f),l.push(g),l.forEach(e=>n.disposeIntermediateTensorInfo(e)),m}};const aie={kernelName:eB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:o,defaultValue:i}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const s=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(o.dataId),c=n.readSync(i.dataId)[0],[d,h,p,f,g]=b9(s,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};const oie={kernelName:tB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:o}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const i=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(o.dataId)),[l,c,d]=x9(s,r.shape,r.dtype,i,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}};const iie={kernelName:nB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));const i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),[l,c]=w9(i,r.shape,r.dtype,s,u,!0);return n.makeTensorInfo(c,r.dtype,l)}};const sie={kernelName:rB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));const i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),[l,c]=w9(i,r.shape,r.dtype,s,u);return n.makeTensorInfo(c,r.dtype,l)}};const uie={kernelName:aB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:o,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:d,outputSize:h}=AH(0,a,s),p=!1;if("string"===o.dtype){const e=n.bufferSync(a),t=n.bufferSync(o),r=aL(n.readSync(i.dataId)[0]),f=g9(e,t,s,h,c,l,u,d,r,p);return n.makeTensorInfo(s,f.dtype,f.values)}const f=new Loe(l,u,a.shape.length,o.shape.length,d,[h,1],p),g=n.runWebGLProgram(f,[o,a,i],o.dtype),m=Cee({inputs:{x:g},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(g),m}};const lie={kernelName:JM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:o,axis:i}=r,s=VR(i,a.shape)[0],u=eG(a,o,s),l=a.shape.length,c=new Array(l).fill(0),d=a.shape.slice();return u.map(e=>{const t=[...d];t[s]=e;const r=Nte({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r})}},cie="return sqrt(x);",die=fee({opSnippet:cie,packedOpSnippet:cie,cpuKernelImpl:D9}),hie={kernelName:YM,backendName:"webgl",kernelFunc:die},pie={kernelName:iB,backendName:"webgl",kernelFunc:fee({opSnippet:"return x * x;"})},fie="return (a - b) * (a - b);",gie=gee({opSnippet:fie,packedOpSnippet:fie}),mie={kernelName:oB,backendName:"webgl",kernelFunc:gie};const yie={kernelName:sB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");const o=mG(n.readSync(a.dataId)),i=k9(o,"string",r);return n.makeTensorInfo(a.shape,"string",i)}};const vie={kernelName:kB,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:a}=t,o=U9+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new W9(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}};class bie{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,a=h7(n.length),o=h7(n.length);let i="";if(1===r)i="coords * strides + begin";else{let e=0;i=n.map((t,r)=>(e++,1===n.length?"coords * strides[".concat(r,"] + begin[").concat(r,"]"):"coords[".concat(e-1,"] * strides[").concat(r,"] + begin[").concat(r,"]"))).join(",")}this.userCode="\n      ".concat(a," begin = ").concat(a,"(").concat(e,");\n      ").concat(a," strides = ").concat(a,"(").concat(t,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(i,"));\n      }\n    ")}}const xie={kernelName:uB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:o,end:i,strides:s,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:f,isIdentity:g,sliceDim0:m,isSimpleSlice:y,begin:v,end:b,strides:x}=Zz(a.shape,o,i,s,u,l,c,d,h);let w;if(g)w=Cee({inputs:{x:a},backend:n,attrs:{shape:f}});else if(m||y){RR(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));const e=Lz(v,b,x),t=Nte({inputs:{x:a},backend:n,attrs:{begin:v,size:e}});w=Cee({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([a])){const e=n.readSync(a.dataId),t=Gj(a.shape,a.dtype,e),r=C9(p,t,x,v);w=n.makeTensorInfo(f,a.dtype,r.values)}else{const e=new bie(v,x,p);w=n.runWebGLProgram(e,[a],a.dtype)}}const D=Cee({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),D}};const wie={kernelName:lB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:o,leftPad:i,rightPad:s,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:d}=t,h=n.readSync(c.dataId),p=n.readSync(d.dataId),[f,g]=E9(h,p,a,o,i,s,u,l);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",g)]}};const Die={kernelName:cB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:o,delimiter:i}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const s=n.readSync(o.dataId),u=n.readSync(i.dataId)[0],[l,c,d]=S9(s,u,a),h=c.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};const kie={kernelName:dB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(o.dataId),s=A9(i,a);return n.makeTensorInfo(o.shape,"int32",s)}},Cie=fee({opSnippet:"return tan(x);"}),Eie={kernelName:pB,backendName:"webgl",kernelFunc:Cie},Sie=fee({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),Aie={kernelName:fB,backendName:"webgl",kernelFunc:Sie};const Fie={kernelName:jM,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:a,indices:o,updates:i}=t,{}=r,{sliceRank:s,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=AH(0,o,a.shape),h=[d/l,l];if(0===d)return n.makeTensorInfo(a.shape,o.dtype);const p=Cee({inputs:{x:o},backend:n,attrs:{shape:[u,s]}}),f=Cee({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),g=Cee({inputs:{x:a},backend:n,attrs:{shape:h}}),m=new Loe(u,s,p.shape.length,f.shape.length,c,h,!1,!0),y=n.runWebGLProgram(m,[f,p,g],g.dtype),v=Cee({inputs:{x:y},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}};class Iie{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;const r=h7(this.rank),a=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")}}function Nie(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:o}=r;if("string"===a.dtype||a.shape.length>5){const e=n.readSync(a.dataId),t="string"===a.dtype?e.map(e=>aL(e)):e,r=Gj(a.shape,a.dtype,t),i=I9(r,o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new Iie(a.shape,o);return n.runWebGLProgram(i,[a],a.dtype)}const Tie={kernelName:gB,backendName:"webgl",kernelFunc:Nie};class Oie{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class Rie{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function _ie(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Pie(e){let t=1;for(;t<e;)t*=2;return t}const Mie={kernelName:mB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:o,sorted:i}=r,s=p_().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=p_().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([a])||c<s||o>u){const e=n.readSync(a.dataId),[t,r]=N9(e,l,a.dtype,o,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===o)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===c)return[a,fre({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const d=n.texData.get(a.dataId),h=null!==d&&d.isPacked,p=h?n.unpackTensor(a):a,f=MR(l)/c,g=Cee({inputs:{x:p},attrs:{shape:[f,c]},backend:n});h&&_ie(n,p);const m=Pie(o),y=Pie(c);let v=null;const b=()=>null===v?[g,g]:[g,v],x=(e,t,r)=>{const a=b(),o=new Oie(r),i=[[c],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=v;v=n.runWebGLProgram(o,a,"int32",i),_ie(n,s)};for(let E=1;E<m;E*=2){const e=2*E;for(let t=E;t>=1;t/=2)x(e,t,[f,y])}for(let E=y;E>m;E/=2){const e=b(),t=new Rie([f,E/2]),r=[[c],[null===v?1:0],[m]],a=v;v=n.runWebGLProgram(t,e,"int32",r),_ie(n,a);const o=m/2,i=2*o;for(let n=o;n>=1;n/=2)x(i,n,v.shape)}let w=v;v=Nte({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,o]}}),_ie(n,w);let D=Rre({inputs:{x:g,indices:v},backend:n,attrs:{axis:1,batchDims:1}});_ie(n,g);const k=l.slice(0,-1);k.push(o),w=v,v=Cee({inputs:{x:v},attrs:{shape:k},backend:n}),_ie(n,w);const C=D;return D=Cee({inputs:{x:D},attrs:{shape:k},backend:n}),_ie(n,C),[D,v]}};class Bie{constructor(e,t,n,r,a,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const i="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(a,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(a,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(i," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const Lie={kernelName:yB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:o}=t,{interpolation:i,fillMode:s,fillValue:u,outputShape:l}=r,[c,d,h,p]=a.shape,[f,g]=null!=l?l:[d,h],m=new Bie(d,h,i,s,u,[c,f,g,p]);return n.runWebGLProgram(m,[a,o],"float32")}};const jie={kernelName:bB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:o}=t;X8(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(o.dataId),{outputValues:s,outputShape:u,indices:l}=O9(i,a,o.shape,o.dtype);return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};const zie={kernelName:xB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:o}=r;o<0&&(o+=a.shape.length);const i=a,s=i.shape.length,u=a.shape[o],l=new Array(s-1);let c=0;for(let g=0;g<s;g++)g!==o&&(l[c++]=i.shape[g]);const d=[],h=new Array(s).fill(0),p=i.shape.slice();p[o]=1;const f=new Array(u);for(let g=0;g<f.length;g++){h[o]=g;const e=Nte({inputs:{x:i},backend:n,attrs:{begin:h,size:p}}),t=Cee({inputs:{x:e},backend:n,attrs:{shape:l}});f[g]=t,d.push(e)}return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}};class Wie{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,a=e.inSize,o=e.numSegments,i=o*Math.ceil(a/n);this.outputShape=[r,i];const s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ";let c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      "));let d="";a%n>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const Uie={kernelName:wB,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:o}=t,{numSegments:i}=r,s=a.shape.length,u=[];let l=0;const c=uU([l],s);let d=a;null!=c&&(d=_ee({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(d),l=cU(1,s)[0]);const h=fG(d.shape,l,i),p=MR([d.shape[l]]),f=Cee({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});u.push(f);const g=IL(a.dtype),m=(e,t,r,a,o)=>{const i=e.shape[0],s=e.shape[1],l=pG(s,o),c=new Wie({windowSize:l,inSize:s,batchSize:i,numSegments:o},t),d=n.compileAndRun(c,[e,r],a);if(u.push(d),d.shape[1]===o)return d;const h=doe({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=Nie({inputs:{x:h},backend:n,attrs:{reps:[s/l]}});u.push(h),u.push(p);return m(d,t,p,a,o)},y=Cee({inputs:{x:m(f,"unsortedSegmentSum",o,g,i)},backend:n,attrs:{shape:h}});let v=y;if(null!=c){u.push(y);const e=lU(c);v=_ee({inputs:{x:v},backend:n,attrs:{perm:e}})}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}},Vie=[Bee,jee,Wee,Vee,Kee,Yee,Qee,Zee,rte,ate,ite,ute,cte,hte,fte,yte,vte,wte,Dte,kte,Ste,Ote,Rte,_te,Pte,zte,Vte,Kte,iee,Yte,rne,dne,mne,vne,bne,xne,wne,kne,Ene,Ane,Rne,_ne,Pne,Bne,zne,Vne,Hne,Kne,Xne,Yne,Zne,Jne,ere,nre,are,ire,lre,hre,gre,yre,xre,Dre,Ere,Fre,Ire,Tre,_re,Mre,Lre,aee,jre,ene,Wre,Vre,Gre,lee,qre,Yre,Qre,Jre,eae,nae,aae,iae,lae,dae,pae,gae,mae,yae,xae,wae,Dae,kae,Cae,Sae,Iae,Tae,zae,kee,Uae,Hae,Kae,Xae,Bte,Qae,$ae,eoe,aoe,ioe,hee,soe,uoe,loe,coe,hoe,jte,_ae,foe,moe,voe,Eee,woe,koe,Soe,Foe,Toe,Roe,Poe,Boe,zoe,Uoe,Hoe,Koe,Xoe,Qoe,Joe,eie,Tte,jae,nie,rie,aie,oie,iie,sie,uie,lie,hie,pie,mie,yie,vie,xie,wie,Die,kie,Bae,Ree,Eie,Aie,Fie,Tie,Mie,Lie,Pee,jie,zie,Uie,Jae];for(const n of Vie)MB(n);const Hie=async e=>{const t=e.length;if(t<2)return{slope:0,nextValue:e[0]||0};const n=new MZ(r);var r;n.add(new e$({units:1,inputShape:[1]})),n.compile({loss:"meanSquaredError",optimizer:"sgd"});const a=ZU(Array.from({length:t},(e,t)=>t),[t,1]),o=ZU(e,[t,1]);await n.fit(a,o,{epochs:75});const i=ZU([t],[1,1]),s=n.predict(i),u=s.dataSync()[0],l=n.getWeights(),c=l[0].dataSync()[0];return a.dispose(),o.dispose(),i.dispose(),s.dispose(),l.forEach(e=>e.dispose()),{slope:isNaN(c)?0:c,nextValue:isNaN(u)?e[t-1]:u}},Gie=e=>{let{logs:t,drains:n}=e;const[r,a]=(0,u.useState)([]),[o,i]=(0,u.useState)(!0);return(0,u.useEffect)(()=>{(async()=>{if(0===n.length)return void i(!1);i(!0);const e=n.map(async e=>{const n=Array(7).fill(0),r=new Date;r.setHours(0,0,0,0);const a=t.filter(t=>t.drainId===e.id);if(a.forEach(e=>{const t=new Date(e.date);t.setHours(0,0,0,0);const a=Math.floor((r-t)/864e5);a>=0&&a<7&&(n[6-a]+=parseFloat(e.amount||0))}),a.length<2)return{id:e.id,name:e.name,hasEnoughData:!1};const{slope:o,nextValue:i}=await Hie(n);return{id:e.id,name:e.name,slope:o,nextValue:i,hasEnoughData:!0}}),r=await Promise.all(e);a(r),i(!1)})()},[t,n]),0===n.length?(0,v.jsx)("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:"Add drains to see predictions."}):o?(0,v.jsx)("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:"\ud83e\udde0 Training prediction models..."}):(0,v.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,v.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,v.jsx)("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e.name}),e.hasEnoughData?(0,v.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,v.jsx)("div",{children:(0,v.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Trend:",(0,v.jsx)("span",{className:"font-bold ".concat(e.slope<-.1?"text-green-500":e.slope>.1?"text-red-500":"text-gray-500"),children:e.slope<-.1?" Decreasing":e.slope>.1?" Increasing":" Stable"}),(0,v.jsxs)("span",{children:[" (~",e.slope.toFixed(1)," cc/day)"]})]})}),(0,v.jsxs)("div",{className:"text-right",children:[(0,v.jsxs)("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[(e.nextValue<0?0:e.nextValue).toFixed(1)," cc"]}),(0,v.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tomorrow's Estimate"})]})]}):(0,v.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Not enough data to predict."})]},e.id))})},Kie=e=>{let{appData:t,isDark:n}=e;const r=t.drains.reduce((e,t)=>(e[t.id]={name:t.name,total:0},e),{});t.logs.forEach(e=>{r[e.drainId]&&(r[e.drainId].total+=parseFloat(e.amount||0))});const a=Object.values(r).reduce((e,t)=>e+t.total,0);return(0,v.jsxs)("div",{className:"page space-y-8",children:[(0,v.jsxs)("section",{className:"mb-8 p-4 bg-white dark:bg-gray-800 dark:text-white rounded-lg shadow-inner no-print",children:[(0,v.jsx)("h2",{className:"text-xl font-semibold text-center mb-2 text-gray-800 dark:text-gray-200",children:"Total Output"}),(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("span",{className:"text-5xl font-bold text-blue-600 dark:text-blue-400",children:a.toFixed(1)}),(0,v.jsx)("span",{className:"ml-2 text-xl text-gray-600 dark:text-gray-400",children:"cc"})]}),(0,v.jsx)("hr",{className:"my-4 border-gray-200 dark:border-gray-600"}),(0,v.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 text-center",children:Object.values(r).map(e=>(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",title:e.name,children:e.name}),(0,v.jsx)("p",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200",children:e.total.toFixed(1)})]},e.name))})]}),t.settings.useAIPredictions&&(0,v.jsxs)("section",{className:"mb-8 p-4 bg-white dark:bg-gray-800 dark:text-white rounded-lg shadow-inner no-print",children:[(0,v.jsx)("h2",{className:"text-xl font-semibold text-center mb-4 text-gray-800 dark:text-gray-200",children:"Output Forecast"}),(0,v.jsx)(Gie,{logs:t.logs,drains:t.drains})]}),(0,v.jsxs)("section",{className:"mb-8 p-4 bg-white dark:bg-gray-800 dark:text-white rounded-lg shadow-inner no-print",children:[(0,v.jsx)("h2",{className:"text-xl font-semibold text-center mb-4 text-gray-800 dark:text-gray-200",children:"Thresholds"}),(0,v.jsx)("div",{className:"flex flex-wrap justify-center gap-4",children:(0,v.jsx)(Bu,{drains:t.drains,logs:t.logs,rules:t.settings.rules,indicatorMode:t.settings.indicatorMode})})]}),(0,v.jsxs)("section",{className:"mb-8 p-4 bg-white dark:bg-gray-800 dark:text-white rounded-lg shadow-inner no-print",children:[(0,v.jsx)("h2",{className:"text-xl font-semibold text-center mb-4 text-gray-800 dark:text-gray-200",children:"Line Graph"}),(0,v.jsx)("div",{className:"flex flex-wrap justify-center gap-4",children:(0,v.jsx)(CR,{drains:t.drains,logs:t.logs,isDark:n})})]}),(0,v.jsxs)("section",{className:"mb-8 p-4 bg-white dark:bg-gray-800 dark:text-white rounded-lg shadow-inner no-print",children:[(0,v.jsx)("h2",{className:"text-xl font-semibold text-center mb-4 text-gray-800 dark:text-gray-200",children:"Bar Graph"}),(0,v.jsx)("div",{className:"flex flex-wrap justify-center gap-4",children:(0,v.jsx)(ER,{drains:t.drains,logs:t.logs,isDark:n})})]})]})},qie=e=>{let{drains:t,logs:n}=e;const r=[...t].sort((e,t)=>e.name.localeCompare(t.name));if(0===r.length)return(0,v.jsx)("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Add drains to see the summary."});const a=n.reduce((e,t)=>{const n=new Date(t.date),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).toISOString().split("T")[0];return e[r]||(e[r]=[]),e[r].push(t),e},{}),o=Object.keys(a).sort((e,t)=>new Date(t)-new Date(e));return(0,v.jsxs)("table",{className:"min-w-full",children:[(0,v.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Time"}),r.map(e=>(0,v.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e.name},e.id))]})}),(0,v.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:0===n.length?(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:r.length+1,className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No logs recorded yet."})}):o.map(e=>{const t=a[e].sort((e,t)=>new Date(e.date)-new Date(t.date)),n=[];let o=null;t.forEach(e=>{const t=new Date(e.date);(!o||t.getTime()-new Date(o.clumpTime).getTime()>6e5)&&(o&&n.push(o),o={clumpTime:e.date,outputs:{}}),o.outputs[e.drainId]=(o.outputs[e.drainId]||0)+parseFloat(e.amount)}),o&&n.push(o);const i={};return(0,v.jsxs)(u.Fragment,{children:[(0,v.jsx)("tr",{className:"bg-gray-100 dark:bg-gray-800",children:(0,v.jsxs)("td",{colSpan:r.length+1,className:"px-6 py-3 text-left text-sm font-bold text-gray-900 dark:text-white",children:["Day: ",e]})}),n.map(e=>{const t=new Date(e.clumpTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,v.jsxs)("tr",{className:"bg-white dark:bg-gray-800/50",children:[(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:t}),r.map(t=>{const n=e.outputs[t.id]||0;return i[t.id]=(i[t.id]||0)+n,(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:n>0?"".concat(n.toFixed(1)," cc"):"-"},t.id)})]},e.clumpTime)}),(0,v.jsxs)("tr",{className:"bg-gray-200 dark:bg-gray-700 font-bold",children:[(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"Total"}),r.map(e=>(0,v.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(i[e.id]||0).toFixed(1)," cc"]},e.id))]})]},e)})})]})},Xie=e=>{let{appData:t,handlePrint:n}=e;return(0,v.jsx)("div",{className:"page space-y-8",children:(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold",children:"Time-Grouped Summary"}),(0,v.jsx)("button",{onClick:n,className:"bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-700 transition duration-300 shadow no-print",children:"Print"})]}),(0,v.jsx)("div",{id:"printable-area",className:"overflow-x-auto",children:(0,v.jsx)(qie,{drains:t.drains,logs:t.logs})})]})})};function Yie(e,t){return null!==e&&null!==t&&"object"==typeof e&&"object"==typeof t&&"id"in e&&"id"in t?e.id===t.id:e===t}function Qie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yie;return(0,u.useCallback)((t,n)=>{if("string"==typeof e){let r=e;return(null==t?void 0:t[r])===(null==n?void 0:n[r])}return e(t,n)},[e])}function Zie(e,t,n){let[r,a]=(0,u.useState)(n),o=void 0!==e,i=(0,u.useRef)(o),s=(0,u.useRef)(!1),l=(0,u.useRef)(!1);return!o||i.current||s.current?!o&&i.current&&!l.current&&(l.current=!0,i.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(s.current=!0,i.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[o?e:r,N(e=>(o||a(e),null==t?void 0:t(e)))]}function Jie(e){let[t]=(0,u.useState)(e);return t}function $ie(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[n,r]=(0,u.useReducer)(()=>({}),{}),a=(0,u.useMemo)(()=>function(e){if(null===e)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}(e),[e,n]);return F(()=>{if(!e)return;let t=new ResizeObserver(r);return t.observe(e),()=>{t.disconnect()}},[e]),t?{width:"".concat(a.width,"px"),height:"".concat(a.height,"px")}:a}var ese=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(ese||{});const tse={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}};function nse(e,t){return(0,u.useMemo)(()=>{var n;if(e.type)return e.type;let r=null!=(n=e.as)?n:"button";return"string"==typeof r&&"button"===r.toLowerCase()||"BUTTON"===(null==t?void 0:t.tagName)&&!t.hasAttribute("type")?"button":void 0},[e.type,e.as,t])}let rse=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ase(e){var t,n;let r=null!=(t=e.innerText)?t:"",a=e.cloneNode(!0);if(!at(a))return r;let o=!1;for(let s of a.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))s.remove(),o=!0;let i=o?null!=(n=a.innerText)?n:"":r;return rse.test(i)&&(i=i.replace(rse,"")),i}function ose(e){let t=(0,u.useRef)(""),n=(0,u.useRef)("");return N(()=>{let r=e.current;if(!r)return"";let a=r.innerText;if(t.current===a)return n.current;let o=function(e){let t=e.getAttribute("aria-label");if("string"==typeof t)return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let e=n.split(" ").map(e=>{let t=document.getElementById(e);if(t){let e=t.getAttribute("aria-label");return"string"==typeof e?e.trim():ase(t).trim()}return null}).filter(Boolean);if(e.length>0)return e.join(", ")}return ase(e).trim()}(r).trim().toLowerCase();return t.current=a,n.current=o,o})}function ise(e){return[e.screenX,e.screenY]}function sse(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:n}=e;return t+"/"+n}).join(" "):navigator.userAgent}const use=Math.min,lse=Math.max,cse=Math.round,dse=Math.floor,hse=e=>({x:e,y:e}),pse={left:"right",right:"left",bottom:"top",top:"bottom"},fse={start:"end",end:"start"};function gse(e,t,n){return lse(e,use(t,n))}function mse(e,t){return"function"===typeof e?e(t):e}function yse(e){return e.split("-")[0]}function vse(e){return e.split("-")[1]}function bse(e){return"x"===e?"y":"x"}function xse(e){return"y"===e?"height":"width"}const wse=new Set(["top","bottom"]);function Dse(e){return wse.has(yse(e))?"y":"x"}function kse(e){return bse(Dse(e))}function Cse(e){return e.replace(/start|end/g,e=>fse[e])}const Ese=["left","right"],Sse=["right","left"],Ase=["top","bottom"],Fse=["bottom","top"];function Ise(e,t,n,r){const a=vse(e);let o=function(e,t,n){switch(e){case"top":case"bottom":return n?t?Sse:Ese:t?Ese:Sse;case"left":case"right":return t?Ase:Fse;default:return[]}}(yse(e),"start"===n,r);return a&&(o=o.map(e=>e+"-"+a),t&&(o=o.concat(o.map(Cse)))),o}function Nse(e){return e.replace(/left|right|bottom|top/g,e=>pse[e])}function Tse(e){return"number"!==typeof e?function(e){return g({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function Ose(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function Rse(){return"undefined"!==typeof window}function _se(e){return Bse(e)?(e.nodeName||"").toLowerCase():"#document"}function Pse(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Mse(e){var t;return null==(t=(Bse(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Bse(e){return!!Rse()&&(e instanceof Node||e instanceof Pse(e).Node)}function Lse(e){return!!Rse()&&(e instanceof Element||e instanceof Pse(e).Element)}function jse(e){return!!Rse()&&(e instanceof HTMLElement||e instanceof Pse(e).HTMLElement)}function zse(e){return!(!Rse()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Pse(e).ShadowRoot)}const Wse=new Set(["inline","contents"]);function Use(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=eue(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Wse.has(a)}const Vse=new Set(["table","td","th"]);function Hse(e){return Vse.has(_se(e))}const Gse=[":popover-open",":modal"];function Kse(e){return Gse.some(t=>{try{return e.matches(t)}catch(he){return!1}})}const qse=["transform","translate","scale","rotate","perspective"],Xse=["transform","translate","scale","rotate","perspective","filter"],Yse=["paint","layout","strict","content"];function Qse(e){const t=Zse(),n=Lse(e)?eue(e):e;return qse.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||Xse.some(e=>(n.willChange||"").includes(e))||Yse.some(e=>(n.contain||"").includes(e))}function Zse(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Jse=new Set(["html","body","#document"]);function $se(e){return Jse.has(_se(e))}function eue(e){return Pse(e).getComputedStyle(e)}function tue(e){return Lse(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function nue(e){if("html"===_se(e))return e;const t=e.assignedSlot||e.parentNode||zse(e)&&e.host||Mse(e);return zse(t)?t.host:t}function rue(e){const t=nue(e);return $se(t)?e.ownerDocument?e.ownerDocument.body:e.body:jse(t)&&Use(t)?t:rue(t)}function aue(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const a=rue(e),o=a===(null==(r=e.ownerDocument)?void 0:r.body),i=Pse(a);if(o){const e=oue(i);return t.concat(i,i.visualViewport||[],Use(a)?a:[],e&&n?aue(e):[])}return t.concat(a,aue(a,[],n))}function oue(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const iue=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],sue=["mainAxis","crossAxis","limiter"],uue=["apply"];function lue(e,t,n){let{reference:r,floating:a}=e;const o=Dse(t),i=kse(t),s=xse(i),u=yse(t),l="y"===o,c=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,h=r[s]/2-a[s]/2;let p;switch(u){case"top":p={x:c,y:r.y-a.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-a.width,y:d};break;default:p={x:r.x,y:r.y}}switch(vse(t)){case"start":p[i]-=h*(n&&l?-1:1);break;case"end":p[i]+=h*(n&&l?-1:1)}return p}async function cue(e,t){var n;void 0===t&&(t={});const{x:r,y:a,platform:o,rects:i,elements:s,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=mse(t,e),f=Tse(p),g=s[h?"floating"===d?"reference":"floating":d],m=Ose(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(g)))||n?g:g.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:c,strategy:u})),y="floating"===d?{x:r,y:a,width:i.floating.width,height:i.floating.height}:i.reference,v=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),b=await(null==o.isElement?void 0:o.isElement(v))&&await(null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},x=Ose(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:v,strategy:u}):y);return{top:(m.top-x.top+f.top)/b.y,bottom:(x.bottom-m.bottom+f.bottom)/b.y,left:(m.left-x.left+f.left)/b.x,right:(x.right-m.right+f.right)/b.x}}const due=new Set(["left","top"]);function hue(e){const t=eue(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=jse(e),o=a?e.offsetWidth:n,i=a?e.offsetHeight:r,s=cse(n)!==o||cse(r)!==i;return s&&(n=o,r=i),{width:n,height:r,$:s}}function pue(e){return Lse(e)?e:e.contextElement}function fue(e){const t=pue(e);if(!jse(t))return hse(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:o}=hue(t);let i=(o?cse(n.width):n.width)/r,s=(o?cse(n.height):n.height)/a;return i&&Number.isFinite(i)||(i=1),s&&Number.isFinite(s)||(s=1),{x:i,y:s}}const gue=hse(0);function mue(e){const t=Pse(e);return Zse()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:gue}function yue(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),o=pue(e);let i=hse(1);t&&(r?Lse(r)&&(i=fue(r)):i=fue(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Pse(e))&&t}(o,n,r)?mue(o):hse(0);let u=(a.left+s.x)/i.x,l=(a.top+s.y)/i.y,c=a.width/i.x,d=a.height/i.y;if(o){const e=Pse(o),t=r&&Lse(r)?Pse(r):r;let n=e,a=oue(n);for(;a&&r&&t!==n;){const e=fue(a),t=a.getBoundingClientRect(),r=eue(a),o=t.left+(a.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(r.paddingTop))*e.y;u*=e.x,l*=e.y,c*=e.x,d*=e.y,u+=o,l+=i,n=Pse(a),a=oue(n)}}return Ose({width:c,height:d,x:u,y:l})}function vue(e,t){const n=tue(e).scrollLeft;return t?t.left+n:yue(Mse(e)).left+n}function bue(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:vue(e,r)),y:r.top+t.scrollTop}}const xue=new Set(["absolute","fixed"]);function wue(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=Pse(e),r=Mse(e),a=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,s=0,u=0;if(a){o=a.width,i=a.height;const e=Zse();(!e||e&&"fixed"===t)&&(s=a.offsetLeft,u=a.offsetTop)}return{width:o,height:i,x:s,y:u}}(e,n);else if("document"===t)r=function(e){const t=Mse(e),n=tue(e),r=e.ownerDocument.body,a=lse(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=lse(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+vue(e);const s=-n.scrollTop;return"rtl"===eue(r).direction&&(i+=lse(t.clientWidth,r.clientWidth)-a),{width:a,height:o,x:i,y:s}}(Mse(e));else if(Lse(t))r=function(e,t){const n=yue(e,!0,"fixed"===t),r=n.top+e.clientTop,a=n.left+e.clientLeft,o=jse(e)?fue(e):hse(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:a*o.x,y:r*o.y}}(t,n);else{const n=mue(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Ose(r)}function Due(e,t){const n=nue(e);return!(n===t||!Lse(n)||$se(n))&&("fixed"===eue(n).position||Due(n,t))}function kue(e,t,n){const r=jse(t),a=Mse(t),o="fixed"===n,i=yue(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const u=hse(0);function l(){u.x=vue(a)}if(r||!r&&!o)if(("body"!==_se(t)||Use(a))&&(s=tue(t)),r){const e=yue(t,!0,o,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else a&&l();o&&!r&&a&&l();const c=!a||r||o?hse(0):bue(a,s);return{x:i.left+s.scrollLeft-u.x-c.x,y:i.top+s.scrollTop-u.y-c.y,width:i.width,height:i.height}}function Cue(e){return"static"===eue(e).position}function Eue(e,t){if(!jse(e)||"fixed"===eue(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Mse(e)===n&&(n=n.ownerDocument.body),n}function Sue(e,t){const n=Pse(e);if(Kse(e))return n;if(!jse(e)){let t=nue(e);for(;t&&!$se(t);){if(Lse(t)&&!Cue(t))return t;t=nue(t)}return n}let r=Eue(e,t);for(;r&&Hse(r)&&Cue(r);)r=Eue(r,t);return r&&$se(r)&&Cue(r)&&!Qse(r)?n:r||function(e){let t=nue(e);for(;jse(t)&&!$se(t);){if(Qse(t))return t;if(Kse(t))return null;t=nue(t)}return null}(e)||n}const Aue={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const o="fixed"===a,i=Mse(r),s=!!t&&Kse(t.floating);if(r===i||s&&o)return n;let u={scrollLeft:0,scrollTop:0},l=hse(1);const c=hse(0),d=jse(r);if((d||!d&&!o)&&(("body"!==_se(r)||Use(i))&&(u=tue(r)),jse(r))){const e=yue(r);l=fue(r),c.x=e.x+r.clientLeft,c.y=e.y+r.clientTop}const h=!i||d||o?hse(0):bue(i,u,!0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x+h.x,y:n.y*l.y-u.scrollTop*l.y+c.y+h.y}},getDocumentElement:Mse,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[..."clippingAncestors"===n?Kse(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=aue(e,[],!1).filter(e=>Lse(e)&&"body"!==_se(e)),a=null;const o="fixed"===eue(e).position;let i=o?nue(e):e;for(;Lse(i)&&!$se(i);){const t=eue(i),n=Qse(i);n||"fixed"!==t.position||(a=null),(o?!n&&!a:!n&&"static"===t.position&&a&&xue.has(a.position)||Use(i)&&!n&&Due(e,i))?r=r.filter(e=>e!==i):a=t,i=nue(i)}return t.set(e,r),r}(t,this._c):[].concat(n),r],i=o[0],s=o.reduce((e,n)=>{const r=wue(t,n,a);return e.top=lse(r.top,e.top),e.right=use(r.right,e.right),e.bottom=use(r.bottom,e.bottom),e.left=lse(r.left,e.left),e},wue(t,i,a));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:Sue,getElementRects:async function(e){const t=this.getOffsetParent||Sue,n=this.getDimensions,r=await n(e.floating);return{reference:kue(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=hue(e);return{width:t,height:n}},getScale:fue,isElement:Lse,isRTL:function(e){return"rtl"===eue(e).direction}};function Fue(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Iue(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i="function"===typeof ResizeObserver,layoutShift:s="function"===typeof IntersectionObserver,animationFrame:u=!1}=r,l=pue(e),c=a||o?[...l?aue(l):[],...aue(t)]:[];c.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});const d=l&&s?function(e,t){let n,r=null;const a=Mse(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function i(s,u){void 0===s&&(s=!1),void 0===u&&(u=1),o();const l=e.getBoundingClientRect(),{left:c,top:d,width:h,height:p}=l;if(s||t(),!h||!p)return;const f={rootMargin:-dse(d)+"px "+-dse(a.clientWidth-(c+h))+"px "+-dse(a.clientHeight-(d+p))+"px "+-dse(c)+"px",threshold:lse(0,use(1,u))||1};let m=!0;function y(t){const r=t[0].intersectionRatio;if(r!==u){if(!m)return i();r?i(!1,r):n=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==r||Fue(l,e.getBoundingClientRect())||i(),m=!1}try{r=new IntersectionObserver(y,g(g({},f),{},{root:a.ownerDocument}))}catch(he){r=new IntersectionObserver(y,f)}r.observe(e)}(!0),o}(l,n):null;let h,p=-1,f=null;i&&(f=new ResizeObserver(e=>{let[r]=e;r&&r.target===l&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),n()}),l&&!u&&f.observe(l),f.observe(t));let m=u?yue(e):null;return u&&function t(){const r=yue(e);m&&!Fue(m,r)&&n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach(e=>{a&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=f)||e.disconnect(),f=null,u&&cancelAnimationFrame(h)}}const Nue=cue,Tue=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:o,placement:i,middlewareData:s}=t,u=await async function(e,t){const{placement:n,platform:r,elements:a}=e,o=await(null==r.isRTL?void 0:r.isRTL(a.floating)),i=yse(n),s=vse(n),u="y"===Dse(n),l=due.has(i)?-1:1,c=o&&u?-1:1,d=mse(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"===typeof f&&(p="end"===s?-1*f:f),u?{x:p*c,y:h*l}:{x:h*l,y:p*c}}(t,e);return i===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:a+u.x,y:o+u.y,data:g(g({},u),{},{placement:i})}}}},Oue=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,o=mse(e,t),{mainAxis:i=!0,crossAxis:s=!1,limiter:u={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=o,l=w(o,sue),c={x:n,y:r},d=await cue(t,l),h=Dse(yse(a)),p=bse(h);let f=c[p],m=c[h];if(i){const e="y"===p?"bottom":"right";f=gse(f+d["y"===p?"top":"left"],f,f-d[e])}if(s){const e="y"===h?"bottom":"right";m=gse(m+d["y"===h?"top":"left"],m,m-d[e])}const y=u.fn(g(g({},t),{},{[p]:f,[h]:m}));return g(g({},y),{},{data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[h]:s}}})}}},Rue=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:o,rects:i,initialPlacement:s,platform:u,elements:l}=t,c=mse(e,t),{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0}=c,y=w(c,iue);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=yse(a),b=Dse(s),x=yse(s)===s,D=await(null==u.isRTL?void 0:u.isRTL(l.floating)),k=p||(x||!m?[Nse(s)]:function(e){const t=Nse(e);return[Cse(e),t,Cse(t)]}(s)),C="none"!==g;!p&&C&&k.push(...Ise(s,m,g,D));const E=[s,...k],S=await cue(t,y),A=[];let F=(null==(r=o.flip)?void 0:r.overflows)||[];if(d&&A.push(S[v]),h){const e=function(e,t,n){void 0===n&&(n=!1);const r=vse(e),a=kse(e),o=xse(a);let i="x"===a?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Nse(i)),[i,Nse(i)]}(a,i,D);A.push(S[e[0]],S[e[1]])}if(F=[...F,{placement:a,overflows:A}],!A.every(e=>e<=0)){var I,N;const e=((null==(I=o.flip)?void 0:I.index)||0)+1,t=E[e];if(t){if(!("alignment"===h&&b!==Dse(t))||F.every(e=>e.overflows[0]>0&&Dse(e.placement)===b))return{data:{index:e,overflows:F},reset:{placement:t}}}let n=null==(N=F.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:N.placement;if(!n)switch(f){case"bestFit":{var T;const e=null==(T=F.filter(e=>{if(C){const t=Dse(e.placement);return t===b||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:T[0];e&&(n=e);break}case"initialPlacement":n=s}if(a!==n)return{reset:{placement:n}}}return{}}}},_ue=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:o,platform:i,elements:s}=t,u=mse(e,t),{apply:l=()=>{}}=u,c=w(u,uue),d=await cue(t,c),h=yse(a),p=vse(a),f="y"===Dse(a),{width:m,height:y}=o.floating;let v,b;"top"===h||"bottom"===h?(v=h,b=p===(await(null==i.isRTL?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(b=h,v="end"===p?"top":"bottom");const x=y-d.top-d.bottom,D=m-d.left-d.right,k=use(y-d[v],x),C=use(m-d[b],D),E=!t.middlewareData.shift;let S=k,A=C;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(A=D),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(S=x),E&&!p){const e=lse(d.left,0),t=lse(d.right,0),n=lse(d.top,0),r=lse(d.bottom,0);f?A=m-2*(0!==e||0!==t?e+t:lse(d.left,d.right)):S=y-2*(0!==n||0!==r?n+r:lse(d.top,d.bottom))}await l(g(g({},t),{},{availableWidth:A,availableHeight:S}));const F=await i.getDimensions(s.floating);return m!==F.width||y!==F.height?{reset:{rects:!0}}:{}}}},Pue=(e,t,n)=>{const r=new Map,a=g({platform:Aue},n),o=g(g({},a.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,s=o.filter(Boolean),u=await(null==i.isRTL?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:c,y:d}=lue(l,r,u),h=r,p={},f=0;for(let m=0;m<s.length;m++){const{name:n,fn:o}=s[m],{x:y,y:v,data:b,reset:x}=await o({x:c,y:d,initialPlacement:r,placement:h,strategy:a,middlewareData:p,rects:l,platform:i,elements:{reference:e,floating:t}});c=null!=y?y:c,d=null!=v?v:d,p=g(g({},p),{},{[n]:g(g({},p[n]),b)}),x&&f<=50&&(f++,"object"===typeof x&&(x.placement&&(h=x.placement),x.rects&&(l=!0===x.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):x.rects),({x:c,y:d}=lue(l,h,u))),m=-1)}return{x:c,y:d,placement:h,strategy:a,middlewareData:p}})(e,t,g(g({},a),{},{platform:o}))};var Mue="undefined"!==typeof document?u.useLayoutEffect:function(){};function Bue(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Bue(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!==r--;){const n=a[r];if(("_owner"!==n||!e.$$typeof)&&!Bue(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function Lue(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function jue(e,t){const n=Lue(e);return Math.round(t*n)/n}function zue(e){const t=u.useRef(e);return Mue(()=>{t.current=e}),t}const Wue=(e,t)=>g(g({},Tue(e)),{},{options:[e,t]}),Uue=(e,t)=>g(g({},Rue(e)),{},{options:[e,t]}),Vue=(e,t)=>g(g({},_ue(e)),{},{options:[e,t]}),Hue=["listRef","overflowRef","onFallbackChange","offset","index","minItemsVisible","referenceOverflowThreshold","scrollRef"];const Gue=g({},l),Kue=Gue.useInsertionEffect||(e=>e());function que(e){const t=u.useRef(()=>{0});return Kue(()=>{t.current=e}),u.useCallback(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}const Xue="ArrowUp",Yue="ArrowDown",Que="ArrowLeft",Zue="ArrowRight";var Jue="undefined"!==typeof document?u.useLayoutEffect:u.useEffect;const $ue=[Que,Zue],ele=[Xue,Yue];let tle=!1,nle=0;const rle=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+nle++;const ale=Gue.useId||function(){const[e,t]=u.useState(()=>tle?rle():void 0);return Jue(()=>{null==e&&t(rle())},[]),u.useEffect(()=>{tle=!0},[]),e};function ole(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}}const ile=u.createContext(null),sle=u.createContext(null),ule=()=>{var e;return(null==(e=u.useContext(ile))?void 0:e.id)||null},lle=()=>u.useContext(sle);const cle="data-floating-ui-focusable";function dle(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:r}=e,a=ale(),o=u.useRef({}),[i]=u.useState(()=>ole()),s=null!=ule(),[l,c]=u.useState(r.reference),d=que((e,t,r)=>{o.current.openEvent=e?t:void 0,i.emit("openchange",{open:e,event:t,reason:r,nested:s}),null==n||n(e,t,r)}),h=u.useMemo(()=>({setPositionReference:c}),[]),p=u.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return u.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:p,events:i,floatingId:a,refs:h}),[t,d,p,i,a,h])}(g(g({},e),{},{elements:g({reference:null,floating:null},e.elements)})),r=e.rootContext||n,a=r.elements,[o,i]=u.useState(null),[s,l]=u.useState(null),c=(null==a?void 0:a.domReference)||o,d=u.useRef(null),h=lle();Jue(()=>{c&&(d.current=c)},[c]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:i}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[d,h]=u.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=u.useState(r);Bue(p,r)||f(r);const[m,y]=u.useState(null),[v,b]=u.useState(null),x=u.useCallback(e=>{e!==C.current&&(C.current=e,y(e))},[]),w=u.useCallback(e=>{e!==E.current&&(E.current=e,b(e))},[]),D=o||m,k=i||v,C=u.useRef(null),E=u.useRef(null),S=u.useRef(d),A=null!=l,F=zue(l),I=zue(a),N=zue(c),T=u.useCallback(()=>{if(!C.current||!E.current)return;const e={placement:t,strategy:n,middleware:p};I.current&&(e.platform=I.current),Pue(C.current,E.current,e).then(e=>{const t=g(g({},e),{},{isPositioned:!1!==N.current});O.current&&!Bue(S.current,t)&&(S.current=t,gn.flushSync(()=>{h(t)}))})},[p,t,n,I,N]);Mue(()=>{!1===c&&S.current.isPositioned&&(S.current.isPositioned=!1,h(e=>g(g({},e),{},{isPositioned:!1})))},[c]);const O=u.useRef(!1);Mue(()=>(O.current=!0,()=>{O.current=!1}),[]),Mue(()=>{if(D&&(C.current=D),k&&(E.current=k),D&&k){if(F.current)return F.current(D,k,T);T()}},[D,k,T,F,A]);const R=u.useMemo(()=>({reference:C,floating:E,setReference:x,setFloating:w}),[x,w]),_=u.useMemo(()=>({reference:D,floating:k}),[D,k]),P=u.useMemo(()=>{const e={position:n,left:0,top:0};if(!_.floating)return e;const t=jue(_.floating,d.x),r=jue(_.floating,d.y);return s?g(g({},e),{},{transform:"translate("+t+"px, "+r+"px)"},Lue(_.floating)>=1.5&&{willChange:"transform"}):{position:n,left:t,top:r}},[n,s,_.floating,d.x,d.y]);return u.useMemo(()=>g(g({},d),{},{update:T,refs:R,elements:_,floatingStyles:P}),[d,T,R,_,P])}(g(g({},e),{},{elements:g(g({},a),s&&{reference:s})})),f=u.useCallback(e=>{const t=Lse(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t),p.refs.setReference(t)},[p.refs]),m=u.useCallback(e=>{(Lse(e)||null===e)&&(d.current=e,i(e)),(Lse(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!Lse(e))&&p.refs.setReference(e)},[p.refs]),y=u.useMemo(()=>g(g({},p.refs),{},{setReference:m,setPositionReference:f,domReference:d}),[p.refs,m,f]),v=u.useMemo(()=>g(g({},p.elements),{},{domReference:c}),[p.elements,c]),b=u.useMemo(()=>g(g(g({},p),r),{},{refs:y,elements:v,nodeId:t}),[p,y,v,t,r]);return Jue(()=>{r.dataRef.current.floatingContext=b;const e=null==h?void 0:h.nodesRef.current.find(e=>e.id===t);e&&(e.context=b)}),u.useMemo(()=>g(g({},p),{},{context:b,refs:y,elements:v}),[p,y,v,b])}const hle="active",ple="selected";function fle(e,t,n){const r=new Map,a="item"===n;let o=e;if(a&&e){const{[hle]:t,[ple]:n}=e;o=w(e,[hle,ple].map(h))}return g(g(g({},"floating"===n&&{tabIndex:-1,[cle]:""}),o),t.map(t=>{const r=t?t[n]:null;return"function"===typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>t?(Object.entries(t).forEach(t=>{let[n,o]=t;var i;a&&[hle,ple].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"===typeof o&&(null==(i=r.get(n))||i.push(o),e[n]=function(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return null==(e=r.get(n))?void 0:e.map(e=>e(...a)).find(e=>void 0!==e)})):e[n]=o)}),e):e,{}))}function gle(e,t){return g(g({},e),{},{rects:g(g({},e.rects),{},{floating:g(g({},e.rects.floating),{},{height:t})})})}let mle=(0,u.createContext)({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});mle.displayName="FloatingContext";let yle=(0,u.createContext)(null);yle.displayName="PlacementContext";function vle(e){let{children:t,enabled:n=!0}=e,[r,a]=(0,u.useState)(null),[o,i]=(0,u.useState)(0),s=(0,u.useRef)(null),[l,c]=(0,u.useState)(null);!function(e){F(()=>{if(!e)return;let t=new MutationObserver(()=>{let t=window.getComputedStyle(e).maxHeight,n=parseFloat(t);if(isNaN(n))return;let r=parseInt(t);isNaN(r)||n!==r&&(e.style.maxHeight="".concat(Math.ceil(n),"px"))});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}(l);let d=n&&null!==r&&null!==l,{to:h="bottom",gap:p=0,offset:f=0,padding:m=0,inner:y}=function(e,t){var n,r,a;let o=ble(null!=(n=null==e?void 0:e.gap)?n:"var(--anchor-gap, 0)",t),i=ble(null!=(r=null==e?void 0:e.offset)?r:"var(--anchor-offset, 0)",t),s=ble(null!=(a=null==e?void 0:e.padding)?a:"var(--anchor-padding, 0)",t);return g(g({},e),{},{gap:o,offset:i,padding:s})}(r,l),[v,b="center"]=h.split(" ");F(()=>{d&&i(0)},[d]);let{refs:x,floatingStyles:D,context:k}=dle({open:d,placement:"selection"===v?"center"===b?"bottom":"bottom-".concat(b):"center"===b?"".concat(v):"".concat(v,"-").concat(b),strategy:"absolute",transform:!1,middleware:[Wue({mainAxis:"selection"===v?0:p,crossAxis:f}),(A={padding:m},g(g({},Oue(A)),{},{options:[A,I]})),"selection"!==v&&Uue({padding:m}),"selection"===v&&y?(S=g(g({},y),{},{padding:m,overflowRef:s,offset:o,minItemsVisible:4,referenceOverflowThreshold:m,onFallbackChange(e){var t,n;if(!e)return;let r=k.elements.floating;if(!r)return;let a=parseFloat(getComputedStyle(r).scrollPaddingBottom)||0,o=Math.min(4,r.childElementCount),s=0,u=0;for(let i of null!=(n=null==(t=k.elements.floating)?void 0:t.childNodes)?n:[])if(at(i)){let e=i.offsetTop,t=e+i.clientHeight+a,n=r.scrollTop,l=n+r.clientHeight;if(!(e>=n&&t<=l)){u=Math.max(0,Math.min(t,l)-Math.max(e,n)),s=i.clientHeight;break}o--}o>=1&&i(e=>{let t=s*o-u+a;return e>=t?e:t})}}),{name:"inner",options:S,async fn(e){const t=mse(S,e),{listRef:n,overflowRef:r,onFallbackChange:a,offset:o=0,index:i=0,minItemsVisible:s=4,referenceOverflowThreshold:u=0,scrollRef:l}=t,c=w(t,Hue),{rects:d,elements:{floating:h}}=e,p=n.current[i],f=(null==l?void 0:l.current)||h,m=h.clientTop||f.clientTop,y=0!==h.clientTop,v=0!==f.clientTop,b=h===f;if(!p)return{};const x=g(g({},e),await Wue(-p.offsetTop-h.clientTop-d.reference.height/2-p.offsetHeight/2-o).fn(e)),D=await Nue(gle(x,f.scrollHeight+m+h.clientTop),c),k=await Nue(x,g(g({},c),{},{elementContext:"reference"})),C=lse(0,D.top),E=x.y+C,A=f.scrollHeight>f.clientHeight?e=>e:cse,F=A(lse(0,f.scrollHeight+(y&&b||v?2*m:0)-C-lse(0,D.bottom)));if(f.style.maxHeight=F+"px",f.scrollTop=C,a){const e=f.offsetHeight<p.offsetHeight*use(s,n.current.length)-1||k.top>=-u||k.bottom>=-u;gn.flushSync(()=>a(e))}return r&&(r.current=await Nue(gle(g(g({},x),{},{y:E}),f.offsetHeight+m+h.clientTop),c)),{y:E}}}):null,Vue({padding:m,apply(e){let{availableWidth:t,availableHeight:n,elements:r}=e;Object.assign(r.floating.style,{overflow:"auto",maxWidth:"".concat(t,"px"),maxHeight:"min(var(--anchor-max-height, 100vh), ".concat(n,"px)")})}})].filter(Boolean),whileElementsMounted:Iue}),[C=v,E=b]=k.placement.split("-");var S,A,I;"selection"===v&&(C="selection");let T=(0,u.useMemo)(()=>({anchor:[C,E].filter(Boolean).join(" ")}),[C,E]),O=function(e,t){const{open:n,elements:r}=e,{enabled:a=!0,overflowRef:o,scrollRef:i,onChange:s}=t,l=que(s),c=u.useRef(!1),d=u.useRef(null),h=u.useRef(null);u.useEffect(()=>{if(!a)return;function e(e){if(e.ctrlKey||!t||null==o.current)return;const n=e.deltaY,r=o.current.top>=-.5,a=o.current.bottom>=-.5,i=t.scrollHeight-t.clientHeight,s=n<0?-1:1,u=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!r&&n>0||!a&&n<0?(e.preventDefault(),gn.flushSync(()=>{l(e=>e+Math[u](n,i*s))})):/firefox/i.test(sse())&&(t.scrollTop+=n))}const t=(null==i?void 0:i.current)||r.floating;return n&&t?(t.addEventListener("wheel",e),requestAnimationFrame(()=>{d.current=t.scrollTop,null!=o.current&&(h.current=g({},o.current))}),()=>{d.current=null,h.current=null,t.removeEventListener("wheel",e)}):void 0},[a,n,r.floating,o,i,l]);const p=u.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const e=(null==i?void 0:i.current)||r.floating;if(o.current&&e&&c.current){if(null!==d.current){const t=e.scrollTop-d.current;(o.current.bottom<-.5&&t<-1||o.current.top<-.5&&t>1)&&gn.flushSync(()=>l(e=>e+t))}requestAnimationFrame(()=>{d.current=e.scrollTop})}}}),[r.floating,l,o,i]);return u.useMemo(()=>a?{floating:p}:{},[a,p])}(k,{overflowRef:s,onChange:i}),{getReferenceProps:R,getFloatingProps:_}=function(e){void 0===e&&(e=[]);const t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),r=e.map(e=>null==e?void 0:e.item),a=u.useCallback(t=>fle(t,e,"reference"),t),o=u.useCallback(t=>fle(t,e,"floating"),n),i=u.useCallback(t=>fle(t,e,"item"),r);return u.useMemo(()=>({getReferenceProps:a,getFloatingProps:o,getItemProps:i}),[a,o,i])}([O]),P=N(e=>{c(e),x.setFloating(e)});return u.createElement(yle.Provider,{value:a},u.createElement(mle.Provider,{value:{setFloating:P,setReference:x.setReference,styles:D,getReferenceProps:R,getFloatingProps:_,slot:T}},t))}function ble(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=C(),a=N((e,t)=>{if(null==e)return[n,null];if("number"==typeof e)return[e,null];if("string"==typeof e){if(!t)return[n,null];let a=wle(e,t);return[a,n=>{let o=xle(e);{let i=o.map(e=>window.getComputedStyle(t).getPropertyValue(e));r.requestAnimationFrame(function s(){r.nextFrame(s);let u=!1;for(let[e,n]of o.entries()){let r=window.getComputedStyle(t).getPropertyValue(n);if(i[e]!==r){i[e]=r,u=!0;break}}if(!u)return;let l=wle(e,t);a!==l&&(n(l),a=l)})}return r.dispose}]}return[n,null]}),o=(0,u.useMemo)(()=>a(e,t)[0],[e,t]),[i=o,s]=(0,u.useState)();return F(()=>{let[n,r]=a(e,t);if(s(n),r)return r(s)},[e,t]),i}function xle(e){let t=/var\((.*)\)/.exec(e);if(t){let e=t[1].indexOf(",");if(-1===e)return[t[1]];let n=t[1].slice(0,e).trim(),r=t[1].slice(e+1).trim();return r?[n,...xle(r)]:[n]}return[]}function wle(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}function Dle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let[r,a]of Object.entries(e))Cle(n,kle(t,r),a);return n}function kle(e,t){return e?e+"["+t+"]":t}function Cle(e,t,n){if(Array.isArray(n))for(let[r,a]of n.entries())Cle(e,kle(t,r.toString()),a);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,"".concat(n)]):null==n?e.push([t,""]):Dle(n,t,e)}function Ele(e){var t,n;let r=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(r){for(let t of r.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type))return void t.click();null==(n=r.requestSubmit)||n.call(r)}}let Sle=(0,u.createContext)(null);function Ale(e){let[t,n]=(0,u.useState)(null);return u.createElement(Sle.Provider,{value:{target:t}},e.children,u.createElement(Ot,{features:Tt.Hidden,ref:n}))}function Fle(e){let{children:t}=e,n=(0,u.useContext)(Sle);if(!n)return u.createElement(u.Fragment,null,t);let{target:r}=n;return r?(0,gn.createPortal)(u.createElement(u.Fragment,null,t),r):null}function Ile(e){let{data:t,form:n,disabled:r,onReset:a,overrides:o}=e,[i,s]=(0,u.useState)(null),l=C();return(0,u.useEffect)(()=>{if(a&&i)return l.addEventListener(i,"reset",a)},[i,n,a]),u.createElement(Fle,null,u.createElement(Nle,{setForm:s,formId:n}),Dle(t).map(e=>{let[t,a]=e;return u.createElement(Ot,g({features:Tt.Hidden},oe(g({key:t,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:n,disabled:r,name:t,value:a},o))))}))}function Nle(e){let{setForm:t,formId:n}=e;return(0,u.useEffect)(()=>{if(n){let e=document.getElementById(n);e&&t(e)}},[t,n]),n?null:u.createElement(Ot,{features:Tt.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:e=>{if(!e)return;let n=e.closest("form");n&&t(n)}})}function Tle(e,t){let[n,r]=(0,u.useState)(t);return!e&&n!==t&&r(t),e?n:t}function Ole(e){let t=e.parentElement,n=null;for(;t&&!ut(t);)lt(t)&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(lt(t))return!1;t=t.previousElementSibling}return!0}(n))&&r}var Rle=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Rle||{});function _le(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),a=null!=r?r:-1;switch(e.focus){case 0:for(let e=0;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 1:-1===a&&(a=n.length);for(let e=a-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 2:for(let e=a+1;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 3:for(let e=n.length-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 4:for(let r=0;r<n.length;++r)if(t.resolveId(n[r],r,n)===e.id)return r;return r;case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}var Ple=Object.defineProperty,Mle=(e,t,n)=>(((e,t,n)=>{t in e?Ple(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Ble=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ble||{}),Lle=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Lle||{}),jle=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(jle||{}),zle=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOptions=5]="RegisterOptions",e[e.UnregisterOptions=6]="UnregisterOptions",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetOptionsElement=8]="SetOptionsElement",e[e.SortOptions=9]="SortOptions",e))(zle||{});function Wle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=Dt(t(e.options.slice()),e=>e.dataRef.current.domRef.current),a=n?r.indexOf(n):null;return-1===a&&(a=null),{options:r,activeOptionIndex:a}}let Ule={1:e=>e.dataRef.current.disabled||1===e.listboxState?e:g(g({},e),{},{activeOptionIndex:null,pendingFocus:{focus:Rle.Nothing},listboxState:1,__demoMode:!1}),0(e,t){if(e.dataRef.current.disabled||0===e.listboxState)return e;let n=e.activeOptionIndex,{isSelected:r}=e.dataRef.current,a=e.options.findIndex(e=>r(e.dataRef.current.value));return-1!==a&&(n=a),g(g({},e),{},{pendingFocus:t.focus,listboxState:0,activeOptionIndex:n,__demoMode:!1})},2(e,t){var n,r,a,o,i;if(e.dataRef.current.disabled||1===e.listboxState)return e;let s=g(g({},e),{},{searchQuery:"",activationTrigger:null!=(n=t.trigger)?n:1,__demoMode:!1});if(t.focus===Rle.Nothing)return g(g({},s),{},{activeOptionIndex:null});if(t.focus===Rle.Specific)return g(g({},s),{},{activeOptionIndex:e.options.findIndex(e=>e.id===t.id)});if(t.focus===Rle.Previous){let n=e.activeOptionIndex;if(null!==n){let o=e.options[n].dataRef.current.domRef,i=_le(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==i){let t=e.options[i].dataRef.current.domRef;if((null==(r=o.current)?void 0:r.previousElementSibling)===t.current||null===(null==(a=t.current)?void 0:a.previousElementSibling))return g(g({},s),{},{activeOptionIndex:i})}}}else if(t.focus===Rle.Next){let n=e.activeOptionIndex;if(null!==n){let r=e.options[n].dataRef.current.domRef,a=_le(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==a){let t=e.options[a].dataRef.current.domRef;if((null==(o=r.current)?void 0:o.nextElementSibling)===t.current||null===(null==(i=t.current)?void 0:i.nextElementSibling))return g(g({},s),{},{activeOptionIndex:a})}}}let u=Wle(e),l=_le(t,{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return g(g(g({},s),u),{},{activeOptionIndex:l})},3:(e,t)=>{if(e.dataRef.current.disabled||1===e.listboxState)return e;let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),a=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find(e=>{var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))}),o=a?e.options.indexOf(a):-1;return-1===o||o===e.activeOptionIndex?g(g({},e),{},{searchQuery:r}):g(g({},e),{},{searchQuery:r,activeOptionIndex:o,activationTrigger:1})},4:e=>e.dataRef.current.disabled||1===e.listboxState||""===e.searchQuery?e:g(g({},e),{},{searchQuery:""}),5:(e,t)=>{let n=e.options.concat(t.options),r=e.activeOptionIndex;if(e.pendingFocus.focus!==Rle.Nothing&&(r=_le(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled})),null===e.activeOptionIndex){let{isSelected:t}=e.dataRef.current;if(t){let e=n.findIndex(e=>null==t?void 0:t(e.dataRef.current.value));-1!==e&&(r=e)}}return g(g({},e),{},{options:n,activeOptionIndex:r,pendingFocus:{focus:Rle.Nothing},pendingShouldSort:!0})},6:(e,t)=>{let n=e.options,r=[],a=new Set(t.options);for(let[o,i]of n.entries())if(a.has(i.id)&&(r.push(o),a.delete(i.id),0===a.size))break;if(r.length>0){n=n.slice();for(let e of r.reverse())n.splice(e,1)}return g(g({},e),{},{options:n,activationTrigger:1})},7:(e,t)=>e.buttonElement===t.element?e:g(g({},e),{},{buttonElement:t.element}),8:(e,t)=>e.optionsElement===t.element?e:g(g({},e),{},{optionsElement:t.element}),9:e=>e.pendingShouldSort?g(g(g({},e),Wle(e)),{},{pendingShouldSort:!1}):e};class Vle extends _e{constructor(e){super(e),Mle(this,"actions",{onChange:e=>{let{onChange:t,compare:n,mode:r,value:a}=this.state.dataRef.current;return q(r,{0:()=>null==t?void 0:t(e),1:()=>{let r=a.slice(),o=r.findIndex(t=>n(t,e));return-1===o?r.push(e):r.splice(o,1),null==t?void 0:t(r)}})},registerOption:Le(()=>{let e=[],t=new Set;return[(n,r)=>{t.has(r)||(t.add(r),e.push({id:n,dataRef:r}))},()=>(t.clear(),this.send({type:5,options:e.splice(0)}))]}),unregisterOption:Le(()=>{let e=[];return[t=>e.push(t),()=>{this.send({type:6,options:e.splice(0)})}]}),goToOption:Le(()=>{let e=null;return[(t,n)=>{e=g(g({type:2},t),{},{trigger:n})},()=>e&&this.send(e)]}),closeListbox:()=>{this.send({type:1})},openListbox:e=>{this.send({type:0,focus:e})},selectActiveOption:()=>{if(null!==this.state.activeOptionIndex){let{dataRef:e,id:t}=this.state.options[this.state.activeOptionIndex];this.actions.onChange(e.current.value),this.send({type:2,focus:Rle.Specific,id:t})}},selectOption:e=>{let t=this.state.options.find(t=>t.id===e);t&&this.actions.onChange(t.dataRef.current.value)},search:e=>{this.send({type:3,value:e})},clearSearch:()=>{this.send({type:4})},setButtonElement:e=>{this.send({type:7,element:e})},setOptionsElement:e=>{this.send({type:8,element:e})}}),Mle(this,"selectors",{activeDescendantId(e){var t;let n=e.activeOptionIndex,r=e.options;return null===n||null==(t=r[n])?void 0:t.id},isActive(e,t){var n;let r=e.activeOptionIndex,a=e.options;return null!==r&&(null==(n=a[r])?void 0:n.id)===t},shouldScrollIntoView(e,t){return!e.__demoMode&&0===e.listboxState&&0!==e.activationTrigger&&this.isActive(e,t)}}),this.on(5,()=>{requestAnimationFrame(()=>{this.send({type:9})})});{let e=this.state.id,t=He.get(null);this.disposables.add(t.on(We.Push,n=>{!t.selectors.isTop(n,e)&&0===this.state.listboxState&&this.actions.closeListbox()})),this.on(0,()=>t.actions.push(e)),this.on(1,()=>t.actions.pop(e))}}static new(e){let{id:t,__demoMode:n=!1}=e;return new Vle({id:t,dataRef:{current:{}},listboxState:n?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,buttonElement:null,optionsElement:null,pendingShouldSort:!1,pendingFocus:{focus:Rle.Nothing},__demoMode:n})}reduce(e,t){return q(t.type,Ule,e,t)}}const Hle=(0,u.createContext)(null);function Gle(e){let t=(0,u.useContext)(Hle);if(null===t){let t=new Error("<".concat(e," /> is missing a parent <Listbox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,Kle),t}return t}function Kle(e){let{id:t,__demoMode:n=!1}=e,r=(0,u.useMemo)(()=>Vle.new({id:t,__demoMode:n}),[]);return nn(()=>r.dispose()),r}const qle=["value","defaultValue","form","name","onChange","by","invalid","disabled","horizontal","multiple","__demoMode"],Xle=["id","disabled","autoFocus"],Yle=["id","anchor","portal","modal","transition"],Qle=["id","disabled","value"],Zle=["options","placeholder"];let Jle=(0,u.createContext)(null);function $le(e){let t=(0,u.useContext)(Jle);if(null===t){let t=new Error("<".concat(e," /> is missing a parent <Listbox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,$le),t}return t}Jle.displayName="ListboxDataContext";let ece=u.Fragment;let tce=(0,u.createContext)(!1),nce=Z.RenderStrategy|Z.Static;let rce=u.Fragment;let ace=ae(function(e,t){let n=(0,u.useId)(),r=qt(),{value:a,defaultValue:o,form:i,name:s,onChange:l,by:c,invalid:d=!1,disabled:h=r||!1,horizontal:p=!1,multiple:f=!1,__demoMode:g=!1}=e,m=w(e,qle);const y=p?"horizontal":"vertical";let v=P(t),b=Jie(o),[x=(f?[]:void 0),D]=Zie(a,l,b),k=Kle({id:n,__demoMode:g}),C=(0,u.useRef)({static:!1,hold:!1}),E=(0,u.useRef)(new Map),S=Qie(c),A=(0,u.useCallback)(e=>q(I.mode,{[Lle.Multi]:()=>x.some(t=>S(t,e)),[Lle.Single]:()=>S(x,e)}),[x]),I=(0,u.useMemo)(()=>({value:x,disabled:h,invalid:d,mode:f?Lle.Multi:Lle.Single,orientation:y,onChange:D,compare:S,isSelected:A,optionsPropsRef:C,listRef:E}),[x,h,d,f,y,D,S,A,C,E]);F(()=>{k.state.dataRef.current=I},[I]);let N=Ke(k,e=>e.listboxState),T=He.get(null),O=Ke(T,(0,u.useCallback)(e=>T.selectors.isTop(e,n),[T,n])),[R,_]=Ke(k,e=>[e.buttonElement,e.optionsElement]);Ft(O,[R,_],(e,t)=>{k.send({type:zle.CloseListbox}),vt(t,yt.Loose)||(e.preventDefault(),null==R||R.focus())});let M=(0,u.useMemo)(()=>({open:N===Ble.Open,disabled:h,invalid:d,value:x}),[N,h,d,x]),[B,L]=Qr({inherit:!0}),j={ref:v},z=(0,u.useCallback)(()=>{if(void 0!==b)return null==D?void 0:D(b)},[D,b]),W=$();return u.createElement(L,{value:B,props:{htmlFor:null==R?void 0:R.id},slot:{open:N===Ble.Open,disabled:h}},u.createElement(vle,null,u.createElement(Hle.Provider,{value:k},u.createElement(Jle.Provider,{value:I},u.createElement(H,{value:q(N,{[Ble.Open]:U.Open,[Ble.Closed]:U.Closed})},null!=s&&null!=x&&u.createElement(Ile,{disabled:h,data:{[s]:x},form:i,onReset:z}),W({ourProps:j,theirProps:m,slot:M,defaultTag:ece,name:"Listbox"}))))))}),oce=ae(function(e,t){let n=(0,u.useId)(),r=Hr(),a=$le("Listbox.Button"),o=Gle("Listbox.Button"),{id:i=r||"headlessui-listbox-button-".concat(n),disabled:s=a.disabled||!1,autoFocus:l=!1}=e,c=w(e,Xle),d=P(t,(0,u.useContext)(mle).setReference,o.actions.setButtonElement),h=(0,u.useContext)(mle).getReferenceProps,[p,f,g]=Ke(o,e=>[e.listboxState,e.buttonElement,e.optionsElement]);!function(e,t){let{trigger:n,action:r,close:a,select:o}=t,i=(0,u.useRef)(null);St(e&&null!==n,"pointerdown",e=>{nt(null==e?void 0:e.target)&&null!=n&&n.contains(e.target)&&(i.current=new Date)}),St(e&&null!==n,"pointerup",e=>{if(null===i.current||!ot(e.target))return;let t=r(e),n=(new Date).getTime()-i.current.getTime();switch(i.current=null,t.kind){case 0:return;case 1:n>200&&(o(t.target),a());break;case 2:a()}},{capture:!0})}(p===Ble.Open,{trigger:f,action:(0,u.useCallback)(e=>{if(null!=f&&f.contains(e.target))return tse.Ignore;let t=e.target.closest('[role="option"]:not([data-disabled])');return at(t)?tse.Select(t):null!=g&&g.contains(e.target)?tse.Ignore:tse.Close},[f,g]),close:o.actions.closeListbox,select:o.actions.selectActiveOption});let m=N(e=>{switch(e.key){case De.Enter:Ele(e.currentTarget);break;case De.Space:case De.ArrowDown:e.preventDefault(),o.actions.openListbox({focus:a.value?Rle.Nothing:Rle.First});break;case De.ArrowUp:e.preventDefault(),o.actions.openListbox({focus:a.value?Rle.Nothing:Rle.Last})}}),y=N(e=>{if(e.key===De.Space)e.preventDefault()}),v=N(e=>{var t;if(0===e.button){if(Ole(e.currentTarget))return e.preventDefault();o.state.listboxState===Ble.Open?((0,gn.flushSync)(()=>o.actions.closeListbox()),null==(t=o.state.buttonElement)||t.focus({preventScroll:!0})):(e.preventDefault(),o.actions.openListbox({focus:Rle.Nothing}))}}),b=N(e=>e.preventDefault()),x=Yr([i]),D=Jt(),{isFocusVisible:k,focusProps:C}=Mr({autoFocus:l}),{isHovered:E,hoverProps:S}=Wr({isDisabled:s}),{pressed:A,pressProps:F}=Ur({disabled:s}),I=(0,u.useMemo)(()=>({open:p===Ble.Open,active:A||p===Ble.Open,disabled:s,invalid:a.invalid,value:a.value,hover:E,focus:k,autofocus:l}),[p,a.value,s,E,k,A,a.invalid,l]),T=Ke(o,e=>e.listboxState===Ble.Open),O=re(h(),{ref:d,id:i,type:nse(e,f),"aria-haspopup":"listbox","aria-controls":null==g?void 0:g.id,"aria-expanded":T,"aria-labelledby":x,"aria-describedby":D,disabled:s||void 0,autoFocus:l,onKeyDown:m,onKeyUp:y,onKeyPress:b,onPointerDown:v},C,S,F);return $()({ourProps:O,theirProps:c,slot:I,defaultTag:"button",name:"Listbox.Button"})}),ice=Jr,sce=ae(function(e,t){let n=(0,u.useId)(),{id:r="headlessui-listbox-options-".concat(n),anchor:a,portal:o=!1,modal:i=!0,transition:s=!1}=e,l=w(e,Yle),c=function(e){return(0,u.useMemo)(()=>e?"string"==typeof e?{to:e}:e:null,[e])}(a),[d,h]=(0,u.useState)(null);c&&(o=!0);let p=$le("Listbox.Options"),f=Gle("Listbox.Options"),[m,y,v,b]=Ke(f,e=>[e.listboxState,e.buttonElement,e.optionsElement,e.__demoMode]),x=It(y),D=It(v),k=V(),[E,S]=z(s,d,null!==k?(k&U.Open)===U.Open:m===Ble.Open);ct(E,y,f.actions.closeListbox),Wt(!b&&(i&&m===Ble.Open),D),tt(!b&&(i&&m===Ble.Open),{allowed:(0,u.useCallback)(()=>[y,v],[y,v])});let A=!function(e,t){let n=(0,u.useRef)({left:0,top:0});if(F(()=>{if(!t)return;let e=t.getBoundingClientRect();e&&(n.current=e)},[e,t]),null==t||!e||t===document.activeElement)return!1;let r=t.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}(m!==Ble.Open,y)&&E,I=Tle(E&&m===Ble.Closed,p.value),T=N(e=>p.compare(I,e)),O=Ke(f,e=>{var t;if(null==c||null==(t=null==c?void 0:c.to)||!t.includes("selection"))return null;let n=e.options.findIndex(e=>T(e.dataRef.current.value));return-1===n&&(n=0),n}),R=(()=>{if(null==c)return;if(null===O)return g(g({},c),{},{inner:void 0});let e=Array.from(p.listRef.current.values());return g(g({},c),{},{inner:{listRef:{current:e},index:O}})})(),[_,M]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===e&&(e=null),"string"==typeof e&&(e={to:e});let t=(0,u.useContext)(yle),n=(0,u.useMemo)(()=>e,[JSON.stringify(e,(e,t)=>{var n;return null!=(n=null==t?void 0:t.outerHTML)?n:t})]);F(()=>{null==t||t(null!=n?n:null)},[t,n]);let r=(0,u.useContext)(mle);return(0,u.useMemo)(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}(R),B=function(){let{getFloatingProps:e,slot:t}=(0,u.useContext)(mle);return(0,u.useCallback)(function(){return Object.assign({},e(...arguments),{"data-anchor":t.anchor})},[e,t])}(),L=P(t,c?_:null,f.actions.setOptionsElement,h),W=C();(0,u.useEffect)(()=>{var e;let t=v;t&&m===Ble.Open&&t!==(null==(e=Qe(t))?void 0:e.activeElement)&&(null==t||t.focus({preventScroll:!0}))},[m,v]);let H=N(e=>{var t,n;switch(W.dispose(),e.key){case De.Space:if(""!==f.state.searchQuery)return e.preventDefault(),e.stopPropagation(),f.actions.search(e.key);case De.Enter:if(e.preventDefault(),e.stopPropagation(),null!==f.state.activeOptionIndex){let{dataRef:e}=f.state.options[f.state.activeOptionIndex];f.actions.onChange(e.current.value)}p.mode===Lle.Single&&((0,gn.flushSync)(()=>f.actions.closeListbox()),null==(t=f.state.buttonElement)||t.focus({preventScroll:!0}));break;case q(p.orientation,{vertical:De.ArrowDown,horizontal:De.ArrowRight}):return e.preventDefault(),e.stopPropagation(),f.actions.goToOption({focus:Rle.Next});case q(p.orientation,{vertical:De.ArrowUp,horizontal:De.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),f.actions.goToOption({focus:Rle.Previous});case De.Home:case De.PageUp:return e.preventDefault(),e.stopPropagation(),f.actions.goToOption({focus:Rle.First});case De.End:case De.PageDown:return e.preventDefault(),e.stopPropagation(),f.actions.goToOption({focus:Rle.Last});case De.Escape:return e.preventDefault(),e.stopPropagation(),(0,gn.flushSync)(()=>f.actions.closeListbox()),void(null==(n=f.state.buttonElement)||n.focus({preventScroll:!0}));case De.Tab:e.preventDefault(),e.stopPropagation(),(0,gn.flushSync)(()=>f.actions.closeListbox()),function(e,t){kt(mt(),t,{relativeTo:e})}(f.state.buttonElement,e.shiftKey?pt.Previous:pt.Next);break;default:1===e.key.length&&(f.actions.search(e.key),W.setTimeout(()=>f.actions.clearSearch(),350))}}),G=Ke(f,e=>{var t;return null==(t=e.buttonElement)?void 0:t.id}),K=(0,u.useMemo)(()=>({open:m===Ble.Open}),[m]),X=re(c?B():{},g({id:r,ref:L,"aria-activedescendant":Ke(f,f.selectors.activeDescendantId),"aria-multiselectable":p.mode===Lle.Multi||void 0,"aria-labelledby":G,"aria-orientation":p.orientation,onKeyDown:H,role:"listbox",tabIndex:m===Ble.Open?0:void 0,style:g(g(g({},l.style),M),{},{"--button-width":$ie(y,!0).width})},j(S))),Y=$(),Q=(0,u.useMemo)(()=>p.mode===Lle.Multi?p:g(g({},p),{},{isSelected:T}),[p,T]);return u.createElement(Fn,{enabled:!!o&&(e.static||E),ownerDocument:x},u.createElement(Jle.Provider,{value:Q},Y({ourProps:X,theirProps:l,slot:K,defaultTag:"div",features:nce,visible:A,name:"Listbox.Options"})))}),uce=ae(function(e,t){let n=(0,u.useId)(),{id:r="headlessui-listbox-option-".concat(n),disabled:a=!1,value:o}=e,i=w(e,Qle),s=!0===(0,u.useContext)(tce),l=$le("Listbox.Option"),c=Gle("Listbox.Option"),d=Ke(c,e=>c.selectors.isActive(e,r)),h=l.isSelected(o),p=(0,u.useRef)(null),f=ose(p),g=I({disabled:a,value:o,domRef:p,get textValue(){return f()}}),m=P(t,p,e=>{e?l.listRef.current.set(r,e):l.listRef.current.delete(r)}),y=Ke(c,e=>c.selectors.shouldScrollIntoView(e,r));F(()=>{if(y)return k().requestAnimationFrame(()=>{var e,t;null==(t=null==(e=p.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})},[y,p]),F(()=>{if(!s)return c.actions.registerOption(r,g),()=>c.actions.unregisterOption(r)},[g,r,s]);let v=N(e=>{var t;if(a)return e.preventDefault();c.actions.onChange(o),l.mode===Lle.Single&&((0,gn.flushSync)(()=>c.actions.closeListbox()),null==(t=c.state.buttonElement)||t.focus({preventScroll:!0}))}),b=N(()=>{if(a)return c.actions.goToOption({focus:Rle.Nothing});c.actions.goToOption({focus:Rle.Specific,id:r})}),x=function(){let e=(0,u.useRef)([-1,-1]);return{wasMoved(t){let n=ise(t);return(e.current[0]!==n[0]||e.current[1]!==n[1])&&(e.current=n,!0)},update(t){e.current=ise(t)}}}(),D=N(e=>{x.update(e),!a&&(d||c.actions.goToOption({focus:Rle.Specific,id:r},jle.Pointer))}),C=N(e=>{x.wasMoved(e)&&(a||d||c.actions.goToOption({focus:Rle.Specific,id:r},jle.Pointer))}),E=N(e=>{x.wasMoved(e)&&(a||d&&c.actions.goToOption({focus:Rle.Nothing}))}),S=(0,u.useMemo)(()=>({active:d,focus:d,selected:h,disabled:a,selectedOption:h&&s}),[d,h,a,s]),A=s?{}:{id:r,ref:m,role:"option",tabIndex:!0===a?void 0:-1,"aria-disabled":!0===a||void 0,"aria-selected":h,disabled:void 0,onClick:v,onFocus:b,onPointerEnter:D,onMouseEnter:D,onPointerMove:C,onMouseMove:C,onPointerLeave:E,onMouseLeave:E},T=$();return!h&&s?null:T({ourProps:A,theirProps:i,slot:S,defaultTag:"div",name:"Listbox.Option"})}),lce=ae(function(e,t){let{options:n,placeholder:r}=e,a=w(e,Zle),o={ref:P(t)},i=$le("ListboxSelectedOption"),s=(0,u.useMemo)(()=>({}),[]),l=void 0===i.value||null===i.value||i.mode===Lle.Multi&&Array.isArray(i.value)&&0===i.value.length,c=$();return u.createElement(tce.Provider,{value:!0},c({ourProps:o,theirProps:g(g({},a),{},{children:u.createElement(u.Fragment,null,r&&l?r:n)}),slot:s,defaultTag:rce,name:"ListboxSelectedOption"}))}),cce=Object.assign(ace,{Button:oce,Label:ice,Options:sce,Option:uce,SelectedOption:lce});const dce=["title","titleId"];function hce(e,t){let{title:n,titleId:r}=e,a=w(e,dce);return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?u.createElement("title",{id:r},n):null,u.createElement("path",{fillRule:"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z",clipRule:"evenodd"}))}const pce=u.forwardRef(hce),fce=["title","titleId"];function gce(e,t){let{title:n,titleId:r}=e,a=w(e,fce);return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?u.createElement("title",{id:r},n):null,u.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const mce=u.forwardRef(gce),yce=["title","titleId"];function vce(e,t){let{title:n,titleId:r}=e,a=w(e,yce);return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?u.createElement("title",{id:r},n):null,u.createElement("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z",clipRule:"evenodd"}))}const bce=u.forwardRef(vce),xce=e=>{let{logs:t,drains:n,onEdit:r,onDelete:a,onBulkDelete:o}=e;const[i,s]=(0,u.useState)([]),[l,c]=(0,u.useState)(null),d=(0,u.useMemo)(()=>t.filter(e=>!l||e.drainId===l.id).sort((e,t)=>new Date(t.date)-new Date(e.date)),[t,l]),h=d.length>0&&i.length===d.length,p=[{id:null,name:"All Drains"},...n],f=l?l.name:"All Drains";return 0===t.length?(0,v.jsx)("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No logs recorded yet."}):(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between mb-4 px-1 py-2",children:[(0,v.jsx)("div",{className:"w-full md:w-72",children:(0,v.jsx)(cce,{value:l,onChange:c,children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsxs)(cce.Button,{className:"relative w-full cursor-default rounded-md bg-white dark:bg-gray-800 py-2 pl-3 pr-10 text-left shadow-sm focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm",children:[(0,v.jsx)("span",{className:"block truncate",children:f}),(0,v.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,v.jsx)(pce,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,v.jsx)(we,{as:u.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,v.jsx)(cce.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-gray-700 py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm",children:p.map(e=>(0,v.jsx)(cce.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100")},value:null===e.id?null:e,children:t=>{let{selected:n}=t;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"block truncate ".concat(n?"font-medium":"font-normal"),children:e.name}),n?(0,v.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-blue-600",children:(0,v.jsx)(mce,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},e?e.id:"all"))})})]})})}),(0,v.jsx)("div",{className:"flex items-center mt-3 md:mt-0",children:i.length>0&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-300 mr-4",children:[i.length," selected"]}),(0,v.jsxs)("button",{onClick:()=>{o(i),s([])},className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,v.jsx)(bce,{className:"h-5 w-5 mr-2"}),"Delete Selected"]})]})})]}),(0,v.jsxs)("div",{className:"overflow-x-auto border rounded-lg dark:border-gray-700",children:[(0,v.jsxs)("table",{className:"min-w-full",children:[(0,v.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{scope:"col",className:"p-4",children:(0,v.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500",checked:h,onChange:e=>{if(e.target.checked){const e=d.map(e=>e.id);s(e)}else s([])}})}),(0,v.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Drain"}),(0,v.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date & Time"}),(0,v.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Output (cc)"}),(0,v.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Notes"}),(0,v.jsx)("th",{scope:"col",className:"relative px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,v.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(e=>{const t=n.find(t=>t.id===e.drainId),o=i.includes(e.id);return(0,v.jsxs)("tr",{className:"".concat(o?"bg-blue-50 dark:bg-blue-900/50":"bg-white dark:bg-gray-800"),children:[(0,v.jsx)("td",{className:"p-4",children:(0,v.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500",checked:o,onChange:()=>{return t=e.id,void(i.includes(t)?s(i.filter(e=>e!==t)):s([...i,t]));var t}})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t?t.name:"Unknown Drain"}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.date).toLocaleString()}),(0,v.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[parseFloat(e.amount).toFixed(1)," cc"]}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-normal",children:e.notes||""}),(0,v.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,v.jsx)("button",{onClick:()=>r(e),className:"edit-log-btn text-blue-500 hover:text-blue-700 font-semibold mr-4",children:"Edit"}),(0,v.jsx)("button",{onClick:()=>a(e.id),className:"delete-log-btn text-red-500 hover:text-red-700 font-semibold",children:"Delete"})]})]},e.id)})})]}),0===d.length&&(0,v.jsx)("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No logs match the current filter."})]})]})},wce=e=>{let{appData:t,setLogToEdit:n,setIsEditModalOpen:r,handleDeleteLog:a,handleBulkDelete:o}=e;return(0,v.jsx)("div",{className:"page space-y-8",children:(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md no-print",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b dark:border-gray-700 pb-2",children:"Detailed Log History"}),(0,v.jsx)(xce,{logs:t.logs,drains:t.drains,onEdit:e=>{n(e),r(!0)},onDelete:a,onBulkDelete:o})]})})},Dce=e=>{let{drains:t,onAddDrain:n,onDeleteDrain:r}=e;return(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md no-print",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b dark:border-gray-700 pb-2",children:"Manage Drains"}),(0,v.jsxs)("form",{onSubmit:n,className:"flex flex-col sm:flex-row gap-4",children:[(0,v.jsx)(na,{type:"text",name:"drain-name-input",placeholder:"Enter new drain name",className:"flex-grow p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700",required:!0}),(0,v.jsx)(ia,{type:"submit",className:"bg-blue-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-blue-600 transition duration-300 shadow",children:"Add Drain"})]}),(0,v.jsxs)("div",{className:"mt-6",children:[(0,v.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Your Drains:"}),(0,v.jsx)("ul",{className:"space-y-2",children:[...t].sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,v.jsxs)("li",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,v.jsx)("span",{className:"font-medium",children:e.name}),(0,v.jsx)(ia,{onClick:()=>r(e.id,e.name),className:"text-red-500 hover:text-red-700 font-semibold",children:"Delete"})]},e.id))})]})]})},kce=e=>{let{rules:t,onAddRule:n,onDeleteRule:r,onRuleReorder:a,draggedItem:o,dragOverItem:i}=e;return(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md no-print",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b dark:border-gray-700 pb-2",children:"Manage Thresholds"}),(0,v.jsxs)("form",{onSubmit:n,className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[(0,v.jsxs)("div",{className:"sm:col-span-1",children:[(0,v.jsx)("label",{htmlFor:"rule-amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount (cc)"}),(0,v.jsx)(na,{type:"number",name:"rule-amount",min:"0",className:"mt-1 block w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]}),(0,v.jsxs)("div",{className:"sm:col-span-1",children:[(0,v.jsx)("label",{htmlFor:"rule-hours",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Timeframe (hours)"}),(0,v.jsx)(na,{type:"number",name:"rule-hours",min:"1",className:"mt-1 block w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]}),(0,v.jsxs)("div",{className:"sm:col-span-1",children:[(0,v.jsx)("label",{htmlFor:"rule-interval",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Interval (hours)"}),(0,v.jsx)(na,{type:"number",name:"rule-interval",min:"1",className:"mt-1 block w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]}),(0,v.jsx)(ia,{type:"submit",className:"sm:col-span-1 bg-green-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-green-600",children:"Add Rule"})]}),(0,v.jsxs)("div",{className:"mt-6",children:[(0,v.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Current Rules:"}),(0,v.jsx)("ul",{className:"space-y-2",children:t.map((e,t)=>(0,v.jsxs)("li",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-grab",draggable:!0,onDragStart:()=>o.current=t,onDragEnter:()=>i.current=t,onDragEnd:a,onDragOver:e=>e.preventDefault(),children:[(0,v.jsxs)("span",{children:["Avg < ",e.amount,"cc / ",e.interval,"h (over ",e.hours,"h)"]}),(0,v.jsx)(ia,{onClick:()=>r(e.id),className:"text-red-500 hover:text-red-700 font-semibold",children:"Delete"})]},e.id))})]})]})},Cce=e=>{let{indicatorMode:t,onModeChange:n}=e;return(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md no-print",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b dark:border-gray-700 pb-2",children:"Indicator Logic"}),(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Base indicator on:"}),(0,v.jsxs)("div",{className:"flex gap-2",children:[(0,v.jsx)(ia,{onClick:()=>n("total"),className:"py-2 px-4 rounded-lg ".concat("total"===t?"bg-blue-500 text-white border-2 border-blue-800":"bg-gray-200 dark:bg-gray-600 border border-transparent"),children:"Total"}),(0,v.jsx)(ia,{onClick:()=>n("average"),className:"py-2 px-4 rounded-lg ".concat("average"===t?"bg-blue-500 text-white border-2 border-blue-800":"bg-gray-200 dark:bg-gray-600 border border-transparent"),children:"Average"})]})]})]})},Ece=e=>{let{onExport:t,onImport:n}=e;return(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md no-print",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b dark:border-gray-700 pb-2",children:"Data Management"}),(0,v.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,v.jsx)(ia,{onClick:t,className:"flex-1 bg-purple-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-purple-600 transition duration-300 shadow",children:"Export Data (JSON)"}),(0,v.jsxs)("label",{htmlFor:"import-data-input",className:"flex-1 bg-yellow-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-yellow-600 transition duration-300 shadow text-center cursor-pointer",children:["Import Data (JSON)",(0,v.jsx)(na,{type:"file",id:"import-data-input",onChange:n,className:"hidden",accept:".json"})]})]})]})},Sce=e=>{let{onOpenChangelog:t}=e;return(0,v.jsxs)("section",{className:"p-6 no-print rounded-lg shadow-md bg-white dark:bg-gray-800",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center pb-2 mb-4 border-b dark:border-gray-700",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold dark:text-white",children:"Privacy & Licensing"}),(0,v.jsxs)("button",{onClick:t,className:"text-sm font-medium text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors","aria-label":"Open Changelog",children:["v",Pu]})]}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:"Your Data Stays on Your Device"}),(0,v.jsx)("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"This website is designed to respect your privacy. All data generated during your session is stored locally on your device's browser. No information is saved to our servers or any other external location. This means your data is for your use only, right on the computer or mobile device you are using to access this site."})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:"Data Removal"}),(0,v.jsx)("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"You have full control over your data. To completely wipe all information stored by this website, simply clear your browser's cache for this site. Once the cache is cleared, all associated data will be permanently removed from your device."})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:"Open-Source Software"}),(0,v.jsxs)("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:["This application is open-source software licensed under the MIT License. You are free to view the source code, make modifications, and distribute it. You can find the project repository",(0,v.jsx)("a",{href:"https://github.com/trantechsolutions/drainage-app",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline ml-1",children:"here"}),"."]})]})]})]})},Ace=["id","disabled","checked","defaultChecked","onChange","name","value","form","autoFocus"];let Fce=(0,u.createContext)(null);Fce.displayName="GroupContext";let Ice=u.Fragment;let Nce=ae(function(e,t){var n;let r=(0,u.useId)(),a=Hr(),o=qt(),{id:i=a||"headlessui-switch-".concat(r),disabled:s=o||!1,checked:l,defaultChecked:c,onChange:d,name:h,value:p,form:f,autoFocus:g=!1}=e,m=w(e,Ace),y=(0,u.useContext)(Fce),[v,b]=(0,u.useState)(null),x=P((0,u.useRef)(null),t,null===y?null:y.setSwitch,b),D=Jie(c),[k,E]=Zie(l,d,null!=D&&D),S=C(),[A,F]=(0,u.useState)(!1),I=N(()=>{F(!0),null==E||E(!k),S.nextFrame(()=>{F(!1)})}),T=N(e=>{if(Ole(e.currentTarget))return e.preventDefault();e.preventDefault(),I()}),O=N(e=>{e.key===De.Space?(e.preventDefault(),I()):e.key===De.Enter&&Ele(e.currentTarget)}),R=N(e=>e.preventDefault()),_=Yr(),M=Jt(),{isFocusVisible:B,focusProps:L}=Mr({autoFocus:g}),{isHovered:j,hoverProps:z}=Wr({isDisabled:s}),{pressed:W,pressProps:U}=Ur({disabled:s}),V=(0,u.useMemo)(()=>({checked:k,disabled:s,hover:j,focus:B,active:W,autofocus:g,changing:A}),[k,j,B,W,s,A,g]),H=re({id:i,ref:x,role:"switch",type:nse(e,v),tabIndex:-1===e.tabIndex?0:null!=(n=e.tabIndex)?n:0,"aria-checked":k,"aria-labelledby":_,"aria-describedby":M,disabled:s||void 0,autoFocus:g,onClick:T,onKeyUp:O,onKeyPress:R},L,z,U),G=(0,u.useCallback)(()=>{if(void 0!==D)return null==E?void 0:E(D)},[E,D]),K=$();return u.createElement(u.Fragment,null,null!=h&&u.createElement(Ile,{disabled:s,data:{[h]:p||"on"},overrides:{type:"checkbox",checked:k},form:f,onReset:G}),K({ourProps:H,theirProps:m,slot:V,defaultTag:"button",name:"Switch"}))}),Tce=function(e){var t;let[n,r]=(0,u.useState)(null),[a,o]=Qr(),[i,s]=$t(),l=(0,u.useMemo)(()=>({switch:n,setSwitch:r}),[n,r]),c=e,d=$();return u.createElement(s,{name:"Switch.Description",value:i},u.createElement(o,{name:"Switch.Label",value:a,props:{htmlFor:null==(t=l.switch)?void 0:t.id,onClick(e){n&&(st(e.currentTarget)&&e.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},u.createElement(Fce.Provider,{value:l},d({ourProps:{},theirProps:c,slot:{},defaultTag:Ice,name:"Switch.Group"}))))},Oce=Jr,Rce=tn,_ce=Object.assign(Nce,{Group:Tce,Label:Oce,Description:Rce});const Pce=e=>{let{useAIPredictions:t,onToggle:n}=e;return(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md no-print",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b dark:border-gray-700 pb-2",children:"AI Settings"}),(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-medium",children:"Enable AI Predictions"}),(0,v.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:"Allow the app to train a model on your local data to forecast future outputs. This can be resource-intensive."})]}),(0,v.jsxs)(_ce,{checked:t,onChange:n,className:"".concat(t?"bg-blue-600":"bg-gray-200 dark:bg-gray-600","\n                      relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2  focus-visible:ring-white/75"),children:[(0,v.jsx)("span",{className:"sr-only",children:"Enable AI Predictions"}),(0,v.jsx)("span",{"aria-hidden":"true",className:"".concat(t?"translate-x-5":"translate-x-0","\n                        pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out")})]})]})]})},Mce=e=>{let{drains:t,rules:n,onAddRule:r,onDeleteRule:a}=e;const[o,i]=(0,u.useState)("8"),[s,l]=(0,u.useState)("all"),[c,d]=(0,u.useState)(Notification.permission);(0,u.useEffect)(()=>{const e=setInterval(()=>d(Notification.permission),1e3);return()=>clearInterval(e)},[]);return(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md no-print",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b dark:border-gray-700 pb-2",children:"Manage Reminders"}),(0,v.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50 mb-6",children:[(0,v.jsx)("h3",{className:"font-semibold",children:"Browser Notifications"}),(0,v.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Enable system notifications to get reminders even when the app is in the background."}),"granted"===c&&(0,v.jsx)("p",{className:"text-sm font-bold text-green-500",children:"Notifications are enabled."}),"denied"===c&&(0,v.jsx)("p",{className:"text-sm font-bold text-red-500",children:"Notifications are disabled. You must change this in your browser settings."}),"default"===c&&(0,v.jsx)(ia,{onClick:()=>{Notification.requestPermission().then(d)},className:"bg-green-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-600",children:"Enable Notifications"})]}),(0,v.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Reminder Rules"}),(0,v.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=parseInt(o,10);!isNaN(t)&&t>0&&r({hours:t,drainId:s})},className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end mb-6",children:[(0,v.jsxs)("div",{className:"sm:col-span-1",children:[(0,v.jsx)("label",{className:"block text-sm font-medium",children:"Drain"}),(0,v.jsxs)("select",{value:s,onChange:e=>l(e.target.value),className:"mt-1 block w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 dark:text-white focus:ring-blue-500 focus:border-blue-500",children:[(0,v.jsx)("option",{value:"all",children:"Any Drain"}),t.map(e=>(0,v.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,v.jsxs)("div",{className:"sm:col-span-1",children:[(0,v.jsx)("label",{className:"block text-sm font-medium",children:"Notify After (Hours)"}),(0,v.jsx)(na,{type:"number",value:o,onChange:e=>i(e.target.value),min:"1",className:"mt-1 block w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]}),(0,v.jsx)(ia,{type:"submit",className:"sm:col-span-1 bg-blue-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-blue-600",children:"Add Rule"})]}),(0,v.jsx)("div",{className:"space-y-2",children:n.map(e=>{var n;const r="all"===e.drainId?"Any Drain":(null===(n=t.find(t=>t.id===e.drainId))||void 0===n?void 0:n.name)||"Unknown Drain";return(0,v.jsxs)("li",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,v.jsxs)("span",{children:["Remind if no new log for ",(0,v.jsx)("span",{className:"font-semibold",children:r})," in ",(0,v.jsxs)("span",{className:"font-semibold",children:[e.hours," hours"]})]}),(0,v.jsx)(ia,{onClick:()=>a(e.id),className:"text-red-500 hover:text-red-700 font-semibold",children:"Delete"})]},e.id)})})]})},Bce=e=>{let{appData:t,handleAddNotificationRule:n,handleDeleteNotificationRule:r,handleAIPredictionToggle:a,handleAddDrain:o,handleDeleteDrain:i,handleAddRule:s,handleDeleteRule:u,handleRuleReorder:l,draggedItem:c,dragOverItem:d,handleIndicatorModeChange:h,handleExport:p,handleImport:f,onOpenChangelog:g}=e;return(0,v.jsxs)("div",{className:"page space-y-8",children:[(0,v.jsx)(Dce,{drains:t.drains,onAddDrain:o,onDeleteDrain:i}),(0,v.jsx)(kce,{rules:t.settings.rules,onAddRule:s,onDeleteRule:u,onRuleReorder:l,draggedItem:c,dragOverItem:d}),(0,v.jsx)(Cce,{indicatorMode:t.settings.indicatorMode,onModeChange:h}),(0,v.jsx)(Mce,{drains:t.drains,rules:t.settings.notificationRules,onAddRule:n,onDeleteRule:r}),(0,v.jsx)(Pce,{useAIPredictions:t.settings.useAIPredictions,onToggle:a}),(0,v.jsx)(Ece,{onExport:p,onImport:f}),(0,v.jsx)(Sce,{onOpenChangelog:g})]})},Lce=["disabled"];let jce=ae(function(e,t){let n="headlessui-control-".concat((0,u.useId)()),[r,a]=Qr(),[o,i]=$t(),s=qt(),{disabled:l=s||!1}=e,c=w(e,Lce),d=(0,u.useMemo)(()=>({disabled:l}),[l]),h={ref:t,disabled:l||void 0,"aria-disabled":l||void 0},p=$();return u.createElement(Xt,{value:l},u.createElement(a,{value:r},u.createElement(i,{value:o},u.createElement(Gr,{id:n},p({ourProps:h,theirProps:g(g({},c),{},{children:u.createElement(Ale,null,"function"==typeof c.children?c.children(d):c.children)}),slot:d,defaultTag:"div",name:"Field"})))))});const zce=["id","value","form","name","onChange","by","disabled","defaultValue","tabIndex"],Wce=["id","value","disabled","autoFocus"],Uce=["id","value","disabled","autoFocus"];var Vce=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(Vce||{});let Hce={0(e,t){let n=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return g(g({},e),{},{options:Dt(n,e=>e.element.current)})},1(e,t){let n=e.options.slice(),r=e.options.findIndex(e=>e.id===t.id);return-1===r?e:(n.splice(r,1),g(g({},e),{},{options:n}))}},Gce=(0,u.createContext)(null);function Kce(e){let t=(0,u.useContext)(Gce);if(null===t){let t=new Error("<".concat(e," /> is missing a parent <RadioGroup /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,Kce),t}return t}Gce.displayName="RadioGroupDataContext";let qce=(0,u.createContext)(null);function Xce(e){let t=(0,u.useContext)(qce);if(null===t){let t=new Error("<".concat(e," /> is missing a parent <RadioGroup /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,Xce),t}return t}function Yce(e,t){return q(t.type,Hce,e,t)}qce.displayName="RadioGroupActionsContext";let Qce=ae(function(e,t){let n=(0,u.useId)(),r=qt(),{id:a="headlessui-radiogroup-".concat(n),value:o,form:i,name:s,onChange:l,by:c,disabled:d=r||!1,defaultValue:h,tabIndex:p=0}=e,f=w(e,zce),m=Qie(c),[y,v]=(0,u.useReducer)(Yce,{options:[]}),b=y.options,[x,D]=Qr(),[k,C]=$t(),E=(0,u.useRef)(null),S=P(E,t),A=Jie(h),[F,I]=Zie(o,l,A),T=(0,u.useMemo)(()=>b.find(e=>!e.propsRef.current.disabled),[b]),O=(0,u.useMemo)(()=>b.some(e=>m(e.propsRef.current.value,F)),[b,F]),R=N(e=>{var t;if(d||m(e,F))return!1;let n=null==(t=b.find(t=>m(t.propsRef.current.value,e)))?void 0:t.propsRef.current;return(null==n||!n.disabled)&&(null==I||I(e),!0)}),_=N(e=>{let t=E.current;if(!t)return;let n=Qe(t),r=b.filter(e=>!1===e.propsRef.current.disabled).map(e=>e.element.current);switch(e.key){case De.Enter:Ele(e.currentTarget);break;case De.ArrowLeft:case De.ArrowUp:if(e.preventDefault(),e.stopPropagation(),kt(r,pt.Previous|pt.WrapAround)===ft.Success){let e=b.find(e=>e.element.current===(null==n?void 0:n.activeElement));e&&R(e.propsRef.current.value)}break;case De.ArrowRight:case De.ArrowDown:if(e.preventDefault(),e.stopPropagation(),kt(r,pt.Next|pt.WrapAround)===ft.Success){let e=b.find(e=>e.element.current===(null==n?void 0:n.activeElement));e&&R(e.propsRef.current.value)}break;case De.Space:{e.preventDefault(),e.stopPropagation();let t=b.find(e=>e.element.current===(null==n?void 0:n.activeElement));t&&R(t.propsRef.current.value)}}}),M=N(e=>(v(g({type:0},e)),()=>v({type:1,id:e.id}))),B=(0,u.useMemo)(()=>g({value:F,firstOption:T,containsCheckedOption:O,disabled:d,compare:m,tabIndex:p},y),[F,T,O,d,m,p,y]),L=(0,u.useMemo)(()=>({registerOption:M,change:R}),[M,R]),j={ref:S,id:a,role:"radiogroup","aria-labelledby":x,"aria-describedby":k,onKeyDown:_},z=(0,u.useMemo)(()=>({value:F}),[F]),W=(0,u.useCallback)(()=>{if(void 0!==A)return R(A)},[R,A]),U=$();return u.createElement(C,{name:"RadioGroup.Description"},u.createElement(D,{name:"RadioGroup.Label"},u.createElement(qce.Provider,{value:L},u.createElement(Gce.Provider,{value:B},null!=s&&u.createElement(Ile,{disabled:d,data:{[s]:F||"on"},overrides:{type:"radio",checked:null!=F},form:i,onReset:W}),U({ourProps:j,theirProps:f,slot:z,defaultTag:"div",name:"RadioGroup"})))))}),Zce=ae(function(e,t){var n;let r=Kce("RadioGroup.Option"),a=Xce("RadioGroup.Option"),o=(0,u.useId)(),{id:i="headlessui-radiogroup-option-".concat(o),value:s,disabled:l=r.disabled||!1,autoFocus:c=!1}=e,d=w(e,Wce),h=(0,u.useRef)(null),p=P(h,t),[f,g]=Qr(),[m,y]=$t(),v=I({value:s,disabled:l});F(()=>a.registerOption({id:i,element:h,propsRef:v}),[i,a,h,v]);let b=N(e=>{var t;if(Ole(e.currentTarget))return e.preventDefault();a.change(s)&&(null==(t=h.current)||t.focus())}),x=(null==(n=r.firstOption)?void 0:n.id)===i,{isFocusVisible:D,focusProps:k}=Mr({autoFocus:c}),{isHovered:C,hoverProps:E}=Wr({isDisabled:l}),S=r.compare(r.value,s),A=re({ref:p,id:i,role:"radio","aria-checked":S?"true":"false","aria-labelledby":f,"aria-describedby":m,"aria-disabled":!!l||void 0,tabIndex:l?-1:S||!r.containsCheckedOption&&x?r.tabIndex:-1,onClick:l?void 0:b,autoFocus:c},k,E),T=(0,u.useMemo)(()=>({checked:S,disabled:l,active:D,hover:C,focus:D,autofocus:c}),[S,l,C,D,c]),O=$();return u.createElement(y,{name:"RadioGroup.Description"},u.createElement(g,{name:"RadioGroup.Label"},O({ourProps:A,theirProps:d,slot:T,defaultTag:"div",name:"RadioGroup.Option"})))}),Jce=ae(function(e,t){var n;let r=Kce("Radio"),a=Xce("Radio"),o=(0,u.useId)(),i=Hr(),s=qt(),{id:l=i||"headlessui-radio-".concat(o),value:c,disabled:d=r.disabled||s||!1,autoFocus:h=!1}=e,p=w(e,Uce),f=(0,u.useRef)(null),g=P(f,t),m=Yr(),y=Jt(),v=I({value:c,disabled:d});F(()=>a.registerOption({id:l,element:f,propsRef:v}),[l,a,f,v]);let b=N(e=>{var t;if(Ole(e.currentTarget))return e.preventDefault();a.change(c)&&(null==(t=f.current)||t.focus())}),{isFocusVisible:x,focusProps:D}=Mr({autoFocus:h}),{isHovered:k,hoverProps:C}=Wr({isDisabled:d}),E=(null==(n=r.firstOption)?void 0:n.id)===l,S=r.compare(r.value,c),A=re({ref:g,id:l,role:"radio","aria-checked":S?"true":"false","aria-labelledby":m,"aria-describedby":y,"aria-disabled":!!d||void 0,tabIndex:d?-1:S||!r.containsCheckedOption&&E?r.tabIndex:-1,autoFocus:h,onClick:d?void 0:b},D,C),T=(0,u.useMemo)(()=>({checked:S,disabled:d,hover:k,focus:x,autofocus:h}),[S,d,k,x,h]);return $()({ourProps:A,theirProps:p,slot:T,defaultTag:"span",name:"Radio"})}),$ce=Jr,ede=tn,tde=Object.assign(Qce,{Option:Zce,Radio:Jce,Label:$ce,Description:ede});const nde=e=>{let{onAddResource:t}=e;const[n,r]=(0,u.useState)(""),[a,o]=(0,u.useState)(""),[i,s]=(0,u.useState)("video");return(0,v.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&a&&(t({title:n,url:a,type:i}),r(""),o(""),s("video"))},className:"space-y-4",children:[(0,v.jsxs)(jce,{children:[(0,v.jsx)(Jr,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),(0,v.jsx)(na,{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"e.g., How to Empty Drains",className:"mt-1 block w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]}),(0,v.jsxs)(jce,{children:[(0,v.jsx)(Jr,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"URL"}),(0,v.jsx)(na,{type:"url",value:a,onChange:e=>o(e.target.value),placeholder:"https://...",className:"mt-1 block w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]}),(0,v.jsxs)(tde,{value:i,onChange:s,className:"flex gap-4 pt-2",children:[(0,v.jsx)(Jr,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Type:"}),(0,v.jsxs)(Jce,{value:"video",className:"flex items-center gap-2 cursor-pointer",children:[(0,v.jsx)("div",{className:"w-4 h-4 border rounded-full border-gray-400 dark:border-gray-500 flex items-center justify-center",children:"video"===i&&(0,v.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"})}),(0,v.jsx)(Jr,{className:"cursor-pointer",children:"Video"})]}),(0,v.jsxs)(Jce,{value:"pdf",className:"flex items-center gap-2 cursor-pointer",children:[(0,v.jsx)("div",{className:"w-4 h-4 border rounded-full border-gray-400 dark:border-gray-500 flex items-center justify-center",children:"pdf"===i&&(0,v.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"})}),(0,v.jsx)(Jr,{className:"cursor-pointer",children:"PDF"})]})]}),(0,v.jsx)("div",{className:"pt-2",children:(0,v.jsx)(ia,{type:"submit",className:"bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-600",children:"Add Resource"})})]})},rde=e=>{let{resources:t,onDeleteResource:n}=e;return 0===t.length?(0,v.jsx)("p",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No resources added yet."}):(0,v.jsx)("div",{className:"space-y-6",children:t.map(e=>{const t="video"===e.type?(e=>{let t="";try{const n=new URL(e);"youtu.be"===n.hostname?t=n.pathname.slice(1):n.hostname.includes("youtube.com")&&(t=n.searchParams.get("v"))}catch(n){return null}return t?"https://www.youtube.com/embed/".concat(t):null})(e.url):null;return(0,v.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,v.jsxs)("div",{className:"flex justify-between items-start",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:e.title}),(0,v.jsx)(ia,{onClick:()=>n(e.id),className:"text-red-500 hover:text-red-700 font-semibold",children:"Delete"})]}),(0,v.jsxs)("div",{className:"mt-4",children:["video"===e.type&&t&&(0,v.jsx)("div",{className:"aspect-w-16 aspect-h-9",children:(0,v.jsx)("iframe",{src:t,title:e.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})}),"video"===e.type&&!t&&(0,v.jsx)("p",{className:"text-red-500",children:"Invalid YouTube URL."}),"pdf"===e.type&&(0,v.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"View PDF"})]})]},e.id)})})},ade=e=>{let{resources:t,onAddResource:n,onDeleteResource:r}=e;return(0,v.jsxs)("div",{className:"page space-y-8",children:[(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md no-print",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b dark:border-gray-700 pb-2",children:"Add New Resource"}),(0,v.jsx)(nde,{onAddResource:n})]}),(0,v.jsxs)("section",{className:"bg-white dark:bg-gray-800 dark:text-white p-6 rounded-lg shadow-md no-print",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4 border-b dark:border-gray-700 pb-2",children:"Your Resources"}),(0,v.jsx)(rde,{resources:t,onDeleteResource:r})]})]})};function ode(){const{appData:e,handleAddDrain:t,handleDeleteDrain:n,handleAddLog:r,handleEditLog:a,handleDeleteLog:o,handleBulkDelete:i,handleAddRule:s,handleDeleteRule:l,handleRuleReorder:d,handleAddResource:h,handleDeleteResource:p,handleAIPredictionToggle:f,handleIndicatorModeChange:m,handleToggleTheme:w,handleExport:D,handlePrint:k,handleImport:C,currentPage:E,setCurrentPage:S,isLogModalOpen:A,setIsLogModalOpen:F,isEditModalOpen:I,setIsEditModalOpen:N,logToEdit:T,setLogToEdit:O,message:R,setMessage:_,isDark:P,draggedItem:M,dragOverItem:B,isChangelogOpen:L,setIsChangelogOpen:j}=function(){const[e,t]=(0,u.useState)({drains:[],logs:[],settings:{rules:[]}}),[n,r]=(0,u.useState)("dashboard-page"),[a,o]=(0,u.useState)(!1),[i,s]=(0,u.useState)(!1),[l,d]=(0,u.useState)(null),[h,p]=(0,u.useState)(""),[f,m]=(0,u.useState)(!1),x=(0,u.useRef)(null),w=(0,u.useRef)(null),[D,k]=(0,u.useState)(!1),C=(0,u.useRef)(new Set),E=(0,u.useCallback)(()=>{const e=localStorage.getItem("drainTrackerData");if(e){const n=JSON.parse(e);let r={rules:[],indicatorMode:"total",notificationRules:[],useAIPredictions:!1};n.settings&&(r=g(g({},r),n.settings)),n.settings&&n.settings.threshold&&!n.settings.rules&&(r.rules=[{id:y(),amount:n.settings.threshold,hours:24}]),t({drains:n.drains||[],logs:n.logs||[],resources:n.resources||[],settings:r})}else t({drains:[],logs:[],resources:[],settings:{rules:[],indicatorMode:"total",notificationRules:[],useAIPredictions:!1}})},[]),S=(0,u.useCallback)(e=>{localStorage.setItem("drainTrackerData",JSON.stringify(e))},[]);return(0,u.useEffect)(()=>{const t=setInterval(()=>{if(!e.settings.notificationRules||0===e.logs.length)return;const t=(new Date).getTime();e.settings.notificationRules.forEach(n=>{if(C.current.has(n.id))return;const r="all"===n.drainId?e.logs:e.logs.filter(e=>e.drainId===n.drainId);if(0===r.length)return;const a=r.reduce((e,t)=>new Date(t.date)>new Date(e.date)?t:e),o=new Date(a.date).getTime();if((t-o)/36e5>=n.hours){var i;const t="all"===n.drainId?"A drain":(null===(i=e.drains.find(e=>e.id===n.drainId))||void 0===i?void 0:i.name)||"a drain",r="Reminder: ".concat(t," has not been logged in over ").concat(n.hours," hours. It may be time for a drain empty.");p(r),"granted"===Notification.permission&&new Notification("Drain Tracker Reminder",{body:r}),C.current.add(n.id)}})},3e5);return()=>clearInterval(t)},[e.logs,e.settings.notificationRules,e.drains,p]),(0,u.useEffect)(()=>{E();const e=localStorage.getItem("theme"),t=e?"dark"===e:window.matchMedia("(prefers-color-scheme: dark)").matches;m(t)},[E]),(0,u.useEffect)(()=>{f?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[f]),(0,u.useEffect)(()=>{var e,t;const n="dark"===localStorage.getItem("theme")||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",n),null===(e=document.getElementById("sun-icon"))||void 0===e||e.classList.toggle("hidden",n),null===(t=document.getElementById("moon-icon"))||void 0===t||t.classList.toggle("hidden",!n)},[]),{appData:e,handleAddNotificationRule:n=>{const r=g(g({},n),{},{id:y()}),a=[...e.settings.notificationRules,r],o=g(g({},e),{},{settings:g(g({},e.settings),{},{notificationRules:a})});t(o),S(o),p("Notification rule added.")},handleDeleteNotificationRule:n=>{const r=e.settings.notificationRules.filter(e=>e.id!==n),a=g(g({},e),{},{settings:g(g({},e.settings),{},{notificationRules:r})});t(a),S(a),p("Notification rule deleted.")},handleAIPredictionToggle:n=>{const r=g(g({},e),{},{settings:g(g({},e.settings),{},{useAIPredictions:n})});t(r),S(r)},handleAddDrain:n=>{n.preventDefault();const r=n.target.elements["drain-name-input"].value.trim();if(r){const a={id:y(),name:r},o=g(g({},e),{},{drains:[...e.drains,a]});t(o),S(o),p('Drain "'.concat(r,'" added.')),n.target.reset()}},handleDeleteDrain:(n,r)=>{if(window.confirm('Delete drain "'.concat(r,'" and all its logs?'))){const r=e.drains.filter(e=>e.id!==n),a=e.logs.filter(e=>e.drainId!==n),o=g(g({},e),{},{drains:r,logs:a});t(o),S(o),p("Drain and logs deleted.")}},handleAddLog:n=>{const r=g(g({},n),{},{id:y()}),a=g(g({},e),{},{logs:[...e.logs,r]});t(a),S(a),o(!1),p("Log added successfully.")},handleEditLog:n=>{const r=e.logs.map(e=>e.id===n.id?n:e),a=g(g({},e),{},{logs:r});t(a),S(a),s(!1),d(null),p("Log updated successfully.")},handleDeleteLog:n=>{if(window.confirm("Delete this log entry?")){const r=e.logs.filter(e=>e.id!==n),a=g(g({},e),{},{logs:r});t(a),S(a),p("Log entry deleted.")}},handleBulkDelete:n=>{if(window.confirm("Are you sure you want to delete ".concat(n.length," selected logs?"))){const r=e.logs.filter(e=>!n.includes(e.id)),a=g(g({},e),{},{logs:r});t(a),S(a),p("".concat(n.length," logs deleted."))}},handleAddRule:n=>{n.preventDefault();const r=parseFloat(n.target.elements["rule-amount"].value),a=parseInt(n.target.elements["rule-hours"].value,10),o=parseInt(n.target.elements["rule-interval"].value,10);if(!isNaN(r)&&!isNaN(a)&&!isNaN(o)&&r>0&&a>0&&o>0){if(a%o!==0)return void p("Timeframe must be divisible by the interval.");const i={id:y(),amount:r,hours:a,interval:o},s=[...e.settings.rules,i],u=g(g({},e),{},{settings:g(g({},e.settings),{},{rules:s})});t(u),S(u),p("New threshold rule added."),n.target.reset()}else p("Please enter valid numbers for all fields.")},handleDeleteRule:n=>{const r=e.settings.rules.filter(e=>e.id!==n),a=g(g({},e),{},{settings:g(g({},e.settings),{},{rules:r})});t(a),S(a),p("Threshold rule deleted.")},handleRuleReorder:()=>{const n=[...e.settings.rules],r=n.splice(x.current,1)[0];n.splice(w.current,0,r),x.current=null,w.current=null;const a=g(g({},e),{},{settings:g(g({},e.settings),{},{rules:n})});t(a),S(a)},handleAddResource:n=>{const r=g(g({},n),{},{id:y()}),a=g(g({},e),{},{resources:[...e.resources,r]});t(a),S(a),p("Resource added successfully.")},handleDeleteResource:n=>{if(window.confirm("Are you sure you want to delete this resource?")){const r=e.resources.filter(e=>e.id!==n),a=g(g({},e),{},{resources:r});t(a),S(a),p("Resource deleted.")}},handleIndicatorModeChange:n=>{const r=g(g({},e),{},{settings:g(g({},e.settings),{},{indicatorMode:n})});t(r),S(r)},handleToggleTheme:()=>{const e=!f;m(e),localStorage.setItem("theme",e?"dark":"light")},handleExport:()=>{const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download="drain-tracker-data-".concat((new Date).toISOString().split("T")[0],".json"),a.click(),URL.revokeObjectURL(r)},handlePrint:()=>{const t=document.createElement("div");t.id="print-container",document.body.appendChild(t);const n=(0,c.createRoot)(t);n.render((0,v.jsx)(u.StrictMode,{children:(0,v.jsx)(b,{drains:e.drains,logs:e.logs})}));const r=document.createElement("style");r.innerHTML="\n            @media print {\n                body > *:not(#print-container) {\n                    display: none;\n                }\n                #print-container {\n                    display: block;\n                }\n            }\n        ",document.head.appendChild(r),setTimeout(()=>{const e=document.documentElement.classList.contains("dark");e&&document.documentElement.classList.remove("dark"),window.print(),e&&document.documentElement.classList.add("dark"),document.head.removeChild(r),n.unmount(),document.body.removeChild(t)},100)},handleImport:e=>{const n=e.target.files[0];if(!n)return;const r=new FileReader;r.onload=e=>{try{const n=JSON.parse(e.target.result);if(!(n&&Array.isArray(n.drains)&&Array.isArray(n.logs)))throw new Error("Invalid file format.");if(window.confirm("Are you sure you want to import this data? This will overwrite all current data.")){const e={drains:n.drains,logs:n.logs,settings:n.settings||{rules:[]}};t(e),S(e),p("Data imported successfully!")}}catch(n){p("Error importing file: ".concat(n.message))}},r.readAsText(n),e.target.value=""},currentPage:n,setCurrentPage:r,isLogModalOpen:a,setIsLogModalOpen:o,isEditModalOpen:i,setIsEditModalOpen:s,logToEdit:l,setLogToEdit:d,message:h,setMessage:p,isDark:f,setIsDark:m,draggedItem:x,dragOverItem:w,isChangelogOpen:D,setIsChangelogOpen:k,notifiedRules:C}}();return(0,v.jsxs)("div",{className:"container mx-auto p-4 md:p-6 max-w-4xl pb-24 dark:bg-gray-900 bg-gray-100 transition-colors duration-300",children:[(0,v.jsx)(x,{onToggleTheme:w,isDark:P}),(0,v.jsxs)("main",{className:"pb-24",children:["dashboard-page"===E&&(0,v.jsx)(Kie,{appData:e,isDark:P}),"summary-page"===E&&(0,v.jsx)(Xie,{appData:e,handlePrint:k}),"log-page"===E&&(0,v.jsx)(wce,{appData:e,setLogToEdit:O,setIsEditModalOpen:N,handleDeleteLog:o,handleBulkDelete:i}),"settings-page"===E&&(0,v.jsx)(Bce,{appData:e,handleAddDrain:t,handleDeleteDrain:n,handleAddRule:s,handleDeleteRule:l,handleRuleReorder:d,draggedItem:M,dragOverItem:B,handleIndicatorModeChange:m,handleExport:D,handleImport:C,handleAIPredictionToggle:f,onOpenChangelog:()=>j(!0)}),"resources-page"===E&&(0,v.jsx)(ade,{resources:e.resources,onAddResource:h,onDeleteResource:p})]}),(0,v.jsx)(sa,{isOpen:A,onClose:()=>F(!1),drains:e.drains,onAddLog:r}),(0,v.jsx)(ua,{isOpen:I,onClose:()=>N(!1),drains:e.drains,log:T,onEditLog:a}),(0,v.jsx)(la,{message:R,onClose:()=>_("")}),(0,v.jsx)(Mu,{isOpen:L,onClose:()=>j(!1)}),(0,v.jsx)("button",{onClick:()=>F(!0),className:"fixed bottom-24 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 no-print","aria-label":"Add new log",children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,v.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around no-print",children:["dashboard","summary","log","settings"].map(e=>{const t=E==="".concat(e,"-page");return(0,v.jsxs)("button",{onClick:()=>S("".concat(e,"-page")),className:"nav-btn flex-1 p-3 text-center rounded-t-lg ".concat(t?"text-blue-600 dark:text-blue-400 bg-gray-100 dark:bg-gray-700":"text-gray-500 dark:text-gray-400"),children:["dashboard"===e&&(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"summary"===e&&(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h7"})}),"log"===e&&(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"settings"===e&&(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"resources"===e&&(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,v.jsx)("span",{className:"text-xs capitalize",children:e})]},e)})})]})}const ide=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:o,getTTFB:i}=t;n(e),r(e),a(e),o(e),i(e)})};c.createRoot(document.getElementById("root")).render((0,v.jsx)(u.StrictMode,{children:(0,v.jsx)(ode,{})})),ide()})()})();
//# sourceMappingURL=main.01b560fe.js.map